root@DEVELOPER15:/home/elmo/opendnssec_test_engine# sh autotestODS.sh
FILE  : /home/elmo/Downloads/ODS_Test_folder/Run1_23032011/ODS1.2_SIT_CONF.xls
COUNT : 11
AUTHOR: Calc
- Argument: /home/elmo/Downloads/ODS_Test_folder/Run1_23032011/ODS1.2_SIT_CONF.xls
- Argument: ODSC
SHEET: ODSC
---------

2011-03-24 15:17:52.242 00014 Comment: Fill in date of test execution in the field below (format ddmmyy)


2011-03-24 15:17:52.242 00015 Comment: 230311


2011-03-24 15:17:52.242 00017 Comment: Users & ODS versions


2011-03-24 15:17:52.242 00018 Comment: Check if user opendnssec exists on unix. (part of group opendnssec)


2011-03-24 15:17:52.243 00019 Comment: Check if user kaspuser (with password abc123) exists on unix. 


2011-03-24 15:17:52.243 00020 Comment: Check if user gooduser (with password 123abc) exists on unix. 


2011-03-24 15:17:52.243 00021 Comment: Check if the correct ODS version is installed.


2011-03-24 15:17:52.243 00022 Comment: If user is not avaliable you can add them via the command (as root):
- useradd <user>
and then add the correct password via the command.
- passwd <user>


2011-03-24 15:17:52.243 00024 Comment: Copy all the files needed for this script to the directories below


2011-03-24 15:17:52.243 00025 Comment: BEWARE: For all files created in WinOS, use the fromdos application (apt-get install tofromdos) to remove symbols from the xml files (like conf and kasp) to prevent errors.


2011-03-24 15:17:52.243 00026 Comment: Standard folder for all the conf.xml files is /home/ods/ods_testautomation/ods_sit_conf/conf


2011-03-24 15:17:52.243 00027 Comment: Standard folder for all the kasp.xml files is /home/ods/ods_testautomation/ods_sit_conf/kasp


2011-03-24 15:17:52.243 00028 Comment: Standard folder for all the zonelist.xml files is /home/ods/ods_testautomation/ods_sit_conf/zonelist


2011-03-24 15:17:52.243 00029 Comment: Standard folder for all the MySQL files is /home/ods/ods_testautomation/ods_sit_conf/mysql


2011-03-24 15:17:52.243 00030 Comment: Standard folder for all the script files is /home/ods/ods_testautomation/ods_sit_conf/script


2011-03-24 15:17:52.243 00032 Comment: Logfiles


2011-03-24 15:17:52.243 00033 Comment: Make sure that the following folder exists: /home/ods/ods_testautomation/ods_sit_conf/logging


2011-03-24 15:17:52.243 00035 Comment: Specify Download folder for ODS


2011-03-24 15:17:52.243 00036 Comment: /home/ods/Downloads/opendnssec-1.2.1


2011-03-24 15:17:52.243 00038 Comment: Specific folders


2011-03-24 15:17:52.243 00039 Comment: Make sure that the next folder exists: "var/opendnssec/temporary"


2011-03-24 15:17:52.243 00041 Comment: MySQL settings


2011-03-24 15:17:52.243 00042 Comment: Standard MySQL database name = KASP


2011-03-24 15:17:52.243 00043 Comment: Standard MySQL username = kaspuser


2011-03-24 15:17:52.243 00044 Comment: Standard MySQL password = abc123


2011-03-24 15:17:52.243 00045 Comment: Second MySQL database = KASPTEST


2011-03-24 15:17:52.243 00046 Comment: Second MySQL username = kaspuser


2011-03-24 15:17:52.243 00047 Comment: Second MySQL password = abc123


2011-03-24 15:17:52.244 00048 Comment: Thirth MySQL database = KASPTEST2


2011-03-24 15:17:52.244 00049 Comment: Thirth MySQL username = gooduser


2011-03-24 15:17:52.244 00050 Comment: Thirth MySQL password = 123abc


2011-03-24 15:17:52.244 00051 Comment: If the databases above are not available they can be created via the command:
- mysql -p
- create database <databasename>


2011-03-24 15:17:52.244 00052 Comment: After this the users should be granted for using the database using the following 2 commands:
- grant usage on <databasename>.* to <user>@localhost identified by '<password of user>'
- grant all privileges on <databasename>.* to <user>@localhost identified by '<password of user>'


2011-03-24 15:17:52.244 00054 Comment: Zone file


2011-03-24 15:17:52.244 00055 Comment: Make sure that the zone with name "ods" is available in the test environment in folder /var/opendnssec/unsigned


2011-03-24 15:17:52.244 00057 Comment: Host file


2011-03-24 15:17:52.244 00058 Comment: Make sure that the following line is in the host file in the "/etc" folder:
127.0.0.1 mysqltest


2011-03-24 15:17:52.244 00061 Comment: Make sure that the "ods-notify"-script is in the /home/ods/ods-testautomation/ods_sit_conf/scripts folder


2011-03-24 15:17:52.244 00064 Comment: Check if the application "logger" is available on the test environment (location: /usr/bin/). The logger will put the result of a command, for example "ods-kaspcheck", in the messages logfile (location: /var/log/messages). Example of usage: "command | /usr/bin/logger"

Testcondition - ODSCC10: The configuration of repositories located in conf.xml should operate according to requirements and intentions
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSCC10T10: Configure and sign with one repository (SoftHSM)

2011-03-24 15:17:52.244 00069 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:17:52.244 Requirement: ODSCC10

2011-03-24 15:17:52.244 00071 Stop()
2011-03-24 15:17:52.244 Requirement: ODSCC10
2011-03-24 15:17:52.244 RunCommand(ods-control stop)
2011-03-24 15:17:53.253 - runCommand: Process started, PID: 21154
2011-03-24 15:17:53.253 OUTPUT:	Stopping enforcer...
2011-03-24 15:17:53.253 OUTPUT:	Stopping signer engine..
2011-03-24 15:17:53.253 OUTPUT:	Engine shut down.
2011-03-24 15:17:53.253 RunCommand(ps -e | grep enforcer)
2011-03-24 15:17:53.269 - runCommand: Process started, PID: 21161
2011-03-24 15:17:53.269 ERROR:	return code = 1
2011-03-24 15:17:53.269 RunCommand(ps -e | grep signer)
2011-03-24 15:17:53.286 - runCommand: Process started, PID: 21164
2011-03-24 15:17:53.286 OUTPUT:	21012 ?        00:00:00 ods-signerd

2011-03-24 15:17:53.286 00073 Wait(10)

2011-03-24 15:17:53.286 Requirement: ODSCC10

2011-03-24 15:18:03.286 00075 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:18:03.286 Requirement: ODSCC10

2011-03-24 15:18:03.287 00081 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:18:03.287 Requirement: ODSCC10

2011-03-24 15:18:03.287 00084 PurgeHSM()
2011-03-24 15:18:03.287 Requirement: ODSCC10
2011-03-24 15:18:03.287 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:18:03.626 - runCommand: Process started, PID: 21168
2011-03-24 15:18:03.626 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-24 15:18:03.626 OUTPUT:	2 keys found.
2011-03-24 15:18:03.626 OUTPUT:	
2011-03-24 15:18:03.626 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-24 15:18:03.626 OUTPUT:	Starting purge...
2011-03-24 15:18:03.626 OUTPUT:	Key remove successful: 268b9cb2917a7858ed8d631f345bed17
2011-03-24 15:18:03.626 OUTPUT:	Key remove successful: 6de1daf19efdcd2c0a421e1441187fd6
2011-03-24 15:18:03.626 OUTPUT:	Purge done.

2011-03-24 15:18:03.626 00086 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:18:03.626 Requirement: ODSCC10

2011-03-24 15:18:03.626 00089 LoadConfig()
2011-03-24 15:18:03.626 Requirement: ODSCC10
2011-03-24 15:18:03.626 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:18:03.631 - runCommand: Process started, PID: 21172

2011-03-24 15:18:03.631 00092 LoadConfig()
2011-03-24 15:18:03.631 Requirement: ODSCC10
2011-03-24 15:18:03.631 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:18:03.635 - runCommand: Process started, PID: 21173

2011-03-24 15:18:03.635 00094 Comment: Setup of ODS database

2011-03-24 15:18:03.635 Requirement: ODSCC10

2011-03-24 15:18:03.635 00096 ODSSetup()
2011-03-24 15:18:03.635 Requirement: ODSCC10
2011-03-24 15:18:03.635 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:18:14.996 - runCommand: Process started, PID: 21174
2011-03-24 15:18:14.996 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:18:14.996 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:18:14.996 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:18:14.996 OUTPUT:	Repository SoftHSM found
2011-03-24 15:18:14.996 OUTPUT:	No Maximum Capacity set.
2011-03-24 15:18:14.996 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 15:18:14.996 OUTPUT:	Policy default2 found
2011-03-24 15:18:14.996 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:18:14.996 OUTPUT:	Policy default found
2011-03-24 15:18:14.996 OUTPUT:	Zone ods found
2011-03-24 15:18:14.996 OUTPUT:	Policy set to default.
2011-03-24 15:18:14.996 OUTPUT:	Added zone ods to database
2011-03-24 15:18:14.996 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:18:14.996 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:18:14.996 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:18:14.996 00098 Wait(10)

2011-03-24 15:18:14.996 Requirement: ODSCC10

2011-03-24 15:18:24.997 00100 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:18:24.997 Requirement: ODSCC10

2011-03-24 15:18:24.997 00102 Start()
2011-03-24 15:18:24.997 Requirement: ODSCC10
2011-03-24 15:18:24.997 RunCommand(ods-control start)
2011-03-24 15:18:24.999 - runCommand: Background process started, PID: 21187
2011-03-24 15:18:27.204 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:18:27.394 - runCommand: Process started, PID: 21229
2011-03-24 15:18:27.394 OUTPUT:	ods-enforcerd
2011-03-24 15:18:27.395 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:18:27.706 - runCommand: Process started, PID: 21233
2011-03-24 15:18:27.707 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-24 15:18:27.708 00104 Wait(10)

2011-03-24 15:18:27.708 Requirement: ODSCC10

2011-03-24 15:18:37.711 00106 Comment: Sign the ods zone with the new configs.

2011-03-24 15:18:37.712 Requirement: ODSCC10

2011-03-24 15:18:37.713 00110 Wait(15)

2011-03-24 15:18:37.713 Requirement: ODSCC10

2011-03-24 15:18:52.716 00112 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-24 15:18:52.717 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T20: Configure 4 repositories (2x SoftHSM, 2x hardware HSM) and sign using 2 of these different repositories

2011-03-24 15:18:54.737 00121 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:18:54.737 Requirement: ODSCC10

2011-03-24 15:18:54.737 00123 Stop()
2011-03-24 15:18:54.737 Requirement: ODSCC10
2011-03-24 15:18:54.737 RunCommand(ods-control stop)
2011-03-24 15:18:55.745 - runCommand: Process started, PID: 21241
2011-03-24 15:18:55.745 OUTPUT:	Stopping enforcer...
2011-03-24 15:18:55.745 OUTPUT:	Stopping signer engine..
2011-03-24 15:18:55.745 OUTPUT:	Engine shut down.
2011-03-24 15:18:55.745 RunCommand(ps -e | grep enforcer)
2011-03-24 15:18:55.764 - runCommand: Process started, PID: 21247
2011-03-24 15:18:55.764 ERROR:	return code = 1
2011-03-24 15:18:55.764 RunCommand(ps -e | grep signer)
2011-03-24 15:18:55.776 - runCommand: Process started, PID: 21250
2011-03-24 15:18:55.776 ERROR:	return code = 1

2011-03-24 15:18:55.776 00125 Wait(10)

2011-03-24 15:18:55.776 Requirement: ODSCC10

2011-03-24 15:19:05.776 00127 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:19:05.776 Requirement: ODSCC10

2011-03-24 15:19:05.777 00133 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:19:05.777 Requirement: ODSCC10

2011-03-24 15:19:05.777 00136 PurgeHSM()
2011-03-24 15:19:05.777 Requirement: ODSCC10
2011-03-24 15:19:05.777 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:19:06.119 - runCommand: Process started, PID: 21253
2011-03-24 15:19:06.119 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-24 15:19:06.119 OUTPUT:	2 keys found.
2011-03-24 15:19:06.119 OUTPUT:	
2011-03-24 15:19:06.119 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-24 15:19:06.119 OUTPUT:	Starting purge...
2011-03-24 15:19:06.119 OUTPUT:	Key remove successful: 36ca06e88874a8173b5ba0bedc3a2f59
2011-03-24 15:19:06.119 OUTPUT:	Key remove successful: 98af0639eb1c933a63e43c0d3e112e2a
2011-03-24 15:19:06.119 OUTPUT:	Purge done.

2011-03-24 15:19:06.119 00138 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:19:06.119 Requirement: ODSCC10

2011-03-24 15:19:06.119 00141 LoadConfig()
2011-03-24 15:19:06.119 Requirement: ODSCC10
2011-03-24 15:19:06.119 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T20_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:19:06.124 - runCommand: Process started, PID: 21257

2011-03-24 15:19:06.124 00144 LoadConfig()
2011-03-24 15:19:06.124 Requirement: ODSCC10
2011-03-24 15:19:06.124 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:19:06.128 - runCommand: Process started, PID: 21258

2011-03-24 15:19:06.129 00146 Comment: Update all the configs.

2011-03-24 15:19:06.129 Requirement: ODSCC10

2011-03-24 15:19:06.129 00148 ODSSetup()
2011-03-24 15:19:06.129 Requirement: ODSCC10
2011-03-24 15:19:06.129 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:19:17.145 - runCommand: Process started, PID: 21259
2011-03-24 15:19:17.146 OUTPUT:	ERROR: Module /usr/lib/libCryptoki2_64.so in Repository HSM-HA cannot be found
2011-03-24 15:19:17.146 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:19:17.146 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:19:17.147 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:19:17.147 OUTPUT:	Repository SoftHSM found
2011-03-24 15:19:17.147 OUTPUT:	No Maximum Capacity set.
2011-03-24 15:19:17.147 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 15:19:17.147 OUTPUT:	Repository SoftHSM2 found
2011-03-24 15:19:17.147 OUTPUT:	No Maximum Capacity set.
2011-03-24 15:19:17.147 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 15:19:17.148 OUTPUT:	Repository HSM-HA found
2011-03-24 15:19:17.148 OUTPUT:	Capacity set to 35.
2011-03-24 15:19:17.148 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 15:19:17.148 OUTPUT:	Policy default2 found
2011-03-24 15:19:17.148 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:19:17.148 OUTPUT:	Policy default found
2011-03-24 15:19:17.149 OUTPUT:	Zone ods found
2011-03-24 15:19:17.149 OUTPUT:	Policy set to default.
2011-03-24 15:19:17.149 OUTPUT:	Added zone ods to database
2011-03-24 15:19:17.149 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:19:17.149 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:19:17.149 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:19:17.152 00150 Wait(10)

2011-03-24 15:19:17.152 Requirement: ODSCC10

2011-03-24 15:19:27.155 00152 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:19:27.155 Requirement: ODSCC10

2011-03-24 15:19:27.156 00154 Start()
2011-03-24 15:19:27.157 Requirement: ODSCC10
2011-03-24 15:19:27.157 RunCommand(ods-control start)
2011-03-24 15:19:27.176 - runCommand: Background process started, PID: 21272
2011-03-24 15:19:32.510 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:19:32.677 - runCommand: Process started, PID: 21295
2011-03-24 15:19:32.678 ERROR:	return code = 1
2011-03-24 15:19:32.678 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:19:32.833 - runCommand: Process started, PID: 21300

2011-03-24 15:19:32.835 00156 Comment: Sign the ods zone with the new configs.

2011-03-24 15:19:32.835 Requirement: ODSCC10

2011-03-24 15:19:32.836 00160 Wait(15)

2011-03-24 15:19:32.836 Requirement: ODSCC10

2011-03-24 15:19:47.839 00162 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-24 15:19:47.839 Requirement: ODSCC10
2011-03-24 15:19:49.752 PASSED:	(Check for Like) - Expected: all done! Found: Mar 24 15:18:54 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

-------------------------------------------------------------------------------
Testcase - ODSCC10T30: Configure no module location and expect failure

2011-03-24 15:19:49.752 00172 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:19:49.752 Requirement: ODSCC10

2011-03-24 15:19:49.752 00174 Stop()
2011-03-24 15:19:49.752 Requirement: ODSCC10
2011-03-24 15:19:49.752 RunCommand(ods-control stop)
2011-03-24 15:19:49.756 - runCommand: Process started, PID: 21305
2011-03-24 15:19:49.756 OUTPUT:	Stopping enforcer...
2011-03-24 15:19:49.757 OUTPUT:	Cannot find PID file
2011-03-24 15:19:49.757 OUTPUT:	Stopping signer engine..
2011-03-24 15:19:49.757 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:19:49.757 ERROR:	return code = 1
2011-03-24 15:19:49.757 RunCommand(ps -e | grep enforcer)
2011-03-24 15:19:49.766 - runCommand: Process started, PID: 21308
2011-03-24 15:19:49.766 ERROR:	return code = 1
2011-03-24 15:19:49.766 RunCommand(ps -e | grep signer)
2011-03-24 15:19:49.777 - runCommand: Process started, PID: 21311
2011-03-24 15:19:49.777 ERROR:	return code = 1

2011-03-24 15:19:49.777 00176 Wait(10)

2011-03-24 15:19:49.777 Requirement: ODSCC10

2011-03-24 15:19:59.778 00178 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:19:59.778 Requirement: ODSCC10

2011-03-24 15:19:59.778 00184 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:19:59.778 Requirement: ODSCC10

2011-03-24 15:19:59.778 00187 PurgeHSM()
2011-03-24 15:19:59.778 Requirement: ODSCC10
2011-03-24 15:19:59.778 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:19:59.794 - runCommand: Process started, PID: 21314
2011-03-24 15:19:59.794 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM2
2011-03-24 15:19:59.794 ERROR:	return code = 255

2011-03-24 15:19:59.794 00189 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:19:59.794 Requirement: ODSCC10

2011-03-24 15:19:59.794 00192 LoadConfig()
2011-03-24 15:19:59.794 Requirement: ODSCC10
2011-03-24 15:19:59.794 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T30_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:19:59.797 - runCommand: Process started, PID: 21318

2011-03-24 15:19:59.798 00195 LoadConfig()
2011-03-24 15:19:59.798 Requirement: ODSCC10
2011-03-24 15:19:59.798 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:19:59.800 - runCommand: Process started, PID: 21319

2011-03-24 15:19:59.800 00197 Comment: Update all the configs.

2011-03-24 15:19:59.800 Requirement: ODSCC10

2011-03-24 15:19:59.800 00199 ODSSetup()
2011-03-24 15:19:59.800 Requirement: ODSCC10
2011-03-24 15:19:59.800 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:20:11.103 - runCommand: Process started, PID: 21320
2011-03-24 15:20:11.103 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:20:11.103 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:20:11.103 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:20:11.103 OUTPUT:	Repository SoftHSM found
2011-03-24 15:20:11.103 OUTPUT:	No Maximum Capacity set.
2011-03-24 15:20:11.103 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 15:20:11.103 OUTPUT:	Policy default2 found
2011-03-24 15:20:11.103 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:20:11.103 OUTPUT:	Policy default found
2011-03-24 15:20:11.103 OUTPUT:	Zone ods found
2011-03-24 15:20:11.103 OUTPUT:	Policy set to default.
2011-03-24 15:20:11.103 OUTPUT:	Added zone ods to database
2011-03-24 15:20:11.103 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:20:11.103 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:20:11.103 ERROR:	/usr/local/lib/opendnssec/kasp_checker.rb:222:in `check_config_file': undefined method `+' for nil:NilClass (NoMethodError)
2011-03-24 15:20:11.103 ERROR:		from /usr/lib/ruby/1.8/rexml/element.rb:892:in `each'
2011-03-24 15:20:11.103 ERROR:		from /usr/lib/ruby/1.8/rexml/xpath.rb:53:in `each'
2011-03-24 15:20:11.103 ERROR:		from /usr/lib/ruby/1.8/rexml/element.rb:892:in `each'
2011-03-24 15:20:11.103 ERROR:		from /usr/local/lib/opendnssec/kasp_checker.rb:214:in `check_config_file'
2011-03-24 15:20:11.103 ERROR:		from /usr/local/lib/opendnssec/kasp_checker.rb:146:in `open'
2011-03-24 15:20:11.104 ERROR:		from /usr/local/lib/opendnssec/kasp_checker.rb:146:in `check_config_file'
2011-03-24 15:20:11.104 ERROR:		from /usr/local/lib/opendnssec/kasp_checker.rb:55:in `check'
2011-03-24 15:20:11.104 ERROR:		from /usr/local/bin/ods-kaspcheck:110
2011-03-24 15:20:11.104 ERROR:	Couldn't run kaspcheck, will carry on

2011-03-24 15:20:11.104 00201 Wait(10)

2011-03-24 15:20:11.104 Requirement: ODSCC10

2011-03-24 15:20:21.104 00203 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:20:21.104 Requirement: ODSCC10

2011-03-24 15:20:21.104 00205 Start()
2011-03-24 15:20:21.104 Requirement: ODSCC10
2011-03-24 15:20:21.104 RunCommand(ods-control start)
2011-03-24 15:20:21.106 - runCommand: Background process started, PID: 21331
2011-03-24 15:20:26.139 ERROR:	return code = 1
2011-03-24 15:20:26.139 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:20:26.156 - runCommand: Process started, PID: 21352
2011-03-24 15:20:26.156 ERROR:	return code = 1
2011-03-24 15:20:26.156 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:20:26.172 - runCommand: Process started, PID: 21356

2011-03-24 15:20:26.172 00207 Comment: Sign the ods zone with the new configs.

2011-03-24 15:20:26.172 Requirement: ODSCC10

2011-03-24 15:20:26.172 00211 Wait(15)

2011-03-24 15:20:26.172 Requirement: ODSCC10

2011-03-24 15:20:41.173 00213 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful.

2011-03-24 15:20:41.173 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T40: Configure Incorrect module location and expect failure

2011-03-24 15:20:43.837 00222 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:20:43.837 Requirement: ODSCC10

2011-03-24 15:20:43.837 00224 Stop()
2011-03-24 15:20:43.837 Requirement: ODSCC10
2011-03-24 15:20:43.837 RunCommand(ods-control stop)
2011-03-24 15:20:43.841 - runCommand: Process started, PID: 21361
2011-03-24 15:20:43.841 OUTPUT:	Stopping enforcer...
2011-03-24 15:20:43.841 OUTPUT:	Cannot find PID file
2011-03-24 15:20:43.841 OUTPUT:	Stopping signer engine..
2011-03-24 15:20:43.841 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:20:43.841 ERROR:	return code = 1
2011-03-24 15:20:43.841 RunCommand(ps -e | grep enforcer)
2011-03-24 15:20:43.851 - runCommand: Process started, PID: 21364
2011-03-24 15:20:43.851 ERROR:	return code = 1
2011-03-24 15:20:43.851 RunCommand(ps -e | grep signer)
2011-03-24 15:20:43.862 - runCommand: Process started, PID: 21367
2011-03-24 15:20:43.863 ERROR:	return code = 1

2011-03-24 15:20:43.863 00226 Wait(10)

2011-03-24 15:20:43.863 Requirement: ODSCC10

2011-03-24 15:20:53.863 00228 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:20:53.863 Requirement: ODSCC10

2011-03-24 15:20:53.863 00234 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:20:53.863 Requirement: ODSCC10

2011-03-24 15:20:53.863 00237 PurgeHSM()
2011-03-24 15:20:53.863 Requirement: ODSCC10
2011-03-24 15:20:53.863 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:20:53.869 - runCommand: Process started, PID: 21370
2011-03-24 15:20:53.869 ERROR:	hsm_session_init(): PKCS#11 module load failed: 
2011-03-24 15:20:53.869 ERROR:	return code = 255

2011-03-24 15:20:53.869 00239 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:20:53.869 Requirement: ODSCC10

2011-03-24 15:20:53.869 00242 LoadConfig()
2011-03-24 15:20:53.869 Requirement: ODSCC10
2011-03-24 15:20:53.869 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T40_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:20:53.873 - runCommand: Process started, PID: 21373

2011-03-24 15:20:53.874 00245 LoadConfig()
2011-03-24 15:20:53.874 Requirement: ODSCC10
2011-03-24 15:20:53.874 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:20:53.880 - runCommand: Process started, PID: 21374

2011-03-24 15:20:53.881 00247 Comment: Update all the configs.

2011-03-24 15:20:53.881 Requirement: ODSCC10

2011-03-24 15:20:53.881 00249 ODSSetup()
2011-03-24 15:20:53.881 Requirement: ODSCC10
2011-03-24 15:20:53.881 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:21:04.642 - runCommand: Process started, PID: 21375
2011-03-24 15:21:04.642 OUTPUT:	ERROR: Module /usr/libsofthsm.so in Repository SoftHSM cannot be found
2011-03-24 15:21:04.642 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:21:04.642 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:21:04.642 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:21:04.642 OUTPUT:	Repository SoftHSM found
2011-03-24 15:21:04.642 OUTPUT:	No Maximum Capacity set.
2011-03-24 15:21:04.643 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 15:21:04.643 OUTPUT:	Policy default2 found
2011-03-24 15:21:04.643 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:21:04.643 OUTPUT:	Policy default found
2011-03-24 15:21:04.643 OUTPUT:	Zone ods found
2011-03-24 15:21:04.643 OUTPUT:	Policy set to default.
2011-03-24 15:21:04.643 OUTPUT:	Added zone ods to database
2011-03-24 15:21:04.643 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:21:04.643 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:21:04.643 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:21:04.643 00251 Wait(10)

2011-03-24 15:21:04.643 Requirement: ODSCC10

2011-03-24 15:21:14.643 00253 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:21:14.643 Requirement: ODSCC10

2011-03-24 15:21:14.643 00255 Start()
2011-03-24 15:21:14.643 Requirement: ODSCC10
2011-03-24 15:21:14.643 RunCommand(ods-control start)
2011-03-24 15:21:14.645 - runCommand: Background process started, PID: 21388
2011-03-24 15:21:19.679 ERROR:	return code = 1
2011-03-24 15:21:19.679 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:21:19.696 - runCommand: Process started, PID: 21409
2011-03-24 15:21:19.696 ERROR:	return code = 1
2011-03-24 15:21:19.696 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:21:19.716 - runCommand: Process started, PID: 21413

2011-03-24 15:21:19.716 00257 Comment: Sign the ods zone with the new configs.

2011-03-24 15:21:19.716 Requirement: ODSCC10

2011-03-24 15:21:19.716 00261 Wait(15)

2011-03-24 15:21:19.716 Requirement: ODSCC10

2011-03-24 15:21:34.716 00263 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. No SoftHSM has been found.

2011-03-24 15:21:34.716 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T50: Use a Tokenlabel with 1 character

2011-03-24 15:21:37.382 00272 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:21:37.382 Requirement: ODSCC10

2011-03-24 15:21:37.382 00274 Stop()
2011-03-24 15:21:37.382 Requirement: ODSCC10
2011-03-24 15:21:37.382 RunCommand(ods-control stop)
2011-03-24 15:21:37.386 - runCommand: Process started, PID: 21418
2011-03-24 15:21:37.386 OUTPUT:	Stopping enforcer...
2011-03-24 15:21:37.386 OUTPUT:	Cannot find PID file
2011-03-24 15:21:37.386 OUTPUT:	Stopping signer engine..
2011-03-24 15:21:37.386 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:21:37.386 ERROR:	return code = 1
2011-03-24 15:21:37.386 RunCommand(ps -e | grep enforcer)
2011-03-24 15:21:37.396 - runCommand: Process started, PID: 21421
2011-03-24 15:21:37.396 ERROR:	return code = 1
2011-03-24 15:21:37.396 RunCommand(ps -e | grep signer)
2011-03-24 15:21:37.408 - runCommand: Process started, PID: 21424
2011-03-24 15:21:37.408 ERROR:	return code = 1

2011-03-24 15:21:37.408 00276 Wait(10)

2011-03-24 15:21:37.408 Requirement: ODSCC10

2011-03-24 15:21:47.408 00278 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:21:47.408 Requirement: ODSCC10

2011-03-24 15:21:47.409 00284 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:21:47.409 Requirement: ODSCC10

2011-03-24 15:21:47.409 00287 PurgeHSM()
2011-03-24 15:21:47.409 Requirement: ODSCC10
2011-03-24 15:21:47.409 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:21:47.414 - runCommand: Process started, PID: 21427
2011-03-24 15:21:47.414 ERROR:	hsm_session_init(): PKCS#11 module load failed: /usr/libsofthsm.so
2011-03-24 15:21:47.414 ERROR:	return code = 255

2011-03-24 15:21:47.414 00289 Comment: Change the tokenlabel of slot1  to "S"

2011-03-24 15:21:47.414 Requirement: ODSCC10

2011-03-24 15:21:47.415 00291 InitRepo()
2011-03-24 15:21:47.415 Requirement: ODSCC10
2011-03-24 15:21:47.415 RunCommand(softhsm --init-token --slot  --label softhsm --init-token --slot 1 --label S --so-pin 4321 --pin 4321 --so-pin  --pin )
2011-03-24 15:21:47.424 - runCommand: Process started, PID: 21430
2011-03-24 15:21:47.424 ERROR:	Error: The given SO PIN does not match the one in the token.

2011-03-24 15:21:47.424 00293 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:21:47.424 Requirement: ODSCC10

2011-03-24 15:21:47.424 00296 LoadConfig()
2011-03-24 15:21:47.424 Requirement: ODSCC10
2011-03-24 15:21:47.424 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T50_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:21:47.428 - runCommand: Process started, PID: 21432

2011-03-24 15:21:47.428 00299 LoadConfig()
2011-03-24 15:21:47.428 Requirement: ODSCC10
2011-03-24 15:21:47.428 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:21:47.430 - runCommand: Process started, PID: 21433

2011-03-24 15:21:47.430 00301 Comment: Update all the configs.

2011-03-24 15:21:47.430 Requirement: ODSCC10

2011-03-24 15:21:47.430 00303 ODSSetup()
2011-03-24 15:21:47.430 Requirement: ODSCC10
2011-03-24 15:21:47.430 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:21:58.923 - runCommand: Process started, PID: 21434
2011-03-24 15:21:58.923 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:21:58.923 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:21:58.923 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:21:58.923 OUTPUT:	Repository SoftHSM found
2011-03-24 15:21:58.923 OUTPUT:	No Maximum Capacity set.
2011-03-24 15:21:58.923 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 15:21:58.923 OUTPUT:	Repository SoftHSM2 found
2011-03-24 15:21:58.923 OUTPUT:	No Maximum Capacity set.
2011-03-24 15:21:58.923 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 15:21:58.923 OUTPUT:	Policy default2 found
2011-03-24 15:21:58.923 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:21:58.923 OUTPUT:	Policy default found
2011-03-24 15:21:58.923 OUTPUT:	Zone ods found
2011-03-24 15:21:58.923 OUTPUT:	Policy set to default.
2011-03-24 15:21:58.923 OUTPUT:	Added zone ods to database
2011-03-24 15:21:58.923 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:21:58.923 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:21:58.923 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:21:58.923 00305 Wait(10)

2011-03-24 15:21:58.923 Requirement: ODSCC10

2011-03-24 15:22:08.924 00307 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:22:08.924 Requirement: ODSCC10

2011-03-24 15:22:08.924 00309 Start()
2011-03-24 15:22:08.924 Requirement: ODSCC10
2011-03-24 15:22:08.924 RunCommand(ods-control start)
2011-03-24 15:22:08.926 - runCommand: Background process started, PID: 21480
2011-03-24 15:22:13.958 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:22:13.975 - runCommand: Process started, PID: 21505
2011-03-24 15:22:13.975 ERROR:	return code = 1
2011-03-24 15:22:13.975 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:22:13.990 - runCommand: Process started, PID: 21510

2011-03-24 15:22:13.990 00311 Wait(10)

2011-03-24 15:22:13.990 Requirement: ODSCC10

2011-03-24 15:22:23.991 00313 Comment: Sign the ods zone with the new configs.

2011-03-24 15:22:23.991 Requirement: ODSCC10

2011-03-24 15:22:23.991 00317 Wait(15)

2011-03-24 15:22:23.991 Requirement: ODSCC10

2011-03-24 15:22:38.991 00319 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-24 15:22:38.991 Requirement: ODSCC10

2011-03-24 15:22:41.657 00324 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:22:41.657 Requirement: ODSCC10

2011-03-24 15:22:41.658 00326 Stop()
2011-03-24 15:22:41.658 Requirement: ODSCC10
2011-03-24 15:22:41.658 RunCommand(ods-control stop)
2011-03-24 15:22:41.662 - runCommand: Process started, PID: 21522
2011-03-24 15:22:41.662 OUTPUT:	Stopping enforcer...
2011-03-24 15:22:41.662 OUTPUT:	Cannot find PID file
2011-03-24 15:22:41.662 OUTPUT:	Stopping signer engine..
2011-03-24 15:22:41.662 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:22:41.662 ERROR:	return code = 1
2011-03-24 15:22:41.662 RunCommand(ps -e | grep enforcer)
2011-03-24 15:22:41.672 - runCommand: Process started, PID: 21525
2011-03-24 15:22:41.672 ERROR:	return code = 1
2011-03-24 15:22:41.672 RunCommand(ps -e | grep signer)
2011-03-24 15:22:41.683 - runCommand: Process started, PID: 21528
2011-03-24 15:22:41.683 ERROR:	return code = 1

2011-03-24 15:22:41.683 00328 Wait(10)

2011-03-24 15:22:41.683 Requirement: ODSCC10

2011-03-24 15:22:51.683 00330 Comment: Change the token to the previous label.

2011-03-24 15:22:51.683 Requirement: ODSCC10

2011-03-24 15:22:51.683 00332 InitRepo()
2011-03-24 15:22:51.683 Requirement: ODSCC10
2011-03-24 15:22:51.683 RunCommand(softhsm --init-token --slot  --label softhsm --init-token --slot 1 --label OpenDNSSEC2 --so-pin 4321 --pin 4321 --so-pin  --pin )
2011-03-24 15:22:51.694 - runCommand: Process started, PID: 21531
2011-03-24 15:22:51.694 ERROR:	Error: The given SO PIN does not match the one in the token.

2011-03-24 15:22:51.694 00334 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:22:51.694 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T60: Use a Tokenlabel with 257 characters

2011-03-24 15:22:51.694 00344 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:22:51.694 Requirement: ODSCC10

2011-03-24 15:22:51.694 00346 Stop()
2011-03-24 15:22:51.694 Requirement: ODSCC10
2011-03-24 15:22:51.694 RunCommand(ods-control stop)
2011-03-24 15:22:51.700 - runCommand: Process started, PID: 21533
2011-03-24 15:22:51.700 OUTPUT:	Stopping enforcer...
2011-03-24 15:22:51.700 OUTPUT:	Cannot find PID file
2011-03-24 15:22:51.700 OUTPUT:	Stopping signer engine..
2011-03-24 15:22:51.700 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:22:51.700 ERROR:	return code = 1
2011-03-24 15:22:51.700 RunCommand(ps -e | grep enforcer)
2011-03-24 15:22:51.712 - runCommand: Process started, PID: 21536
2011-03-24 15:22:51.712 ERROR:	return code = 1
2011-03-24 15:22:51.712 RunCommand(ps -e | grep signer)
2011-03-24 15:22:51.723 - runCommand: Process started, PID: 21539
2011-03-24 15:22:51.723 ERROR:	return code = 1

2011-03-24 15:22:51.723 00348 Wait(10)

2011-03-24 15:22:51.723 Requirement: ODSCC10

2011-03-24 15:23:01.723 00350 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:23:01.723 Requirement: ODSCC10

2011-03-24 15:23:01.723 00356 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:23:01.723 Requirement: ODSCC10

2011-03-24 15:23:01.723 00359 PurgeHSM()
2011-03-24 15:23:01.723 Requirement: ODSCC10
2011-03-24 15:23:01.723 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:23:01.738 - runCommand: Process started, PID: 21542
2011-03-24 15:23:01.738 ERROR:	hsm_get_slot_id(): could not find token with the name S
2011-03-24 15:23:01.739 ERROR:	return code = 255

2011-03-24 15:23:01.739 00362 Comment: Change the tokenlabel of slot1  to "SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM"
(257 characters)

2011-03-24 15:23:01.739 Requirement: ODSCC10

2011-03-24 15:23:01.739 00364 InitRepo()
2011-03-24 15:23:01.739 Requirement: ODSCC10
2011-03-24 15:23:01.739 RunCommand(softhsm --init-token --slot  --label softhsm --init-token --slot 1 --label SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM --so-pin 4321 --pin 4321 --so-pin  --pin )
2011-03-24 15:23:01.749 - runCommand: Process started, PID: 21546
2011-03-24 15:23:01.749 ERROR:	Error: The token label must not have a length greater than 32 chars.

2011-03-24 15:23:01.749 00366 Wait(1/5/1900)

2011-03-24 15:23:01.749 Requirement: ODSCC10

2011-03-24 15:23:02.750 00368 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:23:02.750 Requirement: ODSCC10

2011-03-24 15:23:02.750 00371 LoadConfig()
2011-03-24 15:23:02.750 Requirement: ODSCC10
2011-03-24 15:23:02.750 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T60_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:23:02.755 - runCommand: Process started, PID: 21548

2011-03-24 15:23:02.755 00374 LoadConfig()
2011-03-24 15:23:02.755 Requirement: ODSCC10
2011-03-24 15:23:02.755 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:23:02.759 - runCommand: Process started, PID: 21549

2011-03-24 15:23:02.759 00376 Comment: Update all the configs.

2011-03-24 15:23:02.759 Requirement: ODSCC10

2011-03-24 15:23:02.759 00378 ODSSetup()
2011-03-24 15:23:02.759 Requirement: ODSCC10
2011-03-24 15:23:02.759 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:23:15.927 - runCommand: Process started, PID: 21550
2011-03-24 15:23:15.928 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:23:15.928 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:23:15.928 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:23:15.929 OUTPUT:	Repository SoftHSM found
2011-03-24 15:23:15.929 OUTPUT:	No Maximum Capacity set.
2011-03-24 15:23:15.929 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 15:23:15.929 OUTPUT:	Repository SoftHSM2 found
2011-03-24 15:23:15.929 OUTPUT:	No Maximum Capacity set.
2011-03-24 15:23:15.929 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 15:23:15.930 OUTPUT:	Policy default2 found
2011-03-24 15:23:15.930 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:23:15.930 OUTPUT:	Policy default found
2011-03-24 15:23:15.930 OUTPUT:	Zone ods found
2011-03-24 15:23:15.930 OUTPUT:	Policy set to default.
2011-03-24 15:23:15.930 OUTPUT:	Added zone ods to database
2011-03-24 15:23:15.931 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:23:15.931 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:23:15.931 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:23:15.933 00380 Wait(10)

2011-03-24 15:23:15.933 Requirement: ODSCC10

2011-03-24 15:23:25.936 00382 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:23:25.937 Requirement: ODSCC10

2011-03-24 15:23:25.938 00384 Start()
2011-03-24 15:23:25.938 Requirement: ODSCC10
2011-03-24 15:23:25.939 RunCommand(ods-control start)
2011-03-24 15:23:25.958 - runCommand: Background process started, PID: 21568
2011-03-24 15:23:30.129 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:23:30.145 - runCommand: Process started, PID: 21592
2011-03-24 15:23:30.145 ERROR:	return code = 1
2011-03-24 15:23:30.145 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:23:30.162 - runCommand: Process started, PID: 21597

2011-03-24 15:23:30.162 00386 Comment: Sign the ods zone with the new configs.

2011-03-24 15:23:30.163 Requirement: ODSCC10

2011-03-24 15:23:30.163 00390 Wait(15)

2011-03-24 15:23:30.163 Requirement: ODSCC10

2011-03-24 15:23:45.163 00392 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-24 15:23:45.163 Requirement: ODSCC10

2011-03-24 15:23:47.853 00397 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:23:47.853 Requirement: ODSCC10

2011-03-24 15:23:47.853 00399 Wait(10)

2011-03-24 15:23:47.853 Requirement: ODSCC10

2011-03-24 15:23:57.853 00401 Stop()
2011-03-24 15:23:57.853 Requirement: ODSCC10
2011-03-24 15:23:57.853 RunCommand(ods-control stop)
2011-03-24 15:23:57.859 - runCommand: Process started, PID: 21602
2011-03-24 15:23:57.860 OUTPUT:	Stopping enforcer...
2011-03-24 15:23:57.860 OUTPUT:	Cannot find PID file
2011-03-24 15:23:57.860 OUTPUT:	Stopping signer engine..
2011-03-24 15:23:57.860 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:23:57.860 ERROR:	return code = 1
2011-03-24 15:23:57.860 RunCommand(ps -e | grep enforcer)
2011-03-24 15:23:57.880 - runCommand: Process started, PID: 21605
2011-03-24 15:23:57.881 ERROR:	return code = 1
2011-03-24 15:23:57.881 RunCommand(ps -e | grep signer)
2011-03-24 15:23:57.897 - runCommand: Process started, PID: 21608
2011-03-24 15:23:57.897 ERROR:	return code = 1

2011-03-24 15:23:57.897 00403 Comment: Change the token to the previous label.

2011-03-24 15:23:57.897 Requirement: ODSCC10

2011-03-24 15:23:57.897 00405 InitRepo()
2011-03-24 15:23:57.897 Requirement: ODSCC10
2011-03-24 15:23:57.897 RunCommand(softhsm --init-token --slot  --label softhsm --init-token --slot 1 --label OpenDNSSEC2 --so-pin 4321 --pin 4321 --so-pin  --pin )
2011-03-24 15:23:57.903 - runCommand: Process started, PID: 21611
2011-03-24 15:23:57.904 ERROR:	Error: The given SO PIN does not match the one in the token.

2011-03-24 15:23:57.904 00407 Wait(5)

2011-03-24 15:23:57.904 Requirement: ODSCC10

2011-03-24 15:24:02.904 00409 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:24:02.904 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T70: Configure no PIN while PIN is needed

2011-03-24 15:24:02.904 00415 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:24:02.904 Requirement: ODSCC10

2011-03-24 15:24:02.905 00417 Stop()
2011-03-24 15:24:02.905 Requirement: ODSCC10
2011-03-24 15:24:02.905 RunCommand(ods-control stop)
2011-03-24 15:24:02.911 - runCommand: Process started, PID: 21613
2011-03-24 15:24:02.911 OUTPUT:	Stopping enforcer...
2011-03-24 15:24:02.911 OUTPUT:	Cannot find PID file
2011-03-24 15:24:02.911 OUTPUT:	Stopping signer engine..
2011-03-24 15:24:02.911 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:24:02.911 ERROR:	return code = 1
2011-03-24 15:24:02.911 RunCommand(ps -e | grep enforcer)
2011-03-24 15:24:02.930 - runCommand: Process started, PID: 21616
2011-03-24 15:24:02.930 ERROR:	return code = 1
2011-03-24 15:24:02.930 RunCommand(ps -e | grep signer)
2011-03-24 15:24:02.943 - runCommand: Process started, PID: 21619
2011-03-24 15:24:02.943 ERROR:	return code = 1

2011-03-24 15:24:02.943 00419 Wait(10)

2011-03-24 15:24:02.943 Requirement: ODSCC10

2011-03-24 15:24:12.944 00421 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:24:12.944 Requirement: ODSCC10

2011-03-24 15:24:12.944 00427 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:24:12.944 Requirement: ODSCC10

2011-03-24 15:24:12.944 00430 PurgeHSM()
2011-03-24 15:24:12.944 Requirement: ODSCC10
2011-03-24 15:24:12.944 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:24:12.958 - runCommand: Process started, PID: 21624
2011-03-24 15:24:12.958 ERROR:	hsm_get_slot_id(): could not find token with the name 
2011-03-24 15:24:12.958 ERROR:	SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM
2011-03-24 15:24:12.958 ERROR:	return code = 255

2011-03-24 15:24:12.958 00432 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:24:12.958 Requirement: ODSCC10

2011-03-24 15:24:12.958 00435 LoadConfig()
2011-03-24 15:24:12.958 Requirement: ODSCC10
2011-03-24 15:24:12.958 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T70_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:24:12.962 - runCommand: Process started, PID: 21628

2011-03-24 15:24:12.962 00438 LoadConfig()
2011-03-24 15:24:12.962 Requirement: ODSCC10
2011-03-24 15:24:12.962 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:24:12.964 - runCommand: Process started, PID: 21629

2011-03-24 15:24:12.964 00440 Comment: Update all the configs.

2011-03-24 15:24:12.964 Requirement: ODSCC10

2011-03-24 15:24:12.964 00442 ODSSetup()
2011-03-24 15:24:12.964 Requirement: ODSCC10
2011-03-24 15:24:12.964 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:24:25.789 - runCommand: Process started, PID: 21630
2011-03-24 15:24:25.789 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:24:25.789 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:24:25.789 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:24:25.789 OUTPUT:	Repository SoftHSM found
2011-03-24 15:24:25.790 OUTPUT:	No Maximum Capacity set.
2011-03-24 15:24:25.790 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 15:24:25.790 OUTPUT:	Policy default2 found
2011-03-24 15:24:25.790 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:24:25.790 OUTPUT:	Policy default found
2011-03-24 15:24:25.790 OUTPUT:	Zone ods found
2011-03-24 15:24:25.790 OUTPUT:	Policy set to default.
2011-03-24 15:24:25.790 OUTPUT:	Added zone ods to database
2011-03-24 15:24:25.790 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:24:25.790 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:24:25.790 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:24:25.790 00444 Wait(10)

2011-03-24 15:24:25.790 Requirement: ODSCC10

2011-03-24 15:24:35.790 00446 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:24:35.790 Requirement: ODSCC10

2011-03-24 15:24:35.790 00448 Start()
2011-03-24 15:24:35.790 Requirement: ODSCC10
2011-03-24 15:24:35.790 RunCommand(ods-control start)
2011-03-24 15:24:35.792 - runCommand: Background process started, PID: 21646
2011-03-24 15:24:40.825 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:24:40.838 - runCommand: Process started, PID: 21670
2011-03-24 15:24:40.838 ERROR:	return code = 1
2011-03-24 15:24:40.838 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:24:40.854 - runCommand: Process started, PID: 21675

2011-03-24 15:24:40.854 00450 Comment: Sign the ods zone with the new configs.

2011-03-24 15:24:40.854 Requirement: ODSCC10

2011-03-24 15:24:40.854 00454 Wait(15)

2011-03-24 15:24:40.854 Requirement: ODSCC10

2011-03-24 15:24:55.854 00456 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. 

2011-03-24 15:24:55.855 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T80: Configure an Incorrect PIN and run signing

2011-03-24 15:24:58.529 00464 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:24:58.529 Requirement: ODSCC10

2011-03-24 15:24:58.529 00466 Stop()
2011-03-24 15:24:58.529 Requirement: ODSCC10
2011-03-24 15:24:58.529 RunCommand(ods-control stop)
2011-03-24 15:24:58.533 - runCommand: Process started, PID: 21680
2011-03-24 15:24:58.533 OUTPUT:	Stopping enforcer...
2011-03-24 15:24:58.534 OUTPUT:	Cannot find PID file
2011-03-24 15:24:58.534 OUTPUT:	Stopping signer engine..
2011-03-24 15:24:58.534 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:24:58.534 ERROR:	return code = 1
2011-03-24 15:24:58.534 RunCommand(ps -e | grep enforcer)
2011-03-24 15:24:58.544 - runCommand: Process started, PID: 21683
2011-03-24 15:24:58.544 ERROR:	return code = 1
2011-03-24 15:24:58.544 RunCommand(ps -e | grep signer)
2011-03-24 15:24:58.555 - runCommand: Process started, PID: 21686
2011-03-24 15:24:58.555 ERROR:	return code = 1

2011-03-24 15:24:58.555 00468 Wait(10)

2011-03-24 15:24:58.555 Requirement: ODSCC10

2011-03-24 15:25:08.555 00470 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:25:08.555 Requirement: ODSCC10

2011-03-24 15:25:08.555 00476 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:25:08.555 Requirement: ODSCC10

2011-03-24 15:25:08.555 00479 PurgeHSM()
2011-03-24 15:25:08.555 Requirement: ODSCC10
2011-03-24 15:25:08.555 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:25:08.569 - runCommand: Process started, PID: 21689
2011-03-24 15:25:08.569 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:25:08.569 ERROR:	return code = 255

2011-03-24 15:25:08.570 00481 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:25:08.570 Requirement: ODSCC10

2011-03-24 15:25:08.570 00484 LoadConfig()
2011-03-24 15:25:08.570 Requirement: ODSCC10
2011-03-24 15:25:08.570 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T80_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:25:08.573 - runCommand: Process started, PID: 21693

2011-03-24 15:25:08.573 00487 LoadConfig()
2011-03-24 15:25:08.573 Requirement: ODSCC10
2011-03-24 15:25:08.573 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:25:08.576 - runCommand: Process started, PID: 21694

2011-03-24 15:25:08.576 00489 Comment: Update all the configs.

2011-03-24 15:25:08.576 Requirement: ODSCC10

2011-03-24 15:25:08.576 00491 ODSSetup()
2011-03-24 15:25:08.576 Requirement: ODSCC10
2011-03-24 15:25:08.576 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:25:19.162 - runCommand: Process started, PID: 21695
2011-03-24 15:25:19.162 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:25:19.162 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:25:19.162 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:25:19.162 OUTPUT:	Repository SoftHSM found
2011-03-24 15:25:19.162 OUTPUT:	No Maximum Capacity set.
2011-03-24 15:25:19.162 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 15:25:19.162 OUTPUT:	Policy default2 found
2011-03-24 15:25:19.162 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:25:19.162 OUTPUT:	Policy default found
2011-03-24 15:25:19.162 OUTPUT:	Zone ods found
2011-03-24 15:25:19.162 OUTPUT:	Policy set to default.
2011-03-24 15:25:19.162 OUTPUT:	Added zone ods to database
2011-03-24 15:25:19.162 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:25:19.162 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:25:19.162 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:25:19.163 00493 Wait(10)

2011-03-24 15:25:19.163 Requirement: ODSCC10

2011-03-24 15:25:29.163 00495 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:25:29.163 Requirement: ODSCC10

2011-03-24 15:25:29.163 00497 Start()
2011-03-24 15:25:29.163 Requirement: ODSCC10
2011-03-24 15:25:29.163 RunCommand(ods-control start)
2011-03-24 15:25:29.165 - runCommand: Background process started, PID: 21708
2011-03-24 15:25:34.200 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:25:34.213 - runCommand: Process started, PID: 21731
2011-03-24 15:25:34.213 ERROR:	return code = 1
2011-03-24 15:25:34.213 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:25:34.228 - runCommand: Process started, PID: 21736

2011-03-24 15:25:34.228 00499 Comment: Sign the ods zone with the new configs.

2011-03-24 15:25:34.228 Requirement: ODSCC10

2011-03-24 15:25:34.228 00503 Wait(15)

2011-03-24 15:25:34.228 Requirement: ODSCC10

2011-03-24 15:25:49.229 00505 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. 

2011-03-24 15:25:49.229 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T90: Use correct PIN plus one additional character

2011-03-24 15:25:51.900 00513 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:25:51.900 Requirement: ODSCC10

2011-03-24 15:25:51.900 00515 Stop()
2011-03-24 15:25:51.900 Requirement: ODSCC10
2011-03-24 15:25:51.900 RunCommand(ods-control stop)
2011-03-24 15:25:51.904 - runCommand: Process started, PID: 21741
2011-03-24 15:25:51.904 OUTPUT:	Stopping enforcer...
2011-03-24 15:25:51.904 OUTPUT:	Cannot find PID file
2011-03-24 15:25:51.904 OUTPUT:	Stopping signer engine..
2011-03-24 15:25:51.904 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:25:51.904 ERROR:	return code = 1
2011-03-24 15:25:51.904 RunCommand(ps -e | grep enforcer)
2011-03-24 15:25:51.914 - runCommand: Process started, PID: 21744
2011-03-24 15:25:51.914 ERROR:	return code = 1
2011-03-24 15:25:51.914 RunCommand(ps -e | grep signer)
2011-03-24 15:25:51.924 - runCommand: Process started, PID: 21747
2011-03-24 15:25:51.925 ERROR:	return code = 1

2011-03-24 15:25:51.925 00517 Wait(10)

2011-03-24 15:25:51.925 Requirement: ODSCC10

2011-03-24 15:26:01.925 00519 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:26:01.925 Requirement: ODSCC10

2011-03-24 15:26:01.925 00525 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:26:01.925 Requirement: ODSCC10

2011-03-24 15:26:01.925 00528 PurgeHSM()
2011-03-24 15:26:01.925 Requirement: ODSCC10
2011-03-24 15:26:01.925 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:26:01.940 - runCommand: Process started, PID: 21750
2011-03-24 15:26:01.940 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:26:01.940 ERROR:	return code = 255

2011-03-24 15:26:01.941 00530 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:26:01.941 Requirement: ODSCC10

2011-03-24 15:26:01.941 00533 LoadConfig()
2011-03-24 15:26:01.941 Requirement: ODSCC10
2011-03-24 15:26:01.941 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T90_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:26:01.944 - runCommand: Process started, PID: 21754

2011-03-24 15:26:01.945 00536 LoadConfig()
2011-03-24 15:26:01.945 Requirement: ODSCC10
2011-03-24 15:26:01.945 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:26:01.947 - runCommand: Process started, PID: 21755

2011-03-24 15:26:01.947 00538 Comment: Update all the configs.

2011-03-24 15:26:01.947 Requirement: ODSCC10

2011-03-24 15:26:01.947 00540 ODSSetup()
2011-03-24 15:26:01.947 Requirement: ODSCC10
2011-03-24 15:26:01.947 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:26:13.468 - runCommand: Process started, PID: 21756
2011-03-24 15:26:13.468 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:26:13.468 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:26:13.468 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:26:13.468 OUTPUT:	Repository SoftHSM found
2011-03-24 15:26:13.468 OUTPUT:	No Maximum Capacity set.
2011-03-24 15:26:13.468 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 15:26:13.468 OUTPUT:	Policy default2 found
2011-03-24 15:26:13.468 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:26:13.468 OUTPUT:	Policy default found
2011-03-24 15:26:13.468 OUTPUT:	Zone ods found
2011-03-24 15:26:13.468 OUTPUT:	Policy set to default.
2011-03-24 15:26:13.468 OUTPUT:	Added zone ods to database
2011-03-24 15:26:13.468 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:26:13.468 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:26:13.468 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:26:13.468 00542 Wait(10)

2011-03-24 15:26:13.468 Requirement: ODSCC10

2011-03-24 15:26:23.468 00544 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:26:23.468 Requirement: ODSCC10

2011-03-24 15:26:23.469 00546 Start()
2011-03-24 15:26:23.469 Requirement: ODSCC10
2011-03-24 15:26:23.469 RunCommand(ods-control start)
2011-03-24 15:26:23.471 - runCommand: Background process started, PID: 21769
2011-03-24 15:26:28.505 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:26:28.519 - runCommand: Process started, PID: 21792
2011-03-24 15:26:28.519 ERROR:	return code = 1
2011-03-24 15:26:28.519 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:26:28.535 - runCommand: Process started, PID: 21797

2011-03-24 15:26:28.535 00548 Comment: Sign the ods zone with the new configs.

2011-03-24 15:26:28.535 Requirement: ODSCC10

2011-03-24 15:26:28.535 00552 Wait(15)

2011-03-24 15:26:28.535 Requirement: ODSCC10

2011-03-24 15:26:43.535 00554 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. 

2011-03-24 15:26:43.535 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T100: Use a Repository Capacity of 0 and expect failure

2011-03-24 15:26:46.212 00564 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:26:46.213 Requirement: ODSCC10

2011-03-24 15:26:46.213 00566 Stop()
2011-03-24 15:26:46.213 Requirement: ODSCC10
2011-03-24 15:26:46.213 RunCommand(ods-control stop)
2011-03-24 15:26:46.217 - runCommand: Process started, PID: 21802
2011-03-24 15:26:46.217 OUTPUT:	Stopping enforcer...
2011-03-24 15:26:46.217 OUTPUT:	Cannot find PID file
2011-03-24 15:26:46.217 OUTPUT:	Stopping signer engine..
2011-03-24 15:26:46.217 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:26:46.217 ERROR:	return code = 1
2011-03-24 15:26:46.217 RunCommand(ps -e | grep enforcer)
2011-03-24 15:26:46.227 - runCommand: Process started, PID: 21805
2011-03-24 15:26:46.227 ERROR:	return code = 1
2011-03-24 15:26:46.227 RunCommand(ps -e | grep signer)
2011-03-24 15:26:46.237 - runCommand: Process started, PID: 21808
2011-03-24 15:26:46.237 ERROR:	return code = 1

2011-03-24 15:26:46.237 00568 Wait(10)

2011-03-24 15:26:46.237 Requirement: ODSCC10

2011-03-24 15:26:56.238 00570 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:26:56.238 Requirement: ODSCC10

2011-03-24 15:26:56.238 00576 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:26:56.238 Requirement: ODSCC10

2011-03-24 15:26:56.238 00579 PurgeHSM()
2011-03-24 15:26:56.238 Requirement: ODSCC10
2011-03-24 15:26:56.238 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:26:56.253 - runCommand: Process started, PID: 21811
2011-03-24 15:26:56.253 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:26:56.253 ERROR:	return code = 255

2011-03-24 15:26:56.253 00581 Wait(10)

2011-03-24 15:26:56.253 Requirement: ODSCC10

2011-03-24 15:27:06.253 00583 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:27:06.254 Requirement: ODSCC10

2011-03-24 15:27:06.254 00586 LoadConfig()
2011-03-24 15:27:06.254 Requirement: ODSCC10
2011-03-24 15:27:06.254 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T100_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:27:06.258 - runCommand: Process started, PID: 21815

2011-03-24 15:27:06.259 00589 LoadConfig()
2011-03-24 15:27:06.259 Requirement: ODSCC10
2011-03-24 15:27:06.259 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:27:06.263 - runCommand: Process started, PID: 21816

2011-03-24 15:27:06.263 00591 Comment: Update all the configs.

2011-03-24 15:27:06.263 Requirement: ODSCC10

2011-03-24 15:27:06.263 00593 ODSSetup()
2011-03-24 15:27:06.263 Requirement: ODSCC10
2011-03-24 15:27:06.263 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:27:06.269 - runCommand: Process started, PID: 21817
2011-03-24 15:27:06.269 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error validating file "/etc/opendnssec/conf.xml"
2011-03-24 15:27:06.269 ERROR:	/etc/opendnssec/conf.xml:10: element Capacity: Relax-NG validity error : Type positiveInteger doesn't allow value '0'
2011-03-24 15:27:06.269 ERROR:	/etc/opendnssec/conf.xml:10: element Capacity: Relax-NG validity error : Error validating datatype positiveInteger
2011-03-24 15:27:06.269 ERROR:	/etc/opendnssec/conf.xml:10: element Capacity: Relax-NG validity error : Element Capacity failed to validate content
2011-03-24 15:27:06.269 ERROR:	return code = 255

2011-03-24 15:27:06.269 00595 Wait(10)

2011-03-24 15:27:06.269 Requirement: ODSCC10

2011-03-24 15:27:16.269 00597 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:27:16.270 Requirement: ODSCC10

2011-03-24 15:27:16.270 00599 Start()
2011-03-24 15:27:16.270 Requirement: ODSCC10
2011-03-24 15:27:16.270 RunCommand(ods-control start)
2011-03-24 15:27:16.272 - runCommand: Background process started, PID: 21820
2011-03-24 15:27:26.318 ERROR:	return code = 1
2011-03-24 15:27:26.318 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:27:26.337 - runCommand: Process started, PID: 21848
2011-03-24 15:27:26.337 ERROR:	return code = 1
2011-03-24 15:27:26.337 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:27:26.350 - runCommand: Process started, PID: 21852

2011-03-24 15:27:26.351 00601 Comment: Sign the ods zone with the new configs.

2011-03-24 15:27:26.351 Requirement: ODSCC10

2011-03-24 15:27:26.351 00605 Wait(15)

2011-03-24 15:27:26.351 Requirement: ODSCC10

2011-03-24 15:27:41.351 00607 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. 

2011-03-24 15:27:41.351 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T110: Use a Repository Capacity of 1 and expect failure

2011-03-24 15:27:44.213 00617 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:27:44.213 Requirement: ODSCC10

2011-03-24 15:27:44.215 00619 Stop()
2011-03-24 15:27:44.215 Requirement: ODSCC10
2011-03-24 15:27:44.215 RunCommand(ods-control stop)
2011-03-24 15:27:44.258 - runCommand: Process started, PID: 21857
2011-03-24 15:27:44.258 OUTPUT:	Stopping enforcer...
2011-03-24 15:27:44.258 OUTPUT:	Cannot find PID file
2011-03-24 15:27:44.258 OUTPUT:	Stopping signer engine..
2011-03-24 15:27:44.258 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:27:44.259 ERROR:	return code = 1
2011-03-24 15:27:44.259 RunCommand(ps -e | grep enforcer)
2011-03-24 15:27:44.358 - runCommand: Process started, PID: 21860
2011-03-24 15:27:44.359 ERROR:	return code = 1
2011-03-24 15:27:44.359 RunCommand(ps -e | grep signer)
2011-03-24 15:27:44.468 - runCommand: Process started, PID: 21863
2011-03-24 15:27:44.469 ERROR:	return code = 1

2011-03-24 15:27:44.470 00621 Wait(10)

2011-03-24 15:27:44.471 Requirement: ODSCC10

2011-03-24 15:27:54.473 00623 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:27:54.474 Requirement: ODSCC10

2011-03-24 15:27:54.475 00629 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:27:54.476 Requirement: ODSCC10

2011-03-24 15:27:54.477 00632 PurgeHSM()
2011-03-24 15:27:54.477 Requirement: ODSCC10
2011-03-24 15:27:54.478 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:27:54.627 - runCommand: Process started, PID: 21866
2011-03-24 15:27:54.628 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:27:54.628 ERROR:	return code = 255

2011-03-24 15:27:54.630 00634 Wait(10)

2011-03-24 15:27:54.630 Requirement: ODSCC10

2011-03-24 15:28:04.633 00637 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:28:04.634 Requirement: ODSCC10

2011-03-24 15:28:04.635 00640 LoadConfig()
2011-03-24 15:28:04.636 Requirement: ODSCC10
2011-03-24 15:28:04.636 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T110_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:28:04.684 - runCommand: Process started, PID: 21870

2011-03-24 15:28:04.687 00643 LoadConfig()
2011-03-24 15:28:04.687 Requirement: ODSCC10
2011-03-24 15:28:04.687 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:28:04.726 - runCommand: Process started, PID: 21871

2011-03-24 15:28:04.728 00645 Comment: Update all the configs.

2011-03-24 15:28:04.729 Requirement: ODSCC10

2011-03-24 15:28:04.730 00647 ODSSetup()
2011-03-24 15:28:04.731 Requirement: ODSCC10
2011-03-24 15:28:04.731 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:28:14.864 - runCommand: Process started, PID: 21872
2011-03-24 15:28:14.864 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:28:14.864 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:28:14.864 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:28:14.864 OUTPUT:	Repository SoftHSM found
2011-03-24 15:28:14.864 OUTPUT:	Capacity set to 1.
2011-03-24 15:28:14.864 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 15:28:14.864 OUTPUT:	Policy default2 found
2011-03-24 15:28:14.864 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:28:14.864 OUTPUT:	Policy default found
2011-03-24 15:28:14.864 OUTPUT:	Zone ods found
2011-03-24 15:28:14.864 OUTPUT:	Policy set to default.
2011-03-24 15:28:14.864 OUTPUT:	Added zone ods to database
2011-03-24 15:28:14.864 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:28:14.864 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:28:14.864 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:28:14.864 00649 Wait(10)

2011-03-24 15:28:14.864 Requirement: ODSCC10

2011-03-24 15:28:24.865 00651 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:28:24.865 Requirement: ODSCC10

2011-03-24 15:28:24.865 00653 Start()
2011-03-24 15:28:24.865 Requirement: ODSCC10
2011-03-24 15:28:24.865 RunCommand(ods-control start)
2011-03-24 15:28:24.867 - runCommand: Background process started, PID: 21885
2011-03-24 15:28:29.900 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:28:29.918 - runCommand: Process started, PID: 21909
2011-03-24 15:28:29.918 ERROR:	return code = 1
2011-03-24 15:28:29.918 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:28:29.933 - runCommand: Process started, PID: 21914

2011-03-24 15:28:29.933 00655 Comment: Sign the ods zone with the new configs.

2011-03-24 15:28:29.933 Requirement: ODSCC10

2011-03-24 15:28:29.933 00659 Wait(15)

2011-03-24 15:28:29.933 Requirement: ODSCC10

2011-03-24 15:28:44.934 00661 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. 

2011-03-24 15:28:44.934 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T120: Use a Repository Capacity of 4 and expect success

2011-03-24 15:28:47.607 00670 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:28:47.607 Requirement: ODSCC10

2011-03-24 15:28:47.607 00672 Stop()
2011-03-24 15:28:47.607 Requirement: ODSCC10
2011-03-24 15:28:47.607 RunCommand(ods-control stop)
2011-03-24 15:28:47.611 - runCommand: Process started, PID: 21919
2011-03-24 15:28:47.611 OUTPUT:	Stopping enforcer...
2011-03-24 15:28:47.611 OUTPUT:	Cannot find PID file
2011-03-24 15:28:47.611 OUTPUT:	Stopping signer engine..
2011-03-24 15:28:47.611 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:28:47.611 ERROR:	return code = 1
2011-03-24 15:28:47.611 RunCommand(ps -e | grep enforcer)
2011-03-24 15:28:47.621 - runCommand: Process started, PID: 21922
2011-03-24 15:28:47.621 ERROR:	return code = 1
2011-03-24 15:28:47.621 RunCommand(ps -e | grep signer)
2011-03-24 15:28:47.631 - runCommand: Process started, PID: 21925
2011-03-24 15:28:47.632 ERROR:	return code = 1

2011-03-24 15:28:47.632 00674 Wait(10)

2011-03-24 15:28:47.632 Requirement: ODSCC10

2011-03-24 15:28:57.632 00676 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:28:57.632 Requirement: ODSCC10

2011-03-24 15:28:57.632 00682 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:28:57.632 Requirement: ODSCC10

2011-03-24 15:28:57.632 00685 PurgeHSM()
2011-03-24 15:28:57.632 Requirement: ODSCC10
2011-03-24 15:28:57.632 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:28:57.646 - runCommand: Process started, PID: 21928
2011-03-24 15:28:57.647 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:28:57.647 ERROR:	return code = 255

2011-03-24 15:28:57.647 00687 Wait(10)

2011-03-24 15:28:57.647 Requirement: ODSCC10

2011-03-24 15:29:07.647 00689 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:29:07.647 Requirement: ODSCC10

2011-03-24 15:29:07.647 00692 LoadConfig()
2011-03-24 15:29:07.647 Requirement: ODSCC10
2011-03-24 15:29:07.647 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T120_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:29:07.652 - runCommand: Process started, PID: 21932

2011-03-24 15:29:07.652 00695 LoadConfig()
2011-03-24 15:29:07.652 Requirement: ODSCC10
2011-03-24 15:29:07.652 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:29:07.656 - runCommand: Process started, PID: 21933

2011-03-24 15:29:07.656 00697 Comment: Update all the configs.

2011-03-24 15:29:07.656 Requirement: ODSCC10

2011-03-24 15:29:07.657 00699 ODSSetup()
2011-03-24 15:29:07.657 Requirement: ODSCC10
2011-03-24 15:29:07.657 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:29:18.823 - runCommand: Process started, PID: 21934
2011-03-24 15:29:18.823 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:29:18.823 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:29:18.823 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:29:18.823 OUTPUT:	Repository SoftHSM found
2011-03-24 15:29:18.823 OUTPUT:	Capacity set to 4.
2011-03-24 15:29:18.823 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 15:29:18.823 OUTPUT:	Policy default2 found
2011-03-24 15:29:18.823 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:29:18.823 OUTPUT:	Policy default found
2011-03-24 15:29:18.823 OUTPUT:	Zone ods found
2011-03-24 15:29:18.823 OUTPUT:	Policy set to default.
2011-03-24 15:29:18.823 OUTPUT:	Added zone ods to database
2011-03-24 15:29:18.823 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:29:18.823 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:29:18.823 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:29:18.823 00701 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:29:18.823 Requirement: ODSCC10

2011-03-24 15:29:18.823 00703 Start()
2011-03-24 15:29:18.824 Requirement: ODSCC10
2011-03-24 15:29:18.824 RunCommand(ods-control start)
2011-03-24 15:29:18.825 - runCommand: Background process started, PID: 21947
2011-03-24 15:29:23.859 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:29:23.875 - runCommand: Process started, PID: 21970
2011-03-24 15:29:23.876 ERROR:	return code = 1
2011-03-24 15:29:23.876 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:29:23.889 - runCommand: Process started, PID: 21975

2011-03-24 15:29:23.890 00705 Wait(10)

2011-03-24 15:29:23.890 Requirement: ODSCC10

2011-03-24 15:29:33.890 00707 Comment: Sign the ods zone with the new configs.

2011-03-24 15:29:33.890 Requirement: ODSCC10

2011-03-24 15:29:33.890 00711 Wait(15)

2011-03-24 15:29:33.890 Requirement: ODSCC10

2011-03-24 15:29:48.890 00713 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-24 15:29:48.890 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T130: Use a Repository Capacity of 100000 and expect success

2011-03-24 15:29:51.552 00723 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:29:51.552 Requirement: ODSCC10

2011-03-24 15:29:51.553 00725 Stop()
2011-03-24 15:29:51.553 Requirement: ODSCC10
2011-03-24 15:29:51.553 RunCommand(ods-control stop)
2011-03-24 15:29:51.557 - runCommand: Process started, PID: 21982
2011-03-24 15:29:51.557 OUTPUT:	Stopping enforcer...
2011-03-24 15:29:51.557 OUTPUT:	Cannot find PID file
2011-03-24 15:29:51.557 OUTPUT:	Stopping signer engine..
2011-03-24 15:29:51.557 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:29:51.557 ERROR:	return code = 1
2011-03-24 15:29:51.557 RunCommand(ps -e | grep enforcer)
2011-03-24 15:29:51.567 - runCommand: Process started, PID: 21985
2011-03-24 15:29:51.567 ERROR:	return code = 1
2011-03-24 15:29:51.567 RunCommand(ps -e | grep signer)
2011-03-24 15:29:51.577 - runCommand: Process started, PID: 21988
2011-03-24 15:29:51.577 ERROR:	return code = 1

2011-03-24 15:29:51.578 00727 Wait(10)

2011-03-24 15:29:51.578 Requirement: ODSCC10

2011-03-24 15:30:01.578 00729 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:30:01.578 Requirement: ODSCC10

2011-03-24 15:30:01.578 00735 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:30:01.578 Requirement: ODSCC10

2011-03-24 15:30:01.578 00738 PurgeHSM()
2011-03-24 15:30:01.578 Requirement: ODSCC10
2011-03-24 15:30:01.578 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:30:01.595 - runCommand: Process started, PID: 21991
2011-03-24 15:30:01.595 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:30:01.595 ERROR:	return code = 255

2011-03-24 15:30:01.595 00740 Wait(10)

2011-03-24 15:30:01.595 Requirement: ODSCC10

2011-03-24 15:30:11.596 00743 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:30:11.596 Requirement: ODSCC10

2011-03-24 15:30:11.596 00746 LoadConfig()
2011-03-24 15:30:11.596 Requirement: ODSCC10
2011-03-24 15:30:11.596 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T130_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:30:11.601 - runCommand: Process started, PID: 21995

2011-03-24 15:30:11.601 00749 LoadConfig()
2011-03-24 15:30:11.601 Requirement: ODSCC10
2011-03-24 15:30:11.601 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:30:11.605 - runCommand: Process started, PID: 21996

2011-03-24 15:30:11.605 00751 Comment: Update all the configs.

2011-03-24 15:30:11.605 Requirement: ODSCC10

2011-03-24 15:30:11.605 00753 ODSSetup()
2011-03-24 15:30:11.605 Requirement: ODSCC10
2011-03-24 15:30:11.605 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:30:22.915 - runCommand: Process started, PID: 21997
2011-03-24 15:30:22.915 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:30:22.915 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:30:22.915 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:30:22.915 OUTPUT:	Repository SoftHSM found
2011-03-24 15:30:22.915 OUTPUT:	Capacity set to 100000.
2011-03-24 15:30:22.915 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 15:30:22.915 OUTPUT:	Policy default2 found
2011-03-24 15:30:22.915 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:30:22.915 OUTPUT:	Policy default found
2011-03-24 15:30:22.915 OUTPUT:	Zone ods found
2011-03-24 15:30:22.915 OUTPUT:	Policy set to default.
2011-03-24 15:30:22.915 OUTPUT:	Added zone ods to database
2011-03-24 15:30:22.915 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:30:22.915 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:30:22.915 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:30:22.916 00755 Wait(10)

2011-03-24 15:30:22.916 Requirement: ODSCC10

2011-03-24 15:30:32.916 00757 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:30:32.916 Requirement: ODSCC10

2011-03-24 15:30:32.916 00759 Start()
2011-03-24 15:30:32.916 Requirement: ODSCC10
2011-03-24 15:30:32.916 RunCommand(ods-control start)
2011-03-24 15:30:32.918 - runCommand: Background process started, PID: 22010
2011-03-24 15:30:37.951 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:30:37.965 - runCommand: Process started, PID: 22033
2011-03-24 15:30:37.965 ERROR:	return code = 1
2011-03-24 15:30:37.965 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:30:37.981 - runCommand: Process started, PID: 22038

2011-03-24 15:30:37.982 00761 Comment: Sign the ods zone with the new configs.

2011-03-24 15:30:37.982 Requirement: ODSCC10

2011-03-24 15:30:37.982 00765 Wait(15)

2011-03-24 15:30:37.982 Requirement: ODSCC10

2011-03-24 15:30:52.982 00767 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-24 15:30:52.982 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T140: RequireBackup turned off and check if backup is not required to use a key

2011-03-24 15:30:55.664 00777 Comment: RequireBackup is an optional element that specifies that keys from this repository may not be used until they are backed up. If backup has been done, then use ods-ksmutil to notify OpenDNSSEC about this. The backup notification is needed for OpenDNSSEC to be able to complete a key rollover.

2011-03-24 15:30:55.664 Requirement: ODSCC10

2011-03-24 15:30:55.665 00778 Comment: This has been already tested in DSCC10T10

2011-03-24 15:30:55.665 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T150: RequireBackup turned on and check if backup is required to use a key

2011-03-24 15:30:55.665 00788 Comment: RequireBackup is an optional element that specifies that keys from this repository may not be used until they are backed up. If backup has been done, then use ods-ksmutil to notify OpenDNSSEC about this. The backup notification is needed for OpenDNSSEC to be able to complete a key rollover.

2011-03-24 15:30:55.665 Requirement: ODSCC10

2011-03-24 15:30:55.665 00789 Comment: 

2011-03-24 15:30:55.665 Requirement: ODSCC10

2011-03-24 15:30:55.665 00791 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:30:55.665 Requirement: ODSCC10

2011-03-24 15:30:55.665 00793 Stop()
2011-03-24 15:30:55.665 Requirement: ODSCC10
2011-03-24 15:30:55.665 RunCommand(ods-control stop)
2011-03-24 15:30:55.669 - runCommand: Process started, PID: 22043
2011-03-24 15:30:55.669 OUTPUT:	Stopping enforcer...
2011-03-24 15:30:55.669 OUTPUT:	Cannot find PID file
2011-03-24 15:30:55.669 OUTPUT:	Stopping signer engine..
2011-03-24 15:30:55.669 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:30:55.669 ERROR:	return code = 1
2011-03-24 15:30:55.669 RunCommand(ps -e | grep enforcer)
2011-03-24 15:30:55.679 - runCommand: Process started, PID: 22046
2011-03-24 15:30:55.679 ERROR:	return code = 1
2011-03-24 15:30:55.679 RunCommand(ps -e | grep signer)
2011-03-24 15:30:55.690 - runCommand: Process started, PID: 22049
2011-03-24 15:30:55.690 ERROR:	return code = 1

2011-03-24 15:30:55.690 00795 Wait(10)

2011-03-24 15:30:55.690 Requirement: ODSCC10

2011-03-24 15:31:05.690 00797 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:31:05.690 Requirement: ODSCC10

2011-03-24 15:31:05.691 00803 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:31:05.691 Requirement: ODSCC10

2011-03-24 15:31:05.691 00806 PurgeHSM()
2011-03-24 15:31:05.691 Requirement: ODSCC10
2011-03-24 15:31:05.691 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:31:05.703 - runCommand: Process started, PID: 22052
2011-03-24 15:31:05.703 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:31:05.703 ERROR:	return code = 255

2011-03-24 15:31:05.703 00808 Wait(10)

2011-03-24 15:31:05.703 Requirement: ODSCC10

2011-03-24 15:31:15.703 00810 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:31:15.703 Requirement: ODSCC10

2011-03-24 15:31:15.703 00813 LoadConfig()
2011-03-24 15:31:15.703 Requirement: ODSCC10
2011-03-24 15:31:15.703 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T150_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:31:15.708 - runCommand: Process started, PID: 22056

2011-03-24 15:31:15.709 00816 LoadConfig()
2011-03-24 15:31:15.709 Requirement: ODSCC10
2011-03-24 15:31:15.709 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:31:15.712 - runCommand: Process started, PID: 22057

2011-03-24 15:31:15.713 00818 Comment: Update all the configs.

2011-03-24 15:31:15.713 Requirement: ODSCC10

2011-03-24 15:31:15.713 00820 ODSSetup()
2011-03-24 15:31:15.713 Requirement: ODSCC10
2011-03-24 15:31:15.713 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:31:27.659 - runCommand: Process started, PID: 22058
2011-03-24 15:31:27.660 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:31:27.660 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:31:27.660 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:31:27.660 OUTPUT:	Repository SoftHSM found
2011-03-24 15:31:27.660 OUTPUT:	Capacity set to 10.
2011-03-24 15:31:27.661 OUTPUT:	RequireBackup set.
2011-03-24 15:31:27.661 OUTPUT:	Policy default2 found
2011-03-24 15:31:27.661 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:31:27.661 OUTPUT:	Policy default found
2011-03-24 15:31:27.661 OUTPUT:	Zone ods found
2011-03-24 15:31:27.661 OUTPUT:	Policy set to default.
2011-03-24 15:31:27.662 OUTPUT:	Added zone ods to database
2011-03-24 15:31:27.662 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:31:27.662 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:31:27.662 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:31:27.664 00822 Wait(10)

2011-03-24 15:31:27.664 Requirement: ODSCC10

2011-03-24 15:31:37.667 00824 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:31:37.667 Requirement: ODSCC10

2011-03-24 15:31:37.669 00826 Start()
2011-03-24 15:31:37.669 Requirement: ODSCC10
2011-03-24 15:31:37.669 RunCommand(ods-control start)
2011-03-24 15:31:37.688 - runCommand: Background process started, PID: 22071
2011-03-24 15:31:42.102 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:31:42.123 - runCommand: Process started, PID: 22094
2011-03-24 15:31:42.123 ERROR:	return code = 1
2011-03-24 15:31:42.123 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:31:42.136 - runCommand: Process started, PID: 22099

2011-03-24 15:31:42.137 00828 Comment: Sign the ods zone with the new configs.

2011-03-24 15:31:42.137 Requirement: ODSCC10

2011-03-24 15:31:42.137 00832 Wait(15)

2011-03-24 15:31:42.137 Requirement: ODSCC10

2011-03-24 15:31:57.137 00834 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. 

2011-03-24 15:31:57.137 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T160: RequireBackup turned on, backup keys, and sign zone

2011-03-24 15:31:59.821 00844 Comment: RequireBackup is an optional element that specifies that keys from this repository may not be used until they are backed up. If backup has been done, then use ods-ksmutil to notify OpenDNSSEC about this. The backup notification is needed for OpenDNSSEC to be able to complete a key rollover.

2011-03-24 15:31:59.821 Requirement: ODSCC10

2011-03-24 15:31:59.821 00845 Comment: 

2011-03-24 15:31:59.821 Requirement: ODSCC10

2011-03-24 15:31:59.821 00847 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:31:59.821 Requirement: ODSCC10

2011-03-24 15:31:59.821 00849 Stop()
2011-03-24 15:31:59.821 Requirement: ODSCC10
2011-03-24 15:31:59.821 RunCommand(ods-control stop)
2011-03-24 15:31:59.825 - runCommand: Process started, PID: 22104
2011-03-24 15:31:59.825 OUTPUT:	Stopping enforcer...
2011-03-24 15:31:59.825 OUTPUT:	Cannot find PID file
2011-03-24 15:31:59.825 OUTPUT:	Stopping signer engine..
2011-03-24 15:31:59.825 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:31:59.825 ERROR:	return code = 1
2011-03-24 15:31:59.825 RunCommand(ps -e | grep enforcer)
2011-03-24 15:31:59.835 - runCommand: Process started, PID: 22107
2011-03-24 15:31:59.835 ERROR:	return code = 1
2011-03-24 15:31:59.835 RunCommand(ps -e | grep signer)
2011-03-24 15:31:59.847 - runCommand: Process started, PID: 22110
2011-03-24 15:31:59.847 ERROR:	return code = 1

2011-03-24 15:31:59.847 00851 Wait(10)

2011-03-24 15:31:59.847 Requirement: ODSCC10

2011-03-24 15:32:09.847 00853 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:32:09.847 Requirement: ODSCC10

2011-03-24 15:32:09.848 00859 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:32:09.848 Requirement: ODSCC10

2011-03-24 15:32:09.848 00862 PurgeHSM()
2011-03-24 15:32:09.848 Requirement: ODSCC10
2011-03-24 15:32:09.848 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:32:09.867 - runCommand: Process started, PID: 22113
2011-03-24 15:32:09.867 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:32:09.867 ERROR:	return code = 255

2011-03-24 15:32:09.867 00864 Wait(10)

2011-03-24 15:32:09.867 Requirement: ODSCC10

2011-03-24 15:32:19.868 00867 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:32:19.868 Requirement: ODSCC10

2011-03-24 15:32:19.868 00870 LoadConfig()
2011-03-24 15:32:19.868 Requirement: ODSCC10
2011-03-24 15:32:19.868 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T160_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:32:19.873 - runCommand: Process started, PID: 22117

2011-03-24 15:32:19.873 00873 LoadConfig()
2011-03-24 15:32:19.873 Requirement: ODSCC10
2011-03-24 15:32:19.873 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:32:19.877 - runCommand: Process started, PID: 22118

2011-03-24 15:32:19.877 00875 Comment: Update all the configs.

2011-03-24 15:32:19.877 Requirement: ODSCC10

2011-03-24 15:32:19.877 00877 ODSSetup()
2011-03-24 15:32:19.877 Requirement: ODSCC10
2011-03-24 15:32:19.877 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:32:30.358 - runCommand: Process started, PID: 22119
2011-03-24 15:32:30.358 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:32:30.358 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:32:30.358 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:32:30.358 OUTPUT:	Repository SoftHSM found
2011-03-24 15:32:30.358 OUTPUT:	Capacity set to 10.
2011-03-24 15:32:30.358 OUTPUT:	RequireBackup set.
2011-03-24 15:32:30.358 OUTPUT:	Policy default2 found
2011-03-24 15:32:30.358 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:32:30.358 OUTPUT:	Policy default found
2011-03-24 15:32:30.358 OUTPUT:	Zone ods found
2011-03-24 15:32:30.358 OUTPUT:	Policy set to default.
2011-03-24 15:32:30.358 OUTPUT:	Added zone ods to database
2011-03-24 15:32:30.358 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:32:30.358 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:32:30.358 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:32:30.359 00879 Wait(10)

2011-03-24 15:32:30.359 Requirement: ODSCC10

2011-03-24 15:32:40.359 00881 Comment: Prepare the backup by telling the Enforcer that you want to do backup of the keys.

2011-03-24 15:32:40.359 Requirement: ODSCC10

2011-03-24 15:32:40.359 00885 Wait(5)

2011-03-24 15:32:40.359 Requirement: ODSCC10

2011-03-24 15:32:45.359 00887 Comment: Backup keys is not a part of ODS (part of the HSM), and can therefor be skipped. Let the enforcer know that the backup step has been done.

2011-03-24 15:32:45.359 Requirement: ODSCC10

2011-03-24 15:32:45.360 00891 Wait(5)

2011-03-24 15:32:45.360 Requirement: ODSCC10

2011-03-24 15:32:50.360 00893 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:32:50.360 Requirement: ODSCC10

2011-03-24 15:32:50.360 00895 Start()
2011-03-24 15:32:50.360 Requirement: ODSCC10
2011-03-24 15:32:50.360 RunCommand(ods-control start)
2011-03-24 15:32:50.362 - runCommand: Background process started, PID: 22132
2011-03-24 15:32:55.396 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:32:55.410 - runCommand: Process started, PID: 22156
2011-03-24 15:32:55.410 ERROR:	return code = 1
2011-03-24 15:32:55.410 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:32:55.425 - runCommand: Process started, PID: 22161

2011-03-24 15:32:55.425 00897 Wait(10)

2011-03-24 15:32:55.425 Requirement: ODSCC10

2011-03-24 15:33:05.425 00899 Comment: Sign the ods zone with the new configs.

2011-03-24 15:33:05.425 Requirement: ODSCC10

2011-03-24 15:33:05.426 00903 Wait(15)

2011-03-24 15:33:05.426 Requirement: ODSCC10

2011-03-24 15:33:20.426 00905 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-24 15:33:20.426 Requirement: ODSCC10
Testcondition - ODSCC20: The configuration of common settings located in conf.xml should operate according to requirements and intentions
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSCC20T10: Set logging to a different channel and check if only the new channel receives ODS logging

2011-03-24 15:33:23.106 00916 Comment: Channel "local5" is used in the xml template instead of "local0".

2011-03-24 15:33:23.107 Requirement: ODSCC20

2011-03-24 15:33:23.107 00918 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:33:23.107 Requirement: ODSCC20

2011-03-24 15:33:23.107 00920 Stop()
2011-03-24 15:33:23.107 Requirement: ODSCC20
2011-03-24 15:33:23.107 RunCommand(ods-control stop)
2011-03-24 15:33:23.111 - runCommand: Process started, PID: 22166
2011-03-24 15:33:23.111 OUTPUT:	Stopping enforcer...
2011-03-24 15:33:23.111 OUTPUT:	Cannot find PID file
2011-03-24 15:33:23.111 OUTPUT:	Stopping signer engine..
2011-03-24 15:33:23.111 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:33:23.111 ERROR:	return code = 1
2011-03-24 15:33:23.111 RunCommand(ps -e | grep enforcer)
2011-03-24 15:33:23.121 - runCommand: Process started, PID: 22169
2011-03-24 15:33:23.121 ERROR:	return code = 1
2011-03-24 15:33:23.121 RunCommand(ps -e | grep signer)
2011-03-24 15:33:23.131 - runCommand: Process started, PID: 22172
2011-03-24 15:33:23.131 ERROR:	return code = 1

2011-03-24 15:33:23.132 00922 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:33:23.132 Requirement: ODSCC20

2011-03-24 15:33:23.132 00928 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:33:23.132 Requirement: ODSCC20

2011-03-24 15:33:23.132 00931 PurgeHSM()
2011-03-24 15:33:23.132 Requirement: ODSCC20
2011-03-24 15:33:23.132 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:33:23.141 - runCommand: Process started, PID: 22175
2011-03-24 15:33:23.141 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:33:23.141 ERROR:	return code = 255

2011-03-24 15:33:23.141 00933 Wait(10)

2011-03-24 15:33:23.141 Requirement: ODSCC20

2011-03-24 15:33:33.142 00935 Wait(10)

2011-03-24 15:33:33.142 Requirement: ODSCC20

2011-03-24 15:33:43.142 00937 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:33:43.142 Requirement: ODSCC20

2011-03-24 15:33:43.142 00940 LoadConfig()
2011-03-24 15:33:43.142 Requirement: ODSCC20
2011-03-24 15:33:43.142 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:33:43.147 - runCommand: Process started, PID: 22179

2011-03-24 15:33:43.147 00943 LoadConfig()
2011-03-24 15:33:43.147 Requirement: ODSCC20
2011-03-24 15:33:43.147 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:33:43.151 - runCommand: Process started, PID: 22180

2011-03-24 15:33:43.151 00945 Comment: Syslog needs to be changed for this testcase. Ods.log is configured for local5 instead of local0

2011-03-24 15:33:43.151 Requirement: ODSCC20

2011-03-24 15:33:43.151 00947 Comment: Update all the configs.

2011-03-24 15:33:43.152 Requirement: ODSCC20

2011-03-24 15:33:43.152 00949 ODSSetup()
2011-03-24 15:33:43.152 Requirement: ODSCC20
2011-03-24 15:33:43.152 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:33:54.623 - runCommand: Process started, PID: 22181
2011-03-24 15:33:54.623 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:33:54.623 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:33:54.623 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:33:54.623 OUTPUT:	Repository SoftHSM found
2011-03-24 15:33:54.623 OUTPUT:	Capacity set to 10.
2011-03-24 15:33:54.623 OUTPUT:	RequireBackup set.
2011-03-24 15:33:54.623 OUTPUT:	Policy default2 found
2011-03-24 15:33:54.624 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:33:54.624 OUTPUT:	Policy default found
2011-03-24 15:33:54.624 OUTPUT:	Zone ods found
2011-03-24 15:33:54.624 OUTPUT:	Policy set to default.
2011-03-24 15:33:54.624 OUTPUT:	Added zone ods to database
2011-03-24 15:33:54.624 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:33:54.624 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:33:54.624 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:33:54.624 00951 Wait(10)

2011-03-24 15:33:54.624 Requirement: ODSCC20

2011-03-24 15:34:04.624 00953 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:34:04.624 Requirement: ODSCC20

2011-03-24 15:34:04.624 00955 Start()
2011-03-24 15:34:04.624 Requirement: ODSCC20
2011-03-24 15:34:04.624 RunCommand(ods-control start)
2011-03-24 15:34:04.626 - runCommand: Background process started, PID: 22194
2011-03-24 15:34:09.659 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:34:09.676 - runCommand: Process started, PID: 22218
2011-03-24 15:34:09.676 ERROR:	return code = 1
2011-03-24 15:34:09.676 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:34:09.691 - runCommand: Process started, PID: 22223

2011-03-24 15:34:09.691 00957 Comment: Sign the ods zone with the new configs.

2011-03-24 15:34:09.691 Requirement: ODSCC20

2011-03-24 15:34:09.691 00961 Wait(15)

2011-03-24 15:34:09.691 Requirement: ODSCC20

2011-03-24 15:34:24.691 00963 Comment: Check if the logging is succesfull. If a notify (new zonefile update) is available in, the signing & logging is succesful.

2011-03-24 15:34:24.691 Requirement: ODSCC20

-------------------------------------------------------------------------------
Testcase - ODSCC20T20: Set logging to a different channel and check if only the new channel receives ODS logging

2011-03-24 15:34:27.373 00971 Comment: Channel "local10" is used in the xml template instead of "local0". Local10 is not allowed according tot specs. Only a value between local0 & local7 is allowed.

2011-03-24 15:34:27.373 Requirement: ODSCC20

2011-03-24 15:34:27.373 00973 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:34:27.373 Requirement: ODSCC20

2011-03-24 15:34:27.374 00975 Stop()
2011-03-24 15:34:27.374 Requirement: ODSCC20
2011-03-24 15:34:27.374 RunCommand(ods-control stop)
2011-03-24 15:34:27.378 - runCommand: Process started, PID: 22228
2011-03-24 15:34:27.378 OUTPUT:	Stopping enforcer...
2011-03-24 15:34:27.378 OUTPUT:	Cannot find PID file
2011-03-24 15:34:27.378 OUTPUT:	Stopping signer engine..
2011-03-24 15:34:27.378 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:34:27.378 ERROR:	return code = 1
2011-03-24 15:34:27.378 RunCommand(ps -e | grep enforcer)
2011-03-24 15:34:27.388 - runCommand: Process started, PID: 22231
2011-03-24 15:34:27.388 ERROR:	return code = 1
2011-03-24 15:34:27.388 RunCommand(ps -e | grep signer)
2011-03-24 15:34:27.398 - runCommand: Process started, PID: 22234
2011-03-24 15:34:27.398 ERROR:	return code = 1

2011-03-24 15:34:27.399 00977 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:34:27.399 Requirement: ODSCC20

2011-03-24 15:34:27.399 00983 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:34:27.399 Requirement: ODSCC20

2011-03-24 15:34:27.399 00986 PurgeHSM()
2011-03-24 15:34:27.399 Requirement: ODSCC20
2011-03-24 15:34:27.399 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:34:27.411 - runCommand: Process started, PID: 22237
2011-03-24 15:34:27.411 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:34:27.411 ERROR:	return code = 255

2011-03-24 15:34:27.411 00988 Wait(10)

2011-03-24 15:34:27.411 Requirement: ODSCC20

2011-03-24 15:34:37.411 00990 Wait(10)

2011-03-24 15:34:37.411 Requirement: ODSCC20

2011-03-24 15:34:47.412 00992 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:34:47.412 Requirement: ODSCC20

2011-03-24 15:34:47.412 00995 LoadConfig()
2011-03-24 15:34:47.412 Requirement: ODSCC20
2011-03-24 15:34:47.412 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:34:47.417 - runCommand: Process started, PID: 22241

2011-03-24 15:34:47.417 00998 LoadConfig()
2011-03-24 15:34:47.417 Requirement: ODSCC20
2011-03-24 15:34:47.417 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:34:47.421 - runCommand: Process started, PID: 22242

2011-03-24 15:34:47.421 01000 Comment: Syslog needs to be changed for this testcase. Ods.log is configured for local10 instead of local0

2011-03-24 15:34:47.421 Requirement: ODSCC20

2011-03-24 15:34:47.421 01002 Comment: Update all the configs.

2011-03-24 15:34:47.421 Requirement: ODSCC20

2011-03-24 15:34:47.421 01004 ODSSetup()
2011-03-24 15:34:47.421 Requirement: ODSCC20
2011-03-24 15:34:47.421 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:34:58.579 - runCommand: Process started, PID: 22243
2011-03-24 15:34:58.580 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:34:58.581 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:34:58.581 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:34:58.581 OUTPUT:	Repository SoftHSM found
2011-03-24 15:34:58.581 OUTPUT:	Capacity set to 10.
2011-03-24 15:34:58.581 OUTPUT:	RequireBackup set.
2011-03-24 15:34:58.581 OUTPUT:	Policy default2 found
2011-03-24 15:34:58.582 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:34:58.582 OUTPUT:	Policy default found
2011-03-24 15:34:58.582 OUTPUT:	Zone ods found
2011-03-24 15:34:58.582 OUTPUT:	Policy set to default.
2011-03-24 15:34:58.582 OUTPUT:	Added zone ods to database
2011-03-24 15:34:58.582 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:34:58.583 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:34:58.583 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:34:58.585 01006 Wait(10)

2011-03-24 15:34:58.585 Requirement: ODSCC20

2011-03-24 15:35:08.588 01008 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:35:08.588 Requirement: ODSCC20

2011-03-24 15:35:08.590 01010 Start()
2011-03-24 15:35:08.590 Requirement: ODSCC20
2011-03-24 15:35:08.590 RunCommand(ods-control start)
2011-03-24 15:35:08.609 - runCommand: Background process started, PID: 22256
2011-03-24 15:35:13.940 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:35:13.110 - runCommand: Process started, PID: 22279
2011-03-24 15:35:13.110 ERROR:	return code = 1
2011-03-24 15:35:13.110 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:35:13.124 - runCommand: Process started, PID: 22284

2011-03-24 15:35:13.125 01012 Comment: Sign the ods zone with the new configs.

2011-03-24 15:35:13.125 Requirement: ODSCC20

2011-03-24 15:35:13.125 01016 Wait(15)

2011-03-24 15:35:13.125 Requirement: ODSCC20

2011-03-24 15:35:28.125 01018 Comment: Check if the logging is unsuccesfull. If a notify (new zonefile update) is not available in the logging, thelogging is not succesfull.

2011-03-24 15:35:28.125 Requirement: ODSCC20

-------------------------------------------------------------------------------
Testcase - ODSCC20T30: Change the kasp.xml location and change PolicyFile in conf.xml accordingly

2011-03-24 15:35:30.797 01026 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:35:30.797 Requirement: ODSCC20

2011-03-24 15:35:30.797 01028 Stop()
2011-03-24 15:35:30.797 Requirement: ODSCC20
2011-03-24 15:35:30.797 RunCommand(ods-control stop)
2011-03-24 15:35:30.801 - runCommand: Process started, PID: 22289
2011-03-24 15:35:30.801 OUTPUT:	Stopping enforcer...
2011-03-24 15:35:30.801 OUTPUT:	Cannot find PID file
2011-03-24 15:35:30.801 OUTPUT:	Stopping signer engine..
2011-03-24 15:35:30.801 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:35:30.801 ERROR:	return code = 1
2011-03-24 15:35:30.801 RunCommand(ps -e | grep enforcer)
2011-03-24 15:35:30.811 - runCommand: Process started, PID: 22292
2011-03-24 15:35:30.811 ERROR:	return code = 1
2011-03-24 15:35:30.811 RunCommand(ps -e | grep signer)
2011-03-24 15:35:30.823 - runCommand: Process started, PID: 22295
2011-03-24 15:35:30.823 ERROR:	return code = 1

2011-03-24 15:35:30.823 01030 Wait(10)

2011-03-24 15:35:30.823 Requirement: ODSCC20

2011-03-24 15:35:40.823 01032 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:35:40.823 Requirement: ODSCC20

2011-03-24 15:35:40.823 01038 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:35:40.824 Requirement: ODSCC20

2011-03-24 15:35:40.824 01041 PurgeHSM()
2011-03-24 15:35:40.824 Requirement: ODSCC20
2011-03-24 15:35:40.824 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:35:40.837 - runCommand: Process started, PID: 22298
2011-03-24 15:35:40.837 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:35:40.837 ERROR:	return code = 255

2011-03-24 15:35:40.837 01043 Wait(10)

2011-03-24 15:35:40.837 Requirement: ODSCC20

2011-03-24 15:35:50.838 01046 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:35:50.838 Requirement: ODSCC20

2011-03-24 15:35:50.838 01049 LoadConfig()
2011-03-24 15:35:50.838 Requirement: ODSCC20
2011-03-24 15:35:50.838 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T30_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:35:50.843 - runCommand: Process started, PID: 22302

2011-03-24 15:35:50.843 01051 Comment: Make a new directory a copy the kasp.xml file to that new folder.

2011-03-24 15:35:50.843 Requirement: ODSCC20

2011-03-24 15:35:50.843 01057 Comment: Update all the configs.

2011-03-24 15:35:50.843 Requirement: ODSCC20

2011-03-24 15:35:50.843 01059 ODSSetup()
2011-03-24 15:35:50.843 Requirement: ODSCC20
2011-03-24 15:35:50.843 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:36:02.524 - runCommand: Process started, PID: 22303
2011-03-24 15:36:02.525 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:36:02.525 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:36:02.525 OUTPUT:	kasp filename set to /etc/opendnssec/odscc20t30/kasp.xml.
2011-03-24 15:36:02.525 OUTPUT:	Repository SoftHSM found
2011-03-24 15:36:02.525 OUTPUT:	Capacity set to 10.
2011-03-24 15:36:02.525 OUTPUT:	RequireBackup set.
2011-03-24 15:36:02.525 OUTPUT:	Policy default found
2011-03-24 15:36:02.525 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:36:02.525 OUTPUT:	Policy test found
2011-03-24 15:36:02.525 OUTPUT:	Zone ods found
2011-03-24 15:36:02.525 OUTPUT:	Policy set to default.
2011-03-24 15:36:02.525 OUTPUT:	Added zone ods to database
2011-03-24 15:36:02.525 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:36:02.525 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:36:02.525 ERROR:	/etc/opendnssec/odscc20t30/kasp.xml validates

2011-03-24 15:36:02.525 01061 Wait(10)

2011-03-24 15:36:02.525 Requirement: ODSCC20

2011-03-24 15:36:12.525 01063 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:36:12.525 Requirement: ODSCC20

2011-03-24 15:36:12.526 01065 Start()
2011-03-24 15:36:12.526 Requirement: ODSCC20
2011-03-24 15:36:12.526 RunCommand(ods-control start)
2011-03-24 15:36:12.527 - runCommand: Background process started, PID: 22317
2011-03-24 15:36:17.559 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:36:17.578 - runCommand: Process started, PID: 22342
2011-03-24 15:36:17.578 ERROR:	return code = 1
2011-03-24 15:36:17.578 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:36:17.593 - runCommand: Process started, PID: 22347

2011-03-24 15:36:17.594 01067 Comment: Sign the ods zone with the new configs.

2011-03-24 15:36:17.594 Requirement: ODSCC20

2011-03-24 15:36:17.594 01071 Wait(15)

2011-03-24 15:36:17.594 Requirement: ODSCC20

2011-03-24 15:36:32.594 01073 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-24 15:36:32.594 Requirement: ODSCC20

-------------------------------------------------------------------------------
Testcase - ODSCC20T40: Change the zonelist.xml location and change ZoneListFile in conf.xml accordingly

2011-03-24 15:36:35.269 01081 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:36:35.269 Requirement: ODSCC20

2011-03-24 15:36:35.269 01083 Stop()
2011-03-24 15:36:35.269 Requirement: ODSCC20
2011-03-24 15:36:35.269 RunCommand(ods-control stop)
2011-03-24 15:36:35.273 - runCommand: Process started, PID: 22352
2011-03-24 15:36:35.273 OUTPUT:	Stopping enforcer...
2011-03-24 15:36:35.273 OUTPUT:	Cannot find PID file
2011-03-24 15:36:35.273 OUTPUT:	Stopping signer engine..
2011-03-24 15:36:35.273 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:36:35.273 ERROR:	return code = 1
2011-03-24 15:36:35.273 RunCommand(ps -e | grep enforcer)
2011-03-24 15:36:35.283 - runCommand: Process started, PID: 22355
2011-03-24 15:36:35.283 ERROR:	return code = 1
2011-03-24 15:36:35.283 RunCommand(ps -e | grep signer)
2011-03-24 15:36:35.295 - runCommand: Process started, PID: 22358
2011-03-24 15:36:35.295 ERROR:	return code = 1

2011-03-24 15:36:35.295 01085 Wait(10)

2011-03-24 15:36:35.295 Requirement: ODSCC20

2011-03-24 15:36:45.295 01087 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:36:45.295 Requirement: ODSCC20

2011-03-24 15:36:45.295 01093 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:36:45.295 Requirement: ODSCC20

2011-03-24 15:36:45.295 01096 PurgeHSM()
2011-03-24 15:36:45.295 Requirement: ODSCC20
2011-03-24 15:36:45.295 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:36:45.310 - runCommand: Process started, PID: 22361
2011-03-24 15:36:45.310 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:36:45.311 ERROR:	return code = 255

2011-03-24 15:36:45.311 01098 Wait(10)

2011-03-24 15:36:45.311 Requirement: ODSCC20

2011-03-24 15:36:55.311 01100 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:36:55.311 Requirement: ODSCC20

2011-03-24 15:36:55.311 01103 LoadConfig()
2011-03-24 15:36:55.311 Requirement: ODSCC20
2011-03-24 15:36:55.311 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T40_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:36:55.316 - runCommand: Process started, PID: 22365

2011-03-24 15:36:55.316 01105 Comment: Make a new directory a copy the ZoneListFile to that new folder.

2011-03-24 15:36:55.316 Requirement: ODSCC20

2011-03-24 15:36:55.316 01112 LoadConfig()
2011-03-24 15:36:55.316 Requirement: ODSCC20
2011-03-24 15:36:55.317 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:36:55.320 - runCommand: Process started, PID: 22366

2011-03-24 15:36:55.321 01114 Comment: Update all the configs.

2011-03-24 15:36:55.321 Requirement: ODSCC20

2011-03-24 15:36:55.321 01116 ODSSetup()
2011-03-24 15:36:55.321 Requirement: ODSCC20
2011-03-24 15:36:55.321 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:37:05.951 - runCommand: Process started, PID: 22367
2011-03-24 15:37:05.951 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:37:05.951 OUTPUT:	zonelist filename set to /etc/opendnssec/odscc20t40/zonelist.xml.
2011-03-24 15:37:05.951 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:37:05.951 OUTPUT:	Repository SoftHSM found
2011-03-24 15:37:05.951 OUTPUT:	Capacity set to 10.
2011-03-24 15:37:05.951 OUTPUT:	RequireBackup set.
2011-03-24 15:37:05.951 OUTPUT:	Policy default2 found
2011-03-24 15:37:05.951 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:37:05.951 OUTPUT:	Policy default found
2011-03-24 15:37:05.951 OUTPUT:	Unable to open /etc/opendnssec/odscc20t40/zonelist.xml
2011-03-24 15:37:05.951 OUTPUT:	Unable to open /etc/opendnssec/odscc20t40/zonelist.xml
2011-03-24 15:37:05.951 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:37:05.951 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:37:05.951 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:37:05.951 01118 Wait(10)

2011-03-24 15:37:05.951 Requirement: ODSCC20

2011-03-24 15:37:15.951 01120 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:37:15.952 Requirement: ODSCC20

2011-03-24 15:37:15.952 01122 Start()
2011-03-24 15:37:15.952 Requirement: ODSCC20
2011-03-24 15:37:15.952 RunCommand(ods-control start)
2011-03-24 15:37:15.954 - runCommand: Background process started, PID: 22380
2011-03-24 15:37:20.986 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:37:20.998 - runCommand: Process started, PID: 22403
2011-03-24 15:37:20.998 ERROR:	return code = 1
2011-03-24 15:37:20.998 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:37:21.140 - runCommand: Process started, PID: 22408

2011-03-24 15:37:21.142 01124 Wait(10)

2011-03-24 15:37:21.142 Requirement: ODSCC20

2011-03-24 15:37:31.145 01126 Comment: Sign the ods zone with the new configs.

2011-03-24 15:37:31.145 Requirement: ODSCC20

2011-03-24 15:37:31.147 01130 Wait(15)

2011-03-24 15:37:31.147 Requirement: ODSCC20

2011-03-24 15:37:46.150 01132 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-24 15:37:46.150 Requirement: ODSCC20

-------------------------------------------------------------------------------
Testcase - ODSCC20T50: Change the zonefetch.xml location and change ZoneFetchFile in conf.xml accordingly

2011-03-24 15:37:48.693 01141 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:37:48.693 Requirement: ODSCC20

2011-03-24 15:37:48.693 01143 Stop()
2011-03-24 15:37:48.693 Requirement: ODSCC20
2011-03-24 15:37:48.693 RunCommand(ods-control stop)
2011-03-24 15:37:48.697 - runCommand: Process started, PID: 22413
2011-03-24 15:37:48.697 OUTPUT:	Stopping enforcer...
2011-03-24 15:37:48.697 OUTPUT:	Cannot find PID file
2011-03-24 15:37:48.697 OUTPUT:	Stopping signer engine..
2011-03-24 15:37:48.697 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:37:48.697 ERROR:	return code = 1
2011-03-24 15:37:48.697 RunCommand(ps -e | grep enforcer)
2011-03-24 15:37:48.707 - runCommand: Process started, PID: 22416
2011-03-24 15:37:48.707 ERROR:	return code = 1
2011-03-24 15:37:48.707 RunCommand(ps -e | grep signer)
2011-03-24 15:37:48.718 - runCommand: Process started, PID: 22419
2011-03-24 15:37:48.718 ERROR:	return code = 1

2011-03-24 15:37:48.718 01145 Wait(10)

2011-03-24 15:37:48.718 Requirement: ODSCC20

2011-03-24 15:37:58.718 01147 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:37:58.718 Requirement: ODSCC20

2011-03-24 15:37:58.718 01153 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:37:58.718 Requirement: ODSCC20

2011-03-24 15:37:58.719 01156 PurgeHSM()
2011-03-24 15:37:58.719 Requirement: ODSCC20
2011-03-24 15:37:58.719 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:37:58.730 - runCommand: Process started, PID: 22422
2011-03-24 15:37:58.730 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:37:58.730 ERROR:	return code = 255

2011-03-24 15:37:58.730 01158 Wait(10)

2011-03-24 15:37:58.730 Requirement: ODSCC20

2011-03-24 15:38:08.731 01161 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:38:08.731 Requirement: ODSCC20

2011-03-24 15:38:08.731 01164 LoadConfig()
2011-03-24 15:38:08.731 Requirement: ODSCC20
2011-03-24 15:38:08.731 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T50_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:38:08.736 - runCommand: Process started, PID: 22426

2011-03-24 15:38:08.736 01166 Comment: Make a new directory a copy the ZoneListFile to that new folder.

2011-03-24 15:38:08.736 Requirement: ODSCC20

2011-03-24 15:38:08.736 01173 LoadConfig()
2011-03-24 15:38:08.736 Requirement: ODSCC20
2011-03-24 15:38:08.736 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:38:08.740 - runCommand: Process started, PID: 22427

2011-03-24 15:38:08.740 01175 Comment: Update all the configs.

2011-03-24 15:38:08.740 Requirement: ODSCC20

2011-03-24 15:38:08.740 01177 ODSSetup()
2011-03-24 15:38:08.740 Requirement: ODSCC20
2011-03-24 15:38:08.740 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:38:19.863 - runCommand: Process started, PID: 22428
2011-03-24 15:38:19.863 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:38:19.863 OUTPUT:	zonelist filename set to /etc/opendnssec/odscc20t40/zonelist.xml.
2011-03-24 15:38:19.863 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:38:19.863 OUTPUT:	Repository SoftHSM found
2011-03-24 15:38:19.863 OUTPUT:	Capacity set to 10.
2011-03-24 15:38:19.863 OUTPUT:	RequireBackup set.
2011-03-24 15:38:19.863 OUTPUT:	Policy default2 found
2011-03-24 15:38:19.863 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:38:19.863 OUTPUT:	Policy default found
2011-03-24 15:38:19.863 OUTPUT:	Unable to open /etc/opendnssec/odscc20t40/zonelist.xml
2011-03-24 15:38:19.863 OUTPUT:	Unable to open /etc/opendnssec/odscc20t40/zonelist.xml
2011-03-24 15:38:19.863 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:38:19.863 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:38:19.863 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:38:19.863 01179 Wait(10)

2011-03-24 15:38:19.863 Requirement: ODSCC20

2011-03-24 15:38:29.864 01181 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:38:29.864 Requirement: ODSCC20

2011-03-24 15:38:29.864 01183 Start()
2011-03-24 15:38:29.864 Requirement: ODSCC20
2011-03-24 15:38:29.864 RunCommand(ods-control start)
2011-03-24 15:38:29.866 - runCommand: Background process started, PID: 22441
2011-03-24 15:38:39.918 ERROR:	return code = 1
2011-03-24 15:38:39.918 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:38:39.936 - runCommand: Process started, PID: 22475
2011-03-24 15:38:39.936 ERROR:	return code = 1
2011-03-24 15:38:39.936 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:38:39.953 - runCommand: Process started, PID: 22479

2011-03-24 15:38:39.953 01185 Wait(10)

2011-03-24 15:38:39.953 Requirement: ODSCC20

2011-03-24 15:38:49.953 01187 Comment: Sign the ods zone with the new configs.

2011-03-24 15:38:49.953 Requirement: ODSCC20

2011-03-24 15:38:49.953 01191 Wait(15)

2011-03-24 15:38:49.953 Requirement: ODSCC20

2011-03-24 15:39:04.954 01193 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-24 15:39:04.954 Requirement: ODSCC20
Testcondition - ODSCC30: The configuration of enforcer settings located in conf.xml should operate according to requirements and intentions
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSCC30T10: Use privileges test: test for enforcer in config only and check if enforcers fails to run

2011-03-24 15:39:07.627 01205 Comment: Privileges have been adjusted in the conf.xml

2011-03-24 15:39:07.627 Requirement: ODSCC30

2011-03-24 15:39:07.627 01207 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:39:07.627 Requirement: ODSCC30

2011-03-24 15:39:07.627 01209 Stop()
2011-03-24 15:39:07.627 Requirement: ODSCC30
2011-03-24 15:39:07.627 RunCommand(ods-control stop)
2011-03-24 15:39:07.631 - runCommand: Process started, PID: 22484
2011-03-24 15:39:07.631 OUTPUT:	Stopping enforcer...
2011-03-24 15:39:07.631 OUTPUT:	Cannot find PID file
2011-03-24 15:39:07.631 OUTPUT:	Stopping signer engine..
2011-03-24 15:39:07.631 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:39:07.632 ERROR:	return code = 1
2011-03-24 15:39:07.632 RunCommand(ps -e | grep enforcer)
2011-03-24 15:39:07.641 - runCommand: Process started, PID: 22487
2011-03-24 15:39:07.641 ERROR:	return code = 1
2011-03-24 15:39:07.641 RunCommand(ps -e | grep signer)
2011-03-24 15:39:07.652 - runCommand: Process started, PID: 22490
2011-03-24 15:39:07.652 ERROR:	return code = 1

2011-03-24 15:39:07.652 01211 Wait(10)

2011-03-24 15:39:07.652 Requirement: ODSCC30

2011-03-24 15:39:17.652 01213 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:39:17.652 Requirement: ODSCC30

2011-03-24 15:39:17.653 01219 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:39:17.653 Requirement: ODSCC30

2011-03-24 15:39:17.653 01222 PurgeHSM()
2011-03-24 15:39:17.653 Requirement: ODSCC30
2011-03-24 15:39:17.653 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:39:17.669 - runCommand: Process started, PID: 22493
2011-03-24 15:39:17.669 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:39:17.669 ERROR:	return code = 255

2011-03-24 15:39:17.669 01224 Wait(10)

2011-03-24 15:39:17.669 Requirement: ODSCC30

2011-03-24 15:39:27.669 01226 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:39:27.669 Requirement: ODSCC30

2011-03-24 15:39:27.670 01229 LoadConfig()
2011-03-24 15:39:27.670 Requirement: ODSCC30
2011-03-24 15:39:27.670 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC30T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:39:27.674 - runCommand: Process started, PID: 22497

2011-03-24 15:39:27.675 01232 LoadConfig()
2011-03-24 15:39:27.675 Requirement: ODSCC30
2011-03-24 15:39:27.675 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:39:27.679 - runCommand: Process started, PID: 22498

2011-03-24 15:39:27.679 01234 Comment: 

2011-03-24 15:39:27.679 Requirement: ODSCC30

2011-03-24 15:39:27.679 01236 Comment: Update all the configs.

2011-03-24 15:39:27.679 Requirement: ODSCC30

2011-03-24 15:39:27.679 01238 ODSSetup()
2011-03-24 15:39:27.679 Requirement: ODSCC30
2011-03-24 15:39:27.679 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:39:38.514 - runCommand: Process started, PID: 22499
2011-03-24 15:39:38.514 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:39:38.514 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:39:38.514 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:39:38.514 OUTPUT:	Repository SoftHSM found
2011-03-24 15:39:38.514 OUTPUT:	Capacity set to 10.
2011-03-24 15:39:38.514 OUTPUT:	RequireBackup set.
2011-03-24 15:39:38.514 OUTPUT:	Policy default2 found
2011-03-24 15:39:38.514 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:39:38.514 OUTPUT:	Policy default found
2011-03-24 15:39:38.514 OUTPUT:	Zone ods found
2011-03-24 15:39:38.514 OUTPUT:	Policy set to default.
2011-03-24 15:39:38.514 OUTPUT:	Added zone ods to database
2011-03-24 15:39:38.514 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:39:38.514 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:39:38.514 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:39:38.515 01240 Wait(10)

2011-03-24 15:39:38.515 Requirement: ODSCC30

2011-03-24 15:39:48.515 01242 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:39:48.515 Requirement: ODSCC30

2011-03-24 15:39:48.515 01244 Start()
2011-03-24 15:39:48.515 Requirement: ODSCC30
2011-03-24 15:39:48.515 RunCommand(ods-control start)
2011-03-24 15:39:48.517 - runCommand: Background process started, PID: 22512
2011-03-24 15:39:53.550 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:39:53.564 - runCommand: Process started, PID: 22536
2011-03-24 15:39:53.565 ERROR:	return code = 1
2011-03-24 15:39:53.565 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:39:53.582 - runCommand: Process started, PID: 22541

2011-03-24 15:39:53.582 01246 Wait(10)

2011-03-24 15:39:53.582 Requirement: ODSCC30

2011-03-24 15:40:03.582 01249 Wait(15)

2011-03-24 15:40:03.582 Requirement: ODSCC30

2011-03-24 15:40:18.583 01251 Comment: The Enforcer should fail to run when restarting ODS with the new conf.xml.

2011-03-24 15:40:18.583 Requirement: ODSCC30

-------------------------------------------------------------------------------
Testcase - ODSCC30T20: Use privileges test: test for enforcer and kasp.db and check if enforcers runs without errors

2011-03-24 15:40:23.924 01263 Comment: Privileges have been adjusted in the conf.xml

2011-03-24 15:40:23.924 Requirement: ODSCC30

2011-03-24 15:40:23.924 01265 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:40:23.924 Requirement: ODSCC30

2011-03-24 15:40:23.924 01267 Stop()
2011-03-24 15:40:23.924 Requirement: ODSCC30
2011-03-24 15:40:23.924 RunCommand(ods-control stop)
2011-03-24 15:40:23.929 - runCommand: Process started, PID: 22546
2011-03-24 15:40:23.929 OUTPUT:	Stopping enforcer...
2011-03-24 15:40:23.929 OUTPUT:	Cannot find PID file
2011-03-24 15:40:23.929 OUTPUT:	Stopping signer engine..
2011-03-24 15:40:23.929 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:40:23.929 ERROR:	return code = 1
2011-03-24 15:40:23.929 RunCommand(ps -e | grep enforcer)
2011-03-24 15:40:23.939 - runCommand: Process started, PID: 22549
2011-03-24 15:40:23.939 ERROR:	return code = 1
2011-03-24 15:40:23.939 RunCommand(ps -e | grep signer)
2011-03-24 15:40:23.951 - runCommand: Process started, PID: 22552
2011-03-24 15:40:23.951 ERROR:	return code = 1

2011-03-24 15:40:23.951 01269 Wait(10)

2011-03-24 15:40:23.951 Requirement: ODSCC30

2011-03-24 15:40:33.952 01271 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:40:33.952 Requirement: ODSCC30

2011-03-24 15:40:33.952 01277 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:40:33.952 Requirement: ODSCC30

2011-03-24 15:40:33.952 01280 PurgeHSM()
2011-03-24 15:40:33.952 Requirement: ODSCC30
2011-03-24 15:40:33.952 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:40:33.963 - runCommand: Process started, PID: 22555
2011-03-24 15:40:33.963 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:40:33.963 ERROR:	return code = 255

2011-03-24 15:40:33.963 01282 Wait(10)

2011-03-24 15:40:33.963 Requirement: ODSCC30

2011-03-24 15:40:43.964 01284 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:40:43.964 Requirement: ODSCC30

2011-03-24 15:40:43.964 01287 LoadConfig()
2011-03-24 15:40:43.964 Requirement: ODSCC30
2011-03-24 15:40:43.964 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC30T20_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:40:43.969 - runCommand: Process started, PID: 22559

2011-03-24 15:40:43.969 01290 LoadConfig()
2011-03-24 15:40:43.969 Requirement: ODSCC30
2011-03-24 15:40:43.969 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:40:43.973 - runCommand: Process started, PID: 22560

2011-03-24 15:40:43.973 01292 Comment: 

2011-03-24 15:40:43.973 Requirement: ODSCC30

2011-03-24 15:40:43.973 01294 Comment: Update all the configs.

2011-03-24 15:40:43.973 Requirement: ODSCC30

2011-03-24 15:40:43.973 01296 ODSSetup()
2011-03-24 15:40:43.973 Requirement: ODSCC30
2011-03-24 15:40:43.973 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:40:55.333 - runCommand: Process started, PID: 22561
2011-03-24 15:40:55.333 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:40:55.333 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:40:55.333 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:40:55.333 OUTPUT:	Repository SoftHSM found
2011-03-24 15:40:55.333 OUTPUT:	Capacity set to 10.
2011-03-24 15:40:55.333 OUTPUT:	RequireBackup set.
2011-03-24 15:40:55.333 OUTPUT:	Policy default2 found
2011-03-24 15:40:55.333 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:40:55.333 OUTPUT:	Policy default found
2011-03-24 15:40:55.333 OUTPUT:	Zone ods found
2011-03-24 15:40:55.333 OUTPUT:	Policy set to default.
2011-03-24 15:40:55.333 OUTPUT:	Added zone ods to database
2011-03-24 15:40:55.333 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:40:55.333 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:40:55.333 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:40:55.334 01298 Wait(10)

2011-03-24 15:40:55.334 Requirement: ODSCC30

2011-03-24 15:41:05.334 01300 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:41:05.334 Requirement: ODSCC30

2011-03-24 15:41:05.334 01302 Start()
2011-03-24 15:41:05.334 Requirement: ODSCC30
2011-03-24 15:41:05.334 RunCommand(ods-control start)
2011-03-24 15:41:05.336 - runCommand: Background process started, PID: 22575
2011-03-24 15:41:10.371 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:41:10.390 - runCommand: Process started, PID: 22599
2011-03-24 15:41:10.390 ERROR:	return code = 1
2011-03-24 15:41:10.390 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:41:10.404 - runCommand: Process started, PID: 22604

2011-03-24 15:41:10.404 01304 Wait(10)

2011-03-24 15:41:10.404 Requirement: ODSCC30

2011-03-24 15:41:20.405 01307 Comment: The Enforcer should start up succesfully when restarting ODS with the new conf.xml.

2011-03-24 15:41:20.405 Requirement: ODSCC30

-------------------------------------------------------------------------------
Testcase - ODSCC30T30: Change the kasp.db location and change Datastore in conf.xml accordingly

2011-03-24 15:41:25.728 01320 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:41:25.728 Requirement: ODSCC30

2011-03-24 15:41:25.728 01322 Stop()
2011-03-24 15:41:25.728 Requirement: ODSCC30
2011-03-24 15:41:25.728 RunCommand(ods-control stop)
2011-03-24 15:41:25.732 - runCommand: Process started, PID: 22610
2011-03-24 15:41:25.732 OUTPUT:	Stopping enforcer...
2011-03-24 15:41:25.732 OUTPUT:	Cannot find PID file
2011-03-24 15:41:25.732 OUTPUT:	Stopping signer engine..
2011-03-24 15:41:25.732 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:41:25.732 ERROR:	return code = 1
2011-03-24 15:41:25.732 RunCommand(ps -e | grep enforcer)
2011-03-24 15:41:25.742 - runCommand: Process started, PID: 22613
2011-03-24 15:41:25.742 ERROR:	return code = 1
2011-03-24 15:41:25.742 RunCommand(ps -e | grep signer)
2011-03-24 15:41:25.752 - runCommand: Process started, PID: 22616
2011-03-24 15:41:25.752 ERROR:	return code = 1

2011-03-24 15:41:25.753 01324 Wait(10)

2011-03-24 15:41:25.753 Requirement: ODSCC30

2011-03-24 15:41:35.753 01326 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:41:35.753 Requirement: ODSCC30

2011-03-24 15:41:35.753 01332 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:41:35.753 Requirement: ODSCC30

2011-03-24 15:41:35.753 01335 PurgeHSM()
2011-03-24 15:41:35.753 Requirement: ODSCC30
2011-03-24 15:41:35.753 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:41:35.768 - runCommand: Process started, PID: 22619
2011-03-24 15:41:35.768 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:41:35.768 ERROR:	return code = 255

2011-03-24 15:41:35.769 01337 Wait(10)

2011-03-24 15:41:35.769 Requirement: ODSCC30

2011-03-24 15:41:45.769 01339 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:41:45.769 Requirement: ODSCC30

2011-03-24 15:41:45.769 01342 LoadConfig()
2011-03-24 15:41:45.769 Requirement: ODSCC30
2011-03-24 15:41:45.769 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC30T30_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:41:45.774 - runCommand: Process started, PID: 22623

2011-03-24 15:41:45.774 01344 Comment: Make a new directory a copy the kasp.db file to that new folder.

2011-03-24 15:41:45.774 Requirement: ODSCC30

2011-03-24 15:41:45.774 01351 LoadConfig()
2011-03-24 15:41:45.774 Requirement: ODSCC30
2011-03-24 15:41:45.774 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:41:45.778 - runCommand: Process started, PID: 22624

2011-03-24 15:41:45.778 01353 Comment: Update all the configs.

2011-03-24 15:41:45.779 Requirement: ODSCC30

2011-03-24 15:41:45.779 01355 ODSSetup()
2011-03-24 15:41:45.779 Requirement: ODSCC30
2011-03-24 15:41:45.779 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:41:45.785 - runCommand: Process started, PID: 22625
2011-03-24 15:41:45.785 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] /var/opendnssec/odscc30t30/kasp.db.our_lock could not be opened
2011-03-24 15:41:45.785 OUTPUT:	Error getting db lock
2011-03-24 15:41:45.785 ERROR:	SQLite database set to: /var/opendnssec/odscc30t30/kasp.db
2011-03-24 15:41:45.785 ERROR:	return code = 1

2011-03-24 15:41:45.785 01357 Wait(10)

2011-03-24 15:41:45.785 Requirement: ODSCC30

2011-03-24 15:41:55.785 01359 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:41:55.786 Requirement: ODSCC30

2011-03-24 15:41:55.786 01361 Start()
2011-03-24 15:41:55.786 Requirement: ODSCC30
2011-03-24 15:41:55.786 RunCommand(ods-control start)
2011-03-24 15:41:55.788 - runCommand: Background process started, PID: 22628
2011-03-24 15:42:00.821 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:42:00.840 - runCommand: Process started, PID: 22651
2011-03-24 15:42:00.840 ERROR:	return code = 1
2011-03-24 15:42:00.840 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:42:00.853 - runCommand: Process started, PID: 22656

2011-03-24 15:42:00.854 01363 Wait(10)

2011-03-24 15:42:00.854 Requirement: ODSCC30

2011-03-24 15:42:13.528 01368 Comment: Sign the ods zone with the new configs.

2011-03-24 15:42:13.528 Requirement: ODSCC30

2011-03-24 15:42:13.528 01372 Wait(15)

2011-03-24 15:42:13.528 Requirement: ODSCC30

2011-03-24 15:42:28.528 01374 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-24 15:42:28.528 Requirement: ODSCC30

-------------------------------------------------------------------------------
Testcase - ODSCC30T40: Change the Interval to 60 seconds and check if the enforcer runs every minute

2011-03-24 15:42:31.207 01382 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:42:31.207 Requirement: ODSCC30

2011-03-24 15:42:31.207 01384 Stop()
2011-03-24 15:42:31.207 Requirement: ODSCC30
2011-03-24 15:42:31.207 RunCommand(ods-control stop)
2011-03-24 15:42:31.211 - runCommand: Process started, PID: 22662
2011-03-24 15:42:31.211 OUTPUT:	Stopping enforcer...
2011-03-24 15:42:31.211 OUTPUT:	Cannot find PID file
2011-03-24 15:42:31.211 OUTPUT:	Stopping signer engine..
2011-03-24 15:42:31.211 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:42:31.211 ERROR:	return code = 1
2011-03-24 15:42:31.211 RunCommand(ps -e | grep enforcer)
2011-03-24 15:42:31.221 - runCommand: Process started, PID: 22665
2011-03-24 15:42:31.221 ERROR:	return code = 1
2011-03-24 15:42:31.221 RunCommand(ps -e | grep signer)
2011-03-24 15:42:31.232 - runCommand: Process started, PID: 22668
2011-03-24 15:42:31.232 ERROR:	return code = 1

2011-03-24 15:42:31.232 01386 Wait(10)

2011-03-24 15:42:31.232 Requirement: ODSCC30

2011-03-24 15:42:41.233 01388 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:42:41.233 Requirement: ODSCC30

2011-03-24 15:42:41.233 01394 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:42:41.233 Requirement: ODSCC30

2011-03-24 15:42:41.233 01397 PurgeHSM()
2011-03-24 15:42:41.233 Requirement: ODSCC30
2011-03-24 15:42:41.233 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:42:41.250 - runCommand: Process started, PID: 22671
2011-03-24 15:42:41.250 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:42:41.250 ERROR:	return code = 255

2011-03-24 15:42:41.250 01399 Wait(10)

2011-03-24 15:42:41.250 Requirement: ODSCC30

2011-03-24 15:42:51.251 01402 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:42:51.251 Requirement: ODSCC30

2011-03-24 15:42:51.251 01405 LoadConfig()
2011-03-24 15:42:51.251 Requirement: ODSCC30
2011-03-24 15:42:51.251 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC30T40_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:42:51.256 - runCommand: Process started, PID: 22675

2011-03-24 15:42:51.256 01407 Comment: Make a new directory a copy the ZoneListFile to that new folder.

2011-03-24 15:42:51.256 Requirement: ODSCC30

2011-03-24 15:42:51.256 01411 LoadConfig()
2011-03-24 15:42:51.256 Requirement: ODSCC30
2011-03-24 15:42:51.256 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:42:51.260 - runCommand: Process started, PID: 22676

2011-03-24 15:42:51.260 01413 Comment: Update all the configs.

2011-03-24 15:42:51.260 Requirement: ODSCC30

2011-03-24 15:42:51.260 01415 ODSSetup()
2011-03-24 15:42:51.260 Requirement: ODSCC30
2011-03-24 15:42:51.260 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:43:01.868 - runCommand: Process started, PID: 22677
2011-03-24 15:43:01.868 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 15:43:01.868 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 15:43:01.868 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 15:43:01.868 OUTPUT:	Repository SoftHSM found
2011-03-24 15:43:01.868 OUTPUT:	Capacity set to 10.
2011-03-24 15:43:01.868 OUTPUT:	RequireBackup set.
2011-03-24 15:43:01.868 OUTPUT:	Policy default2 found
2011-03-24 15:43:01.868 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 15:43:01.868 OUTPUT:	Policy default found
2011-03-24 15:43:01.868 OUTPUT:	Zone ods found
2011-03-24 15:43:01.869 OUTPUT:	Policy set to default.
2011-03-24 15:43:01.869 OUTPUT:	Added zone ods to database
2011-03-24 15:43:01.869 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 15:43:01.869 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 15:43:01.869 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 15:43:01.869 01417 Wait(10)

2011-03-24 15:43:01.869 Requirement: ODSCC30

2011-03-24 15:43:11.869 01419 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:43:11.869 Requirement: ODSCC30

2011-03-24 15:43:11.869 01421 Start()
2011-03-24 15:43:11.869 Requirement: ODSCC30
2011-03-24 15:43:11.869 RunCommand(ods-control start)
2011-03-24 15:43:11.871 - runCommand: Background process started, PID: 22690
2011-03-24 15:43:16.901 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:43:16.915 - runCommand: Process started, PID: 22714
2011-03-24 15:43:16.915 ERROR:	return code = 1
2011-03-24 15:43:16.915 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:43:16.930 - runCommand: Process started, PID: 22719

2011-03-24 15:43:16.930 01423 Wait(10)

2011-03-24 15:43:16.930 Requirement: ODSCC30

2011-03-24 15:43:26.930 01425 Comment: Check each minute if the enforcer is running.

2011-03-24 15:43:26.930 Requirement: ODSCC30

2011-03-24 15:43:29.606 01430 Wait(60)

2011-03-24 15:43:29.606 Requirement: ODSCC30

2011-03-24 15:44:32.288 01435 Wait(60)

2011-03-24 15:44:32.288 Requirement: ODSCC30

2011-03-24 15:45:34.954 01440 Wait(60)

2011-03-24 15:45:34.954 Requirement: ODSCC30
Testcondition - ODSCC40: The datastore settings located in conf.xml should be configurable with different credentials
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSCC40T10: Change port of database and check if enforcer fails to connect

2011-03-24 15:46:37.622 01450 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:46:37.622 Requirement: ODSCC40

2011-03-24 15:46:37.622 01452 Stop()
2011-03-24 15:46:37.622 Requirement: ODSCC40
2011-03-24 15:46:37.623 RunCommand(ods-control stop)
2011-03-24 15:46:37.627 - runCommand: Process started, PID: 22728
2011-03-24 15:46:37.627 OUTPUT:	Stopping enforcer...
2011-03-24 15:46:37.627 OUTPUT:	Cannot find PID file
2011-03-24 15:46:37.627 OUTPUT:	Stopping signer engine..
2011-03-24 15:46:37.627 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:46:37.627 ERROR:	return code = 1
2011-03-24 15:46:37.627 RunCommand(ps -e | grep enforcer)
2011-03-24 15:46:37.637 - runCommand: Process started, PID: 22731
2011-03-24 15:46:37.637 ERROR:	return code = 1
2011-03-24 15:46:37.637 RunCommand(ps -e | grep signer)
2011-03-24 15:46:37.647 - runCommand: Process started, PID: 22734
2011-03-24 15:46:37.647 ERROR:	return code = 1

2011-03-24 15:46:37.647 01454 Wait(10)

2011-03-24 15:46:37.648 Requirement: ODSCC40

2011-03-24 15:46:47.648 01456 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:46:47.648 Requirement: ODSCC40

2011-03-24 15:46:47.648 01462 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:46:47.648 Requirement: ODSCC40

2011-03-24 15:46:47.648 01465 PurgeHSM()
2011-03-24 15:46:47.648 Requirement: ODSCC40
2011-03-24 15:46:47.648 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:46:47.666 - runCommand: Process started, PID: 22737
2011-03-24 15:46:47.666 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:46:47.666 ERROR:	return code = 255

2011-03-24 15:46:47.666 01467 Wait(10)

2011-03-24 15:46:47.666 Requirement: ODSCC40

2011-03-24 15:46:57.666 01469 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:46:57.666 Requirement: ODSCC40

2011-03-24 15:46:57.666 01472 LoadConfig()
2011-03-24 15:46:57.666 Requirement: ODSCC40
2011-03-24 15:46:57.667 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:46:57.671 - runCommand: Process started, PID: 22741

2011-03-24 15:46:57.672 01475 LoadConfig()
2011-03-24 15:46:57.672 Requirement: ODSCC40
2011-03-24 15:46:57.672 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:46:57.675 - runCommand: Process started, PID: 22742

2011-03-24 15:46:57.676 01477 Comment: Update all the configs.

2011-03-24 15:46:57.676 Requirement: ODSCC40

2011-03-24 15:46:57.676 01479 ODSSetup()
2011-03-24 15:46:57.676 Requirement: ODSCC40
2011-03-24 15:46:57.676 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:46:57.684 - runCommand: Process started, PID: 22743
2011-03-24 15:46:57.684 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-24 15:46:57.684 ERROR:	MySQL database host set to: dnssec-db
2011-03-24 15:46:57.684 ERROR:	MySQL database port set to: 3000
2011-03-24 15:46:57.684 ERROR:	MySQL database schema set to: KASP
2011-03-24 15:46:57.684 ERROR:	MySQL database user set to: kaspuser
2011-03-24 15:46:57.684 ERROR:	MySQL database password set
2011-03-24 15:46:57.684 ERROR:	return code = 255

2011-03-24 15:46:57.684 01481 Wait(10)

2011-03-24 15:46:57.684 Requirement: ODSCC40

2011-03-24 15:47:07.684 01483 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:47:07.684 Requirement: ODSCC40

2011-03-24 15:47:07.685 01485 Start()
2011-03-24 15:47:07.685 Requirement: ODSCC40
2011-03-24 15:47:07.685 RunCommand(ods-control start)
2011-03-24 15:47:07.687 - runCommand: Background process started, PID: 22746
2011-03-24 15:47:17.736 ERROR:	return code = 1
2011-03-24 15:47:17.736 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:47:17.751 - runCommand: Process started, PID: 22778
2011-03-24 15:47:17.751 ERROR:	return code = 1
2011-03-24 15:47:17.751 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:47:17.765 - runCommand: Process started, PID: 22782

2011-03-24 15:47:17.765 01487 Wait(10)

2011-03-24 15:47:17.765 Requirement: ODSCC40

-------------------------------------------------------------------------------
Testcase - ODSCC40T20: Use default port (1213) for database and configure a false port and check if enforcer fails to connect

2011-03-24 15:47:35.752 01504 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:47:35.752 Requirement: ODSCC40

2011-03-24 15:47:35.752 01506 Stop()
2011-03-24 15:47:35.752 Requirement: ODSCC40
2011-03-24 15:47:35.752 RunCommand(ods-control stop)
2011-03-24 15:47:35.756 - runCommand: Process started, PID: 22787
2011-03-24 15:47:35.756 OUTPUT:	Stopping enforcer...
2011-03-24 15:47:35.756 OUTPUT:	Cannot find PID file
2011-03-24 15:47:35.756 OUTPUT:	Stopping signer engine..
2011-03-24 15:47:35.756 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:47:35.756 ERROR:	return code = 1
2011-03-24 15:47:35.756 RunCommand(ps -e | grep enforcer)
2011-03-24 15:47:35.766 - runCommand: Process started, PID: 22790
2011-03-24 15:47:35.766 ERROR:	return code = 1
2011-03-24 15:47:35.766 RunCommand(ps -e | grep signer)
2011-03-24 15:47:35.777 - runCommand: Process started, PID: 22793
2011-03-24 15:47:35.777 ERROR:	return code = 1

2011-03-24 15:47:35.778 01508 Wait(10)

2011-03-24 15:47:35.778 Requirement: ODSCC40

2011-03-24 15:47:45.778 01510 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:47:45.778 Requirement: ODSCC40

2011-03-24 15:47:45.778 01516 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:47:45.778 Requirement: ODSCC40

2011-03-24 15:47:45.778 01519 PurgeHSM()
2011-03-24 15:47:45.778 Requirement: ODSCC40
2011-03-24 15:47:45.778 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:47:45.792 - runCommand: Process started, PID: 22796
2011-03-24 15:47:45.792 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:47:45.792 ERROR:	return code = 255

2011-03-24 15:47:45.792 01521 Wait(10)

2011-03-24 15:47:45.792 Requirement: ODSCC40

2011-03-24 15:47:55.792 01523 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:47:55.792 Requirement: ODSCC40

2011-03-24 15:47:55.793 01526 LoadConfig()
2011-03-24 15:47:55.793 Requirement: ODSCC40
2011-03-24 15:47:55.793 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T20_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:47:55.798 - runCommand: Process started, PID: 22800

2011-03-24 15:47:55.798 01529 LoadConfig()
2011-03-24 15:47:55.798 Requirement: ODSCC40
2011-03-24 15:47:55.798 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:47:55.802 - runCommand: Process started, PID: 22801

2011-03-24 15:47:55.802 01531 Comment: Update all the configs.

2011-03-24 15:47:55.802 Requirement: ODSCC40

2011-03-24 15:47:55.802 01533 ODSSetup()
2011-03-24 15:47:55.802 Requirement: ODSCC40
2011-03-24 15:47:55.802 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:47:55.809 - runCommand: Process started, PID: 22802
2011-03-24 15:47:55.809 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-24 15:47:55.809 ERROR:	MySQL database host set to: dnssec-db
2011-03-24 15:47:55.809 ERROR:	MySQL database port set to: 1213
2011-03-24 15:47:55.809 ERROR:	MySQL database schema set to: KASP
2011-03-24 15:47:55.809 ERROR:	MySQL database user set to: kaspuser
2011-03-24 15:47:55.809 ERROR:	MySQL database password set
2011-03-24 15:47:55.809 ERROR:	return code = 255

2011-03-24 15:47:55.809 01535 Wait(10)

2011-03-24 15:47:55.809 Requirement: ODSCC40

2011-03-24 15:48:05.809 01537 Comment: all done! hsm_close results: 1

2011-03-24 15:48:05.809 Requirement: ODSCC40

2011-03-24 15:48:05.809 01539 Start()
2011-03-24 15:48:05.809 Requirement: ODSCC40
2011-03-24 15:48:05.809 RunCommand(ods-control start)
2011-03-24 15:48:05.811 - runCommand: Background process started, PID: 22805
2011-03-24 15:48:10.844 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:48:10.862 - runCommand: Process started, PID: 22827
2011-03-24 15:48:10.862 ERROR:	return code = 1
2011-03-24 15:48:10.862 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:48:10.881 - runCommand: Process started, PID: 22832

2011-03-24 15:48:10.881 01541 Wait(10)

2011-03-24 15:48:10.881 Requirement: ODSCC40

-------------------------------------------------------------------------------
Testcase - ODSCC40T30: Use a different port for both database and config and check if enforcer successfully connects

2011-03-24 15:48:28.873 01556 Comment: MySQL port is 3307 instead of 3306. Changed in config.xml and my.cnf

2011-03-24 15:48:28.873 Requirement: ODSCC40

2011-03-24 15:48:28.873 01557 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:48:28.873 Requirement: ODSCC40

2011-03-24 15:48:28.874 01559 Stop()
2011-03-24 15:48:28.874 Requirement: ODSCC40
2011-03-24 15:48:28.874 RunCommand(ods-control stop)
2011-03-24 15:48:28.878 - runCommand: Process started, PID: 22837
2011-03-24 15:48:28.878 OUTPUT:	Stopping enforcer...
2011-03-24 15:48:28.878 OUTPUT:	Cannot find PID file
2011-03-24 15:48:28.878 OUTPUT:	Stopping signer engine..
2011-03-24 15:48:28.878 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:48:28.878 ERROR:	return code = 1
2011-03-24 15:48:28.878 RunCommand(ps -e | grep enforcer)
2011-03-24 15:48:28.888 - runCommand: Process started, PID: 22840
2011-03-24 15:48:28.888 ERROR:	return code = 1
2011-03-24 15:48:28.888 RunCommand(ps -e | grep signer)
2011-03-24 15:48:28.898 - runCommand: Process started, PID: 22843
2011-03-24 15:48:28.898 ERROR:	return code = 1

2011-03-24 15:48:28.898 01561 Wait(10)

2011-03-24 15:48:28.899 Requirement: ODSCC40

2011-03-24 15:48:38.899 01563 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:48:38.899 Requirement: ODSCC40

2011-03-24 15:48:38.899 01569 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:48:38.899 Requirement: ODSCC40

2011-03-24 15:48:38.899 01572 PurgeHSM()
2011-03-24 15:48:38.899 Requirement: ODSCC40
2011-03-24 15:48:38.899 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:48:38.918 - runCommand: Process started, PID: 22846
2011-03-24 15:48:38.918 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:48:38.918 ERROR:	return code = 255

2011-03-24 15:48:38.918 01574 Wait(10)

2011-03-24 15:48:38.919 Requirement: ODSCC40

2011-03-24 15:48:48.919 01576 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-24 15:48:48.919 Requirement: ODSCC40

2011-03-24 15:48:48.919 01582 Wait(60)

2011-03-24 15:48:48.919 Requirement: ODSCC40

2011-03-24 15:49:48.919 01586 Wait(60)

2011-03-24 15:49:48.919 Requirement: ODSCC40

2011-03-24 15:50:48.920 01590 Wait(60)

2011-03-24 15:50:48.920 Requirement: ODSCC40

2011-03-24 15:51:48.920 01592 Comment: After installation replace the original mysql config file with the adjusted one. Port is 3307 instead of the standard 3306 port.

2011-03-24 15:51:48.920 Requirement: ODSCC40

2011-03-24 15:51:48.920 01596 Comment: Update the mySQL configuration

2011-03-24 15:51:48.920 Requirement: ODSCC40

2011-03-24 15:51:48.920 01600 Wait(10)

2011-03-24 15:51:48.920 Requirement: ODSCC40

2011-03-24 15:51:58.921 01603 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:51:58.921 Requirement: ODSCC40

2011-03-24 15:51:58.921 01606 LoadConfig()
2011-03-24 15:51:58.921 Requirement: ODSCC40
2011-03-24 15:51:58.921 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T30_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:51:58.926 - runCommand: Process started, PID: 22850

2011-03-24 15:51:58.926 01609 LoadConfig()
2011-03-24 15:51:58.926 Requirement: ODSCC40
2011-03-24 15:51:58.926 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:51:58.930 - runCommand: Process started, PID: 22851

2011-03-24 15:51:58.930 01611 Comment: Run setup for rebuild of database

2011-03-24 15:51:58.930 Requirement: ODSCC40

2011-03-24 15:51:58.930 01615 Wait(20)

2011-03-24 15:51:58.930 Requirement: ODSCC40

2011-03-24 15:52:18.931 01617 Comment: Update all the configs.

2011-03-24 15:52:18.931 Requirement: ODSCC40

2011-03-24 15:52:18.931 01619 ODSSetup()
2011-03-24 15:52:18.931 Requirement: ODSCC40
2011-03-24 15:52:18.931 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:52:18.938 - runCommand: Process started, PID: 22852
2011-03-24 15:52:18.938 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-24 15:52:18.938 ERROR:	MySQL database host set to: dnssec-db
2011-03-24 15:52:18.938 ERROR:	MySQL database port set to: 3307
2011-03-24 15:52:18.938 ERROR:	MySQL database schema set to: KASP
2011-03-24 15:52:18.938 ERROR:	MySQL database user set to: kaspuser
2011-03-24 15:52:18.938 ERROR:	MySQL database password set
2011-03-24 15:52:18.938 ERROR:	return code = 255

2011-03-24 15:52:18.938 01621 Wait(10)

2011-03-24 15:52:18.938 Requirement: ODSCC40

2011-03-24 15:52:28.938 01623 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:52:28.938 Requirement: ODSCC40

2011-03-24 15:52:28.938 01625 Start()
2011-03-24 15:52:28.938 Requirement: ODSCC40
2011-03-24 15:52:28.939 RunCommand(ods-control start)
2011-03-24 15:52:28.940 - runCommand: Background process started, PID: 22855
2011-03-24 15:52:33.975 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:52:33.990 - runCommand: Process started, PID: 22878
2011-03-24 15:52:33.990 ERROR:	return code = 1
2011-03-24 15:52:33.990 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:52:34.591 - runCommand: Process started, PID: 22883

2011-03-24 15:52:34.610 01627 Wait(10)

2011-03-24 15:52:34.612 Requirement: ODSCC40

2011-03-24 15:52:46.680 01633 Comment: Log should be checked

2011-03-24 15:52:46.680 Requirement: ODSCC40

2011-03-24 15:52:46.680 01636 Comment: Restore old config file mySQL

2011-03-24 15:52:46.680 Requirement: ODSCC40

2011-03-24 15:52:46.680 01640 Comment: Update the mySQL configuration

2011-03-24 15:52:46.680 Requirement: ODSCC40

-------------------------------------------------------------------------------
Testcase - ODSCC40T40: Use a different Hostname for database and check if enforcer fails to connect

2011-03-24 15:52:46.680 01648 Comment: Hostname is changed in conf.xml to "ods-db", port is the standard 3306 port.

2011-03-24 15:52:46.680 Requirement: ODSCC40

2011-03-24 15:52:46.680 01650 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:52:46.680 Requirement: ODSCC40

2011-03-24 15:52:46.680 01652 Stop()
2011-03-24 15:52:46.680 Requirement: ODSCC40
2011-03-24 15:52:46.680 RunCommand(ods-control stop)
2011-03-24 15:52:46.684 - runCommand: Process started, PID: 22888
2011-03-24 15:52:46.684 OUTPUT:	Stopping enforcer...
2011-03-24 15:52:46.684 OUTPUT:	Cannot find PID file
2011-03-24 15:52:46.684 OUTPUT:	Stopping signer engine..
2011-03-24 15:52:46.685 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:52:46.685 ERROR:	return code = 1
2011-03-24 15:52:46.685 RunCommand(ps -e | grep enforcer)
2011-03-24 15:52:46.694 - runCommand: Process started, PID: 22891
2011-03-24 15:52:46.695 ERROR:	return code = 1
2011-03-24 15:52:46.695 RunCommand(ps -e | grep signer)
2011-03-24 15:52:46.705 - runCommand: Process started, PID: 22894
2011-03-24 15:52:46.705 ERROR:	return code = 1

2011-03-24 15:52:46.705 01654 Wait(10)

2011-03-24 15:52:46.705 Requirement: ODSCC40

2011-03-24 15:52:56.705 01656 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:52:56.706 Requirement: ODSCC40

2011-03-24 15:52:56.706 01662 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:52:56.706 Requirement: ODSCC40

2011-03-24 15:52:56.706 01665 PurgeHSM()
2011-03-24 15:52:56.706 Requirement: ODSCC40
2011-03-24 15:52:56.706 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:52:56.721 - runCommand: Process started, PID: 22897
2011-03-24 15:52:56.721 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:52:56.721 ERROR:	return code = 255

2011-03-24 15:52:56.721 01667 Wait(10)

2011-03-24 15:52:56.721 Requirement: ODSCC40

2011-03-24 15:53:06.721 01670 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-24 15:53:06.721 Requirement: ODSCC40

2011-03-24 15:53:06.722 01676 Wait(60)

2011-03-24 15:53:06.722 Requirement: ODSCC40

2011-03-24 15:54:06.722 01680 Wait(60)

2011-03-24 15:54:06.722 Requirement: ODSCC40

2011-03-24 15:55:06.722 01684 Wait(60)

2011-03-24 15:55:06.722 Requirement: ODSCC40

2011-03-24 15:56:06.723 01686 Comment: After installation replace the original mysql config file with the adjusted one. Port is standard: 3306 port.

2011-03-24 15:56:06.723 Requirement: ODSCC40

2011-03-24 15:56:06.723 01690 Comment: Update the mySQL configuration

2011-03-24 15:56:06.723 Requirement: ODSCC40

2011-03-24 15:56:06.723 01694 Wait(10)

2011-03-24 15:56:06.723 Requirement: ODSCC40

2011-03-24 15:56:16.723 01697 Comment: Change the configuration with predefined xml config files.

2011-03-24 15:56:16.723 Requirement: ODSCC40

2011-03-24 15:56:16.723 01700 LoadConfig()
2011-03-24 15:56:16.723 Requirement: ODSCC40
2011-03-24 15:56:16.723 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T40_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 15:56:16.728 - runCommand: Process started, PID: 22904

2011-03-24 15:56:16.729 01703 LoadConfig()
2011-03-24 15:56:16.729 Requirement: ODSCC40
2011-03-24 15:56:16.729 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 15:56:16.732 - runCommand: Process started, PID: 22905

2011-03-24 15:56:16.733 01705 Comment: Run setup for rebuild of database

2011-03-24 15:56:16.733 Requirement: ODSCC40

2011-03-24 15:56:16.733 01709 Wait(20)

2011-03-24 15:56:16.733 Requirement: ODSCC40

2011-03-24 15:56:36.733 01711 Comment: Update all the configs.

2011-03-24 15:56:36.733 Requirement: ODSCC40

2011-03-24 15:56:36.733 01713 ODSSetup()
2011-03-24 15:56:36.733 Requirement: ODSCC40
2011-03-24 15:56:36.733 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 15:56:36.740 - runCommand: Process started, PID: 22906
2011-03-24 15:56:36.740 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-24 15:56:36.740 ERROR:	MySQL database host set to: ods-db
2011-03-24 15:56:36.740 ERROR:	MySQL database port set to: 3306
2011-03-24 15:56:36.740 ERROR:	MySQL database schema set to: KASP
2011-03-24 15:56:36.740 ERROR:	MySQL database user set to: kaspuser
2011-03-24 15:56:36.740 ERROR:	MySQL database password set
2011-03-24 15:56:36.740 ERROR:	return code = 255

2011-03-24 15:56:36.741 01715 Wait(10)

2011-03-24 15:56:36.741 Requirement: ODSCC40

2011-03-24 15:56:46.741 01717 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 15:56:46.741 Requirement: ODSCC40

2011-03-24 15:56:46.741 01719 Start()
2011-03-24 15:56:46.741 Requirement: ODSCC40
2011-03-24 15:56:46.741 RunCommand(ods-control start)
2011-03-24 15:56:46.743 - runCommand: Background process started, PID: 22909
2011-03-24 15:56:51.775 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 15:56:51.796 - runCommand: Process started, PID: 22932
2011-03-24 15:56:51.796 ERROR:	return code = 1
2011-03-24 15:56:51.796 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 15:56:51.810 - runCommand: Process started, PID: 22937

2011-03-24 15:56:51.810 01721 Wait(10)

2011-03-24 15:56:51.810 Requirement: ODSCC40
2011-03-24 15:57:04.482 PASSED:	(Check for Like) - Expected:  Found: Mar 24 15:56:51 DEVELOPER15 ods-signerd: shutdown signer engine
2011-03-24 15:57:07.142 PASSED:	(Check for Like) - Expected:  Found: Mar 24 15:56:51 DEVELOPER15 ods-signerd: shutdown signer engine

2011-03-24 15:57:09.806 01732 Comment: Restore old config file mySQL

2011-03-24 15:57:09.806 Requirement: ODSCC40

2011-03-24 15:57:09.806 01736 Comment: Update the mySQL configuration

2011-03-24 15:57:09.806 Requirement: ODSCC40

-------------------------------------------------------------------------------
Testcase - ODSCC40T50: Use a different Hostname for both database and config and check if enforcer successfully connects

2011-03-24 15:57:09.806 01744 Comment: Hostname is changed in conf.xml to "mysqlhost". This host is also in the hosts file in Unix.

2011-03-24 15:57:09.806 Requirement: ODSCC40

2011-03-24 15:57:09.806 01746 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 15:57:09.806 Requirement: ODSCC40

2011-03-24 15:57:09.806 01748 Stop()
2011-03-24 15:57:09.806 Requirement: ODSCC40
2011-03-24 15:57:09.806 RunCommand(ods-control stop)
2011-03-24 15:57:09.810 - runCommand: Process started, PID: 22942
2011-03-24 15:57:09.810 OUTPUT:	Stopping enforcer...
2011-03-24 15:57:09.810 OUTPUT:	Cannot find PID file
2011-03-24 15:57:09.810 OUTPUT:	Stopping signer engine..
2011-03-24 15:57:09.810 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 15:57:09.810 ERROR:	return code = 1
2011-03-24 15:57:09.810 RunCommand(ps -e | grep enforcer)
2011-03-24 15:57:09.820 - runCommand: Process started, PID: 22945
2011-03-24 15:57:09.820 ERROR:	return code = 1
2011-03-24 15:57:09.820 RunCommand(ps -e | grep signer)
2011-03-24 15:57:09.832 - runCommand: Process started, PID: 22948
2011-03-24 15:57:09.832 ERROR:	return code = 1

2011-03-24 15:57:09.832 01750 Wait(10)

2011-03-24 15:57:09.832 Requirement: ODSCC40

2011-03-24 15:57:19.832 01752 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 15:57:19.832 Requirement: ODSCC40

2011-03-24 15:57:19.833 01758 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 15:57:19.833 Requirement: ODSCC40

2011-03-24 15:57:19.833 01761 PurgeHSM()
2011-03-24 15:57:19.833 Requirement: ODSCC40
2011-03-24 15:57:19.833 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 15:57:19.847 - runCommand: Process started, PID: 22951
2011-03-24 15:57:19.847 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 15:57:19.847 ERROR:	return code = 255

2011-03-24 15:57:19.847 01763 Wait(10)

2011-03-24 15:57:19.847 Requirement: ODSCC40

2011-03-24 15:57:29.847 01765 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-24 15:57:29.847 Requirement: ODSCC40

2011-03-24 15:57:29.847 01771 Wait(60)

2011-03-24 15:57:29.847 Requirement: ODSCC40

2011-03-24 15:58:29.848 01775 Wait(60)

2011-03-24 15:58:29.848 Requirement: ODSCC40

2011-03-24 15:59:29.848 01779 Wait(60)

2011-03-24 15:59:29.848 Requirement: ODSCC40

2011-03-24 16:00:29.848 01781 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-24 16:00:29.848 Requirement: ODSCC40

2011-03-24 16:00:29.848 01785 Wait(10)

2011-03-24 16:00:29.848 Requirement: ODSCC40

2011-03-24 16:00:39.849 01788 Comment: Change the configuration with predefined xml config files. Hostname is mysqlhost.

2011-03-24 16:00:39.849 Requirement: ODSCC40

2011-03-24 16:00:39.849 01791 LoadConfig()
2011-03-24 16:00:39.849 Requirement: ODSCC40
2011-03-24 16:00:39.849 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T50_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:00:39.854 - runCommand: Process started, PID: 22955

2011-03-24 16:00:39.854 01794 LoadConfig()
2011-03-24 16:00:39.854 Requirement: ODSCC40
2011-03-24 16:00:39.854 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 16:00:39.858 - runCommand: Process started, PID: 22956

2011-03-24 16:00:39.858 01796 Comment: Run setup for rebuild of database

2011-03-24 16:00:39.858 Requirement: ODSCC40

2011-03-24 16:00:39.858 01800 Wait(20)

2011-03-24 16:00:39.858 Requirement: ODSCC40

2011-03-24 16:00:59.859 01802 Comment: Update all the configs.

2011-03-24 16:00:59.859 Requirement: ODSCC40

2011-03-24 16:00:59.859 01804 ODSSetup()
2011-03-24 16:00:59.859 Requirement: ODSCC40
2011-03-24 16:00:59.859 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:00:59.865 - runCommand: Process started, PID: 22957
2011-03-24 16:00:59.865 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-24 16:00:59.865 ERROR:	MySQL database host set to: ods-db
2011-03-24 16:00:59.865 ERROR:	MySQL database port set to: 3306
2011-03-24 16:00:59.865 ERROR:	MySQL database schema set to: KASP
2011-03-24 16:00:59.865 ERROR:	MySQL database user set to: kaspuser
2011-03-24 16:00:59.865 ERROR:	MySQL database password set
2011-03-24 16:00:59.865 ERROR:	return code = 255

2011-03-24 16:00:59.866 01806 Wait(10)

2011-03-24 16:00:59.866 Requirement: ODSCC40

2011-03-24 16:01:09.866 01808 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 16:01:09.866 Requirement: ODSCC40

2011-03-24 16:01:09.866 01810 Start()
2011-03-24 16:01:09.866 Requirement: ODSCC40
2011-03-24 16:01:09.866 RunCommand(ods-control start)
2011-03-24 16:01:09.868 - runCommand: Background process started, PID: 22960
2011-03-24 16:01:14.901 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 16:01:14.918 - runCommand: Process started, PID: 22983
2011-03-24 16:01:14.918 ERROR:	return code = 1
2011-03-24 16:01:14.918 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 16:01:14.932 - runCommand: Process started, PID: 22988

2011-03-24 16:01:14.933 01812 Wait(10)

2011-03-24 16:01:14.933 Requirement: ODSCC40
2011-03-24 16:01:27.612 PASSED:	(Check for Like) - Expected:  Found: Mar 24 16:01:14 DEVELOPER15 ods-signerd: shutdown signer engine

-------------------------------------------------------------------------------
Testcase - ODSCC40T60: Use a different database name for database and check if enforcer fails to connect

2011-03-24 16:01:30.275 01824 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 16:01:30.275 Requirement: ODSCC40

2011-03-24 16:01:30.275 01826 Wait(10)

2011-03-24 16:01:30.275 Requirement: ODSCC40

2011-03-24 16:01:40.275 01828 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 16:01:40.275 Requirement: ODSCC40

2011-03-24 16:01:40.276 01834 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 16:01:40.276 Requirement: ODSCC40

2011-03-24 16:01:40.276 01837 PurgeHSM()
2011-03-24 16:01:40.276 Requirement: ODSCC40
2011-03-24 16:01:40.276 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 16:01:40.287 - runCommand: Process started, PID: 22993
2011-03-24 16:01:40.287 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 16:01:40.287 ERROR:	return code = 255

2011-03-24 16:01:40.287 01839 Wait(10)

2011-03-24 16:01:40.287 Requirement: ODSCC40

2011-03-24 16:01:50.288 01842 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-24 16:01:50.288 Requirement: ODSCC40

2011-03-24 16:01:50.288 01848 Wait(60)

2011-03-24 16:01:50.288 Requirement: ODSCC40

2011-03-24 16:02:50.288 01852 Wait(60)

2011-03-24 16:02:50.288 Requirement: ODSCC40

2011-03-24 16:03:50.288 01856 Wait(60)

2011-03-24 16:03:50.288 Requirement: ODSCC40

2011-03-24 16:04:50.289 01858 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-24 16:04:50.289 Requirement: ODSCC40

2011-03-24 16:04:50.289 01862 Wait(10)

2011-03-24 16:04:50.289 Requirement: ODSCC40

2011-03-24 16:05:00.289 01865 Comment: Change the configuration with predefined xml config files. Database name is KASPFOUT.

2011-03-24 16:05:00.289 Requirement: ODSCC40

2011-03-24 16:05:00.289 01868 LoadConfig()
2011-03-24 16:05:00.290 Requirement: ODSCC40
2011-03-24 16:05:00.290 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T60_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:05:00.294 - runCommand: Process started, PID: 22997

2011-03-24 16:05:00.295 01871 LoadConfig()
2011-03-24 16:05:00.295 Requirement: ODSCC40
2011-03-24 16:05:00.295 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 16:05:00.298 - runCommand: Process started, PID: 22998

2011-03-24 16:05:00.299 01873 Comment: Run setup for rebuild of database

2011-03-24 16:05:00.299 Requirement: ODSCC40

2011-03-24 16:05:00.299 01877 Wait(20)

2011-03-24 16:05:00.299 Requirement: ODSCC40

2011-03-24 16:05:20.299 01879 Comment: Update all the configs.

2011-03-24 16:05:20.299 Requirement: ODSCC40

2011-03-24 16:05:20.299 01881 ODSSetup()
2011-03-24 16:05:20.299 Requirement: ODSCC40
2011-03-24 16:05:20.299 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:05:20.306 - runCommand: Process started, PID: 22999
2011-03-24 16:05:20.306 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-24 16:05:20.306 ERROR:	MySQL database host set to: localhost
2011-03-24 16:05:20.306 ERROR:	MySQL database port set to: 3306
2011-03-24 16:05:20.306 ERROR:	MySQL database schema set to: FOUTTEST
2011-03-24 16:05:20.306 ERROR:	MySQL database user set to: kaspuser
2011-03-24 16:05:20.306 ERROR:	MySQL database password set
2011-03-24 16:05:20.306 ERROR:	return code = 255

2011-03-24 16:05:20.307 01883 Wait(10)

2011-03-24 16:05:20.307 Requirement: ODSCC40

2011-03-24 16:05:30.307 01885 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 16:05:30.307 Requirement: ODSCC40

2011-03-24 16:05:30.307 01887 Start()
2011-03-24 16:05:30.307 Requirement: ODSCC40
2011-03-24 16:05:30.307 RunCommand(ods-control start)
2011-03-24 16:05:30.309 - runCommand: Background process started, PID: 23002
2011-03-24 16:05:35.343 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 16:05:35.360 - runCommand: Process started, PID: 23025
2011-03-24 16:05:35.360 ERROR:	return code = 1
2011-03-24 16:05:35.360 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 16:05:35.375 - runCommand: Process started, PID: 23030

2011-03-24 16:05:35.375 01889 Wait(10)

2011-03-24 16:05:35.375 Requirement: ODSCC40

-------------------------------------------------------------------------------
Testcase - ODSCC40T70: Use a different Database name for both database and config and check if enforcer successfully connects

2011-03-24 16:05:48.443 01898 Comment: Databasename is changed in conf.xml to "KASPTEST"

2011-03-24 16:05:48.444 Requirement: ODSCC40

2011-03-24 16:05:48.445 01900 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 16:05:48.445 Requirement: ODSCC40

2011-03-24 16:05:48.446 01902 Stop()
2011-03-24 16:05:48.446 Requirement: ODSCC40
2011-03-24 16:05:48.446 RunCommand(ods-control stop)
2011-03-24 16:05:48.486 - runCommand: Process started, PID: 23035
2011-03-24 16:05:48.487 OUTPUT:	Stopping enforcer...
2011-03-24 16:05:48.487 OUTPUT:	Cannot find PID file
2011-03-24 16:05:48.487 OUTPUT:	Stopping signer engine..
2011-03-24 16:05:48.487 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 16:05:48.488 ERROR:	return code = 1
2011-03-24 16:05:48.488 RunCommand(ps -e | grep enforcer)
2011-03-24 16:05:48.587 - runCommand: Process started, PID: 23038
2011-03-24 16:05:48.587 ERROR:	return code = 1
2011-03-24 16:05:48.587 RunCommand(ps -e | grep signer)
2011-03-24 16:05:48.691 - runCommand: Process started, PID: 23041
2011-03-24 16:05:48.692 ERROR:	return code = 1

2011-03-24 16:05:48.693 01904 Wait(10)

2011-03-24 16:05:48.693 Requirement: ODSCC40

2011-03-24 16:05:58.696 01906 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 16:05:58.697 Requirement: ODSCC40

2011-03-24 16:05:58.698 01912 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 16:05:58.699 Requirement: ODSCC40

2011-03-24 16:05:58.700 01915 PurgeHSM()
2011-03-24 16:05:58.700 Requirement: ODSCC40
2011-03-24 16:05:58.701 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 16:05:58.821 - runCommand: Process started, PID: 23044
2011-03-24 16:05:58.822 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 16:05:58.822 ERROR:	return code = 255

2011-03-24 16:05:58.823 01917 Wait(10)

2011-03-24 16:05:58.823 Requirement: ODSCC40

2011-03-24 16:06:08.826 01919 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-24 16:06:08.826 Requirement: ODSCC40

2011-03-24 16:06:08.828 01925 Wait(60)

2011-03-24 16:06:08.828 Requirement: ODSCC40

2011-03-24 16:07:08.831 01929 Wait(60)

2011-03-24 16:07:08.832 Requirement: ODSCC40

2011-03-24 16:08:08.834 01933 Wait(60)

2011-03-24 16:08:08.835 Requirement: ODSCC40

2011-03-24 16:09:08.838 01935 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-24 16:09:08.838 Requirement: ODSCC40

2011-03-24 16:09:08.840 01939 Wait(10)

2011-03-24 16:09:08.840 Requirement: ODSCC40

2011-03-24 16:09:18.843 01942 Comment: Change the configuration with predefined xml config files. Database name is KASPTEST.

2011-03-24 16:09:18.843 Requirement: ODSCC40

2011-03-24 16:09:18.845 01945 LoadConfig()
2011-03-24 16:09:18.845 Requirement: ODSCC40
2011-03-24 16:09:18.845 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T70_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:09:18.893 - runCommand: Process started, PID: 23056

2011-03-24 16:09:18.897 01948 LoadConfig()
2011-03-24 16:09:18.897 Requirement: ODSCC40
2011-03-24 16:09:18.897 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 16:09:18.935 - runCommand: Process started, PID: 23057

2011-03-24 16:09:18.937 01950 Comment: Run setup for rebuild of database

2011-03-24 16:09:18.938 Requirement: ODSCC40

2011-03-24 16:09:18.939 01954 Wait(20)

2011-03-24 16:09:18.939 Requirement: ODSCC40

2011-03-24 16:09:38.941 01956 Comment: Update all the configs.

2011-03-24 16:09:38.942 Requirement: ODSCC40

2011-03-24 16:09:38.943 01958 ODSSetup()
2011-03-24 16:09:38.944 Requirement: ODSCC40
2011-03-24 16:09:38.944 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:09:38.101 - runCommand: Process started, PID: 23058
2011-03-24 16:09:38.101 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-24 16:09:38.101 ERROR:	MySQL database host set to: mysqlho
2011-03-24 16:09:38.101 ERROR:	MySQL database port set to: 3306
2011-03-24 16:09:38.101 ERROR:	MySQL database schema set to: KASPTEST
2011-03-24 16:09:38.101 ERROR:	MySQL database user set to: kaspuser
2011-03-24 16:09:38.101 ERROR:	MySQL database password set
2011-03-24 16:09:38.101 ERROR:	return code = 255

2011-03-24 16:09:38.101 01960 Wait(10)

2011-03-24 16:09:38.101 Requirement: ODSCC40

2011-03-24 16:09:48.102 01962 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 16:09:48.102 Requirement: ODSCC40

2011-03-24 16:09:48.102 01964 Start()
2011-03-24 16:09:48.102 Requirement: ODSCC40
2011-03-24 16:09:48.102 RunCommand(ods-control start)
2011-03-24 16:09:48.104 - runCommand: Background process started, PID: 23061
2011-03-24 16:09:53.136 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 16:09:53.158 - runCommand: Process started, PID: 23084
2011-03-24 16:09:53.158 ERROR:	return code = 1
2011-03-24 16:09:53.158 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 16:09:53.173 - runCommand: Process started, PID: 23089

2011-03-24 16:09:53.173 01966 Wait(10)

2011-03-24 16:09:53.173 Requirement: ODSCC40

-------------------------------------------------------------------------------
Testcase - ODSCC40T80: Use a different Username for database and check if enforcer fails to connect

2011-03-24 16:10:05.851 01978 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 16:10:05.851 Requirement: ODSCC40

2011-03-24 16:10:05.851 01980 Stop()
2011-03-24 16:10:05.851 Requirement: ODSCC40
2011-03-24 16:10:05.851 RunCommand(ods-control stop)
2011-03-24 16:10:05.855 - runCommand: Process started, PID: 23094
2011-03-24 16:10:05.855 OUTPUT:	Stopping enforcer...
2011-03-24 16:10:05.855 OUTPUT:	Cannot find PID file
2011-03-24 16:10:05.855 OUTPUT:	Stopping signer engine..
2011-03-24 16:10:05.855 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 16:10:05.855 ERROR:	return code = 1
2011-03-24 16:10:05.855 RunCommand(ps -e | grep enforcer)
2011-03-24 16:10:05.865 - runCommand: Process started, PID: 23097
2011-03-24 16:10:05.865 ERROR:	return code = 1
2011-03-24 16:10:05.865 RunCommand(ps -e | grep signer)
2011-03-24 16:10:05.876 - runCommand: Process started, PID: 23100
2011-03-24 16:10:05.876 ERROR:	return code = 1

2011-03-24 16:10:05.876 01982 Wait(10)

2011-03-24 16:10:05.876 Requirement: ODSCC40

2011-03-24 16:10:15.876 01984 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 16:10:15.876 Requirement: ODSCC40

2011-03-24 16:10:15.876 01990 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 16:10:15.876 Requirement: ODSCC40

2011-03-24 16:10:15.876 01993 PurgeHSM()
2011-03-24 16:10:15.876 Requirement: ODSCC40
2011-03-24 16:10:15.876 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 16:10:15.891 - runCommand: Process started, PID: 23103
2011-03-24 16:10:15.891 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 16:10:15.891 ERROR:	return code = 255

2011-03-24 16:10:15.891 01995 Wait(10)

2011-03-24 16:10:15.891 Requirement: ODSCC40

2011-03-24 16:10:25.892 01997 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-24 16:10:25.892 Requirement: ODSCC40

2011-03-24 16:10:25.892 02003 Wait(60)

2011-03-24 16:10:25.892 Requirement: ODSCC40

2011-03-24 16:11:25.892 02007 Wait(60)

2011-03-24 16:11:25.892 Requirement: ODSCC40

2011-03-24 16:12:25.892 02011 Wait(60)

2011-03-24 16:12:25.892 Requirement: ODSCC40

2011-03-24 16:13:25.893 02013 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-24 16:13:25.893 Requirement: ODSCC40

2011-03-24 16:13:25.893 02017 Wait(10)

2011-03-24 16:13:25.893 Requirement: ODSCC40

2011-03-24 16:13:35.893 02020 Comment: Change the configuration with predefined xml config files. Username is "wronguser".

2011-03-24 16:13:35.893 Requirement: ODSCC40

2011-03-24 16:13:35.893 02023 LoadConfig()
2011-03-24 16:13:35.893 Requirement: ODSCC40
2011-03-24 16:13:35.893 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T80_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:13:35.898 - runCommand: Process started, PID: 23108

2011-03-24 16:13:35.899 02026 LoadConfig()
2011-03-24 16:13:35.899 Requirement: ODSCC40
2011-03-24 16:13:35.899 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 16:13:35.903 - runCommand: Process started, PID: 23109

2011-03-24 16:13:35.903 02028 Comment: Run setup for rebuild of database

2011-03-24 16:13:35.903 Requirement: ODSCC40

2011-03-24 16:13:35.903 02032 Wait(20)

2011-03-24 16:13:35.904 Requirement: ODSCC40

2011-03-24 16:13:55.904 02034 Comment: Update all the configs.

2011-03-24 16:13:55.904 Requirement: ODSCC40

2011-03-24 16:13:55.904 02036 ODSSetup()
2011-03-24 16:13:55.904 Requirement: ODSCC40
2011-03-24 16:13:55.904 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:13:55.911 - runCommand: Process started, PID: 23110
2011-03-24 16:13:55.911 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-24 16:13:55.911 ERROR:	MySQL database host set to: localhost
2011-03-24 16:13:55.911 ERROR:	MySQL database port set to: 3306
2011-03-24 16:13:55.911 ERROR:	MySQL database schema set to: KASP
2011-03-24 16:13:55.911 ERROR:	MySQL database user set to: wronguser
2011-03-24 16:13:55.911 ERROR:	MySQL database password set
2011-03-24 16:13:55.911 ERROR:	return code = 255

2011-03-24 16:13:55.911 02038 Wait(10)

2011-03-24 16:13:55.911 Requirement: ODSCC40

2011-03-24 16:14:05.912 02040 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 16:14:05.912 Requirement: ODSCC40

2011-03-24 16:14:05.912 02042 Start()
2011-03-24 16:14:05.912 Requirement: ODSCC40
2011-03-24 16:14:05.912 RunCommand(ods-control start)
2011-03-24 16:14:05.914 - runCommand: Background process started, PID: 23113
2011-03-24 16:14:10.947 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 16:14:10.969 - runCommand: Process started, PID: 23136
2011-03-24 16:14:10.970 ERROR:	return code = 1
2011-03-24 16:14:10.970 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 16:14:10.986 - runCommand: Process started, PID: 23141

2011-03-24 16:14:10.986 02044 Wait(10)

2011-03-24 16:14:10.986 Requirement: ODSCC40

-------------------------------------------------------------------------------
Testcase - ODSCC40T90: Use a different Username for both database and config and check if enforcer successfully connects

2011-03-24 16:14:23.656 02054 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 16:14:23.656 Requirement: ODSCC40

2011-03-24 16:14:23.656 02056 Stop()
2011-03-24 16:14:23.656 Requirement: ODSCC40
2011-03-24 16:14:23.656 RunCommand(ods-control stop)
2011-03-24 16:14:23.660 - runCommand: Process started, PID: 23146
2011-03-24 16:14:23.660 OUTPUT:	Stopping enforcer...
2011-03-24 16:14:23.660 OUTPUT:	Cannot find PID file
2011-03-24 16:14:23.660 OUTPUT:	Stopping signer engine..
2011-03-24 16:14:23.660 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 16:14:23.660 ERROR:	return code = 1
2011-03-24 16:14:23.660 RunCommand(ps -e | grep enforcer)
2011-03-24 16:14:23.670 - runCommand: Process started, PID: 23149
2011-03-24 16:14:23.670 ERROR:	return code = 1
2011-03-24 16:14:23.670 RunCommand(ps -e | grep signer)
2011-03-24 16:14:23.681 - runCommand: Process started, PID: 23152
2011-03-24 16:14:23.681 ERROR:	return code = 1

2011-03-24 16:14:23.681 02058 Wait(10)

2011-03-24 16:14:23.681 Requirement: ODSCC40

2011-03-24 16:14:33.681 02060 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 16:14:33.681 Requirement: ODSCC40

2011-03-24 16:14:33.681 02066 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 16:14:33.681 Requirement: ODSCC40

2011-03-24 16:14:33.681 02069 PurgeHSM()
2011-03-24 16:14:33.681 Requirement: ODSCC40
2011-03-24 16:14:33.681 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 16:14:33.695 - runCommand: Process started, PID: 23155
2011-03-24 16:14:33.695 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 16:14:33.695 ERROR:	return code = 255

2011-03-24 16:14:33.695 02071 Wait(10)

2011-03-24 16:14:33.695 Requirement: ODSCC40

2011-03-24 16:14:43.695 02073 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-24 16:14:43.695 Requirement: ODSCC40

2011-03-24 16:14:43.696 02079 Wait(60)

2011-03-24 16:14:43.696 Requirement: ODSCC40

2011-03-24 16:15:43.696 02083 Wait(60)

2011-03-24 16:15:43.696 Requirement: ODSCC40

2011-03-24 16:16:43.696 02087 Wait(60)

2011-03-24 16:16:43.696 Requirement: ODSCC40

2011-03-24 16:17:43.697 02089 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-24 16:17:43.697 Requirement: ODSCC40

2011-03-24 16:17:43.697 02093 Wait(10)

2011-03-24 16:17:43.697 Requirement: ODSCC40

2011-03-24 16:17:53.697 02096 Comment: Change the configuration with predefined xml config files. Username is "gooduser".

2011-03-24 16:17:53.697 Requirement: ODSCC40

2011-03-24 16:17:53.697 02099 LoadConfig()
2011-03-24 16:17:53.697 Requirement: ODSCC40
2011-03-24 16:17:53.697 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T90_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:17:53.702 - runCommand: Process started, PID: 23163

2011-03-24 16:17:53.702 02102 LoadConfig()
2011-03-24 16:17:53.702 Requirement: ODSCC40
2011-03-24 16:17:53.702 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 16:17:53.706 - runCommand: Process started, PID: 23164

2011-03-24 16:17:53.706 02104 Comment: Run setup for rebuild of database

2011-03-24 16:17:53.707 Requirement: ODSCC40

2011-03-24 16:17:53.707 02108 Wait(20)

2011-03-24 16:17:53.707 Requirement: ODSCC40

2011-03-24 16:18:13.707 02110 Comment: Update all the configs.

2011-03-24 16:18:13.707 Requirement: ODSCC40

2011-03-24 16:18:13.707 02112 ODSSetup()
2011-03-24 16:18:13.707 Requirement: ODSCC40
2011-03-24 16:18:13.707 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:18:13.714 - runCommand: Process started, PID: 23165
2011-03-24 16:18:13.714 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-24 16:18:13.714 ERROR:	MySQL database host set to: localhost
2011-03-24 16:18:13.714 ERROR:	MySQL database port set to: 3306
2011-03-24 16:18:13.714 ERROR:	MySQL database schema set to: KASPTEST2
2011-03-24 16:18:13.714 ERROR:	MySQL database user set to: gooduser
2011-03-24 16:18:13.714 ERROR:	MySQL database password set
2011-03-24 16:18:13.714 ERROR:	return code = 255

2011-03-24 16:18:13.714 02114 Wait(10)

2011-03-24 16:18:13.714 Requirement: ODSCC40

2011-03-24 16:18:23.715 02116 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 16:18:23.715 Requirement: ODSCC40

2011-03-24 16:18:23.715 02118 Start()
2011-03-24 16:18:23.715 Requirement: ODSCC40
2011-03-24 16:18:23.715 RunCommand(ods-control start)
2011-03-24 16:18:23.717 - runCommand: Background process started, PID: 23168
2011-03-24 16:18:28.753 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 16:18:28.773 - runCommand: Process started, PID: 23191
2011-03-24 16:18:28.773 ERROR:	return code = 1
2011-03-24 16:18:28.773 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 16:18:28.789 - runCommand: Process started, PID: 23196

2011-03-24 16:18:28.789 02120 Wait(10)

2011-03-24 16:18:28.789 Requirement: ODSCC40

-------------------------------------------------------------------------------
Testcase - ODSCC40T100: Use a different Password for database and check if enforcer fails to connect

2011-03-24 16:18:41.472 02132 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 16:18:41.472 Requirement: ODSCC40

2011-03-24 16:18:41.472 02134 Stop()
2011-03-24 16:18:41.472 Requirement: ODSCC40
2011-03-24 16:18:41.472 RunCommand(ods-control stop)
2011-03-24 16:18:41.476 - runCommand: Process started, PID: 23201
2011-03-24 16:18:41.476 OUTPUT:	Stopping enforcer...
2011-03-24 16:18:41.476 OUTPUT:	Cannot find PID file
2011-03-24 16:18:41.476 OUTPUT:	Stopping signer engine..
2011-03-24 16:18:41.476 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 16:18:41.476 ERROR:	return code = 1
2011-03-24 16:18:41.476 RunCommand(ps -e | grep enforcer)
2011-03-24 16:18:41.486 - runCommand: Process started, PID: 23204
2011-03-24 16:18:41.486 ERROR:	return code = 1
2011-03-24 16:18:41.487 RunCommand(ps -e | grep signer)
2011-03-24 16:18:41.497 - runCommand: Process started, PID: 23207
2011-03-24 16:18:41.497 ERROR:	return code = 1

2011-03-24 16:18:41.497 02136 Wait(10)

2011-03-24 16:18:41.497 Requirement: ODSCC40

2011-03-24 16:18:51.497 02138 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 16:18:51.497 Requirement: ODSCC40

2011-03-24 16:18:51.497 02144 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 16:18:51.498 Requirement: ODSCC40

2011-03-24 16:18:51.498 02147 PurgeHSM()
2011-03-24 16:18:51.498 Requirement: ODSCC40
2011-03-24 16:18:51.498 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 16:18:51.513 - runCommand: Process started, PID: 23210
2011-03-24 16:18:51.513 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 16:18:51.513 ERROR:	return code = 255

2011-03-24 16:18:51.513 02149 Wait(10)

2011-03-24 16:18:51.513 Requirement: ODSCC40

2011-03-24 16:19:01.513 02151 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-24 16:19:01.513 Requirement: ODSCC40

2011-03-24 16:19:01.513 02157 Wait(60)

2011-03-24 16:19:01.513 Requirement: ODSCC40

2011-03-24 16:20:01.514 02161 Wait(60)

2011-03-24 16:20:01.514 Requirement: ODSCC40

2011-03-24 16:21:01.514 02165 Wait(60)

2011-03-24 16:21:01.514 Requirement: ODSCC40

2011-03-24 16:22:01.514 02167 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-24 16:22:01.514 Requirement: ODSCC40

2011-03-24 16:22:01.515 02171 Wait(10)

2011-03-24 16:22:01.515 Requirement: ODSCC40

2011-03-24 16:22:11.515 02174 Comment: Change the configuration with predefined xml config files. Password changed to "456abc".

2011-03-24 16:22:11.515 Requirement: ODSCC40

2011-03-24 16:22:11.515 02177 LoadConfig()
2011-03-24 16:22:11.515 Requirement: ODSCC40
2011-03-24 16:22:11.515 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T100_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:22:11.520 - runCommand: Process started, PID: 23214

2011-03-24 16:22:11.521 02180 LoadConfig()
2011-03-24 16:22:11.521 Requirement: ODSCC40
2011-03-24 16:22:11.521 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 16:22:11.525 - runCommand: Process started, PID: 23215

2011-03-24 16:22:11.525 02182 Comment: Run setup for rebuild of database

2011-03-24 16:22:11.525 Requirement: ODSCC40

2011-03-24 16:22:11.525 02186 Wait(20)

2011-03-24 16:22:11.525 Requirement: ODSCC40

2011-03-24 16:22:31.525 02188 Comment: Update all the configs.

2011-03-24 16:22:31.525 Requirement: ODSCC40

2011-03-24 16:22:31.525 02190 ODSSetup()
2011-03-24 16:22:31.526 Requirement: ODSCC40
2011-03-24 16:22:31.526 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:22:31.532 - runCommand: Process started, PID: 23216
2011-03-24 16:22:31.532 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-24 16:22:31.532 ERROR:	MySQL database host set to: localhost
2011-03-24 16:22:31.532 ERROR:	MySQL database port set to: 3306
2011-03-24 16:22:31.532 ERROR:	MySQL database schema set to: KASPTEST2
2011-03-24 16:22:31.532 ERROR:	MySQL database user set to: gooduser
2011-03-24 16:22:31.532 ERROR:	MySQL database password set
2011-03-24 16:22:31.533 ERROR:	return code = 255

2011-03-24 16:22:31.533 02192 Wait(10)

2011-03-24 16:22:31.533 Requirement: ODSCC40

2011-03-24 16:22:41.533 02194 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 16:22:41.533 Requirement: ODSCC40

2011-03-24 16:22:41.533 02196 Start()
2011-03-24 16:22:41.533 Requirement: ODSCC40
2011-03-24 16:22:41.533 RunCommand(ods-control start)
2011-03-24 16:22:41.535 - runCommand: Background process started, PID: 23219
2011-03-24 16:22:46.568 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 16:22:46.585 - runCommand: Process started, PID: 23242
2011-03-24 16:22:46.585 ERROR:	return code = 1
2011-03-24 16:22:46.585 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 16:22:46.602 - runCommand: Process started, PID: 23247

2011-03-24 16:22:46.602 02198 Wait(10)

2011-03-24 16:22:46.602 Requirement: ODSCC40

-------------------------------------------------------------------------------
Testcase - ODSCC40T110: Use a different Password name for both database and config and check if enforcer successfully connects

2011-03-24 16:22:59.271 02211 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 16:22:59.271 Requirement: ODSCC40

2011-03-24 16:22:59.271 02213 Stop()
2011-03-24 16:22:59.271 Requirement: ODSCC40
2011-03-24 16:22:59.271 RunCommand(ods-control stop)
2011-03-24 16:22:59.275 - runCommand: Process started, PID: 23252
2011-03-24 16:22:59.275 OUTPUT:	Stopping enforcer...
2011-03-24 16:22:59.275 OUTPUT:	Cannot find PID file
2011-03-24 16:22:59.275 OUTPUT:	Stopping signer engine..
2011-03-24 16:22:59.275 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 16:22:59.275 ERROR:	return code = 1
2011-03-24 16:22:59.275 RunCommand(ps -e | grep enforcer)
2011-03-24 16:22:59.285 - runCommand: Process started, PID: 23255
2011-03-24 16:22:59.285 ERROR:	return code = 1
2011-03-24 16:22:59.285 RunCommand(ps -e | grep signer)
2011-03-24 16:22:59.295 - runCommand: Process started, PID: 23258
2011-03-24 16:22:59.295 ERROR:	return code = 1

2011-03-24 16:22:59.296 02215 Wait(10)

2011-03-24 16:22:59.296 Requirement: ODSCC40

2011-03-24 16:23:09.296 02217 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 16:23:09.296 Requirement: ODSCC40

2011-03-24 16:23:09.296 02223 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 16:23:09.296 Requirement: ODSCC40

2011-03-24 16:23:09.296 02226 PurgeHSM()
2011-03-24 16:23:09.296 Requirement: ODSCC40
2011-03-24 16:23:09.296 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 16:23:09.311 - runCommand: Process started, PID: 23261
2011-03-24 16:23:09.311 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 16:23:09.311 ERROR:	return code = 255

2011-03-24 16:23:09.311 02228 Wait(10)

2011-03-24 16:23:09.312 Requirement: ODSCC40

2011-03-24 16:23:19.312 02230 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-24 16:23:19.312 Requirement: ODSCC40

2011-03-24 16:23:19.312 02236 Wait(60)

2011-03-24 16:23:19.312 Requirement: ODSCC40

2011-03-24 16:24:19.312 02240 Wait(60)

2011-03-24 16:24:19.312 Requirement: ODSCC40

2011-03-24 16:25:19.313 02244 Wait(60)

2011-03-24 16:25:19.313 Requirement: ODSCC40

2011-03-24 16:26:19.313 02246 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-24 16:26:19.313 Requirement: ODSCC40

2011-03-24 16:26:19.313 02250 Wait(10)

2011-03-24 16:26:19.313 Requirement: ODSCC40

2011-03-24 16:26:29.313 02253 Comment: Change the configuration with predefined xml config files. Password changed to "123abc".

2011-03-24 16:26:29.314 Requirement: ODSCC40

2011-03-24 16:26:29.314 02256 LoadConfig()
2011-03-24 16:26:29.314 Requirement: ODSCC40
2011-03-24 16:26:29.314 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T110_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:26:29.318 - runCommand: Process started, PID: 23267

2011-03-24 16:26:29.319 02259 LoadConfig()
2011-03-24 16:26:29.319 Requirement: ODSCC40
2011-03-24 16:26:29.319 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 16:26:29.323 - runCommand: Process started, PID: 23268

2011-03-24 16:26:29.323 02261 Comment: Run setup for rebuild of database

2011-03-24 16:26:29.323 Requirement: ODSCC40

2011-03-24 16:26:29.323 02265 Wait(20)

2011-03-24 16:26:29.323 Requirement: ODSCC40

2011-03-24 16:26:49.323 02267 Comment: Update all the configs.

2011-03-24 16:26:49.323 Requirement: ODSCC40

2011-03-24 16:26:49.324 02269 ODSSetup()
2011-03-24 16:26:49.324 Requirement: ODSCC40
2011-03-24 16:26:49.324 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:26:49.330 - runCommand: Process started, PID: 23269
2011-03-24 16:26:49.331 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-24 16:26:49.331 ERROR:	MySQL database host set to: localhost
2011-03-24 16:26:49.331 ERROR:	MySQL database port set to: 3306
2011-03-24 16:26:49.331 ERROR:	MySQL database schema set to: KASP
2011-03-24 16:26:49.331 ERROR:	MySQL database user set to: 
2011-03-24 16:26:49.331 ERROR:	MySQL database password set
2011-03-24 16:26:49.331 ERROR:	return code = 255

2011-03-24 16:26:49.331 02271 Wait(10)

2011-03-24 16:26:49.331 Requirement: ODSCC40

2011-03-24 16:26:59.331 02273 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-24 16:26:59.331 Requirement: ODSCC40

2011-03-24 16:26:59.331 02275 Start()
2011-03-24 16:26:59.331 Requirement: ODSCC40
2011-03-24 16:26:59.331 RunCommand(ods-control start)
2011-03-24 16:26:59.333 - runCommand: Background process started, PID: 23272
2011-03-24 16:27:04.367 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 16:27:04.385 - runCommand: Process started, PID: 23295
2011-03-24 16:27:04.385 ERROR:	return code = 1
2011-03-24 16:27:04.385 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 16:27:04.399 - runCommand: Process started, PID: 23300

2011-03-24 16:27:04.399 02277 Wait(10)

2011-03-24 16:27:04.399 Requirement: ODSCC40
Testcondition - ODSCC50: The configuration of signer settings located in conf.xml should operate according to requirements and intentions
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSCC50T10: Use privileges test:test for signer in config only and check if signer fails to run

2011-03-24 16:27:17.813 02287 Comment: Privileges have been adjusted for the signer in the conf.xml. User = opendnssec; Group = opendnssec. This user and group do not have acces to the correct folder.

2011-03-24 16:27:17.813 Requirement: ODSCC50

2011-03-24 16:27:17.814 02289 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 16:27:17.814 Requirement: ODSCC50

2011-03-24 16:27:17.815 02291 Stop()
2011-03-24 16:27:17.815 Requirement: ODSCC50
2011-03-24 16:27:17.815 RunCommand(ods-control stop)
2011-03-24 16:27:17.856 - runCommand: Process started, PID: 23305
2011-03-24 16:27:17.857 OUTPUT:	Stopping enforcer...
2011-03-24 16:27:17.857 OUTPUT:	Cannot find PID file
2011-03-24 16:27:17.857 OUTPUT:	Stopping signer engine..
2011-03-24 16:27:17.857 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 16:27:17.858 ERROR:	return code = 1
2011-03-24 16:27:17.858 RunCommand(ps -e | grep enforcer)
2011-03-24 16:27:17.956 - runCommand: Process started, PID: 23308
2011-03-24 16:27:17.957 ERROR:	return code = 1
2011-03-24 16:27:17.957 RunCommand(ps -e | grep signer)
2011-03-24 16:27:17.107 - runCommand: Process started, PID: 23311
2011-03-24 16:27:17.107 ERROR:	return code = 1

2011-03-24 16:27:17.107 02293 Wait(10)

2011-03-24 16:27:17.107 Requirement: ODSCC50

2011-03-24 16:27:27.107 02295 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 16:27:27.107 Requirement: ODSCC50

2011-03-24 16:27:27.107 02301 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 16:27:27.107 Requirement: ODSCC50

2011-03-24 16:27:27.108 02304 PurgeHSM()
2011-03-24 16:27:27.108 Requirement: ODSCC50
2011-03-24 16:27:27.108 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 16:27:27.120 - runCommand: Process started, PID: 23314
2011-03-24 16:27:27.120 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-24 16:27:27.120 ERROR:	return code = 255

2011-03-24 16:27:27.121 02306 Wait(10)

2011-03-24 16:27:27.121 Requirement: ODSCC50

2011-03-24 16:27:37.121 02308 Comment: Rebuild ODS with SQLlite database.

2011-03-24 16:27:37.121 Requirement: ODSCC50

2011-03-24 16:27:37.121 02314 Wait(60)

2011-03-24 16:27:37.121 Requirement: ODSCC50

2011-03-24 16:28:37.121 02318 Wait(60)

2011-03-24 16:28:37.121 Requirement: ODSCC50

2011-03-24 16:29:37.122 02322 Wait(60)

2011-03-24 16:29:37.122 Requirement: ODSCC50

2011-03-24 16:30:37.122 02325 Comment: Change the configuration with predefined xml config files.

2011-03-24 16:30:37.122 Requirement: ODSCC50

2011-03-24 16:30:37.122 02328 LoadConfig()
2011-03-24 16:30:37.122 Requirement: ODSCC50
2011-03-24 16:30:37.122 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:30:37.127 - runCommand: Process started, PID: 23318

2011-03-24 16:30:37.127 02331 LoadConfig()
2011-03-24 16:30:37.127 Requirement: ODSCC50
2011-03-24 16:30:37.127 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 16:30:37.131 - runCommand: Process started, PID: 23319

2011-03-24 16:30:37.131 02333 Comment: Run setup for rebuild of database

2011-03-24 16:30:37.131 Requirement: ODSCC50

2011-03-24 16:30:37.132 02337 Wait(20)

2011-03-24 16:30:37.132 Requirement: ODSCC50

2011-03-24 16:30:57.132 02339 Comment: Update all the configs.

2011-03-24 16:30:57.132 Requirement: ODSCC50

2011-03-24 16:30:57.132 02341 ODSSetup()
2011-03-24 16:30:57.132 Requirement: ODSCC50
2011-03-24 16:30:57.132 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:31:09.473 - runCommand: Process started, PID: 23320
2011-03-24 16:31:09.474 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 16:31:09.474 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 16:31:09.474 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 16:31:09.474 OUTPUT:	Repository SoftHSM found
2011-03-24 16:31:09.474 OUTPUT:	No Maximum Capacity set.
2011-03-24 16:31:09.474 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 16:31:09.474 OUTPUT:	Policy default2 found
2011-03-24 16:31:09.474 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 16:31:09.474 OUTPUT:	Policy default found
2011-03-24 16:31:09.474 OUTPUT:	Zone ods found
2011-03-24 16:31:09.474 OUTPUT:	Policy set to default.
2011-03-24 16:31:09.474 OUTPUT:	Added zone ods to database
2011-03-24 16:31:09.474 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 16:31:09.474 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 16:31:09.474 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 16:31:09.474 02343 Wait(10)

2011-03-24 16:31:09.474 Requirement: ODSCC50

2011-03-24 16:31:19.474 02345 Comment: Change the configuration with predefined xml config files for this testcase.

2011-03-24 16:31:19.474 Requirement: ODSCC50

2011-03-24 16:31:19.475 02348 LoadConfig()
2011-03-24 16:31:19.475 Requirement: ODSCC50
2011-03-24 16:31:19.475 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:31:19.479 - runCommand: Process started, PID: 23333

2011-03-24 16:31:19.480 02351 LoadConfig()
2011-03-24 16:31:19.480 Requirement: ODSCC50
2011-03-24 16:31:19.480 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 16:31:19.483 - runCommand: Process started, PID: 23334

2011-03-24 16:31:19.484 02353 Comment: Update all the configs.

2011-03-24 16:31:19.484 Requirement: ODSCC50

2011-03-24 16:31:19.484 02355 ODSSetup()
2011-03-24 16:31:19.484 Requirement: ODSCC50
2011-03-24 16:31:19.484 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:31:31.512 - runCommand: Process started, PID: 23335
2011-03-24 16:31:31.512 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 16:31:31.512 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 16:31:31.512 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 16:31:31.512 OUTPUT:	Repository SoftHSM found
2011-03-24 16:31:31.512 OUTPUT:	No Maximum Capacity set.
2011-03-24 16:31:31.512 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 16:31:31.512 OUTPUT:	Policy default2 found
2011-03-24 16:31:31.512 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 16:31:31.512 OUTPUT:	Policy default found
2011-03-24 16:31:31.512 OUTPUT:	Zone ods found
2011-03-24 16:31:31.512 OUTPUT:	Policy set to default.
2011-03-24 16:31:31.512 OUTPUT:	Added zone ods to database
2011-03-24 16:31:31.513 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 16:31:31.513 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 16:31:31.513 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 16:31:31.513 02357 Wait(10)

2011-03-24 16:31:31.513 Requirement: ODSCC50

2011-03-24 16:31:44.197 02362 Comment: Change the configuration with predefined original conf.xml file.

2011-03-24 16:31:44.197 Requirement: ODSCC50

2011-03-24 16:31:44.197 02365 LoadConfig()
2011-03-24 16:31:44.197 Requirement: ODSCC50
2011-03-24 16:31:44.197 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:31:44.200 - runCommand: Process started, PID: 23348

2011-03-24 16:31:44.200 02367 Comment: Update all the configs.

2011-03-24 16:31:44.200 Requirement: ODSCC50

2011-03-24 16:31:44.200 02369 ODSSetup()
2011-03-24 16:31:44.200 Requirement: ODSCC50
2011-03-24 16:31:44.200 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:31:55.558 - runCommand: Process started, PID: 23349
2011-03-24 16:31:55.558 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 16:31:55.558 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 16:31:55.558 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 16:31:55.558 OUTPUT:	Repository SoftHSM found
2011-03-24 16:31:55.558 OUTPUT:	No Maximum Capacity set.
2011-03-24 16:31:55.558 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 16:31:55.558 OUTPUT:	Policy default2 found
2011-03-24 16:31:55.558 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 16:31:55.558 OUTPUT:	Policy default found
2011-03-24 16:31:55.558 OUTPUT:	Zone ods found
2011-03-24 16:31:55.558 OUTPUT:	Policy set to default.
2011-03-24 16:31:55.558 OUTPUT:	Added zone ods to database
2011-03-24 16:31:55.558 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 16:31:55.559 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 16:31:55.559 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSCC50T20: Use privileges test:test for signer and /tmp and check if signer runs without errors

2011-03-24 16:31:55.559 02374 Comment: Privileges have been adjusted for the signer in the conf.xml. User = ods; Group = ods. This user and group do not have acces to the correct folder.

2011-03-24 16:31:55.559 Requirement: ODSCC50

2011-03-24 16:31:55.559 02376 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 16:31:55.559 Requirement: ODSCC50

2011-03-24 16:31:55.559 02378 Stop()
2011-03-24 16:31:55.559 Requirement: ODSCC50
2011-03-24 16:31:55.559 RunCommand(ods-control stop)
2011-03-24 16:31:55.565 - runCommand: Process started, PID: 23362
2011-03-24 16:31:55.565 OUTPUT:	Stopping enforcer...
2011-03-24 16:31:55.565 OUTPUT:	Cannot find PID file
2011-03-24 16:31:55.565 OUTPUT:	Stopping signer engine..
2011-03-24 16:31:55.565 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 16:31:55.565 ERROR:	return code = 1
2011-03-24 16:31:55.565 RunCommand(ps -e | grep enforcer)
2011-03-24 16:31:55.581 - runCommand: Process started, PID: 23365
2011-03-24 16:31:55.581 ERROR:	return code = 1
2011-03-24 16:31:55.581 RunCommand(ps -e | grep signer)
2011-03-24 16:31:55.593 - runCommand: Process started, PID: 23368
2011-03-24 16:31:55.593 ERROR:	return code = 1

2011-03-24 16:31:55.593 02380 Wait(10)

2011-03-24 16:31:55.593 Requirement: ODSCC50

2011-03-24 16:32:05.593 02382 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 16:32:05.593 Requirement: ODSCC50

2011-03-24 16:32:05.594 02388 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 16:32:05.594 Requirement: ODSCC50

2011-03-24 16:32:05.594 02391 PurgeHSM()
2011-03-24 16:32:05.594 Requirement: ODSCC50
2011-03-24 16:32:05.594 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 16:32:05.606 - runCommand: Process started, PID: 23371
2011-03-24 16:32:05.606 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-24 16:32:05.606 OUTPUT:	0 keys found.
2011-03-24 16:32:05.606 ERROR:	return code = 255

2011-03-24 16:32:05.606 02393 Wait(10)

2011-03-24 16:32:05.606 Requirement: ODSCC50

2011-03-24 16:32:15.606 02395 Comment: Change the rights for the kasp.db file to user ods.

2011-03-24 16:32:15.606 Requirement: ODSCC50

2011-03-24 16:32:15.606 02401 Comment: Change the configuration with predefined xml config files.

2011-03-24 16:32:15.606 Requirement: ODSCC50

2011-03-24 16:32:15.607 02404 LoadConfig()
2011-03-24 16:32:15.607 Requirement: ODSCC50
2011-03-24 16:32:15.607 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T20_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:32:15.611 - runCommand: Process started, PID: 23375

2011-03-24 16:32:15.612 02407 LoadConfig()
2011-03-24 16:32:15.612 Requirement: ODSCC50
2011-03-24 16:32:15.612 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 16:32:15.616 - runCommand: Process started, PID: 23376

2011-03-24 16:32:15.616 02409 Comment: Update all the configs.

2011-03-24 16:32:15.616 Requirement: ODSCC50

2011-03-24 16:32:15.616 02411 ODSSetup()
2011-03-24 16:32:15.616 Requirement: ODSCC50
2011-03-24 16:32:15.616 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:32:25.884 - runCommand: Process started, PID: 23377
2011-03-24 16:32:25.884 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 16:32:25.884 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 16:32:25.884 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 16:32:25.884 OUTPUT:	Repository SoftHSM found
2011-03-24 16:32:25.885 OUTPUT:	No Maximum Capacity set.
2011-03-24 16:32:25.885 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 16:32:25.885 OUTPUT:	Policy default2 found
2011-03-24 16:32:25.885 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 16:32:25.885 OUTPUT:	Policy default found
2011-03-24 16:32:25.885 OUTPUT:	Zone ods found
2011-03-24 16:32:25.885 OUTPUT:	Policy set to default.
2011-03-24 16:32:25.885 OUTPUT:	Added zone ods to database
2011-03-24 16:32:25.885 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 16:32:25.885 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 16:32:25.885 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 16:32:25.885 02413 Wait(10)

2011-03-24 16:32:25.885 Requirement: ODSCC50

2011-03-24 16:32:35.885 02415 Comment: Start enforcer

2011-03-24 16:32:35.885 Requirement: ODSCC50

2011-03-24 16:32:35.885 02417 Wait(10)

2011-03-24 16:32:35.885 Requirement: ODSCC50

2011-03-24 16:32:45.886 02422 Wait(15)

2011-03-24 16:32:45.886 Requirement: ODSCC50

2011-03-24 16:33:03.557 02429 Stop()
2011-03-24 16:33:03.557 Requirement: ODSCC50
2011-03-24 16:33:03.557 RunCommand(ods-control stop)
2011-03-24 16:33:03.561 - runCommand: Process started, PID: 23390
2011-03-24 16:33:03.561 OUTPUT:	Stopping enforcer...
2011-03-24 16:33:03.562 OUTPUT:	Cannot find PID file
2011-03-24 16:33:03.562 OUTPUT:	Stopping signer engine..
2011-03-24 16:33:03.562 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 16:33:03.562 ERROR:	return code = 1
2011-03-24 16:33:03.562 RunCommand(ps -e | grep enforcer)
2011-03-24 16:33:03.572 - runCommand: Process started, PID: 23393
2011-03-24 16:33:03.572 ERROR:	return code = 1
2011-03-24 16:33:03.572 RunCommand(ps -e | grep signer)
2011-03-24 16:33:03.584 - runCommand: Process started, PID: 23396
2011-03-24 16:33:03.584 ERROR:	return code = 1

2011-03-24 16:33:03.584 02431 Comment: Change the configuration with predefined original conf.xml file and the original rights for the kasp.db file.

2011-03-24 16:33:03.584 Requirement: ODSCC50

2011-03-24 16:33:03.585 02438 LoadConfig()
2011-03-24 16:33:03.585 Requirement: ODSCC50
2011-03-24 16:33:03.585 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:33:03.588 - runCommand: Process started, PID: 23399

2011-03-24 16:33:03.588 02440 Comment: Update all the configs.

2011-03-24 16:33:03.588 Requirement: ODSCC50

2011-03-24 16:33:03.588 02442 ODSSetup()
2011-03-24 16:33:03.588 Requirement: ODSCC50
2011-03-24 16:33:03.588 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:33:15.151 - runCommand: Process started, PID: 23400
2011-03-24 16:33:15.151 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 16:33:15.151 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 16:33:15.151 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 16:33:15.151 OUTPUT:	Repository SoftHSM found
2011-03-24 16:33:15.151 OUTPUT:	No Maximum Capacity set.
2011-03-24 16:33:15.151 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 16:33:15.151 OUTPUT:	Policy default2 found
2011-03-24 16:33:15.151 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 16:33:15.151 OUTPUT:	Policy default found
2011-03-24 16:33:15.151 OUTPUT:	Zone ods found
2011-03-24 16:33:15.151 OUTPUT:	Policy set to default.
2011-03-24 16:33:15.151 OUTPUT:	Added zone ods to database
2011-03-24 16:33:15.151 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 16:33:15.151 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 16:33:15.151 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSCC50T30: Change the /tmp location and change WorkingDirectory in conf.xml accordingly

2011-03-24 16:33:15.152 02447 Comment: Working directory has been adjusted in the conf.xml. Working directory now is: var/opendnssec/temporary. Make sure that directory exists before running this testcase, if not it will be created in this testcase.

2011-03-24 16:33:15.152 Requirement: ODSCC50

2011-03-24 16:33:15.152 02449 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 16:33:15.152 Requirement: ODSCC50

2011-03-24 16:33:15.152 02451 Stop()
2011-03-24 16:33:15.152 Requirement: ODSCC50
2011-03-24 16:33:15.152 RunCommand(ods-control stop)
2011-03-24 16:33:15.158 - runCommand: Process started, PID: 23413
2011-03-24 16:33:15.158 OUTPUT:	Stopping enforcer...
2011-03-24 16:33:15.158 OUTPUT:	Cannot find PID file
2011-03-24 16:33:15.158 OUTPUT:	Stopping signer engine..
2011-03-24 16:33:15.158 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-24 16:33:15.158 ERROR:	return code = 1
2011-03-24 16:33:15.158 RunCommand(ps -e | grep enforcer)
2011-03-24 16:33:15.174 - runCommand: Process started, PID: 23416
2011-03-24 16:33:15.174 ERROR:	return code = 1
2011-03-24 16:33:15.174 RunCommand(ps -e | grep signer)
2011-03-24 16:33:15.190 - runCommand: Process started, PID: 23419
2011-03-24 16:33:15.190 ERROR:	return code = 1

2011-03-24 16:33:15.190 02453 Wait(10)

2011-03-24 16:33:15.190 Requirement: ODSCC50

2011-03-24 16:33:25.191 02455 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 16:33:25.191 Requirement: ODSCC50

2011-03-24 16:33:25.191 02461 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 16:33:25.191 Requirement: ODSCC50

2011-03-24 16:33:25.191 02464 PurgeHSM()
2011-03-24 16:33:25.191 Requirement: ODSCC50
2011-03-24 16:33:25.191 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 16:33:25.203 - runCommand: Process started, PID: 23422
2011-03-24 16:33:25.203 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-24 16:33:25.203 OUTPUT:	0 keys found.
2011-03-24 16:33:25.203 ERROR:	return code = 255

2011-03-24 16:33:25.203 02466 Wait(10)

2011-03-24 16:33:25.203 Requirement: ODSCC50

2011-03-24 16:33:35.203 02472 Comment: Change the configuration with predefined xml config files.

2011-03-24 16:33:35.203 Requirement: ODSCC50

2011-03-24 16:33:35.203 02475 LoadConfig()
2011-03-24 16:33:35.203 Requirement: ODSCC50
2011-03-24 16:33:35.203 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T30_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:33:35.208 - runCommand: Process started, PID: 23426

2011-03-24 16:33:35.209 02478 LoadConfig()
2011-03-24 16:33:35.209 Requirement: ODSCC50
2011-03-24 16:33:35.209 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 16:33:35.212 - runCommand: Process started, PID: 23427

2011-03-24 16:33:35.213 02480 Comment: Update all the configs.

2011-03-24 16:33:35.213 Requirement: ODSCC50

2011-03-24 16:33:35.213 02482 ODSSetup()
2011-03-24 16:33:35.213 Requirement: ODSCC50
2011-03-24 16:33:35.213 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:33:45.910 - runCommand: Process started, PID: 23428
2011-03-24 16:33:45.910 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 16:33:45.910 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 16:33:45.910 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 16:33:45.910 OUTPUT:	Repository SoftHSM found
2011-03-24 16:33:45.910 OUTPUT:	No Maximum Capacity set.
2011-03-24 16:33:45.910 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 16:33:45.910 OUTPUT:	Policy default2 found
2011-03-24 16:33:45.910 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 16:33:45.910 OUTPUT:	Policy default found
2011-03-24 16:33:45.910 OUTPUT:	Zone ods found
2011-03-24 16:33:45.910 OUTPUT:	Policy set to default.
2011-03-24 16:33:45.910 OUTPUT:	Added zone ods to database
2011-03-24 16:33:45.910 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 16:33:45.910 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 16:33:45.910 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 16:33:45.911 02484 Wait(10)

2011-03-24 16:33:45.911 Requirement: ODSCC50

2011-03-24 16:33:55.911 02486 Comment: Start enforcer

2011-03-24 16:33:55.911 Requirement: ODSCC50

2011-03-24 16:33:55.911 02488 Start()
2011-03-24 16:33:55.911 Requirement: ODSCC50
2011-03-24 16:33:55.911 RunCommand(ods-control start)
2011-03-24 16:33:55.913 - runCommand: Background process started, PID: 23441
2011-03-24 16:33:57.938 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 16:33:57.956 - runCommand: Process started, PID: 23468
2011-03-24 16:33:57.956 OUTPUT:	ods-enforcerd
2011-03-24 16:33:57.956 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 16:33:57.972 - runCommand: Process started, PID: 23472
2011-03-24 16:33:57.972 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-24 16:33:57.972 02490 Wait(10)

2011-03-24 16:33:57.972 Requirement: ODSCC50

2011-03-24 16:34:07.972 02495 Wait(15)

2011-03-24 16:34:07.973 Requirement: ODSCC50

2011-03-24 16:34:25.663 02500 Comment: Check if the ods files are present in the new temporay folder.

2011-03-24 16:34:25.663 Requirement: ODSCC50

2011-03-24 16:34:25.663 02504 CheckFilePresent(ods.denial)
2011-03-24 16:34:25.663 Requirement: ODSCC50
2011-03-24 16:34:25.663 FAILED:	(Check for Equal) - Expected: ods.denial Found: 

2011-03-24 16:34:25.663 02506 CheckFilePresent(ods.dnskeys)
2011-03-24 16:34:25.663 Requirement: ODSCC50
2011-03-24 16:34:25.663 FAILED:	(Check for Equal) - Expected: ods.dnskeys Found: 

2011-03-24 16:34:25.663 02508 CheckFilePresent(ods.finalized)
2011-03-24 16:34:25.663 Requirement: ODSCC50
2011-03-24 16:34:25.663 FAILED:	(Check for Equal) - Expected: ods.finalized Found: 

2011-03-24 16:34:25.663 02510 CheckFilePresent(ods.rrsigs)
2011-03-24 16:34:25.663 Requirement: ODSCC50
2011-03-24 16:34:25.663 FAILED:	(Check for Equal) - Expected: ods.rrsigs Found: 

2011-03-24 16:34:25.663 02512 CheckFilePresent(ods.state)
2011-03-24 16:34:25.663 Requirement: ODSCC50
2011-03-24 16:34:25.663 FAILED:	(Check for Equal) - Expected: ods.state Found: 

2011-03-24 16:34:25.664 02514 CheckFilePresent(ods.sc)
2011-03-24 16:34:25.664 Requirement: ODSCC50
2011-03-24 16:34:25.664 FAILED:	(Check for Equal) - Expected: ods.sc Found: 

2011-03-24 16:34:25.664 02516 CheckFilePresent(ods.unsorted)
2011-03-24 16:34:25.664 Requirement: ODSCC50
2011-03-24 16:34:25.664 FAILED:	(Check for Equal) - Expected: ods.unsorted Found: 

2011-03-24 16:34:25.664 02518 CheckFilePresent(ods.task)
2011-03-24 16:34:25.664 Requirement: ODSCC50
2011-03-24 16:34:25.664 FAILED:	(Check for Equal) - Expected: ods.task Found: 

2011-03-24 16:34:25.664 02522 Stop()
2011-03-24 16:34:25.664 Requirement: ODSCC50
2011-03-24 16:34:25.664 RunCommand(ods-control stop)
2011-03-24 16:34:26.671 - runCommand: Process started, PID: 23486
2011-03-24 16:34:26.671 OUTPUT:	Stopping enforcer...
2011-03-24 16:34:26.671 OUTPUT:	Stopping signer engine..
2011-03-24 16:34:26.671 OUTPUT:	Engine shut down.
2011-03-24 16:34:26.672 RunCommand(ps -e | grep enforcer)
2011-03-24 16:34:26.693 - runCommand: Process started, PID: 23492
2011-03-24 16:34:26.693 ERROR:	return code = 1
2011-03-24 16:34:26.693 RunCommand(ps -e | grep signer)
2011-03-24 16:34:26.708 - runCommand: Process started, PID: 23495
2011-03-24 16:34:26.708 ERROR:	return code = 1

2011-03-24 16:34:26.708 02524 Comment: Change the configuration with predefined original conf.xml file.

2011-03-24 16:34:26.708 Requirement: ODSCC50

2011-03-24 16:34:26.708 02528 LoadConfig()
2011-03-24 16:34:26.708 Requirement: ODSCC50
2011-03-24 16:34:26.708 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:34:26.712 - runCommand: Process started, PID: 23498

2011-03-24 16:34:26.712 02530 Comment: Update all the configs.

2011-03-24 16:34:26.712 Requirement: ODSCC50

2011-03-24 16:34:26.712 02532 ODSSetup()
2011-03-24 16:34:26.712 Requirement: ODSCC50
2011-03-24 16:34:26.712 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:34:37.883 - runCommand: Process started, PID: 23499
2011-03-24 16:34:37.884 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 16:34:37.884 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 16:34:37.884 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 16:34:37.884 OUTPUT:	Repository SoftHSM found
2011-03-24 16:34:37.884 OUTPUT:	No Maximum Capacity set.
2011-03-24 16:34:37.884 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 16:34:37.884 OUTPUT:	Policy default2 found
2011-03-24 16:34:37.884 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 16:34:37.884 OUTPUT:	Policy default found
2011-03-24 16:34:37.884 OUTPUT:	Zone ods found
2011-03-24 16:34:37.884 OUTPUT:	Policy set to default.
2011-03-24 16:34:37.884 OUTPUT:	Added zone ods to database
2011-03-24 16:34:37.884 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 16:34:37.884 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 16:34:37.884 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSCC50T40: Change WorkerThreads to 1 and check if only 1 thread is used while signing

2011-03-24 16:34:37.884 02537 Comment: Number of working threads has been adjusted to 1 in the conf.xml.

2011-03-24 16:34:37.884 Requirement: ODSCC50

2011-03-24 16:34:37.884 02539 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 16:34:37.884 Requirement: ODSCC50

2011-03-24 16:34:37.885 02541 Stop()
2011-03-24 16:34:37.885 Requirement: ODSCC50
2011-03-24 16:34:37.885 RunCommand(ods-control stop)
2011-03-24 16:34:37.891 - runCommand: Process started, PID: 23512
2011-03-24 16:34:37.891 OUTPUT:	Stopping enforcer...
2011-03-24 16:34:37.891 OUTPUT:	Cannot find PID file
2011-03-24 16:34:37.891 OUTPUT:	Stopping signer engine..
2011-03-24 16:34:37.891 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-24 16:34:37.891 ERROR:	return code = 1
2011-03-24 16:34:37.891 RunCommand(ps -e | grep enforcer)
2011-03-24 16:34:37.908 - runCommand: Process started, PID: 23515
2011-03-24 16:34:37.909 ERROR:	return code = 1
2011-03-24 16:34:37.909 RunCommand(ps -e | grep signer)
2011-03-24 16:34:37.927 - runCommand: Process started, PID: 23518
2011-03-24 16:34:37.927 ERROR:	return code = 1

2011-03-24 16:34:37.927 02543 Wait(10)

2011-03-24 16:34:37.927 Requirement: ODSCC50

2011-03-24 16:34:47.927 02545 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 16:34:47.927 Requirement: ODSCC50

2011-03-24 16:34:47.927 02551 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 16:34:47.927 Requirement: ODSCC50

2011-03-24 16:34:47.928 02554 PurgeHSM()
2011-03-24 16:34:47.928 Requirement: ODSCC50
2011-03-24 16:34:47.928 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 16:34:48.277 - runCommand: Process started, PID: 23521
2011-03-24 16:34:48.277 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-24 16:34:48.277 OUTPUT:	2 keys found.
2011-03-24 16:34:48.277 OUTPUT:	
2011-03-24 16:34:48.277 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-24 16:34:48.277 OUTPUT:	Starting purge...
2011-03-24 16:34:48.277 OUTPUT:	Key remove successful: 527fdc917b7af9a3b645e2017629cc1a
2011-03-24 16:34:48.277 OUTPUT:	Key remove successful: 44d4e3f3e38c28e912c64431b4ec71d3
2011-03-24 16:34:48.277 OUTPUT:	Purge done.

2011-03-24 16:34:48.278 02556 Wait(10)

2011-03-24 16:34:48.278 Requirement: ODSCC50

2011-03-24 16:34:58.278 02558 Comment: Change the configuration with predefined xml config files.

2011-03-24 16:34:58.278 Requirement: ODSCC50

2011-03-24 16:34:58.278 02561 LoadConfig()
2011-03-24 16:34:58.278 Requirement: ODSCC50
2011-03-24 16:34:58.278 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T40_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:34:58.283 - runCommand: Process started, PID: 23525

2011-03-24 16:34:58.283 02564 LoadConfig()
2011-03-24 16:34:58.283 Requirement: ODSCC50
2011-03-24 16:34:58.283 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 16:34:58.287 - runCommand: Process started, PID: 23526

2011-03-24 16:34:58.287 02566 Comment: Update all the configs.

2011-03-24 16:34:58.287 Requirement: ODSCC50

2011-03-24 16:34:58.287 02568 ODSSetup()
2011-03-24 16:34:58.288 Requirement: ODSCC50
2011-03-24 16:34:58.288 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:35:09.136 - runCommand: Process started, PID: 23527
2011-03-24 16:35:09.147 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 16:35:09.149 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 16:35:09.151 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 16:35:09.153 OUTPUT:	Repository SoftHSM found
2011-03-24 16:35:09.154 OUTPUT:	No Maximum Capacity set.
2011-03-24 16:35:09.156 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 16:35:09.158 OUTPUT:	Policy default2 found
2011-03-24 16:35:09.159 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 16:35:09.161 OUTPUT:	Policy default found
2011-03-24 16:35:09.162 OUTPUT:	Zone ods found
2011-03-24 16:35:09.164 OUTPUT:	Policy set to default.
2011-03-24 16:35:09.166 OUTPUT:	Added zone ods to database
2011-03-24 16:35:09.168 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 16:35:09.169 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 16:35:09.171 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 16:35:09.192 02570 Wait(10)

2011-03-24 16:35:09.194 Requirement: ODSCC50

2011-03-24 16:35:19.221 02572 Comment: Start enforcer

2011-03-24 16:35:19.225 Requirement: ODSCC50

2011-03-24 16:35:19.241 02574 Start()
2011-03-24 16:35:19.243 Requirement: ODSCC50
2011-03-24 16:35:19.245 RunCommand(ods-control start)
2011-03-24 16:35:19.435 - runCommand: Background process started, PID: 23540
2011-03-24 16:35:20.352 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 16:35:20.559 - runCommand: Process started, PID: 23556
2011-03-24 16:35:20.560 OUTPUT:	ods-enforcerd
2011-03-24 16:35:20.560 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 16:35:20.755 - runCommand: Process started, PID: 23561
2011-03-24 16:35:20.756 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-24 16:35:20.757 02576 Wait(10)

2011-03-24 16:35:20.757 Requirement: ODSCC50

2011-03-24 16:35:30.760 02581 Comment: Check if the number of threads is according to the conf.xml, in this case 1 thread for the proces ods-signerd.

2011-03-24 16:35:30.761 Requirement: ODSCC50

2011-03-24 16:35:30.762 02585 Wait(2)

2011-03-24 16:35:30.763 Requirement: ODSCC50

2011-03-24 16:35:32.765 02589 Wait(2)

2011-03-24 16:35:32.766 Requirement: ODSCC50

2011-03-24 16:35:34.769 02593 Wait(2)

2011-03-24 16:35:34.769 Requirement: ODSCC50

2011-03-24 16:35:36.772 02597 Wait(2)

2011-03-24 16:35:36.772 Requirement: ODSCC50

2011-03-24 16:35:38.775 02601 Wait(2)

2011-03-24 16:35:38.775 Requirement: ODSCC50

2011-03-24 16:35:40.778 02606 Wait(30)

2011-03-24 16:35:40.779 Requirement: ODSCC50

2011-03-24 16:36:12.750 02611 Comment: Change the configuration with predefined original conf.xml file.

2011-03-24 16:36:12.750 Requirement: ODSCC50

2011-03-24 16:36:12.750 02614 LoadConfig()
2011-03-24 16:36:12.750 Requirement: ODSCC50
2011-03-24 16:36:12.750 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:36:12.754 - runCommand: Process started, PID: 23575

2011-03-24 16:36:12.754 02616 Comment: Update all the configs.

2011-03-24 16:36:12.754 Requirement: ODSCC50

2011-03-24 16:36:12.754 02618 ODSSetup()
2011-03-24 16:36:12.754 Requirement: ODSCC50
2011-03-24 16:36:12.754 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:36:24.546 - runCommand: Process started, PID: 23576
2011-03-24 16:36:24.546 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 16:36:24.546 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 16:36:24.546 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 16:36:24.546 OUTPUT:	Repository SoftHSM found
2011-03-24 16:36:24.546 OUTPUT:	No Maximum Capacity set.
2011-03-24 16:36:24.546 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 16:36:24.546 OUTPUT:	Policy default2 found
2011-03-24 16:36:24.546 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 16:36:24.546 OUTPUT:	Policy default found
2011-03-24 16:36:24.546 OUTPUT:	Zone ods found
2011-03-24 16:36:24.546 OUTPUT:	Policy set to default.
2011-03-24 16:36:24.546 OUTPUT:	Added zone ods to database
2011-03-24 16:36:24.546 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 16:36:24.546 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 16:36:24.546 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSCC50T50: Change WorkerThreads to 100 and check if 100 threads are used while signing

2011-03-24 16:36:24.546 02622 Comment: Number of working threads has been adjusted to 100 in the conf.xml.

2011-03-24 16:36:24.546 Requirement: ODSCC50

2011-03-24 16:36:24.546 02624 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 16:36:24.547 Requirement: ODSCC50

2011-03-24 16:36:24.547 02626 Stop()
2011-03-24 16:36:24.547 Requirement: ODSCC50
2011-03-24 16:36:24.547 RunCommand(ods-control stop)
2011-03-24 16:36:24.556 - runCommand: Process started, PID: 23600
2011-03-24 16:36:24.556 OUTPUT:	Stopping enforcer...
2011-03-24 16:36:24.556 OUTPUT:	Stopping signer engine..
2011-03-24 16:36:24.556 OUTPUT:	Engine shut down.
2011-03-24 16:36:24.556 RunCommand(ps -e | grep enforcer)
2011-03-24 16:36:24.576 - runCommand: Process started, PID: 23605
2011-03-24 16:36:24.576 ERROR:	return code = 1
2011-03-24 16:36:24.576 RunCommand(ps -e | grep signer)
2011-03-24 16:36:24.587 - runCommand: Process started, PID: 23608
2011-03-24 16:36:24.587 ERROR:	return code = 1

2011-03-24 16:36:24.587 02628 Wait(10)

2011-03-24 16:36:24.587 Requirement: ODSCC50

2011-03-24 16:36:34.587 02630 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 16:36:34.587 Requirement: ODSCC50

2011-03-24 16:36:34.588 02636 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 16:36:34.588 Requirement: ODSCC50

2011-03-24 16:36:34.588 02639 PurgeHSM()
2011-03-24 16:36:34.588 Requirement: ODSCC50
2011-03-24 16:36:34.588 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 16:36:35.563 - runCommand: Process started, PID: 23611
2011-03-24 16:36:35.564 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-24 16:36:35.564 OUTPUT:	2 keys found.
2011-03-24 16:36:35.564 OUTPUT:	
2011-03-24 16:36:35.564 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-24 16:36:35.564 OUTPUT:	Starting purge...
2011-03-24 16:36:35.564 OUTPUT:	Key remove successful: 21455b3fe2e205a003391f357ceb1e79
2011-03-24 16:36:35.565 OUTPUT:	Key remove successful: 48901c0182fa5e3ace0fcd7edff3c208
2011-03-24 16:36:35.565 OUTPUT:	Purge done.

2011-03-24 16:36:35.567 02641 Wait(10)

2011-03-24 16:36:35.567 Requirement: ODSCC50

2011-03-24 16:36:45.570 02643 Comment: Change the configuration with predefined xml config files.

2011-03-24 16:36:45.571 Requirement: ODSCC50

2011-03-24 16:36:45.572 02646 LoadConfig()
2011-03-24 16:36:45.572 Requirement: ODSCC50
2011-03-24 16:36:45.573 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T50_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:36:45.620 - runCommand: Process started, PID: 23615

2011-03-24 16:36:45.623 02649 LoadConfig()
2011-03-24 16:36:45.623 Requirement: ODSCC50
2011-03-24 16:36:45.624 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 16:36:45.661 - runCommand: Process started, PID: 23616

2011-03-24 16:36:45.664 02651 Comment: Update all the configs.

2011-03-24 16:36:45.664 Requirement: ODSCC50

2011-03-24 16:36:45.666 02653 ODSSetup()
2011-03-24 16:36:45.666 Requirement: ODSCC50
2011-03-24 16:36:45.666 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:36:55.630 - runCommand: Process started, PID: 23617
2011-03-24 16:36:55.630 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 16:36:55.630 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 16:36:55.630 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 16:36:55.630 OUTPUT:	Repository SoftHSM found
2011-03-24 16:36:55.630 OUTPUT:	No Maximum Capacity set.
2011-03-24 16:36:55.630 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 16:36:55.630 OUTPUT:	Policy default2 found
2011-03-24 16:36:55.630 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 16:36:55.630 OUTPUT:	Policy default found
2011-03-24 16:36:55.630 OUTPUT:	Zone ods found
2011-03-24 16:36:55.630 OUTPUT:	Policy set to default.
2011-03-24 16:36:55.630 OUTPUT:	Added zone ods to database
2011-03-24 16:36:55.630 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 16:36:55.630 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 16:36:55.630 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 16:36:55.630 02655 Wait(10)

2011-03-24 16:36:55.630 Requirement: ODSCC50

2011-03-24 16:37:05.630 02657 Comment: Start enforcer

2011-03-24 16:37:05.631 Requirement: ODSCC50

2011-03-24 16:37:05.631 02659 Start()
2011-03-24 16:37:05.631 Requirement: ODSCC50
2011-03-24 16:37:05.631 RunCommand(ods-control start)
2011-03-24 16:37:05.633 - runCommand: Background process started, PID: 23630
2011-03-24 16:37:06.648 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 16:37:06.661 - runCommand: Process started, PID: 23645
2011-03-24 16:37:06.661 OUTPUT:	ods-enforcerd
2011-03-24 16:37:06.661 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 16:37:06.676 - runCommand: Process started, PID: 23650
2011-03-24 16:37:06.676 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-24 16:37:06.676 02661 Wait(10)

2011-03-24 16:37:06.676 Requirement: ODSCC50

2011-03-24 16:37:16.676 02667 Comment: Check if the number of threads is according to the conf.xml, in this case 100 thread for the proces ods-signerd.

2011-03-24 16:37:16.676 Requirement: ODSCC50

2011-03-24 16:37:16.677 02671 Wait(2)

2011-03-24 16:37:16.677 Requirement: ODSCC50

2011-03-24 16:37:18.677 02675 Wait(2)

2011-03-24 16:37:18.677 Requirement: ODSCC50

2011-03-24 16:37:20.677 02679 Wait(2)

2011-03-24 16:37:20.677 Requirement: ODSCC50

2011-03-24 16:37:22.678 02683 Wait(2)

2011-03-24 16:37:22.678 Requirement: ODSCC50

2011-03-24 16:37:24.678 02687 Wait(2)

2011-03-24 16:37:24.678 Requirement: ODSCC50

2011-03-24 16:37:26.678 02691 Wait(15)

2011-03-24 16:37:26.679 Requirement: ODSCC50

2011-03-24 16:37:44.363 02696 Comment: Change the configuration with predefined original conf.xml file.

2011-03-24 16:37:44.363 Requirement: ODSCC50

2011-03-24 16:37:44.363 02699 LoadConfig()
2011-03-24 16:37:44.363 Requirement: ODSCC50
2011-03-24 16:37:44.363 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:37:44.366 - runCommand: Process started, PID: 23765

2011-03-24 16:37:44.367 02701 Comment: Update all the configs.

2011-03-24 16:37:44.367 Requirement: ODSCC50

-------------------------------------------------------------------------------
Testcase - ODSCC50T60: Use a simple script as NotifyCommand and check if it is executed after signing

2011-03-24 16:37:44.367 02707 Comment: Notify script will be started, to check the notify functionality in the conf.xml configuration.

2011-03-24 16:37:44.367 Requirement: ODSCC50

2011-03-24 16:37:44.367 02709 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 16:37:44.367 Requirement: ODSCC50

2011-03-24 16:37:44.367 02711 Stop()
2011-03-24 16:37:44.367 Requirement: ODSCC50
2011-03-24 16:37:44.367 RunCommand(ods-control stop)
2011-03-24 16:37:45.374 - runCommand: Process started, PID: 23766
2011-03-24 16:37:45.374 OUTPUT:	Stopping enforcer...
2011-03-24 16:37:45.374 OUTPUT:	Stopping signer engine..
2011-03-24 16:37:45.374 OUTPUT:	Engine shut down.
2011-03-24 16:37:45.375 RunCommand(ps -e | grep enforcer)
2011-03-24 16:37:45.392 - runCommand: Process started, PID: 23772
2011-03-24 16:37:45.392 ERROR:	return code = 1
2011-03-24 16:37:45.392 RunCommand(ps -e | grep signer)
2011-03-24 16:37:45.408 - runCommand: Process started, PID: 23775
2011-03-24 16:37:45.408 ERROR:	return code = 1

2011-03-24 16:37:45.408 02713 Wait(10)

2011-03-24 16:37:45.408 Requirement: ODSCC50

2011-03-24 16:37:55.408 02715 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 16:37:55.408 Requirement: ODSCC50

2011-03-24 16:37:55.409 02721 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 16:37:55.409 Requirement: ODSCC50

2011-03-24 16:37:55.409 02724 PurgeHSM()
2011-03-24 16:37:55.409 Requirement: ODSCC50
2011-03-24 16:37:55.409 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 16:37:55.814 - runCommand: Process started, PID: 23778
2011-03-24 16:37:55.815 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-24 16:37:55.815 OUTPUT:	2 keys found.
2011-03-24 16:37:55.815 OUTPUT:	
2011-03-24 16:37:55.815 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-24 16:37:55.815 OUTPUT:	Starting purge...
2011-03-24 16:37:55.815 OUTPUT:	Key remove successful: eaa0da9a402cc1da513700d914cc3da0
2011-03-24 16:37:55.815 OUTPUT:	Key remove successful: 3a589c5ed540508138b43fa8f4ff3cb9
2011-03-24 16:37:55.815 OUTPUT:	Purge done.

2011-03-24 16:37:55.815 02726 Wait(10)

2011-03-24 16:37:55.815 Requirement: ODSCC50

2011-03-24 16:38:05.815 02728 Comment: Change the configuration with predefined xml config files.

2011-03-24 16:38:05.815 Requirement: ODSCC50

2011-03-24 16:38:05.815 02731 LoadConfig()
2011-03-24 16:38:05.815 Requirement: ODSCC50
2011-03-24 16:38:05.815 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T60_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:38:05.820 - runCommand: Process started, PID: 23782

2011-03-24 16:38:05.820 02734 LoadConfig()
2011-03-24 16:38:05.821 Requirement: ODSCC50
2011-03-24 16:38:05.821 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 16:38:05.826 - runCommand: Process started, PID: 23783

2011-03-24 16:38:05.826 02736 Comment: Update all the configs.

2011-03-24 16:38:05.826 Requirement: ODSCC50

2011-03-24 16:38:05.826 02738 ODSSetup()
2011-03-24 16:38:05.826 Requirement: ODSCC50
2011-03-24 16:38:05.826 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:38:16.905 - runCommand: Process started, PID: 23784
2011-03-24 16:38:16.905 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 16:38:16.905 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 16:38:16.905 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 16:38:16.905 OUTPUT:	Repository SoftHSM found
2011-03-24 16:38:16.905 OUTPUT:	No Maximum Capacity set.
2011-03-24 16:38:16.905 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 16:38:16.905 OUTPUT:	Policy default2 found
2011-03-24 16:38:16.905 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 16:38:16.905 OUTPUT:	Policy default found
2011-03-24 16:38:16.905 OUTPUT:	Zone ods found
2011-03-24 16:38:16.905 OUTPUT:	Policy set to default.
2011-03-24 16:38:16.905 OUTPUT:	Added zone ods to database
2011-03-24 16:38:16.905 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 16:38:16.905 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 16:38:16.905 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 16:38:16.905 02740 Wait(10)

2011-03-24 16:38:16.905 Requirement: ODSCC50

2011-03-24 16:38:26.906 02742 Comment: Start enforcer

2011-03-24 16:38:26.906 Requirement: ODSCC50

2011-03-24 16:38:26.906 02744 Start()
2011-03-24 16:38:26.906 Requirement: ODSCC50
2011-03-24 16:38:26.906 RunCommand(ods-control start)
2011-03-24 16:38:26.908 - runCommand: Background process started, PID: 23797
2011-03-24 16:38:27.926 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 16:38:27.942 - runCommand: Process started, PID: 23812
2011-03-24 16:38:27.942 OUTPUT:	ods-enforcerd
2011-03-24 16:38:27.942 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 16:38:27.958 - runCommand: Process started, PID: 23817
2011-03-24 16:38:27.958 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-24 16:38:27.958 02746 Wait(10)

2011-03-24 16:38:27.958 Requirement: ODSCC50

2011-03-24 16:38:37.959 02751 Wait(15)

2011-03-24 16:38:37.959 Requirement: ODSCC50

2011-03-24 16:38:55.649 02756 Comment: Check if new file has been created in folder /tmp

2011-03-24 16:38:55.649 Requirement: ODSCC50

2011-03-24 16:38:55.649 02760 CheckFilePresent(ods-notify-230311)
2011-03-24 16:38:55.649 Requirement: ODSCC50
2011-03-24 16:38:55.649 FAILED:	(Check for Equal) - Expected: ods-notify-230311 Found: 

2011-03-24 16:38:55.649 02762 Comment: Change the configuration with predefined original conf.xml file.

2011-03-24 16:38:55.649 Requirement: ODSCC50

2011-03-24 16:38:55.650 02765 LoadConfig()
2011-03-24 16:38:55.650 Requirement: ODSCC50
2011-03-24 16:38:55.650 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:38:55.653 - runCommand: Process started, PID: 23840

2011-03-24 16:38:55.653 02767 Comment: Update all the configs.

2011-03-24 16:38:55.653 Requirement: ODSCC50
Testcondition - ODSCC60: Auditor should run during every resign and if configured in partial mode
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSCC60T10: Use privileges test:test for auditor in config only and check if auditor fails to run

2011-03-24 16:38:55.653 02774 Comment: Privileges have been adjusted for the auditor in the conf.xml. User = opendnssec; Group = opendnssec. This user and group do not have acces to the correct folder.

2011-03-24 16:38:55.653 Requirement: ODSCC60

2011-03-24 16:38:55.653 02776 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 16:38:55.653 Requirement: ODSCC60

2011-03-24 16:38:55.654 02778 Stop()
2011-03-24 16:38:55.654 Requirement: ODSCC60
2011-03-24 16:38:55.654 RunCommand(ods-control stop)
2011-03-24 16:38:56.660 - runCommand: Process started, PID: 23841
2011-03-24 16:38:56.660 OUTPUT:	Stopping enforcer...
2011-03-24 16:38:56.660 OUTPUT:	Stopping signer engine..
2011-03-24 16:38:56.660 OUTPUT:	Engine shut down.
2011-03-24 16:38:56.660 RunCommand(ps -e | grep enforcer)
2011-03-24 16:38:56.677 - runCommand: Process started, PID: 23847
2011-03-24 16:38:56.677 ERROR:	return code = 1
2011-03-24 16:38:56.677 RunCommand(ps -e | grep signer)
2011-03-24 16:38:56.693 - runCommand: Process started, PID: 23850
2011-03-24 16:38:56.693 ERROR:	return code = 1

2011-03-24 16:38:56.693 02780 Wait(10)

2011-03-24 16:38:56.693 Requirement: ODSCC60

2011-03-24 16:39:06.693 02782 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 16:39:06.693 Requirement: ODSCC60

2011-03-24 16:39:06.694 02788 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 16:39:06.694 Requirement: ODSCC60

2011-03-24 16:39:06.694 02791 PurgeHSM()
2011-03-24 16:39:06.694 Requirement: ODSCC60
2011-03-24 16:39:06.694 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 16:39:07.618 - runCommand: Process started, PID: 23853
2011-03-24 16:39:07.619 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-24 16:39:07.619 OUTPUT:	2 keys found.
2011-03-24 16:39:07.619 OUTPUT:	
2011-03-24 16:39:07.620 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-24 16:39:07.620 OUTPUT:	Starting purge...
2011-03-24 16:39:07.620 OUTPUT:	Key remove successful: 637336b69161fa932326bf19c8efa3fd
2011-03-24 16:39:07.620 OUTPUT:	Key remove successful: daca9f62dc357ad55f461614bdc26977
2011-03-24 16:39:07.620 OUTPUT:	Purge done.

2011-03-24 16:39:07.622 02793 Wait(10)

2011-03-24 16:39:07.623 Requirement: ODSCC60

2011-03-24 16:39:17.625 02795 Comment: Rebuild ODS with SQLlite database.

2011-03-24 16:39:17.626 Requirement: ODSCC60

2011-03-24 16:39:17.628 02801 Wait(60)

2011-03-24 16:39:17.628 Requirement: ODSCC60

2011-03-24 16:40:17.631 02805 Wait(60)

2011-03-24 16:40:17.631 Requirement: ODSCC60

2011-03-24 16:41:17.634 02809 Wait(60)

2011-03-24 16:41:17.634 Requirement: ODSCC60

2011-03-24 16:42:17.637 02812 Comment: Change the configuration with predefined xml config files.

2011-03-24 16:42:17.638 Requirement: ODSCC60

2011-03-24 16:42:17.639 02815 LoadConfig()
2011-03-24 16:42:17.639 Requirement: ODSCC60
2011-03-24 16:42:17.640 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:42:17.687 - runCommand: Process started, PID: 23859

2011-03-24 16:42:17.690 02818 LoadConfig()
2011-03-24 16:42:17.691 Requirement: ODSCC60
2011-03-24 16:42:17.691 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 16:42:17.728 - runCommand: Process started, PID: 23860

2011-03-24 16:42:17.731 02820 Comment: Run setup for rebuild of database

2011-03-24 16:42:17.732 Requirement: ODSCC60

2011-03-24 16:42:17.733 02824 Wait(20)

2011-03-24 16:42:17.733 Requirement: ODSCC60

2011-03-24 16:42:37.736 02826 Comment: Update all the configs.

2011-03-24 16:42:37.737 Requirement: ODSCC60

2011-03-24 16:42:37.738 02828 ODSSetup()
2011-03-24 16:42:37.738 Requirement: ODSCC60
2011-03-24 16:42:37.739 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:42:47.708 - runCommand: Process started, PID: 23861
2011-03-24 16:42:47.708 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 16:42:47.708 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 16:42:47.708 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 16:42:47.708 OUTPUT:	Repository SoftHSM found
2011-03-24 16:42:47.708 OUTPUT:	No Maximum Capacity set.
2011-03-24 16:42:47.708 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 16:42:47.708 OUTPUT:	Policy default2 found
2011-03-24 16:42:47.708 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 16:42:47.708 OUTPUT:	Policy default found
2011-03-24 16:42:47.708 OUTPUT:	Zone ods found
2011-03-24 16:42:47.708 OUTPUT:	Policy set to default.
2011-03-24 16:42:47.708 OUTPUT:	Added zone ods to database
2011-03-24 16:42:47.708 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 16:42:47.708 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 16:42:47.708 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 16:42:47.708 02830 Wait(10)

2011-03-24 16:42:47.708 Requirement: ODSCC60

2011-03-24 16:42:57.709 02832 Comment: Change the configuration with predefined xml config files for this testcase.

2011-03-24 16:42:57.709 Requirement: ODSCC60

2011-03-24 16:42:57.709 02835 LoadConfig()
2011-03-24 16:42:57.709 Requirement: ODSCC60
2011-03-24 16:42:57.709 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC60T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:42:57.714 - runCommand: Process started, PID: 23874
2011-03-24 16:42:57.714 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC60T10_conf.xml': No such file or directory
2011-03-24 16:42:57.714 ERROR:	return code = 1

2011-03-24 16:42:57.714 02838 LoadConfig()
2011-03-24 16:42:57.714 Requirement: ODSCC60
2011-03-24 16:42:57.714 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 16:42:57.718 - runCommand: Process started, PID: 23875

2011-03-24 16:42:57.718 02840 Comment: Update all the configs.

2011-03-24 16:42:57.718 Requirement: ODSCC60

2011-03-24 16:42:57.719 02842 ODSSetup()
2011-03-24 16:42:57.719 Requirement: ODSCC60
2011-03-24 16:42:57.719 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:43:09.405 - runCommand: Process started, PID: 23876
2011-03-24 16:43:09.405 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 16:43:09.405 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 16:43:09.405 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 16:43:09.405 OUTPUT:	Repository SoftHSM found
2011-03-24 16:43:09.405 OUTPUT:	No Maximum Capacity set.
2011-03-24 16:43:09.405 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 16:43:09.405 OUTPUT:	Policy default2 found
2011-03-24 16:43:09.405 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 16:43:09.405 OUTPUT:	Policy default found
2011-03-24 16:43:09.405 OUTPUT:	Zone ods found
2011-03-24 16:43:09.405 OUTPUT:	Policy set to default.
2011-03-24 16:43:09.405 OUTPUT:	Added zone ods to database
2011-03-24 16:43:09.405 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 16:43:09.405 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 16:43:09.405 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 16:43:09.406 02844 Wait(10)

2011-03-24 16:43:09.406 Requirement: ODSCC60

2011-03-24 16:43:22.882 02849 Comment: Change the configuration with predefined original conf.xml file.

2011-03-24 16:43:22.883 Requirement: ODSCC60

2011-03-24 16:43:22.884 02852 LoadConfig()
2011-03-24 16:43:22.884 Requirement: ODSCC60
2011-03-24 16:43:22.884 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:43:22.917 - runCommand: Process started, PID: 23889

2011-03-24 16:43:22.919 02854 Comment: Update all the configs.

2011-03-24 16:43:22.919 Requirement: ODSCC60

2011-03-24 16:43:22.920 02856 ODSSetup()
2011-03-24 16:43:22.920 Requirement: ODSCC60
2011-03-24 16:43:22.920 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:43:32.443 - runCommand: Process started, PID: 23890
2011-03-24 16:43:32.443 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 16:43:32.443 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 16:43:32.443 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 16:43:32.443 OUTPUT:	Repository SoftHSM found
2011-03-24 16:43:32.443 OUTPUT:	No Maximum Capacity set.
2011-03-24 16:43:32.443 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 16:43:32.443 OUTPUT:	Policy default2 found
2011-03-24 16:43:32.443 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 16:43:32.443 OUTPUT:	Policy default found
2011-03-24 16:43:32.443 OUTPUT:	Zone ods found
2011-03-24 16:43:32.443 OUTPUT:	Policy set to default.
2011-03-24 16:43:32.443 OUTPUT:	Added zone ods to database
2011-03-24 16:43:32.443 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 16:43:32.443 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 16:43:32.444 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSCC60T20: Use privileges kasptest:kasptest for ods-auditor and at auditor in config and check if auditor runs without errors

2011-03-24 16:43:32.444 02863 Comment: Privileges have been adjusted for the auditor in the conf.xml. User = kasptest; Group = kasptest. This user and group do have acces to the correct folders: 
- /var/opendnssec/tmp/
- /etc/opendnssec/

2011-03-24 16:43:32.444 Requirement: ODSCC60

2011-03-24 16:43:32.444 02864 Comment: Change permissions of the folders mentioned above. 

2011-03-24 16:43:32.444 Requirement: ODSCC60

2011-03-24 16:43:32.444 02874 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 16:43:32.444 Requirement: ODSCC60

2011-03-24 16:43:32.444 02876 Stop()
2011-03-24 16:43:32.445 Requirement: ODSCC60
2011-03-24 16:43:32.445 RunCommand(ods-control stop)
2011-03-24 16:43:32.450 - runCommand: Process started, PID: 23903
2011-03-24 16:43:32.450 OUTPUT:	Stopping enforcer...
2011-03-24 16:43:32.450 OUTPUT:	Cannot find PID file
2011-03-24 16:43:32.450 OUTPUT:	Stopping signer engine..
2011-03-24 16:43:32.451 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-24 16:43:32.451 ERROR:	return code = 1
2011-03-24 16:43:32.451 RunCommand(ps -e | grep enforcer)
2011-03-24 16:43:32.467 - runCommand: Process started, PID: 23906
2011-03-24 16:43:32.467 ERROR:	return code = 1
2011-03-24 16:43:32.467 RunCommand(ps -e | grep signer)
2011-03-24 16:43:32.483 - runCommand: Process started, PID: 23909
2011-03-24 16:43:32.483 ERROR:	return code = 1

2011-03-24 16:43:32.483 02878 Wait(10)

2011-03-24 16:43:32.483 Requirement: ODSCC60

2011-03-24 16:43:42.484 02880 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 16:43:42.484 Requirement: ODSCC60

2011-03-24 16:43:42.484 02886 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 16:43:42.484 Requirement: ODSCC60

2011-03-24 16:43:42.484 02889 PurgeHSM()
2011-03-24 16:43:42.484 Requirement: ODSCC60
2011-03-24 16:43:42.484 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 16:43:42.499 - runCommand: Process started, PID: 23912
2011-03-24 16:43:42.499 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-24 16:43:42.499 OUTPUT:	0 keys found.
2011-03-24 16:43:42.499 ERROR:	return code = 255

2011-03-24 16:43:42.499 02891 Wait(10)

2011-03-24 16:43:42.499 Requirement: ODSCC60

2011-03-24 16:43:52.500 02893 Comment: Change the configuration with predefined xml config files for this testcase.

2011-03-24 16:43:52.500 Requirement: ODSCC60

2011-03-24 16:43:52.500 02896 LoadConfig()
2011-03-24 16:43:52.500 Requirement: ODSCC60
2011-03-24 16:43:52.500 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC60T20_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:43:52.505 - runCommand: Process started, PID: 23916
2011-03-24 16:43:52.505 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC60T20_conf.xml': No such file or directory
2011-03-24 16:43:52.505 ERROR:	return code = 1

2011-03-24 16:43:52.505 02899 LoadConfig()
2011-03-24 16:43:52.505 Requirement: ODSCC60
2011-03-24 16:43:52.505 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 16:43:52.509 - runCommand: Process started, PID: 23917

2011-03-24 16:43:52.509 02901 Comment: Update all the configs.

2011-03-24 16:43:52.509 Requirement: ODSCC60

2011-03-24 16:43:52.510 02903 ODSSetup()
2011-03-24 16:43:52.510 Requirement: ODSCC60
2011-03-24 16:43:52.510 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:44:04.691 - runCommand: Process started, PID: 23918
2011-03-24 16:44:04.692 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 16:44:04.692 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 16:44:04.693 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 16:44:04.693 OUTPUT:	Repository SoftHSM found
2011-03-24 16:44:04.693 OUTPUT:	No Maximum Capacity set.
2011-03-24 16:44:04.693 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 16:44:04.693 OUTPUT:	Policy default2 found
2011-03-24 16:44:04.693 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 16:44:04.694 OUTPUT:	Policy default found
2011-03-24 16:44:04.694 OUTPUT:	Zone ods found
2011-03-24 16:44:04.694 OUTPUT:	Policy set to default.
2011-03-24 16:44:04.694 OUTPUT:	Added zone ods to database
2011-03-24 16:44:04.694 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 16:44:04.694 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 16:44:04.695 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 16:44:04.697 02905 Wait(10)

2011-03-24 16:44:04.697 Requirement: ODSCC60

2011-03-24 16:44:14.700 02907 Comment: If the change is ok, the signing of the zone will be succesfull. 

2011-03-24 16:44:14.700 Requirement: ODSCC60

2011-03-24 16:44:16.755 02912 Comment: Restore the situation/configuration as it was before running the testcase.

2011-03-24 16:44:16.755 Requirement: ODSCC60

2011-03-24 16:44:16.755 02914 Comment: Change permissions of the folders mentioned above. 

2011-03-24 16:44:16.755 Requirement: ODSCC60

2011-03-24 16:44:16.755 02924 Comment: Change the configuration with predefined original conf.xml file.

2011-03-24 16:44:16.755 Requirement: ODSCC60

2011-03-24 16:44:16.755 02927 LoadConfig()
2011-03-24 16:44:16.755 Requirement: ODSCC60
2011-03-24 16:44:16.755 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:44:16.759 - runCommand: Process started, PID: 23931

2011-03-24 16:44:16.759 02929 Comment: Update all the configs.

2011-03-24 16:44:16.759 Requirement: ODSCC60

2011-03-24 16:44:16.759 02931 ODSSetup()
2011-03-24 16:44:16.759 Requirement: ODSCC60
2011-03-24 16:44:16.759 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:44:27.373 - runCommand: Process started, PID: 23932
2011-03-24 16:44:27.373 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 16:44:27.374 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 16:44:27.374 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 16:44:27.374 OUTPUT:	Repository SoftHSM found
2011-03-24 16:44:27.374 OUTPUT:	No Maximum Capacity set.
2011-03-24 16:44:27.374 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 16:44:27.374 OUTPUT:	Policy default2 found
2011-03-24 16:44:27.374 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 16:44:27.374 OUTPUT:	Policy default found
2011-03-24 16:44:27.374 OUTPUT:	Zone ods found
2011-03-24 16:44:27.374 OUTPUT:	Policy set to default.
2011-03-24 16:44:27.374 OUTPUT:	Added zone ods to database
2011-03-24 16:44:27.374 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 16:44:27.374 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 16:44:27.374 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSCC60T30: Change the /tmp location and change WorkingDirectory in conf.xml accordingly

2011-03-24 16:44:27.374 02936 Comment: Working directory has been adjusted in the conf.xml. Working directory now is: var/opendnssec/temporary_auditor. Make sure that directory exists before running this testcase, if not it will be created in this testcase.

2011-03-24 16:44:27.374 Requirement: ODSCC60

2011-03-24 16:44:27.374 02938 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-24 16:44:27.374 Requirement: ODSCC60

2011-03-24 16:44:27.374 02940 Stop()
2011-03-24 16:44:27.374 Requirement: ODSCC60
2011-03-24 16:44:27.375 RunCommand(ods-control stop)
2011-03-24 16:44:27.380 - runCommand: Process started, PID: 23945
2011-03-24 16:44:27.381 OUTPUT:	Stopping enforcer...
2011-03-24 16:44:27.381 OUTPUT:	Cannot find PID file
2011-03-24 16:44:27.381 OUTPUT:	Stopping signer engine..
2011-03-24 16:44:27.381 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-24 16:44:27.381 ERROR:	return code = 1
2011-03-24 16:44:27.381 RunCommand(ps -e | grep enforcer)
2011-03-24 16:44:27.396 - runCommand: Process started, PID: 23948
2011-03-24 16:44:27.397 ERROR:	return code = 1
2011-03-24 16:44:27.397 RunCommand(ps -e | grep signer)
2011-03-24 16:44:27.413 - runCommand: Process started, PID: 23951
2011-03-24 16:44:27.413 ERROR:	return code = 1

2011-03-24 16:44:27.414 02942 Wait(10)

2011-03-24 16:44:27.414 Requirement: ODSCC60

2011-03-24 16:44:37.414 02944 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-24 16:44:37.414 Requirement: ODSCC60

2011-03-24 16:44:37.414 02950 Comment: Purge the keys in the SoftHSM repositories.

2011-03-24 16:44:37.414 Requirement: ODSCC60

2011-03-24 16:44:37.414 02953 PurgeHSM()
2011-03-24 16:44:37.414 Requirement: ODSCC60
2011-03-24 16:44:37.414 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-24 16:44:37.429 - runCommand: Process started, PID: 23954
2011-03-24 16:44:37.429 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-24 16:44:37.429 OUTPUT:	0 keys found.
2011-03-24 16:44:37.429 ERROR:	return code = 255

2011-03-24 16:44:37.430 02955 Wait(10)

2011-03-24 16:44:37.430 Requirement: ODSCC60

2011-03-24 16:44:47.430 02961 Comment: Change the configuration with predefined xml config files.

2011-03-24 16:44:47.430 Requirement: ODSCC60

2011-03-24 16:44:47.430 02964 LoadConfig()
2011-03-24 16:44:47.430 Requirement: ODSCC60
2011-03-24 16:44:47.430 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC60T30_conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:44:47.435 - runCommand: Process started, PID: 23958
2011-03-24 16:44:47.435 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC60T30_conf.xml': No such file or directory
2011-03-24 16:44:47.435 ERROR:	return code = 1

2011-03-24 16:44:47.436 02967 LoadConfig()
2011-03-24 16:44:47.436 Requirement: ODSCC60
2011-03-24 16:44:47.436 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-24 16:44:47.439 - runCommand: Process started, PID: 23959

2011-03-24 16:44:47.440 02969 Comment: Update all the configs.

2011-03-24 16:44:47.440 Requirement: ODSCC60

2011-03-24 16:44:47.440 02971 ODSSetup()
2011-03-24 16:44:47.440 Requirement: ODSCC60
2011-03-24 16:44:47.440 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:44:59.660 - runCommand: Process started, PID: 23960
2011-03-24 16:44:59.661 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 16:44:59.661 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 16:44:59.661 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 16:44:59.661 OUTPUT:	Repository SoftHSM found
2011-03-24 16:44:59.662 OUTPUT:	No Maximum Capacity set.
2011-03-24 16:44:59.662 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 16:44:59.662 OUTPUT:	Policy default2 found
2011-03-24 16:44:59.662 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 16:44:59.662 OUTPUT:	Policy default found
2011-03-24 16:44:59.662 OUTPUT:	Zone ods found
2011-03-24 16:44:59.663 OUTPUT:	Policy set to default.
2011-03-24 16:44:59.663 OUTPUT:	Added zone ods to database
2011-03-24 16:44:59.663 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 16:44:59.663 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 16:44:59.663 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-24 16:44:59.665 02973 Wait(10)

2011-03-24 16:44:59.666 Requirement: ODSCC60

2011-03-24 16:45:09.668 02975 Comment: Start enforcer

2011-03-24 16:45:09.669 Requirement: ODSCC60

2011-03-24 16:45:09.670 02977 Start()
2011-03-24 16:45:09.670 Requirement: ODSCC60
2011-03-24 16:45:09.671 RunCommand(ods-control start)
2011-03-24 16:45:09.691 - runCommand: Background process started, PID: 23973
2011-03-24 16:45:10.878 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-24 16:45:10.106 - runCommand: Process started, PID: 23989
2011-03-24 16:45:10.106 OUTPUT:	ods-enforcerd
2011-03-24 16:45:10.106 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-24 16:45:10.120 - runCommand: Process started, PID: 24002
2011-03-24 16:45:10.120 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-24 16:45:10.120 02979 Wait(10)

2011-03-24 16:45:10.120 Requirement: ODSCC60

2011-03-24 16:45:20.120 02984 Wait(15)

2011-03-24 16:45:20.120 Requirement: ODSCC60

2011-03-24 16:45:37.800 02989 Comment: Check if the ods files are present in the new temporay folder.

2011-03-24 16:45:37.800 Requirement: ODSCC60

2011-03-24 16:45:37.800 02993 CheckFilePresent(ods.denial)
2011-03-24 16:45:37.800 Requirement: ODSCC60
2011-03-24 16:45:37.800 FAILED:	(Check for Equal) - Expected: ods.denial Found: 

2011-03-24 16:45:37.800 02995 CheckFilePresent(ods.dnskeys)
2011-03-24 16:45:37.800 Requirement: ODSCC60
2011-03-24 16:45:37.800 FAILED:	(Check for Equal) - Expected: ods.dnskeys Found: 

2011-03-24 16:45:37.800 02997 CheckFilePresent(ods.finalized)
2011-03-24 16:45:37.800 Requirement: ODSCC60
2011-03-24 16:45:37.800 FAILED:	(Check for Equal) - Expected: ods.finalized Found: 

2011-03-24 16:45:37.800 02999 CheckFilePresent(ods.rrsigs)
2011-03-24 16:45:37.800 Requirement: ODSCC60
2011-03-24 16:45:37.800 FAILED:	(Check for Equal) - Expected: ods.rrsigs Found: 

2011-03-24 16:45:37.800 03001 CheckFilePresent(ods.state)
2011-03-24 16:45:37.800 Requirement: ODSCC60
2011-03-24 16:45:37.800 FAILED:	(Check for Equal) - Expected: ods.state Found: 

2011-03-24 16:45:37.800 03003 CheckFilePresent(ods.sc)
2011-03-24 16:45:37.800 Requirement: ODSCC60
2011-03-24 16:45:37.800 FAILED:	(Check for Equal) - Expected: ods.sc Found: 

2011-03-24 16:45:37.800 03005 CheckFilePresent(ods.unsorted)
2011-03-24 16:45:37.800 Requirement: ODSCC60
2011-03-24 16:45:37.800 FAILED:	(Check for Equal) - Expected: ods.unsorted Found: 

2011-03-24 16:45:37.801 03007 CheckFilePresent(ods.task)
2011-03-24 16:45:37.801 Requirement: ODSCC60
2011-03-24 16:45:37.801 FAILED:	(Check for Equal) - Expected: ods.task Found: 

2011-03-24 16:45:37.801 03011 Stop()
2011-03-24 16:45:37.801 Requirement: ODSCC60
2011-03-24 16:45:37.801 RunCommand(ods-control stop)
2011-03-24 16:45:38.809 - runCommand: Process started, PID: 24024
2011-03-24 16:45:38.809 OUTPUT:	Stopping enforcer...
2011-03-24 16:45:38.809 OUTPUT:	Stopping signer engine..
2011-03-24 16:45:38.809 OUTPUT:	Engine shut down.
2011-03-24 16:45:38.809 RunCommand(ps -e | grep enforcer)
2011-03-24 16:45:38.825 - runCommand: Process started, PID: 24030
2011-03-24 16:45:38.825 ERROR:	return code = 1
2011-03-24 16:45:38.825 RunCommand(ps -e | grep signer)
2011-03-24 16:45:38.837 - runCommand: Process started, PID: 24033
2011-03-24 16:45:38.837 ERROR:	return code = 1

2011-03-24 16:45:38.837 03013 Comment: Change the configuration with predefined original conf.xml file.

2011-03-24 16:45:38.837 Requirement: ODSCC60

2011-03-24 16:45:38.837 03016 LoadConfig()
2011-03-24 16:45:38.837 Requirement: ODSCC60
2011-03-24 16:45:38.837 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-24 16:45:38.840 - runCommand: Process started, PID: 24036

2011-03-24 16:45:38.840 03018 Comment: Update all the configs.

2011-03-24 16:45:38.840 Requirement: ODSCC60

2011-03-24 16:45:38.840 03020 ODSSetup()
2011-03-24 16:45:38.840 Requirement: ODSCC60
2011-03-24 16:45:38.840 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-24 16:45:49.540 - runCommand: Process started, PID: 24037
2011-03-24 16:45:49.540 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-24 16:45:49.540 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-24 16:45:49.540 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-24 16:45:49.540 OUTPUT:	Repository SoftHSM found
2011-03-24 16:45:49.540 OUTPUT:	No Maximum Capacity set.
2011-03-24 16:45:49.540 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-24 16:45:49.540 OUTPUT:	Policy default2 found
2011-03-24 16:45:49.540 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-24 16:45:49.540 OUTPUT:	Policy default found
2011-03-24 16:45:49.540 OUTPUT:	Zone ods found
2011-03-24 16:45:49.540 OUTPUT:	Policy set to default.
2011-03-24 16:45:49.540 OUTPUT:	Added zone ods to database
2011-03-24 16:45:49.540 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-24 16:45:49.540 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-24 16:45:49.540 ERROR:	/etc/opendnssec/kasp.xml validates
Testcondition - ODSCCLOG: Backup logfiles and testresults
-------------------------------------------------------------------------------

2011-03-24 16:45:49.540 03029 Comment: Create folders for logfile backup of syslog and messages logfiles.

2011-03-24 16:45:49.540 Requirement: ODSCCLOG

2011-03-24 16:45:49.540 03037 Comment: Copy the syslog and messages logfiles to the specific folders.

2011-03-24 16:45:49.541 Requirement: ODSCCLOG

