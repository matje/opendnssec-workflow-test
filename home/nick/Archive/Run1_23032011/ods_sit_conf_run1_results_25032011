root@DEVELOPER15:/home/elmo/opendnssec_test_engine# sh autotestODS.sh
FILE  : /home/elmo/Downloads/ODS_Test_folder/Run1_23032011/ODS1.2_SIT_CONF.xls
COUNT : 11
AUTHOR: Calc
- Argument: /home/elmo/Downloads/ODS_Test_folder/Run1_23032011/ODS1.2_SIT_CONF.xls
- Argument: ODSC
SHEET: ODSC
---------

2011-03-25 17:13:08.371 00014 Comment: Fill in date of test execution in the field below (format ddmmyy)


2011-03-25 17:13:08.372 00015 Comment: 230311


2011-03-25 17:13:08.372 00017 Comment: Users & ODS versions


2011-03-25 17:13:08.372 00018 Comment: Check if user opendnssec exists on unix. (part of group opendnssec)


2011-03-25 17:13:08.372 00019 Comment: Check if user kaspuser (with password abc123) exists on unix. 


2011-03-25 17:13:08.372 00020 Comment: Check if user gooduser (with password 123abc) exists on unix. 


2011-03-25 17:13:08.372 00021 Comment: Check if the correct ODS version is installed.


2011-03-25 17:13:08.373 00022 Comment: If user is not avaliable you can add them via the command (as root):
- useradd <user>
and then add the correct password via the command.
- passwd <user>


2011-03-25 17:13:08.373 00024 Comment: Copy all the files needed for this script to the directories below


2011-03-25 17:13:08.373 00025 Comment: BEWARE: For all files created in WinOS, use the fromdos application (apt-get install tofromdos) to remove symbols from the xml files (like conf and kasp) to prevent errors.


2011-03-25 17:13:08.373 00026 Comment: Standard folder for all the conf.xml files is /home/ods/ods_testautomation/ods_sit_conf/conf


2011-03-25 17:13:08.373 00027 Comment: Standard folder for all the kasp.xml files is /home/ods/ods_testautomation/ods_sit_conf/kasp


2011-03-25 17:13:08.373 00028 Comment: Standard folder for all the zonelist.xml files is /home/ods/ods_testautomation/ods_sit_conf/zonelist


2011-03-25 17:13:08.374 00029 Comment: Standard folder for all the MySQL files is /home/ods/ods_testautomation/ods_sit_conf/mysql


2011-03-25 17:13:08.374 00030 Comment: Standard folder for all the script files is /home/ods/ods_testautomation/ods_sit_conf/script


2011-03-25 17:13:08.374 00032 Comment: Logfiles


2011-03-25 17:13:08.374 00033 Comment: Make sure that the following folder exists: /home/ods/ods_testautomation/ods_sit_conf/logging


2011-03-25 17:13:08.374 00035 Comment: Specify Download folder for ODS


2011-03-25 17:13:08.374 00036 Comment: /home/ods/Downloads/opendnssec-1.2.1


2011-03-25 17:13:08.375 00038 Comment: Specific folders


2011-03-25 17:13:08.375 00039 Comment: Make sure that the next folder exists: "var/opendnssec/temporary"


2011-03-25 17:13:08.375 00041 Comment: MySQL settings


2011-03-25 17:13:08.375 00042 Comment: Standard MySQL database name = KASP


2011-03-25 17:13:08.375 00043 Comment: Standard MySQL username = kaspuser


2011-03-25 17:13:08.375 00044 Comment: Standard MySQL password = abc123


2011-03-25 17:13:08.375 00045 Comment: Second MySQL database = KASPTEST


2011-03-25 17:13:08.376 00046 Comment: Second MySQL username = kaspuser


2011-03-25 17:13:08.376 00047 Comment: Second MySQL password = abc123


2011-03-25 17:13:08.376 00048 Comment: Thirth MySQL database = KASPTEST2


2011-03-25 17:13:08.376 00049 Comment: Thirth MySQL username = gooduser


2011-03-25 17:13:08.376 00050 Comment: Thirth MySQL password = 123abc


2011-03-25 17:13:08.376 00051 Comment: If the databases above are not available they can be created via the command:
- mysql -p
- create database <databasename>


2011-03-25 17:13:08.377 00052 Comment: After this the users should be granted for using the database using the following 2 commands:
- grant usage on <databasename>.* to <user>@localhost identified by '<password of user>'
- grant all privileges on <databasename>.* to <user>@localhost identified by '<password of user>'


2011-03-25 17:13:08.377 00054 Comment: Zone file


2011-03-25 17:13:08.377 00055 Comment: Make sure that the zone with name "ods" is available in the test environment in folder /var/opendnssec/unsigned


2011-03-25 17:13:08.377 00057 Comment: Host file


2011-03-25 17:13:08.377 00058 Comment: Make sure that the following line is in the host file in the "/etc" folder:
127.0.0.1 mysqltest


2011-03-25 17:13:08.377 00061 Comment: Make sure that the "ods-notify"-script is in the /home/ods/ods-testautomation/ods_sit_conf/scripts folder


2011-03-25 17:13:08.378 00064 Comment: Check if the application "logger" is available on the test environment (location: /usr/bin/). The logger will put the result of a command, for example "ods-kaspcheck", in the messages logfile (location: /var/log/messages). Example of usage: "command | /usr/bin/logger"

Testcondition - ODSCC10: The configuration of repositories located in conf.xml should operate according to requirements and intentions
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSCC10T10: Configure and sign with one repository (SoftHSM)

2011-03-25 17:13:08.378 00069 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:13:08.378 Requirement: ODSCC10

2011-03-25 17:13:08.379 00071 Stop()
2011-03-25 17:13:08.379 Requirement: ODSCC10
2011-03-25 17:13:08.379 RunCommand(ods-control stop)
2011-03-25 17:13:09.387 - runCommand: Process started, PID: 2430
2011-03-25 17:13:09.387 OUTPUT:	Stopping enforcer...
2011-03-25 17:13:09.387 OUTPUT:	Stopping signer engine..
2011-03-25 17:13:09.387 OUTPUT:	Engine shut down.
2011-03-25 17:13:09.387 RunCommand(ps -e | grep enforcer)
2011-03-25 17:13:09.404 - runCommand: Process started, PID: 2437
2011-03-25 17:13:09.404 ERROR:	return code = 1
2011-03-25 17:13:09.404 RunCommand(ps -e | grep signer)
2011-03-25 17:13:09.415 - runCommand: Process started, PID: 2440
2011-03-25 17:13:09.415 ERROR:	return code = 1

2011-03-25 17:13:09.415 00073 Wait(3)

2011-03-25 17:13:09.415 Requirement: ODSCC10

2011-03-25 17:13:12.416 00075 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:13:12.416 Requirement: ODSCC10

2011-03-25 17:13:12.416 00081 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:13:12.416 Requirement: ODSCC10

2011-03-25 17:13:12.416 00084 PurgeHSM()
2011-03-25 17:13:12.416 Requirement: ODSCC10
2011-03-25 17:13:12.417 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:13:12.752 - runCommand: Process started, PID: 2443
2011-03-25 17:13:12.752 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:13:12.752 OUTPUT:	2 keys found.
2011-03-25 17:13:12.752 OUTPUT:	
2011-03-25 17:13:12.752 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:13:12.752 OUTPUT:	Starting purge...
2011-03-25 17:13:12.752 OUTPUT:	Key remove successful: 4077122b7598ba83c620efabe7e78206
2011-03-25 17:13:12.752 OUTPUT:	Key remove successful: b1a7b5a8d2a0df2044b6b009198307fb
2011-03-25 17:13:12.752 OUTPUT:	Purge done.

2011-03-25 17:13:12.753 00086 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:13:12.753 Requirement: ODSCC10

2011-03-25 17:13:12.753 00089 LoadConfig()
2011-03-25 17:13:12.753 Requirement: ODSCC10
2011-03-25 17:13:12.753 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:13:12.757 - runCommand: Process started, PID: 2447
2011-03-25 17:13:12.758 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T10_conf.xml': No such file or directory
2011-03-25 17:13:12.758 ERROR:	return code = 1

2011-03-25 17:13:12.758 00092 LoadConfig()
2011-03-25 17:13:12.758 Requirement: ODSCC10
2011-03-25 17:13:12.758 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:13:12.762 - runCommand: Process started, PID: 2448
2011-03-25 17:13:12.762 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:13:12.762 ERROR:	return code = 1

2011-03-25 17:13:12.762 00094 Comment: Setup of ODS database

2011-03-25 17:13:12.762 Requirement: ODSCC10

2011-03-25 17:13:12.763 00096 ODSSetup()
2011-03-25 17:13:12.763 Requirement: ODSCC10
2011-03-25 17:13:12.763 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:13:23.298 - runCommand: Process started, PID: 2449
2011-03-25 17:13:23.298 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:13:23.298 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:13:23.298 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:13:23.298 OUTPUT:	Repository SoftHSM found
2011-03-25 17:13:23.298 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:13:23.298 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:13:23.298 OUTPUT:	Policy default2 found
2011-03-25 17:13:23.298 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:13:23.298 OUTPUT:	Policy default found
2011-03-25 17:13:23.298 OUTPUT:	Zone ods found
2011-03-25 17:13:23.298 OUTPUT:	Policy set to default.
2011-03-25 17:13:23.298 OUTPUT:	Added zone ods to database
2011-03-25 17:13:23.298 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:13:23.298 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:13:23.298 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:13:23.298 00098 Wait(5)

2011-03-25 17:13:23.298 Requirement: ODSCC10

2011-03-25 17:13:28.299 00100 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:13:28.299 Requirement: ODSCC10

2011-03-25 17:13:28.299 00102 Start()
2011-03-25 17:13:28.299 Requirement: ODSCC10
2011-03-25 17:13:28.299 RunCommand(ods-control start)
2011-03-25 17:13:28.300 - runCommand: Background process started, PID: 2462
2011-03-25 17:13:28.324 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:13:28.339 - runCommand: Process started, PID: 2475
2011-03-25 17:13:28.339 OUTPUT:	ods-enforcerd
2011-03-25 17:13:28.339 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:13:28.353 - runCommand: Process started, PID: 2480
2011-03-25 17:13:28.353 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:13:28.354 00104 Wait(5)

2011-03-25 17:13:28.354 Requirement: ODSCC10

2011-03-25 17:13:33.354 00106 Comment: Sign the ods zone with the new configs.

2011-03-25 17:13:33.354 Requirement: ODSCC10

2011-03-25 17:13:33.355 00110 Wait(5)

2011-03-25 17:13:33.355 Requirement: ODSCC10

2011-03-25 17:13:38.355 00112 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-25 17:13:38.355 Requirement: ODSCC10

2011-03-25 17:13:38.356 00114 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:13:38.356 Requirement: ODSCC10

2011-03-25 17:13:38.357 00116 Stop()
2011-03-25 17:13:38.357 Requirement: ODSCC10
2011-03-25 17:13:38.357 RunCommand(ods-control stop)
2011-03-25 17:13:39.366 - runCommand: Process started, PID: 2510
2011-03-25 17:13:39.366 OUTPUT:	Stopping enforcer...
2011-03-25 17:13:39.366 OUTPUT:	Stopping signer engine..
2011-03-25 17:13:39.366 OUTPUT:	Engine shut down.
2011-03-25 17:13:39.366 RunCommand(ps -e | grep enforcer)
2011-03-25 17:13:39.382 - runCommand: Process started, PID: 2516
2011-03-25 17:13:39.382 ERROR:	return code = 1
2011-03-25 17:13:39.382 RunCommand(ps -e | grep signer)
2011-03-25 17:13:39.392 - runCommand: Process started, PID: 2519
2011-03-25 17:13:39.392 ERROR:	return code = 1

2011-03-25 17:13:39.393 00119 CheckLog()
2011-03-25 17:13:39.393 Requirement: ODSCC10
2011-03-25 17:13:42.202 PASSED:	(Check for Like) - Expected: all done! Found: Mar 25 17:13:08 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

-------------------------------------------------------------------------------
Testcase - ODSCC10T20: Configure 4 repositories (2x SoftHSM, 2x hardware HSM) and sign using 2 of these different repositories

2011-03-25 17:13:42.202 00127 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:13:42.202 Requirement: ODSCC10

2011-03-25 17:13:42.203 00129 Stop()
2011-03-25 17:13:42.203 Requirement: ODSCC10
2011-03-25 17:13:42.203 RunCommand(ods-control stop)
2011-03-25 17:13:42.206 - runCommand: Process started, PID: 2522
2011-03-25 17:13:42.206 OUTPUT:	Stopping enforcer...
2011-03-25 17:13:42.206 OUTPUT:	Cannot find PID file
2011-03-25 17:13:42.206 OUTPUT:	Stopping signer engine..
2011-03-25 17:13:42.206 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:13:42.206 ERROR:	return code = 1
2011-03-25 17:13:42.206 RunCommand(ps -e | grep enforcer)
2011-03-25 17:13:42.216 - runCommand: Process started, PID: 2525
2011-03-25 17:13:42.216 ERROR:	return code = 1
2011-03-25 17:13:42.216 RunCommand(ps -e | grep signer)
2011-03-25 17:13:42.226 - runCommand: Process started, PID: 2528
2011-03-25 17:13:42.226 ERROR:	return code = 1

2011-03-25 17:13:42.226 00131 Wait(10)

2011-03-25 17:13:42.226 Requirement: ODSCC10

2011-03-25 17:13:52.227 00133 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:13:52.227 Requirement: ODSCC10

2011-03-25 17:13:52.227 00139 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:13:52.227 Requirement: ODSCC10

2011-03-25 17:13:52.227 00142 PurgeHSM()
2011-03-25 17:13:52.228 Requirement: ODSCC10
2011-03-25 17:13:52.228 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:13:52.590 - runCommand: Process started, PID: 2531
2011-03-25 17:13:52.590 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:13:52.590 OUTPUT:	2 keys found.
2011-03-25 17:13:52.590 OUTPUT:	
2011-03-25 17:13:52.590 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:13:52.590 OUTPUT:	Starting purge...
2011-03-25 17:13:52.590 OUTPUT:	Key remove successful: 0e79c508176b46f015af2aed31113a0d
2011-03-25 17:13:52.590 OUTPUT:	Key remove successful: d88b5356eef4e89ba65c5612e9b87d08
2011-03-25 17:13:52.590 OUTPUT:	Purge done.

2011-03-25 17:13:52.591 00144 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:13:52.591 Requirement: ODSCC10

2011-03-25 17:13:52.591 00147 LoadConfig()
2011-03-25 17:13:52.591 Requirement: ODSCC10
2011-03-25 17:13:52.591 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T20_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:13:52.595 - runCommand: Process started, PID: 2535
2011-03-25 17:13:52.596 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T20_conf.xml': No such file or directory
2011-03-25 17:13:52.596 ERROR:	return code = 1

2011-03-25 17:13:52.596 00150 LoadConfig()
2011-03-25 17:13:52.596 Requirement: ODSCC10
2011-03-25 17:13:52.596 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:13:52.600 - runCommand: Process started, PID: 2536
2011-03-25 17:13:52.600 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:13:52.600 ERROR:	return code = 1

2011-03-25 17:13:52.600 00152 Comment: Update all the configs.

2011-03-25 17:13:52.600 Requirement: ODSCC10

2011-03-25 17:13:52.601 00154 ODSSetup()
2011-03-25 17:13:52.601 Requirement: ODSCC10
2011-03-25 17:13:52.601 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:14:02.961 - runCommand: Process started, PID: 2537
2011-03-25 17:14:02.961 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:14:02.961 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:14:02.961 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:14:02.961 OUTPUT:	Repository SoftHSM found
2011-03-25 17:14:02.961 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:14:02.961 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:14:02.961 OUTPUT:	Policy default2 found
2011-03-25 17:14:02.961 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:14:02.961 OUTPUT:	Policy default found
2011-03-25 17:14:02.961 OUTPUT:	Zone ods found
2011-03-25 17:14:02.961 OUTPUT:	Policy set to default.
2011-03-25 17:14:02.961 OUTPUT:	Added zone ods to database
2011-03-25 17:14:02.961 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:14:02.961 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:14:02.961 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:14:02.961 00156 Wait(10)

2011-03-25 17:14:02.961 Requirement: ODSCC10

2011-03-25 17:14:12.962 00158 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:14:12.962 Requirement: ODSCC10

2011-03-25 17:14:12.962 00160 Start()
2011-03-25 17:14:12.962 Requirement: ODSCC10
2011-03-25 17:14:12.962 RunCommand(ods-control start)
2011-03-25 17:14:12.963 - runCommand: Background process started, PID: 2550
2011-03-25 17:14:13.993 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:14:14.115 - runCommand: Process started, PID: 2566
2011-03-25 17:14:14.115 OUTPUT:	ods-enforcerd
2011-03-25 17:14:14.116 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:14:14.285 - runCommand: Process started, PID: 2578
2011-03-25 17:14:14.285 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:14:14.288 00162 Comment: Sign the ods zone with the new configs.

2011-03-25 17:14:14.288 Requirement: ODSCC10

2011-03-25 17:14:14.291 00166 Wait(15)

2011-03-25 17:14:14.291 Requirement: ODSCC10

2011-03-25 17:14:29.295 00168 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-25 17:14:29.296 Requirement: ODSCC10

2011-03-25 17:14:29.299 00170 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:14:29.299 Requirement: ODSCC10

2011-03-25 17:14:29.303 00172 Stop()
2011-03-25 17:14:29.303 Requirement: ODSCC10
2011-03-25 17:14:29.303 RunCommand(ods-control stop)
2011-03-25 17:14:30.393 - runCommand: Process started, PID: 2600
2011-03-25 17:14:30.394 OUTPUT:	Stopping enforcer...
2011-03-25 17:14:30.394 OUTPUT:	Stopping signer engine..
2011-03-25 17:14:30.394 OUTPUT:	Engine shut down.
2011-03-25 17:14:30.395 RunCommand(ps -e | grep enforcer)
2011-03-25 17:14:30.548 - runCommand: Process started, PID: 2606
2011-03-25 17:14:30.548 ERROR:	return code = 1
2011-03-25 17:14:30.549 RunCommand(ps -e | grep signer)
2011-03-25 17:14:30.667 - runCommand: Process started, PID: 2609
2011-03-25 17:14:30.667 ERROR:	return code = 1

2011-03-25 17:14:30.670 00175 CheckLog()
2011-03-25 17:14:30.670 Requirement: ODSCC10
2011-03-25 17:14:32.878 PASSED:	(Check for Like) - Expected: all done! Found: Mar 25 17:13:38 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

-------------------------------------------------------------------------------
Testcase - ODSCC10T30: Configure no module location and expect failure

2011-03-25 17:14:32.879 00182 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:14:32.879 Requirement: ODSCC10

2011-03-25 17:14:32.879 00184 Stop()
2011-03-25 17:14:32.879 Requirement: ODSCC10
2011-03-25 17:14:32.879 RunCommand(ods-control stop)
2011-03-25 17:14:32.882 - runCommand: Process started, PID: 2612
2011-03-25 17:14:32.882 OUTPUT:	Stopping enforcer...
2011-03-25 17:14:32.882 OUTPUT:	Cannot find PID file
2011-03-25 17:14:32.882 OUTPUT:	Stopping signer engine..
2011-03-25 17:14:32.882 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:14:32.882 ERROR:	return code = 1
2011-03-25 17:14:32.882 RunCommand(ps -e | grep enforcer)
2011-03-25 17:14:32.892 - runCommand: Process started, PID: 2615
2011-03-25 17:14:32.892 ERROR:	return code = 1
2011-03-25 17:14:32.892 RunCommand(ps -e | grep signer)
2011-03-25 17:14:32.902 - runCommand: Process started, PID: 2618
2011-03-25 17:14:32.902 ERROR:	return code = 1

2011-03-25 17:14:32.902 00186 Wait(10)

2011-03-25 17:14:32.902 Requirement: ODSCC10

2011-03-25 17:14:42.903 00188 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:14:42.903 Requirement: ODSCC10

2011-03-25 17:14:42.903 00194 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:14:42.903 Requirement: ODSCC10

2011-03-25 17:14:42.904 00197 PurgeHSM()
2011-03-25 17:14:42.904 Requirement: ODSCC10
2011-03-25 17:14:42.904 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:14:43.339 - runCommand: Process started, PID: 2621
2011-03-25 17:14:43.339 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:14:43.339 OUTPUT:	2 keys found.
2011-03-25 17:14:43.339 OUTPUT:	
2011-03-25 17:14:43.339 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:14:43.339 OUTPUT:	Starting purge...
2011-03-25 17:14:43.339 OUTPUT:	Key remove successful: cf2be185c564b08bd43af5a13ab62e2c
2011-03-25 17:14:43.339 OUTPUT:	Key remove successful: 13ead8e67131f3fac250384b163908bf
2011-03-25 17:14:43.339 OUTPUT:	Purge done.

2011-03-25 17:14:43.340 00199 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:14:43.340 Requirement: ODSCC10

2011-03-25 17:14:43.340 00202 LoadConfig()
2011-03-25 17:14:43.340 Requirement: ODSCC10
2011-03-25 17:14:43.340 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T30_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:14:43.345 - runCommand: Process started, PID: 2625
2011-03-25 17:14:43.345 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T30_conf.xml': No such file or directory
2011-03-25 17:14:43.345 ERROR:	return code = 1

2011-03-25 17:14:43.345 00205 LoadConfig()
2011-03-25 17:14:43.345 Requirement: ODSCC10
2011-03-25 17:14:43.345 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:14:43.349 - runCommand: Process started, PID: 2626
2011-03-25 17:14:43.349 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:14:43.349 ERROR:	return code = 1

2011-03-25 17:14:43.350 00207 Comment: Update all the configs.

2011-03-25 17:14:43.350 Requirement: ODSCC10

2011-03-25 17:14:43.350 00209 ODSSetup()
2011-03-25 17:14:43.350 Requirement: ODSCC10
2011-03-25 17:14:43.350 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:14:53.710 - runCommand: Process started, PID: 2627
2011-03-25 17:14:53.710 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:14:53.710 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:14:53.710 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:14:53.710 OUTPUT:	Repository SoftHSM found
2011-03-25 17:14:53.710 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:14:53.710 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:14:53.710 OUTPUT:	Policy default2 found
2011-03-25 17:14:53.710 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:14:53.710 OUTPUT:	Policy default found
2011-03-25 17:14:53.710 OUTPUT:	Zone ods found
2011-03-25 17:14:53.710 OUTPUT:	Policy set to default.
2011-03-25 17:14:53.710 OUTPUT:	Added zone ods to database
2011-03-25 17:14:53.710 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:14:53.710 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:14:53.710 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:14:53.710 00211 Wait(10)

2011-03-25 17:14:53.710 Requirement: ODSCC10

2011-03-25 17:15:03.711 00213 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:15:03.711 Requirement: ODSCC10

2011-03-25 17:15:03.711 00215 Start()
2011-03-25 17:15:03.711 Requirement: ODSCC10
2011-03-25 17:15:03.711 RunCommand(ods-control start)
2011-03-25 17:15:03.713 - runCommand: Background process started, PID: 2640
2011-03-25 17:15:04.728 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:15:04.753 - runCommand: Process started, PID: 2656
2011-03-25 17:15:04.753 OUTPUT:	ods-enforcerd
2011-03-25 17:15:04.753 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:15:04.771 - runCommand: Process started, PID: 2668
2011-03-25 17:15:04.771 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:15:04.771 00217 Comment: Sign the ods zone with the new configs.

2011-03-25 17:15:04.771 Requirement: ODSCC10

2011-03-25 17:15:04.772 00221 Wait(15)

2011-03-25 17:15:04.772 Requirement: ODSCC10

2011-03-25 17:15:19.772 00223 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:15:19.772 Requirement: ODSCC10

2011-03-25 17:15:19.772 00225 Stop()
2011-03-25 17:15:19.772 Requirement: ODSCC10
2011-03-25 17:15:19.773 RunCommand(ods-control stop)
2011-03-25 17:15:20.782 - runCommand: Process started, PID: 2690
2011-03-25 17:15:20.782 OUTPUT:	Stopping enforcer...
2011-03-25 17:15:20.782 OUTPUT:	Stopping signer engine..
2011-03-25 17:15:20.782 OUTPUT:	Engine shut down.
2011-03-25 17:15:20.782 RunCommand(ps -e | grep enforcer)
2011-03-25 17:15:20.797 - runCommand: Process started, PID: 2696
2011-03-25 17:15:20.797 ERROR:	return code = 1
2011-03-25 17:15:20.797 RunCommand(ps -e | grep signer)
2011-03-25 17:15:20.807 - runCommand: Process started, PID: 2699
2011-03-25 17:15:20.807 ERROR:	return code = 1

2011-03-25 17:15:20.808 00228 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful.

2011-03-25 17:15:20.808 Requirement: ODSCC10

2011-03-25 17:15:20.808 00231 CheckLog()
2011-03-25 17:15:20.808 Requirement: ODSCC10
2011-03-25 17:15:23.619 FAILED:	(Check for Like) - Expected: Aborting operation Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC10T40: Configure Incorrect module location and expect failure

2011-03-25 17:15:23.619 00237 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:15:23.619 Requirement: ODSCC10

2011-03-25 17:15:23.620 00239 Stop()
2011-03-25 17:15:23.620 Requirement: ODSCC10
2011-03-25 17:15:23.620 RunCommand(ods-control stop)
2011-03-25 17:15:23.623 - runCommand: Process started, PID: 2702
2011-03-25 17:15:23.623 OUTPUT:	Stopping enforcer...
2011-03-25 17:15:23.623 OUTPUT:	Cannot find PID file
2011-03-25 17:15:23.623 OUTPUT:	Stopping signer engine..
2011-03-25 17:15:23.623 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:15:23.623 ERROR:	return code = 1
2011-03-25 17:15:23.623 RunCommand(ps -e | grep enforcer)
2011-03-25 17:15:23.632 - runCommand: Process started, PID: 2705
2011-03-25 17:15:23.632 ERROR:	return code = 1
2011-03-25 17:15:23.632 RunCommand(ps -e | grep signer)
2011-03-25 17:15:23.643 - runCommand: Process started, PID: 2708
2011-03-25 17:15:23.643 ERROR:	return code = 1

2011-03-25 17:15:23.643 00241 Wait(10)

2011-03-25 17:15:23.643 Requirement: ODSCC10

2011-03-25 17:15:33.644 00243 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:15:33.644 Requirement: ODSCC10

2011-03-25 17:15:33.644 00249 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:15:33.644 Requirement: ODSCC10

2011-03-25 17:15:33.645 00252 PurgeHSM()
2011-03-25 17:15:33.645 Requirement: ODSCC10
2011-03-25 17:15:33.645 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:15:33.972 - runCommand: Process started, PID: 2711
2011-03-25 17:15:33.972 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:15:33.972 OUTPUT:	2 keys found.
2011-03-25 17:15:33.972 OUTPUT:	
2011-03-25 17:15:33.972 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:15:33.972 OUTPUT:	Starting purge...
2011-03-25 17:15:33.972 OUTPUT:	Key remove successful: 318b3bcd304d64104082f721eaf56df9
2011-03-25 17:15:33.972 OUTPUT:	Key remove successful: a7c5a440ce568cb9b84303bad9b57a0b
2011-03-25 17:15:33.972 OUTPUT:	Purge done.

2011-03-25 17:15:33.972 00254 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:15:33.972 Requirement: ODSCC10

2011-03-25 17:15:33.973 00257 LoadConfig()
2011-03-25 17:15:33.973 Requirement: ODSCC10
2011-03-25 17:15:33.973 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T40_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:15:33.977 - runCommand: Process started, PID: 2715
2011-03-25 17:15:33.977 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T40_conf.xml': No such file or directory
2011-03-25 17:15:33.977 ERROR:	return code = 1

2011-03-25 17:15:33.977 00260 LoadConfig()
2011-03-25 17:15:33.977 Requirement: ODSCC10
2011-03-25 17:15:33.977 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:15:33.981 - runCommand: Process started, PID: 2716
2011-03-25 17:15:33.981 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:15:33.981 ERROR:	return code = 1

2011-03-25 17:15:33.982 00262 Comment: Update all the configs.

2011-03-25 17:15:33.982 Requirement: ODSCC10

2011-03-25 17:15:33.982 00264 ODSSetup()
2011-03-25 17:15:33.982 Requirement: ODSCC10
2011-03-25 17:15:33.982 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:15:44.550 - runCommand: Process started, PID: 2717
2011-03-25 17:15:44.550 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:15:44.550 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:15:44.550 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:15:44.550 OUTPUT:	Repository SoftHSM found
2011-03-25 17:15:44.550 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:15:44.550 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:15:44.550 OUTPUT:	Policy default2 found
2011-03-25 17:15:44.550 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:15:44.550 OUTPUT:	Policy default found
2011-03-25 17:15:44.550 OUTPUT:	Zone ods found
2011-03-25 17:15:44.551 OUTPUT:	Policy set to default.
2011-03-25 17:15:44.551 OUTPUT:	Added zone ods to database
2011-03-25 17:15:44.551 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:15:44.551 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:15:44.551 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:15:44.551 00266 Wait(10)

2011-03-25 17:15:44.551 Requirement: ODSCC10

2011-03-25 17:15:54.551 00268 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:15:54.552 Requirement: ODSCC10

2011-03-25 17:15:54.552 00270 Start()
2011-03-25 17:15:54.552 Requirement: ODSCC10
2011-03-25 17:15:54.552 RunCommand(ods-control start)
2011-03-25 17:15:54.553 - runCommand: Background process started, PID: 2730
2011-03-25 17:15:55.569 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:15:55.589 - runCommand: Process started, PID: 2745
2011-03-25 17:15:55.589 OUTPUT:	ods-enforcerd
2011-03-25 17:15:55.589 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:15:55.605 - runCommand: Process started, PID: 2750
2011-03-25 17:15:55.605 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:15:55.605 00272 Comment: Sign the ods zone with the new configs.

2011-03-25 17:15:55.605 Requirement: ODSCC10

2011-03-25 17:15:55.605 00276 Wait(15)

2011-03-25 17:15:55.605 Requirement: ODSCC10

2011-03-25 17:16:10.606 00278 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:16:10.606 Requirement: ODSCC10

2011-03-25 17:16:10.606 00280 Stop()
2011-03-25 17:16:10.606 Requirement: ODSCC10
2011-03-25 17:16:10.606 RunCommand(ods-control stop)
2011-03-25 17:16:11.615 - runCommand: Process started, PID: 2780
2011-03-25 17:16:11.616 OUTPUT:	Stopping enforcer...
2011-03-25 17:16:11.616 OUTPUT:	Stopping signer engine..
2011-03-25 17:16:11.616 OUTPUT:	Engine shut down.
2011-03-25 17:16:11.616 RunCommand(ps -e | grep enforcer)
2011-03-25 17:16:11.631 - runCommand: Process started, PID: 2786
2011-03-25 17:16:11.631 ERROR:	return code = 1
2011-03-25 17:16:11.631 RunCommand(ps -e | grep signer)
2011-03-25 17:16:11.644 - runCommand: Process started, PID: 2789
2011-03-25 17:16:11.644 ERROR:	return code = 1

2011-03-25 17:16:11.645 00283 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. No SoftHSM has been found.

2011-03-25 17:16:11.645 Requirement: ODSCC10

2011-03-25 17:16:11.645 00286 CheckLog()
2011-03-25 17:16:11.645 Requirement: ODSCC10
2011-03-25 17:16:14.457 FAILED:	(Check for Like) - Expected: Aborting operation Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC10T50: Use a Tokenlabel with 1 character

2011-03-25 17:16:14.457 00292 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:16:14.457 Requirement: ODSCC10

2011-03-25 17:16:14.457 00294 Stop()
2011-03-25 17:16:14.457 Requirement: ODSCC10
2011-03-25 17:16:14.457 RunCommand(ods-control stop)
2011-03-25 17:16:14.461 - runCommand: Process started, PID: 2792
2011-03-25 17:16:14.461 OUTPUT:	Stopping enforcer...
2011-03-25 17:16:14.461 OUTPUT:	Cannot find PID file
2011-03-25 17:16:14.461 OUTPUT:	Stopping signer engine..
2011-03-25 17:16:14.461 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:16:14.461 ERROR:	return code = 1
2011-03-25 17:16:14.461 RunCommand(ps -e | grep enforcer)
2011-03-25 17:16:14.470 - runCommand: Process started, PID: 2795
2011-03-25 17:16:14.470 ERROR:	return code = 1
2011-03-25 17:16:14.470 RunCommand(ps -e | grep signer)
2011-03-25 17:16:14.480 - runCommand: Process started, PID: 2798
2011-03-25 17:16:14.480 ERROR:	return code = 1

2011-03-25 17:16:14.480 00296 Wait(10)

2011-03-25 17:16:14.480 Requirement: ODSCC10

2011-03-25 17:16:24.480 00298 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:16:24.480 Requirement: ODSCC10

2011-03-25 17:16:24.481 00304 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:16:24.481 Requirement: ODSCC10

2011-03-25 17:16:24.481 00307 PurgeHSM()
2011-03-25 17:16:24.481 Requirement: ODSCC10
2011-03-25 17:16:24.481 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:16:24.829 - runCommand: Process started, PID: 2801
2011-03-25 17:16:24.829 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:16:24.829 OUTPUT:	2 keys found.
2011-03-25 17:16:24.829 OUTPUT:	
2011-03-25 17:16:24.829 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:16:24.829 OUTPUT:	Starting purge...
2011-03-25 17:16:24.829 OUTPUT:	Key remove successful: 1ee021ef826ff765be0fcf093146cd08
2011-03-25 17:16:24.829 OUTPUT:	Key remove successful: 34aaa4f569d691b5904a6b2ceaedaf41
2011-03-25 17:16:24.829 OUTPUT:	Purge done.

2011-03-25 17:16:24.830 00309 Comment: Change the tokenlabel of slot1  to "S"

2011-03-25 17:16:24.830 Requirement: ODSCC10

2011-03-25 17:16:24.830 00311 InitRepo()
2011-03-25 17:16:24.830 Requirement: ODSCC10
2011-03-25 17:16:24.830 RunCommand(softhsm --init-token --slot  --label softhsm --init-token --slot 1 --label S --so-pin 4321 --pin 4321 --so-pin  --pin )
2011-03-25 17:16:24.853 - runCommand: Process started, PID: 2805
2011-03-25 17:16:24.853 ERROR:	Error: The given SO PIN does not match the one in the token.

2011-03-25 17:16:24.854 00313 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:16:24.854 Requirement: ODSCC10

2011-03-25 17:16:24.854 00316 LoadConfig()
2011-03-25 17:16:24.854 Requirement: ODSCC10
2011-03-25 17:16:24.854 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T50_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:16:24.858 - runCommand: Process started, PID: 2807
2011-03-25 17:16:24.858 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T50_conf.xml': No such file or directory
2011-03-25 17:16:24.858 ERROR:	return code = 1

2011-03-25 17:16:24.859 00319 LoadConfig()
2011-03-25 17:16:24.859 Requirement: ODSCC10
2011-03-25 17:16:24.859 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:16:24.863 - runCommand: Process started, PID: 2808
2011-03-25 17:16:24.863 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:16:24.863 ERROR:	return code = 1

2011-03-25 17:16:24.864 00321 Comment: Update all the configs.

2011-03-25 17:16:24.864 Requirement: ODSCC10

2011-03-25 17:16:24.864 00323 ODSSetup()
2011-03-25 17:16:24.864 Requirement: ODSCC10
2011-03-25 17:16:24.864 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:16:35.341 - runCommand: Process started, PID: 2809
2011-03-25 17:16:35.341 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:16:35.341 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:16:35.341 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:16:35.341 OUTPUT:	Repository SoftHSM found
2011-03-25 17:16:35.341 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:16:35.341 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:16:35.341 OUTPUT:	Policy default2 found
2011-03-25 17:16:35.341 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:16:35.341 OUTPUT:	Policy default found
2011-03-25 17:16:35.341 OUTPUT:	Zone ods found
2011-03-25 17:16:35.341 OUTPUT:	Policy set to default.
2011-03-25 17:16:35.341 OUTPUT:	Added zone ods to database
2011-03-25 17:16:35.341 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:16:35.341 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:16:35.341 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:16:35.342 00325 Wait(10)

2011-03-25 17:16:35.342 Requirement: ODSCC10

2011-03-25 17:16:45.342 00327 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:16:45.342 Requirement: ODSCC10

2011-03-25 17:16:45.343 00329 Start()
2011-03-25 17:16:45.343 Requirement: ODSCC10
2011-03-25 17:16:45.343 RunCommand(ods-control start)
2011-03-25 17:16:45.344 - runCommand: Background process started, PID: 2822
2011-03-25 17:16:46.359 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:16:46.382 - runCommand: Process started, PID: 2838
2011-03-25 17:16:46.382 OUTPUT:	ods-enforcerd
2011-03-25 17:16:46.382 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:16:46.398 - runCommand: Process started, PID: 2850
2011-03-25 17:16:46.398 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:16:46.398 00331 Wait(10)

2011-03-25 17:16:46.398 Requirement: ODSCC10

2011-03-25 17:16:56.399 00333 Comment: Sign the ods zone with the new configs.

2011-03-25 17:16:56.399 Requirement: ODSCC10

2011-03-25 17:16:56.399 00337 Wait(15)

2011-03-25 17:16:56.399 Requirement: ODSCC10

2011-03-25 17:17:11.400 00339 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:17:11.400 Requirement: ODSCC10

2011-03-25 17:17:11.400 00341 Stop()
2011-03-25 17:17:11.400 Requirement: ODSCC10
2011-03-25 17:17:11.400 RunCommand(ods-control stop)
2011-03-25 17:17:12.410 - runCommand: Process started, PID: 2875
2011-03-25 17:17:12.410 OUTPUT:	Stopping enforcer...
2011-03-25 17:17:12.410 OUTPUT:	Stopping signer engine..
2011-03-25 17:17:12.410 OUTPUT:	Engine shut down.
2011-03-25 17:17:12.410 RunCommand(ps -e | grep enforcer)
2011-03-25 17:17:12.425 - runCommand: Process started, PID: 2881
2011-03-25 17:17:12.425 ERROR:	return code = 1
2011-03-25 17:17:12.425 RunCommand(ps -e | grep signer)
2011-03-25 17:17:12.442 - runCommand: Process started, PID: 2884
2011-03-25 17:17:12.442 ERROR:	return code = 1

2011-03-25 17:17:12.442 00343 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-25 17:17:12.442 Requirement: ODSCC10

2011-03-25 17:17:12.443 00346 CheckLog()
2011-03-25 17:17:12.443 Requirement: ODSCC10
2011-03-25 17:17:15.258 PASSED:	(Check for Like) - Expected: all done! Found: Mar 25 17:17:11 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

2011-03-25 17:17:15.258 00348 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:17:15.258 Requirement: ODSCC10

2011-03-25 17:17:15.259 00350 Stop()
2011-03-25 17:17:15.259 Requirement: ODSCC10
2011-03-25 17:17:15.259 RunCommand(ods-control stop)
2011-03-25 17:17:15.262 - runCommand: Process started, PID: 2887
2011-03-25 17:17:15.262 OUTPUT:	Stopping enforcer...
2011-03-25 17:17:15.262 OUTPUT:	Cannot find PID file
2011-03-25 17:17:15.262 OUTPUT:	Stopping signer engine..
2011-03-25 17:17:15.262 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:17:15.262 ERROR:	return code = 1
2011-03-25 17:17:15.262 RunCommand(ps -e | grep enforcer)
2011-03-25 17:17:15.271 - runCommand: Process started, PID: 2890
2011-03-25 17:17:15.271 ERROR:	return code = 1
2011-03-25 17:17:15.272 RunCommand(ps -e | grep signer)
2011-03-25 17:17:15.282 - runCommand: Process started, PID: 2893
2011-03-25 17:17:15.282 ERROR:	return code = 1

2011-03-25 17:17:15.282 00352 Wait(10)

2011-03-25 17:17:15.282 Requirement: ODSCC10

2011-03-25 17:17:25.283 00354 Comment: Change the token to the previous label.

2011-03-25 17:17:25.283 Requirement: ODSCC10

2011-03-25 17:17:25.283 00356 InitRepo()
2011-03-25 17:17:25.283 Requirement: ODSCC10
2011-03-25 17:17:25.283 RunCommand(softhsm --init-token --slot  --label softhsm --init-token --slot 1 --label OpenDNSSEC2 --so-pin 4321 --pin 4321 --so-pin  --pin )
2011-03-25 17:17:25.293 - runCommand: Process started, PID: 2896
2011-03-25 17:17:25.293 ERROR:	Error: The given SO PIN does not match the one in the token.

2011-03-25 17:17:25.293 00358 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:17:25.293 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T60: Use a Tokenlabel with 257 characters

2011-03-25 17:17:25.294 00368 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:17:25.294 Requirement: ODSCC10

2011-03-25 17:17:25.294 00370 Stop()
2011-03-25 17:17:25.294 Requirement: ODSCC10
2011-03-25 17:17:25.294 RunCommand(ods-control stop)
2011-03-25 17:17:25.300 - runCommand: Process started, PID: 2898
2011-03-25 17:17:25.300 OUTPUT:	Stopping enforcer...
2011-03-25 17:17:25.300 OUTPUT:	Cannot find PID file
2011-03-25 17:17:25.300 OUTPUT:	Stopping signer engine..
2011-03-25 17:17:25.300 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:17:25.300 ERROR:	return code = 1
2011-03-25 17:17:25.300 RunCommand(ps -e | grep enforcer)
2011-03-25 17:17:25.313 - runCommand: Process started, PID: 2901
2011-03-25 17:17:25.313 ERROR:	return code = 1
2011-03-25 17:17:25.313 RunCommand(ps -e | grep signer)
2011-03-25 17:17:25.323 - runCommand: Process started, PID: 2904
2011-03-25 17:17:25.324 ERROR:	return code = 1

2011-03-25 17:17:25.324 00372 Wait(10)

2011-03-25 17:17:25.324 Requirement: ODSCC10

2011-03-25 17:17:35.324 00374 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:17:35.324 Requirement: ODSCC10

2011-03-25 17:17:35.325 00380 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:17:35.325 Requirement: ODSCC10

2011-03-25 17:17:35.325 00383 PurgeHSM()
2011-03-25 17:17:35.325 Requirement: ODSCC10
2011-03-25 17:17:35.325 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:17:35.693 - runCommand: Process started, PID: 2907
2011-03-25 17:17:35.693 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:17:35.693 OUTPUT:	2 keys found.
2011-03-25 17:17:35.693 OUTPUT:	
2011-03-25 17:17:35.693 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:17:35.693 OUTPUT:	Starting purge...
2011-03-25 17:17:35.693 OUTPUT:	Key remove successful: 0abc244074093ce52674a88cb964d69b
2011-03-25 17:17:35.693 OUTPUT:	Key remove successful: 8a4acc5e2fa41e00a8584fc6951e3267
2011-03-25 17:17:35.693 OUTPUT:	Purge done.

2011-03-25 17:17:35.693 00386 Comment: Change the tokenlabel of slot1  to "SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM"
(257 characters)

2011-03-25 17:17:35.693 Requirement: ODSCC10

2011-03-25 17:17:35.694 00388 InitRepo()
2011-03-25 17:17:35.694 Requirement: ODSCC10
2011-03-25 17:17:35.694 RunCommand(softhsm --init-token --slot  --label softhsm --init-token --slot 1 --label SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM --so-pin 4321 --pin 4321 --so-pin  --pin )
2011-03-25 17:17:35.702 - runCommand: Process started, PID: 2911
2011-03-25 17:17:35.702 ERROR:	Error: The token label must not have a length greater than 32 chars.

2011-03-25 17:17:35.703 00390 Wait(1/5/1900)

2011-03-25 17:17:35.703 Requirement: ODSCC10

2011-03-25 17:17:36.703 00392 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:17:36.703 Requirement: ODSCC10

2011-03-25 17:17:36.703 00395 LoadConfig()
2011-03-25 17:17:36.703 Requirement: ODSCC10
2011-03-25 17:17:36.703 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T60_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:17:36.708 - runCommand: Process started, PID: 2913
2011-03-25 17:17:36.708 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T60_conf.xml': No such file or directory
2011-03-25 17:17:36.708 ERROR:	return code = 1

2011-03-25 17:17:36.708 00398 LoadConfig()
2011-03-25 17:17:36.708 Requirement: ODSCC10
2011-03-25 17:17:36.708 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:17:36.712 - runCommand: Process started, PID: 2914
2011-03-25 17:17:36.712 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:17:36.712 ERROR:	return code = 1

2011-03-25 17:17:36.713 00400 Comment: Update all the configs.

2011-03-25 17:17:36.713 Requirement: ODSCC10

2011-03-25 17:17:36.713 00402 ODSSetup()
2011-03-25 17:17:36.713 Requirement: ODSCC10
2011-03-25 17:17:36.713 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:17:46.971 - runCommand: Process started, PID: 2915
2011-03-25 17:17:46.971 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:17:46.971 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:17:46.971 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:17:46.971 OUTPUT:	Repository SoftHSM found
2011-03-25 17:17:46.971 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:17:46.971 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:17:46.971 OUTPUT:	Policy default2 found
2011-03-25 17:17:46.971 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:17:46.971 OUTPUT:	Policy default found
2011-03-25 17:17:46.971 OUTPUT:	Zone ods found
2011-03-25 17:17:46.971 OUTPUT:	Policy set to default.
2011-03-25 17:17:46.971 OUTPUT:	Added zone ods to database
2011-03-25 17:17:46.971 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:17:46.971 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:17:46.971 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:17:46.972 00404 Wait(10)

2011-03-25 17:17:46.972 Requirement: ODSCC10

2011-03-25 17:17:56.972 00406 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:17:56.972 Requirement: ODSCC10

2011-03-25 17:17:56.973 00408 Start()
2011-03-25 17:17:56.973 Requirement: ODSCC10
2011-03-25 17:17:56.973 RunCommand(ods-control start)
2011-03-25 17:17:56.974 - runCommand: Background process started, PID: 2928
2011-03-25 17:17:57.991 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:17:58.931 - runCommand: Process started, PID: 2943
2011-03-25 17:17:58.938 OUTPUT:	ods-enforcerd
2011-03-25 17:17:58.941 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:17:58.328 - runCommand: Process started, PID: 2948
2011-03-25 17:17:58.329 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:17:58.331 00410 Comment: Sign the ods zone with the new configs.

2011-03-25 17:17:58.331 Requirement: ODSCC10

2011-03-25 17:17:58.334 00414 Wait(15)

2011-03-25 17:17:58.334 Requirement: ODSCC10

2011-03-25 17:18:13.338 00417 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:18:13.339 Requirement: ODSCC10

2011-03-25 17:18:13.342 00419 Stop()
2011-03-25 17:18:13.342 Requirement: ODSCC10
2011-03-25 17:18:13.343 RunCommand(ods-control stop)
2011-03-25 17:18:14.435 - runCommand: Process started, PID: 2978
2011-03-25 17:18:14.436 OUTPUT:	Stopping enforcer...
2011-03-25 17:18:14.436 OUTPUT:	Stopping signer engine..
2011-03-25 17:18:14.437 OUTPUT:	Engine shut down.
2011-03-25 17:18:14.437 RunCommand(ps -e | grep enforcer)
2011-03-25 17:18:14.589 - runCommand: Process started, PID: 2984
2011-03-25 17:18:14.590 ERROR:	return code = 1
2011-03-25 17:18:14.590 RunCommand(ps -e | grep signer)
2011-03-25 17:18:14.723 - runCommand: Process started, PID: 2987
2011-03-25 17:18:14.724 ERROR:	return code = 1

2011-03-25 17:18:14.726 00422 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-25 17:18:14.726 Requirement: ODSCC10

2011-03-25 17:18:14.729 00426 CheckLog()
2011-03-25 17:18:14.729 Requirement: ODSCC10
2011-03-25 17:18:16.904 PASSED:	(Check for Like) - Expected: all done! Found: Mar 25 17:18:13 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

2011-03-25 17:18:16.905 00428 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:18:16.905 Requirement: ODSCC10

2011-03-25 17:18:16.905 00430 Wait(10)

2011-03-25 17:18:16.905 Requirement: ODSCC10

2011-03-25 17:18:26.905 00432 Stop()
2011-03-25 17:18:26.905 Requirement: ODSCC10
2011-03-25 17:18:26.905 RunCommand(ods-control stop)
2011-03-25 17:18:26.911 - runCommand: Process started, PID: 2990
2011-03-25 17:18:26.911 OUTPUT:	Stopping enforcer...
2011-03-25 17:18:26.911 OUTPUT:	Cannot find PID file
2011-03-25 17:18:26.911 OUTPUT:	Stopping signer engine..
2011-03-25 17:18:26.911 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:18:26.911 ERROR:	return code = 1
2011-03-25 17:18:26.911 RunCommand(ps -e | grep enforcer)
2011-03-25 17:18:26.926 - runCommand: Process started, PID: 2993
2011-03-25 17:18:26.926 ERROR:	return code = 1
2011-03-25 17:18:26.926 RunCommand(ps -e | grep signer)
2011-03-25 17:18:26.936 - runCommand: Process started, PID: 2996
2011-03-25 17:18:26.936 ERROR:	return code = 1

2011-03-25 17:18:26.936 00434 Comment: Change the token to the previous label.

2011-03-25 17:18:26.937 Requirement: ODSCC10

2011-03-25 17:18:26.937 00436 InitRepo()
2011-03-25 17:18:26.937 Requirement: ODSCC10
2011-03-25 17:18:26.937 RunCommand(softhsm --init-token --slot  --label softhsm --init-token --slot 1 --label OpenDNSSEC2 --so-pin 4321 --pin 4321 --so-pin  --pin )
2011-03-25 17:18:26.943 - runCommand: Process started, PID: 2999
2011-03-25 17:18:26.943 ERROR:	Error: The given SO PIN does not match the one in the token.

2011-03-25 17:18:26.943 00438 Wait(5)

2011-03-25 17:18:26.943 Requirement: ODSCC10

2011-03-25 17:18:31.944 00440 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:18:31.944 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T70: Configure no PIN while PIN is needed

2011-03-25 17:18:31.945 00446 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:18:31.945 Requirement: ODSCC10

2011-03-25 17:18:31.945 00448 Stop()
2011-03-25 17:18:31.945 Requirement: ODSCC10
2011-03-25 17:18:31.945 RunCommand(ods-control stop)
2011-03-25 17:18:31.951 - runCommand: Process started, PID: 3001
2011-03-25 17:18:31.951 OUTPUT:	Stopping enforcer...
2011-03-25 17:18:31.951 OUTPUT:	Cannot find PID file
2011-03-25 17:18:31.951 OUTPUT:	Stopping signer engine..
2011-03-25 17:18:31.951 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:18:31.951 ERROR:	return code = 1
2011-03-25 17:18:31.951 RunCommand(ps -e | grep enforcer)
2011-03-25 17:18:31.966 - runCommand: Process started, PID: 3004
2011-03-25 17:18:31.966 ERROR:	return code = 1
2011-03-25 17:18:31.966 RunCommand(ps -e | grep signer)
2011-03-25 17:18:31.981 - runCommand: Process started, PID: 3007
2011-03-25 17:18:31.981 ERROR:	return code = 1

2011-03-25 17:18:31.982 00450 Wait(10)

2011-03-25 17:18:31.982 Requirement: ODSCC10

2011-03-25 17:18:41.982 00452 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:18:41.982 Requirement: ODSCC10

2011-03-25 17:18:41.982 00458 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:18:41.983 Requirement: ODSCC10

2011-03-25 17:18:41.983 00461 PurgeHSM()
2011-03-25 17:18:41.983 Requirement: ODSCC10
2011-03-25 17:18:41.983 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:18:42.359 - runCommand: Process started, PID: 3010
2011-03-25 17:18:42.359 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:18:42.359 OUTPUT:	2 keys found.
2011-03-25 17:18:42.359 OUTPUT:	
2011-03-25 17:18:42.359 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:18:42.359 OUTPUT:	Starting purge...
2011-03-25 17:18:42.359 OUTPUT:	Key remove successful: c036451af1e0846a5d0bea74384b62ae
2011-03-25 17:18:42.359 OUTPUT:	Key remove successful: 2bc7099d6849c1a54700c6d61da2886c
2011-03-25 17:18:42.359 OUTPUT:	Purge done.

2011-03-25 17:18:42.359 00463 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:18:42.359 Requirement: ODSCC10

2011-03-25 17:18:42.360 00466 LoadConfig()
2011-03-25 17:18:42.360 Requirement: ODSCC10
2011-03-25 17:18:42.360 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T70_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:18:42.364 - runCommand: Process started, PID: 3014
2011-03-25 17:18:42.364 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T70_conf.xml': No such file or directory
2011-03-25 17:18:42.364 ERROR:	return code = 1

2011-03-25 17:18:42.364 00469 LoadConfig()
2011-03-25 17:18:42.364 Requirement: ODSCC10
2011-03-25 17:18:42.364 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:18:42.368 - runCommand: Process started, PID: 3015
2011-03-25 17:18:42.368 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:18:42.368 ERROR:	return code = 1

2011-03-25 17:18:42.369 00471 Comment: Update all the configs.

2011-03-25 17:18:42.369 Requirement: ODSCC10

2011-03-25 17:18:42.369 00473 ODSSetup()
2011-03-25 17:18:42.369 Requirement: ODSCC10
2011-03-25 17:18:42.369 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:18:52.937 - runCommand: Process started, PID: 3016
2011-03-25 17:18:52.937 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:18:52.937 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:18:52.937 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:18:52.937 OUTPUT:	Repository SoftHSM found
2011-03-25 17:18:52.937 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:18:52.937 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:18:52.937 OUTPUT:	Policy default2 found
2011-03-25 17:18:52.937 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:18:52.937 OUTPUT:	Policy default found
2011-03-25 17:18:52.937 OUTPUT:	Zone ods found
2011-03-25 17:18:52.937 OUTPUT:	Policy set to default.
2011-03-25 17:18:52.937 OUTPUT:	Added zone ods to database
2011-03-25 17:18:52.937 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:18:52.937 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:18:52.938 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:18:52.938 00475 Wait(10)

2011-03-25 17:18:52.938 Requirement: ODSCC10

2011-03-25 17:19:02.938 00477 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:19:02.938 Requirement: ODSCC10

2011-03-25 17:19:02.939 00479 Start()
2011-03-25 17:19:02.939 Requirement: ODSCC10
2011-03-25 17:19:02.939 RunCommand(ods-control start)
2011-03-25 17:19:02.940 - runCommand: Background process started, PID: 3029
2011-03-25 17:19:03.957 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:19:03.976 - runCommand: Process started, PID: 3044
2011-03-25 17:19:03.976 OUTPUT:	ods-enforcerd
2011-03-25 17:19:03.976 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:19:03.992 - runCommand: Process started, PID: 3049
2011-03-25 17:19:03.992 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:19:03.993 00481 Comment: Sign the ods zone with the new configs.

2011-03-25 17:19:03.993 Requirement: ODSCC10

2011-03-25 17:19:03.993 00485 Wait(15)

2011-03-25 17:19:03.993 Requirement: ODSCC10

2011-03-25 17:19:18.993 00487 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:19:18.993 Requirement: ODSCC10

2011-03-25 17:19:18.994 00489 Stop()
2011-03-25 17:19:18.994 Requirement: ODSCC10
2011-03-25 17:19:18.994 RunCommand(ods-control stop)
2011-03-25 17:19:20.332 - runCommand: Process started, PID: 3079
2011-03-25 17:19:20.340 OUTPUT:	Stopping enforcer...
2011-03-25 17:19:20.343 OUTPUT:	Stopping signer engine..
2011-03-25 17:19:20.344 OUTPUT:	Engine shut down.
2011-03-25 17:19:20.348 RunCommand(ps -e | grep enforcer)
2011-03-25 17:19:20.186 - runCommand: Process started, PID: 3085
2011-03-25 17:19:20.187 ERROR:	return code = 1
2011-03-25 17:19:20.188 RunCommand(ps -e | grep signer)
2011-03-25 17:19:20.359 - runCommand: Process started, PID: 3088
2011-03-25 17:19:20.359 ERROR:	return code = 1

2011-03-25 17:19:20.362 00491 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. 

2011-03-25 17:19:20.362 Requirement: ODSCC10

2011-03-25 17:19:20.365 00494 CheckLog()
2011-03-25 17:19:20.365 Requirement: ODSCC10
2011-03-25 17:19:22.873 FAILED:	(Check for Like) - Expected: Aborting operation Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC10T80: Configure an Incorrect PIN and run signing

2011-03-25 17:19:22.874 00499 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:19:22.874 Requirement: ODSCC10

2011-03-25 17:19:22.874 00501 Stop()
2011-03-25 17:19:22.874 Requirement: ODSCC10
2011-03-25 17:19:22.874 RunCommand(ods-control stop)
2011-03-25 17:19:22.879 - runCommand: Process started, PID: 3091
2011-03-25 17:19:22.880 OUTPUT:	Stopping enforcer...
2011-03-25 17:19:22.880 OUTPUT:	Cannot find PID file
2011-03-25 17:19:22.880 OUTPUT:	Stopping signer engine..
2011-03-25 17:19:22.880 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:19:22.880 ERROR:	return code = 1
2011-03-25 17:19:22.880 RunCommand(ps -e | grep enforcer)
2011-03-25 17:19:22.890 - runCommand: Process started, PID: 3094
2011-03-25 17:19:22.890 ERROR:	return code = 1
2011-03-25 17:19:22.890 RunCommand(ps -e | grep signer)
2011-03-25 17:19:22.902 - runCommand: Process started, PID: 3097
2011-03-25 17:19:22.902 ERROR:	return code = 1

2011-03-25 17:19:22.902 00503 Wait(10)

2011-03-25 17:19:22.902 Requirement: ODSCC10

2011-03-25 17:19:32.903 00505 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:19:32.903 Requirement: ODSCC10

2011-03-25 17:19:32.903 00511 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:19:32.903 Requirement: ODSCC10

2011-03-25 17:19:32.903 00514 PurgeHSM()
2011-03-25 17:19:32.903 Requirement: ODSCC10
2011-03-25 17:19:32.903 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:19:33.266 - runCommand: Process started, PID: 3100
2011-03-25 17:19:33.266 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:19:33.266 OUTPUT:	2 keys found.
2011-03-25 17:19:33.266 OUTPUT:	
2011-03-25 17:19:33.266 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:19:33.266 OUTPUT:	Starting purge...
2011-03-25 17:19:33.266 OUTPUT:	Key remove successful: 7e1d12cd102cab2b177e83b09b5684e3
2011-03-25 17:19:33.266 OUTPUT:	Key remove successful: 28531439d4af5923168b03492242acc2
2011-03-25 17:19:33.266 OUTPUT:	Purge done.

2011-03-25 17:19:33.266 00516 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:19:33.266 Requirement: ODSCC10

2011-03-25 17:19:33.267 00519 LoadConfig()
2011-03-25 17:19:33.267 Requirement: ODSCC10
2011-03-25 17:19:33.267 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T80_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:19:33.271 - runCommand: Process started, PID: 3104
2011-03-25 17:19:33.271 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T80_conf.xml': No such file or directory
2011-03-25 17:19:33.271 ERROR:	return code = 1

2011-03-25 17:19:33.272 00522 LoadConfig()
2011-03-25 17:19:33.272 Requirement: ODSCC10
2011-03-25 17:19:33.272 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:19:33.276 - runCommand: Process started, PID: 3105
2011-03-25 17:19:33.276 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:19:33.276 ERROR:	return code = 1

2011-03-25 17:19:33.276 00524 Comment: Update all the configs.

2011-03-25 17:19:33.276 Requirement: ODSCC10

2011-03-25 17:19:33.276 00526 ODSSetup()
2011-03-25 17:19:33.276 Requirement: ODSCC10
2011-03-25 17:19:33.276 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:19:44.318 - runCommand: Process started, PID: 3106
2011-03-25 17:19:44.329 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:19:44.331 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:19:44.333 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:19:44.334 OUTPUT:	Repository SoftHSM found
2011-03-25 17:19:44.336 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:19:44.338 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:19:44.339 OUTPUT:	Policy default2 found
2011-03-25 17:19:44.341 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:19:44.342 OUTPUT:	Policy default found
2011-03-25 17:19:44.344 OUTPUT:	Zone ods found
2011-03-25 17:19:44.346 OUTPUT:	Policy set to default.
2011-03-25 17:19:44.347 OUTPUT:	Added zone ods to database
2011-03-25 17:19:44.349 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:19:44.351 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:19:44.352 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:19:44.392 00528 Wait(10)

2011-03-25 17:19:44.395 Requirement: ODSCC10

2011-03-25 17:19:54.443 00530 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:19:54.446 Requirement: ODSCC10

2011-03-25 17:19:54.484 00532 Start()
2011-03-25 17:19:54.486 Requirement: ODSCC10
2011-03-25 17:19:54.488 RunCommand(ods-control start)
2011-03-25 17:19:54.617 - runCommand: Background process started, PID: 3119
2011-03-25 17:19:55.242 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:19:55.461 - runCommand: Process started, PID: 3134
2011-03-25 17:19:55.461 OUTPUT:	ods-enforcerd
2011-03-25 17:19:55.461 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:19:55.763 - runCommand: Process started, PID: 3139
2011-03-25 17:19:55.764 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:19:55.766 00534 Comment: Sign the ods zone with the new configs.

2011-03-25 17:19:55.766 Requirement: ODSCC10

2011-03-25 17:19:55.768 00538 Wait(15)

2011-03-25 17:19:55.769 Requirement: ODSCC10

2011-03-25 17:20:10.773 00541 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:20:10.774 Requirement: ODSCC10

2011-03-25 17:20:10.777 00543 Stop()
2011-03-25 17:20:10.777 Requirement: ODSCC10
2011-03-25 17:20:10.777 RunCommand(ods-control stop)
2011-03-25 17:20:11.870 - runCommand: Process started, PID: 3169
2011-03-25 17:20:11.870 OUTPUT:	Stopping enforcer...
2011-03-25 17:20:11.871 OUTPUT:	Stopping signer engine..
2011-03-25 17:20:11.871 OUTPUT:	Engine shut down.
2011-03-25 17:20:11.871 RunCommand(ps -e | grep enforcer)
2011-03-25 17:20:11.102 - runCommand: Process started, PID: 3175
2011-03-25 17:20:11.102 ERROR:	return code = 1
2011-03-25 17:20:11.102 RunCommand(ps -e | grep signer)
2011-03-25 17:20:11.116 - runCommand: Process started, PID: 3178
2011-03-25 17:20:11.116 ERROR:	return code = 1

2011-03-25 17:20:11.116 00546 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. 

2011-03-25 17:20:11.116 Requirement: ODSCC10

2011-03-25 17:20:11.116 00549 CheckLog()
2011-03-25 17:20:11.116 Requirement: ODSCC10
2011-03-25 17:20:13.939 FAILED:	(Check for Like) - Expected: Aborting operation Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC10T90: Use correct PIN plus one additional character

2011-03-25 17:20:13.940 00554 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:20:13.940 Requirement: ODSCC10

2011-03-25 17:20:13.940 00556 Stop()
2011-03-25 17:20:13.940 Requirement: ODSCC10
2011-03-25 17:20:13.940 RunCommand(ods-control stop)
2011-03-25 17:20:13.943 - runCommand: Process started, PID: 3181
2011-03-25 17:20:13.943 OUTPUT:	Stopping enforcer...
2011-03-25 17:20:13.943 OUTPUT:	Cannot find PID file
2011-03-25 17:20:13.944 OUTPUT:	Stopping signer engine..
2011-03-25 17:20:13.944 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:20:13.944 ERROR:	return code = 1
2011-03-25 17:20:13.944 RunCommand(ps -e | grep enforcer)
2011-03-25 17:20:13.953 - runCommand: Process started, PID: 3184
2011-03-25 17:20:13.953 ERROR:	return code = 1
2011-03-25 17:20:13.953 RunCommand(ps -e | grep signer)
2011-03-25 17:20:13.963 - runCommand: Process started, PID: 3187
2011-03-25 17:20:13.963 ERROR:	return code = 1

2011-03-25 17:20:13.963 00558 Wait(10)

2011-03-25 17:20:13.963 Requirement: ODSCC10

2011-03-25 17:20:23.963 00560 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:20:23.963 Requirement: ODSCC10

2011-03-25 17:20:23.964 00566 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:20:23.964 Requirement: ODSCC10

2011-03-25 17:20:23.964 00569 PurgeHSM()
2011-03-25 17:20:23.964 Requirement: ODSCC10
2011-03-25 17:20:23.964 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:20:24.373 - runCommand: Process started, PID: 3190
2011-03-25 17:20:24.373 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:20:24.373 OUTPUT:	2 keys found.
2011-03-25 17:20:24.373 OUTPUT:	
2011-03-25 17:20:24.373 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:20:24.373 OUTPUT:	Starting purge...
2011-03-25 17:20:24.373 OUTPUT:	Key remove successful: 08e76ade410643c2e2dba0616a2ad923
2011-03-25 17:20:24.373 OUTPUT:	Key remove successful: d60ef1c031bd5500473075c6269e2a33
2011-03-25 17:20:24.373 OUTPUT:	Purge done.

2011-03-25 17:20:24.374 00571 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:20:24.374 Requirement: ODSCC10

2011-03-25 17:20:24.374 00574 LoadConfig()
2011-03-25 17:20:24.374 Requirement: ODSCC10
2011-03-25 17:20:24.374 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T90_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:20:24.378 - runCommand: Process started, PID: 3194
2011-03-25 17:20:24.378 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T90_conf.xml': No such file or directory
2011-03-25 17:20:24.378 ERROR:	return code = 1

2011-03-25 17:20:24.379 00577 LoadConfig()
2011-03-25 17:20:24.379 Requirement: ODSCC10
2011-03-25 17:20:24.379 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:20:24.383 - runCommand: Process started, PID: 3195
2011-03-25 17:20:24.383 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:20:24.383 ERROR:	return code = 1

2011-03-25 17:20:24.383 00579 Comment: Update all the configs.

2011-03-25 17:20:24.383 Requirement: ODSCC10

2011-03-25 17:20:24.383 00581 ODSSetup()
2011-03-25 17:20:24.384 Requirement: ODSCC10
2011-03-25 17:20:24.384 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:20:34.785 - runCommand: Process started, PID: 3196
2011-03-25 17:20:34.785 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:20:34.785 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:20:34.785 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:20:34.785 OUTPUT:	Repository SoftHSM found
2011-03-25 17:20:34.785 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:20:34.785 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:20:34.785 OUTPUT:	Policy default2 found
2011-03-25 17:20:34.785 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:20:34.785 OUTPUT:	Policy default found
2011-03-25 17:20:34.785 OUTPUT:	Zone ods found
2011-03-25 17:20:34.785 OUTPUT:	Policy set to default.
2011-03-25 17:20:34.785 OUTPUT:	Added zone ods to database
2011-03-25 17:20:34.785 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:20:34.785 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:20:34.785 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:20:34.786 00583 Wait(10)

2011-03-25 17:20:34.786 Requirement: ODSCC10

2011-03-25 17:20:44.786 00585 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:20:44.786 Requirement: ODSCC10

2011-03-25 17:20:44.787 00587 Start()
2011-03-25 17:20:44.787 Requirement: ODSCC10
2011-03-25 17:20:44.787 RunCommand(ods-control start)
2011-03-25 17:20:44.788 - runCommand: Background process started, PID: 3209
2011-03-25 17:20:45.805 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:20:45.817 - runCommand: Process started, PID: 3224
2011-03-25 17:20:45.817 OUTPUT:	ods-enforcerd
2011-03-25 17:20:45.817 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:20:45.837 - runCommand: Process started, PID: 3229
2011-03-25 17:20:45.837 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:20:45.837 00589 Comment: Sign the ods zone with the new configs.

2011-03-25 17:20:45.837 Requirement: ODSCC10

2011-03-25 17:20:45.838 00593 Wait(15)

2011-03-25 17:20:45.838 Requirement: ODSCC10

2011-03-25 17:21:00.838 00595 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:21:00.838 Requirement: ODSCC10

2011-03-25 17:21:00.838 00597 Stop()
2011-03-25 17:21:00.838 Requirement: ODSCC10
2011-03-25 17:21:00.838 RunCommand(ods-control stop)
2011-03-25 17:21:01.848 - runCommand: Process started, PID: 3259
2011-03-25 17:21:01.848 OUTPUT:	Stopping enforcer...
2011-03-25 17:21:01.848 OUTPUT:	Stopping signer engine..
2011-03-25 17:21:01.848 OUTPUT:	Engine shut down.
2011-03-25 17:21:01.848 RunCommand(ps -e | grep enforcer)
2011-03-25 17:21:01.863 - runCommand: Process started, PID: 3265
2011-03-25 17:21:01.863 ERROR:	return code = 1
2011-03-25 17:21:01.864 RunCommand(ps -e | grep signer)
2011-03-25 17:21:01.877 - runCommand: Process started, PID: 3268
2011-03-25 17:21:01.877 ERROR:	return code = 1

2011-03-25 17:21:01.877 00600 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. 

2011-03-25 17:21:01.877 Requirement: ODSCC10

2011-03-25 17:21:01.877 00603 CheckLog()
2011-03-25 17:21:01.877 Requirement: ODSCC10
2011-03-25 17:21:04.702 FAILED:	(Check for Like) - Expected: Aborting operation Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC10T100: Use a Repository Capacity of 0 and expect failure

2011-03-25 17:21:04.702 00610 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:21:04.702 Requirement: ODSCC10

2011-03-25 17:21:04.702 00612 Stop()
2011-03-25 17:21:04.702 Requirement: ODSCC10
2011-03-25 17:21:04.702 RunCommand(ods-control stop)
2011-03-25 17:21:04.706 - runCommand: Process started, PID: 3271
2011-03-25 17:21:04.706 OUTPUT:	Stopping enforcer...
2011-03-25 17:21:04.706 OUTPUT:	Cannot find PID file
2011-03-25 17:21:04.706 OUTPUT:	Stopping signer engine..
2011-03-25 17:21:04.706 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:21:04.706 ERROR:	return code = 1
2011-03-25 17:21:04.706 RunCommand(ps -e | grep enforcer)
2011-03-25 17:21:04.715 - runCommand: Process started, PID: 3274
2011-03-25 17:21:04.715 ERROR:	return code = 1
2011-03-25 17:21:04.715 RunCommand(ps -e | grep signer)
2011-03-25 17:21:04.726 - runCommand: Process started, PID: 3277
2011-03-25 17:21:04.726 ERROR:	return code = 1

2011-03-25 17:21:04.726 00614 Wait(10)

2011-03-25 17:21:04.726 Requirement: ODSCC10

2011-03-25 17:21:14.727 00616 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:21:14.727 Requirement: ODSCC10

2011-03-25 17:21:14.727 00622 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:21:14.727 Requirement: ODSCC10

2011-03-25 17:21:14.727 00625 PurgeHSM()
2011-03-25 17:21:14.727 Requirement: ODSCC10
2011-03-25 17:21:14.727 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:21:15.105 - runCommand: Process started, PID: 3280
2011-03-25 17:21:15.106 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:21:15.106 OUTPUT:	2 keys found.
2011-03-25 17:21:15.106 OUTPUT:	
2011-03-25 17:21:15.106 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:21:15.106 OUTPUT:	Starting purge...
2011-03-25 17:21:15.106 OUTPUT:	Key remove successful: a667438fb3e3e35988100418d25592bf
2011-03-25 17:21:15.106 OUTPUT:	Key remove successful: 8e9a25ab45a3cf9a9bac9e88e29f9ba2
2011-03-25 17:21:15.106 OUTPUT:	Purge done.

2011-03-25 17:21:15.106 00627 Wait(10)

2011-03-25 17:21:15.106 Requirement: ODSCC10

2011-03-25 17:21:25.107 00629 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:21:25.107 Requirement: ODSCC10

2011-03-25 17:21:25.107 00632 LoadConfig()
2011-03-25 17:21:25.107 Requirement: ODSCC10
2011-03-25 17:21:25.107 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T100_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:21:25.111 - runCommand: Process started, PID: 3284
2011-03-25 17:21:25.111 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T100_conf.xml': No such file or directory
2011-03-25 17:21:25.111 ERROR:	return code = 1

2011-03-25 17:21:25.112 00635 LoadConfig()
2011-03-25 17:21:25.112 Requirement: ODSCC10
2011-03-25 17:21:25.112 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:21:25.116 - runCommand: Process started, PID: 3285
2011-03-25 17:21:25.116 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:21:25.116 ERROR:	return code = 1

2011-03-25 17:21:25.116 00637 Comment: Update all the configs.

2011-03-25 17:21:25.116 Requirement: ODSCC10

2011-03-25 17:21:25.117 00639 ODSSetup()
2011-03-25 17:21:25.117 Requirement: ODSCC10
2011-03-25 17:21:25.117 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:21:35.854 - runCommand: Process started, PID: 3286
2011-03-25 17:21:35.854 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:21:35.854 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:21:35.854 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:21:35.854 OUTPUT:	Repository SoftHSM found
2011-03-25 17:21:35.854 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:21:35.854 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:21:35.854 OUTPUT:	Policy default2 found
2011-03-25 17:21:35.854 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:21:35.854 OUTPUT:	Policy default found
2011-03-25 17:21:35.854 OUTPUT:	Zone ods found
2011-03-25 17:21:35.854 OUTPUT:	Policy set to default.
2011-03-25 17:21:35.854 OUTPUT:	Added zone ods to database
2011-03-25 17:21:35.854 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:21:35.854 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:21:35.854 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:21:35.855 00641 Wait(10)

2011-03-25 17:21:35.855 Requirement: ODSCC10

2011-03-25 17:21:45.855 00643 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:21:45.855 Requirement: ODSCC10

2011-03-25 17:21:45.855 00645 Start()
2011-03-25 17:21:45.855 Requirement: ODSCC10
2011-03-25 17:21:45.855 RunCommand(ods-control start)
2011-03-25 17:21:45.857 - runCommand: Background process started, PID: 3299
2011-03-25 17:21:46.873 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:21:46.897 - runCommand: Process started, PID: 3315
2011-03-25 17:21:46.897 OUTPUT:	ods-enforcerd
2011-03-25 17:21:46.897 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:21:46.914 - runCommand: Process started, PID: 3327
2011-03-25 17:21:46.914 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:21:46.914 00647 Comment: Sign the ods zone with the new configs.

2011-03-25 17:21:46.914 Requirement: ODSCC10

2011-03-25 17:21:46.914 00651 Wait(15)

2011-03-25 17:21:46.914 Requirement: ODSCC10

2011-03-25 17:22:01.915 00653 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:22:01.915 Requirement: ODSCC10

2011-03-25 17:22:01.915 00655 Stop()
2011-03-25 17:22:01.915 Requirement: ODSCC10
2011-03-25 17:22:01.915 RunCommand(ods-control stop)
2011-03-25 17:22:02.924 - runCommand: Process started, PID: 3349
2011-03-25 17:22:02.924 OUTPUT:	Stopping enforcer...
2011-03-25 17:22:02.924 OUTPUT:	Stopping signer engine..
2011-03-25 17:22:02.924 OUTPUT:	Engine shut down.
2011-03-25 17:22:02.924 RunCommand(ps -e | grep enforcer)
2011-03-25 17:22:02.935 - runCommand: Process started, PID: 3355
2011-03-25 17:22:02.935 ERROR:	return code = 1
2011-03-25 17:22:02.935 RunCommand(ps -e | grep signer)
2011-03-25 17:22:02.946 - runCommand: Process started, PID: 3358
2011-03-25 17:22:02.946 ERROR:	return code = 1

2011-03-25 17:22:02.946 00657 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. 

2011-03-25 17:22:02.946 Requirement: ODSCC10

2011-03-25 17:22:02.947 00660 CheckLog()
2011-03-25 17:22:02.947 Requirement: ODSCC10
2011-03-25 17:22:05.772 FAILED:	(Check for Like) - Expected: No keys found Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC10T110: Use a Repository Capacity of 1 and expect failure

2011-03-25 17:22:05.772 00667 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:22:05.772 Requirement: ODSCC10

2011-03-25 17:22:05.772 00669 Stop()
2011-03-25 17:22:05.772 Requirement: ODSCC10
2011-03-25 17:22:05.772 RunCommand(ods-control stop)
2011-03-25 17:22:05.776 - runCommand: Process started, PID: 3361
2011-03-25 17:22:05.776 OUTPUT:	Stopping enforcer...
2011-03-25 17:22:05.776 OUTPUT:	Cannot find PID file
2011-03-25 17:22:05.776 OUTPUT:	Stopping signer engine..
2011-03-25 17:22:05.776 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:22:05.776 ERROR:	return code = 1
2011-03-25 17:22:05.776 RunCommand(ps -e | grep enforcer)
2011-03-25 17:22:05.785 - runCommand: Process started, PID: 3364
2011-03-25 17:22:05.785 ERROR:	return code = 1
2011-03-25 17:22:05.785 RunCommand(ps -e | grep signer)
2011-03-25 17:22:05.795 - runCommand: Process started, PID: 3367
2011-03-25 17:22:05.795 ERROR:	return code = 1

2011-03-25 17:22:05.795 00671 Wait(10)

2011-03-25 17:22:05.795 Requirement: ODSCC10

2011-03-25 17:22:15.796 00673 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:22:15.796 Requirement: ODSCC10

2011-03-25 17:22:15.796 00679 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:22:15.796 Requirement: ODSCC10

2011-03-25 17:22:15.796 00682 PurgeHSM()
2011-03-25 17:22:15.796 Requirement: ODSCC10
2011-03-25 17:22:15.796 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:22:16.158 - runCommand: Process started, PID: 3370
2011-03-25 17:22:16.158 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:22:16.158 OUTPUT:	2 keys found.
2011-03-25 17:22:16.158 OUTPUT:	
2011-03-25 17:22:16.158 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:22:16.158 OUTPUT:	Starting purge...
2011-03-25 17:22:16.158 OUTPUT:	Key remove successful: 542d31e59e8c19114884a8737d12de02
2011-03-25 17:22:16.158 OUTPUT:	Key remove successful: b71212ff8975bdc91df1a3b727565072
2011-03-25 17:22:16.158 OUTPUT:	Purge done.

2011-03-25 17:22:16.158 00684 Wait(10)

2011-03-25 17:22:16.158 Requirement: ODSCC10

2011-03-25 17:22:26.159 00687 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:22:26.159 Requirement: ODSCC10

2011-03-25 17:22:26.159 00690 LoadConfig()
2011-03-25 17:22:26.159 Requirement: ODSCC10
2011-03-25 17:22:26.159 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T110_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:22:26.163 - runCommand: Process started, PID: 3374
2011-03-25 17:22:26.163 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T110_conf.xml': No such file or directory
2011-03-25 17:22:26.163 ERROR:	return code = 1

2011-03-25 17:22:26.164 00693 LoadConfig()
2011-03-25 17:22:26.164 Requirement: ODSCC10
2011-03-25 17:22:26.164 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:22:26.168 - runCommand: Process started, PID: 3375
2011-03-25 17:22:26.168 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:22:26.168 ERROR:	return code = 1

2011-03-25 17:22:26.168 00695 Comment: Update all the configs.

2011-03-25 17:22:26.168 Requirement: ODSCC10

2011-03-25 17:22:26.169 00697 ODSSetup()
2011-03-25 17:22:26.169 Requirement: ODSCC10
2011-03-25 17:22:26.169 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:22:36.464 - runCommand: Process started, PID: 3376
2011-03-25 17:22:36.465 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:22:36.465 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:22:36.465 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:22:36.465 OUTPUT:	Repository SoftHSM found
2011-03-25 17:22:36.465 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:22:36.465 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:22:36.465 OUTPUT:	Policy default2 found
2011-03-25 17:22:36.465 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:22:36.465 OUTPUT:	Policy default found
2011-03-25 17:22:36.465 OUTPUT:	Zone ods found
2011-03-25 17:22:36.465 OUTPUT:	Policy set to default.
2011-03-25 17:22:36.465 OUTPUT:	Added zone ods to database
2011-03-25 17:22:36.465 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:22:36.465 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:22:36.465 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:22:36.465 00699 Wait(10)

2011-03-25 17:22:36.465 Requirement: ODSCC10

2011-03-25 17:22:46.466 00701 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:22:46.466 Requirement: ODSCC10

2011-03-25 17:22:46.466 00703 Start()
2011-03-25 17:22:46.466 Requirement: ODSCC10
2011-03-25 17:22:46.466 RunCommand(ods-control start)
2011-03-25 17:22:46.467 - runCommand: Background process started, PID: 3389
2011-03-25 17:22:47.485 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:22:47.497 - runCommand: Process started, PID: 3404
2011-03-25 17:22:47.497 OUTPUT:	ods-enforcerd
2011-03-25 17:22:47.497 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:22:47.514 - runCommand: Process started, PID: 3409
2011-03-25 17:22:47.514 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:22:47.514 00705 Comment: Sign the ods zone with the new configs.

2011-03-25 17:22:47.514 Requirement: ODSCC10

2011-03-25 17:22:47.515 00709 Wait(15)

2011-03-25 17:22:47.515 Requirement: ODSCC10

2011-03-25 17:23:02.515 00711 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:23:02.515 Requirement: ODSCC10

2011-03-25 17:23:02.516 00713 Stop()
2011-03-25 17:23:02.516 Requirement: ODSCC10
2011-03-25 17:23:02.516 RunCommand(ods-control stop)
2011-03-25 17:23:03.525 - runCommand: Process started, PID: 3439
2011-03-25 17:23:03.525 OUTPUT:	Stopping enforcer...
2011-03-25 17:23:03.525 OUTPUT:	Stopping signer engine..
2011-03-25 17:23:03.525 OUTPUT:	Engine shut down.
2011-03-25 17:23:03.525 RunCommand(ps -e | grep enforcer)
2011-03-25 17:23:03.540 - runCommand: Process started, PID: 3445
2011-03-25 17:23:03.540 ERROR:	return code = 1
2011-03-25 17:23:03.540 RunCommand(ps -e | grep signer)
2011-03-25 17:23:03.551 - runCommand: Process started, PID: 3448
2011-03-25 17:23:03.551 ERROR:	return code = 1

2011-03-25 17:23:03.552 00715 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. 

2011-03-25 17:23:03.552 Requirement: ODSCC10

2011-03-25 17:23:03.552 00718 CheckLog()
2011-03-25 17:23:03.552 Requirement: ODSCC10
2011-03-25 17:23:06.378 FAILED:	(Check for Like) - Expected: Not enough keys Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC10T120: Use a Repository Capacity of 4 and expect success

2011-03-25 17:23:06.378 00724 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:23:06.378 Requirement: ODSCC10

2011-03-25 17:23:06.378 00726 Stop()
2011-03-25 17:23:06.378 Requirement: ODSCC10
2011-03-25 17:23:06.378 RunCommand(ods-control stop)
2011-03-25 17:23:06.382 - runCommand: Process started, PID: 3451
2011-03-25 17:23:06.382 OUTPUT:	Stopping enforcer...
2011-03-25 17:23:06.382 OUTPUT:	Cannot find PID file
2011-03-25 17:23:06.382 OUTPUT:	Stopping signer engine..
2011-03-25 17:23:06.382 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:23:06.382 ERROR:	return code = 1
2011-03-25 17:23:06.382 RunCommand(ps -e | grep enforcer)
2011-03-25 17:23:06.391 - runCommand: Process started, PID: 3454
2011-03-25 17:23:06.391 ERROR:	return code = 1
2011-03-25 17:23:06.391 RunCommand(ps -e | grep signer)
2011-03-25 17:23:06.402 - runCommand: Process started, PID: 3457
2011-03-25 17:23:06.402 ERROR:	return code = 1

2011-03-25 17:23:06.402 00728 Wait(10)

2011-03-25 17:23:06.402 Requirement: ODSCC10

2011-03-25 17:23:16.403 00730 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:23:16.403 Requirement: ODSCC10

2011-03-25 17:23:16.403 00736 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:23:16.403 Requirement: ODSCC10

2011-03-25 17:23:16.403 00739 PurgeHSM()
2011-03-25 17:23:16.403 Requirement: ODSCC10
2011-03-25 17:23:16.403 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:23:16.768 - runCommand: Process started, PID: 3460
2011-03-25 17:23:16.768 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:23:16.768 OUTPUT:	2 keys found.
2011-03-25 17:23:16.768 OUTPUT:	
2011-03-25 17:23:16.768 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:23:16.768 OUTPUT:	Starting purge...
2011-03-25 17:23:16.768 OUTPUT:	Key remove successful: 09c4f18088e46d9bb2ce30e402cb7b27
2011-03-25 17:23:16.768 OUTPUT:	Key remove successful: 88d3157c84056df9ae9e377ac2a3c29f
2011-03-25 17:23:16.768 OUTPUT:	Purge done.

2011-03-25 17:23:16.769 00741 Wait(10)

2011-03-25 17:23:16.769 Requirement: ODSCC10

2011-03-25 17:23:26.769 00743 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:23:26.769 Requirement: ODSCC10

2011-03-25 17:23:26.770 00746 LoadConfig()
2011-03-25 17:23:26.770 Requirement: ODSCC10
2011-03-25 17:23:26.770 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T120_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:23:26.774 - runCommand: Process started, PID: 3464
2011-03-25 17:23:26.774 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T120_conf.xml': No such file or directory
2011-03-25 17:23:26.774 ERROR:	return code = 1

2011-03-25 17:23:26.774 00749 LoadConfig()
2011-03-25 17:23:26.774 Requirement: ODSCC10
2011-03-25 17:23:26.774 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:23:26.778 - runCommand: Process started, PID: 3465
2011-03-25 17:23:26.778 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:23:26.778 ERROR:	return code = 1

2011-03-25 17:23:26.779 00751 Comment: Update all the configs.

2011-03-25 17:23:26.779 Requirement: ODSCC10

2011-03-25 17:23:26.779 00753 ODSSetup()
2011-03-25 17:23:26.779 Requirement: ODSCC10
2011-03-25 17:23:26.779 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:23:37.242 - runCommand: Process started, PID: 3466
2011-03-25 17:23:37.242 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:23:37.242 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:23:37.242 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:23:37.242 OUTPUT:	Repository SoftHSM found
2011-03-25 17:23:37.242 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:23:37.242 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:23:37.242 OUTPUT:	Policy default2 found
2011-03-25 17:23:37.242 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:23:37.242 OUTPUT:	Policy default found
2011-03-25 17:23:37.242 OUTPUT:	Zone ods found
2011-03-25 17:23:37.242 OUTPUT:	Policy set to default.
2011-03-25 17:23:37.242 OUTPUT:	Added zone ods to database
2011-03-25 17:23:37.242 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:23:37.242 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:23:37.242 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:23:37.242 00755 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:23:37.242 Requirement: ODSCC10

2011-03-25 17:23:37.243 00757 Start()
2011-03-25 17:23:37.243 Requirement: ODSCC10
2011-03-25 17:23:37.243 RunCommand(ods-control start)
2011-03-25 17:23:37.244 - runCommand: Background process started, PID: 3479
2011-03-25 17:23:38.259 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:23:38.270 - runCommand: Process started, PID: 3494
2011-03-25 17:23:38.270 OUTPUT:	ods-enforcerd
2011-03-25 17:23:38.270 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:23:38.286 - runCommand: Process started, PID: 3499
2011-03-25 17:23:38.286 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:23:38.287 00759 Wait(10)

2011-03-25 17:23:38.287 Requirement: ODSCC10

2011-03-25 17:23:48.287 00761 Comment: Sign the ods zone with the new configs.

2011-03-25 17:23:48.287 Requirement: ODSCC10

2011-03-25 17:23:48.288 00765 Wait(15)

2011-03-25 17:23:48.288 Requirement: ODSCC10

2011-03-25 17:24:03.288 00767 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:24:03.288 Requirement: ODSCC10

2011-03-25 17:24:03.288 00769 Stop()
2011-03-25 17:24:03.288 Requirement: ODSCC10
2011-03-25 17:24:03.288 RunCommand(ods-control stop)
2011-03-25 17:24:04.298 - runCommand: Process started, PID: 3554
2011-03-25 17:24:04.298 OUTPUT:	Stopping enforcer...
2011-03-25 17:24:04.298 OUTPUT:	Stopping signer engine..
2011-03-25 17:24:04.298 OUTPUT:	Engine shut down.
2011-03-25 17:24:04.298 RunCommand(ps -e | grep enforcer)
2011-03-25 17:24:04.313 - runCommand: Process started, PID: 3560
2011-03-25 17:24:04.313 ERROR:	return code = 1
2011-03-25 17:24:04.313 RunCommand(ps -e | grep signer)
2011-03-25 17:24:04.329 - runCommand: Process started, PID: 3563
2011-03-25 17:24:04.329 ERROR:	return code = 1

2011-03-25 17:24:04.329 00771 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-25 17:24:04.329 Requirement: ODSCC10

2011-03-25 17:24:04.329 00774 CheckLog()
2011-03-25 17:24:04.329 Requirement: ODSCC10
2011-03-25 17:24:07.158 PASSED:	(Check for Like) - Expected: all done! Found: Mar 25 17:24:03 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

-------------------------------------------------------------------------------
Testcase - ODSCC10T130: Use a Repository Capacity of 100000 and expect success

2011-03-25 17:24:07.159 00781 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:24:07.159 Requirement: ODSCC10

2011-03-25 17:24:07.159 00783 Stop()
2011-03-25 17:24:07.159 Requirement: ODSCC10
2011-03-25 17:24:07.159 RunCommand(ods-control stop)
2011-03-25 17:24:07.163 - runCommand: Process started, PID: 3566
2011-03-25 17:24:07.163 OUTPUT:	Stopping enforcer...
2011-03-25 17:24:07.163 OUTPUT:	Cannot find PID file
2011-03-25 17:24:07.163 OUTPUT:	Stopping signer engine..
2011-03-25 17:24:07.163 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:24:07.163 ERROR:	return code = 1
2011-03-25 17:24:07.163 RunCommand(ps -e | grep enforcer)
2011-03-25 17:24:07.172 - runCommand: Process started, PID: 3569
2011-03-25 17:24:07.172 ERROR:	return code = 1
2011-03-25 17:24:07.172 RunCommand(ps -e | grep signer)
2011-03-25 17:24:07.183 - runCommand: Process started, PID: 3572
2011-03-25 17:24:07.183 ERROR:	return code = 1

2011-03-25 17:24:07.183 00785 Wait(10)

2011-03-25 17:24:07.183 Requirement: ODSCC10

2011-03-25 17:24:17.184 00787 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:24:17.184 Requirement: ODSCC10

2011-03-25 17:24:17.184 00793 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:24:17.184 Requirement: ODSCC10

2011-03-25 17:24:17.184 00796 PurgeHSM()
2011-03-25 17:24:17.184 Requirement: ODSCC10
2011-03-25 17:24:17.184 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:24:17.562 - runCommand: Process started, PID: 3575
2011-03-25 17:24:17.562 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:24:17.562 OUTPUT:	2 keys found.
2011-03-25 17:24:17.562 OUTPUT:	
2011-03-25 17:24:17.562 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:24:17.562 OUTPUT:	Starting purge...
2011-03-25 17:24:17.562 OUTPUT:	Key remove successful: 15587c841d5c4e7a9a28e51060b38981
2011-03-25 17:24:17.562 OUTPUT:	Key remove successful: 11d9110995dde4157b1499dcf3dcf2fe
2011-03-25 17:24:17.562 OUTPUT:	Purge done.

2011-03-25 17:24:17.563 00798 Wait(10)

2011-03-25 17:24:17.563 Requirement: ODSCC10

2011-03-25 17:24:27.563 00801 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:24:27.563 Requirement: ODSCC10

2011-03-25 17:24:27.564 00804 LoadConfig()
2011-03-25 17:24:27.564 Requirement: ODSCC10
2011-03-25 17:24:27.564 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T130_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:24:27.568 - runCommand: Process started, PID: 3579
2011-03-25 17:24:27.568 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T130_conf.xml': No such file or directory
2011-03-25 17:24:27.568 ERROR:	return code = 1

2011-03-25 17:24:27.568 00807 LoadConfig()
2011-03-25 17:24:27.568 Requirement: ODSCC10
2011-03-25 17:24:27.568 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:24:27.574 - runCommand: Process started, PID: 3580
2011-03-25 17:24:27.574 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:24:27.574 ERROR:	return code = 1

2011-03-25 17:24:27.575 00809 Comment: Update all the configs.

2011-03-25 17:24:27.575 Requirement: ODSCC10

2011-03-25 17:24:27.575 00811 ODSSetup()
2011-03-25 17:24:27.575 Requirement: ODSCC10
2011-03-25 17:24:27.575 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:24:39.568 - runCommand: Process started, PID: 3581
2011-03-25 17:24:39.568 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:24:39.568 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:24:39.568 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:24:39.568 OUTPUT:	Repository SoftHSM found
2011-03-25 17:24:39.568 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:24:39.568 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:24:39.568 OUTPUT:	Policy default2 found
2011-03-25 17:24:39.568 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:24:39.568 OUTPUT:	Policy default found
2011-03-25 17:24:39.568 OUTPUT:	Zone ods found
2011-03-25 17:24:39.568 OUTPUT:	Policy set to default.
2011-03-25 17:24:39.568 OUTPUT:	Added zone ods to database
2011-03-25 17:24:39.568 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:24:39.569 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:24:39.569 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:24:39.569 00813 Wait(10)

2011-03-25 17:24:39.569 Requirement: ODSCC10

2011-03-25 17:24:49.569 00815 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:24:49.569 Requirement: ODSCC10

2011-03-25 17:24:49.570 00817 Start()
2011-03-25 17:24:49.570 Requirement: ODSCC10
2011-03-25 17:24:49.570 RunCommand(ods-control start)
2011-03-25 17:24:49.571 - runCommand: Background process started, PID: 3605
2011-03-25 17:24:50.588 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:24:50.607 - runCommand: Process started, PID: 3620
2011-03-25 17:24:50.608 OUTPUT:	ods-enforcerd
2011-03-25 17:24:50.608 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:24:50.627 - runCommand: Process started, PID: 3625
2011-03-25 17:24:50.627 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:24:50.628 00819 Comment: Sign the ods zone with the new configs.

2011-03-25 17:24:50.628 Requirement: ODSCC10

2011-03-25 17:24:50.628 00823 Wait(15)

2011-03-25 17:24:50.628 Requirement: ODSCC10

2011-03-25 17:25:05.628 00825 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:25:05.628 Requirement: ODSCC10

2011-03-25 17:25:05.629 00827 Stop()
2011-03-25 17:25:05.629 Requirement: ODSCC10
2011-03-25 17:25:05.629 RunCommand(ods-control stop)
2011-03-25 17:25:06.638 - runCommand: Process started, PID: 3666
2011-03-25 17:25:06.638 OUTPUT:	Stopping enforcer...
2011-03-25 17:25:06.638 OUTPUT:	Stopping signer engine..
2011-03-25 17:25:06.638 OUTPUT:	Engine shut down.
2011-03-25 17:25:06.638 RunCommand(ps -e | grep enforcer)
2011-03-25 17:25:06.654 - runCommand: Process started, PID: 3672
2011-03-25 17:25:06.654 ERROR:	return code = 1
2011-03-25 17:25:06.654 RunCommand(ps -e | grep signer)
2011-03-25 17:25:06.670 - runCommand: Process started, PID: 3675
2011-03-25 17:25:06.670 ERROR:	return code = 1

2011-03-25 17:25:06.670 00829 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-25 17:25:06.670 Requirement: ODSCC10

2011-03-25 17:25:06.671 00832 CheckLog()
2011-03-25 17:25:06.671 Requirement: ODSCC10
2011-03-25 17:25:09.503 PASSED:	(Check for Like) - Expected: all done! Found: Mar 25 17:25:05 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

-------------------------------------------------------------------------------
Testcase - ODSCC10T140: RequireBackup turned off and check if backup is not required to use a key

2011-03-25 17:25:09.504 00839 Comment: RequireBackup is an optional element that specifies that keys from this repository may not be used until they are backed up. If backup has been done, then use ods-ksmutil to notify OpenDNSSEC about this. The backup notification is needed for OpenDNSSEC to be able to complete a key rollover.

2011-03-25 17:25:09.504 Requirement: ODSCC10

2011-03-25 17:25:09.504 00840 Comment: This has been already tested in DSCC10T10

2011-03-25 17:25:09.504 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T150: RequireBackup turned on and check if backup is required to use a key

2011-03-25 17:25:09.505 00850 Comment: RequireBackup is an optional element that specifies that keys from this repository may not be used until they are backed up. If backup has been done, then use ods-ksmutil to notify OpenDNSSEC about this. The backup notification is needed for OpenDNSSEC to be able to complete a key rollover.

2011-03-25 17:25:09.505 Requirement: ODSCC10

2011-03-25 17:25:09.505 00851 Comment: 

2011-03-25 17:25:09.505 Requirement: ODSCC10

2011-03-25 17:25:09.505 00853 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:25:09.505 Requirement: ODSCC10

2011-03-25 17:25:09.505 00855 Stop()
2011-03-25 17:25:09.505 Requirement: ODSCC10
2011-03-25 17:25:09.506 RunCommand(ods-control stop)
2011-03-25 17:25:09.509 - runCommand: Process started, PID: 3678
2011-03-25 17:25:09.509 OUTPUT:	Stopping enforcer...
2011-03-25 17:25:09.509 OUTPUT:	Cannot find PID file
2011-03-25 17:25:09.509 OUTPUT:	Stopping signer engine..
2011-03-25 17:25:09.509 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:25:09.509 ERROR:	return code = 1
2011-03-25 17:25:09.509 RunCommand(ps -e | grep enforcer)
2011-03-25 17:25:09.519 - runCommand: Process started, PID: 3681
2011-03-25 17:25:09.519 ERROR:	return code = 1
2011-03-25 17:25:09.519 RunCommand(ps -e | grep signer)
2011-03-25 17:25:09.528 - runCommand: Process started, PID: 3684
2011-03-25 17:25:09.528 ERROR:	return code = 1

2011-03-25 17:25:09.528 00857 Wait(10)

2011-03-25 17:25:09.528 Requirement: ODSCC10

2011-03-25 17:25:19.529 00859 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:25:19.529 Requirement: ODSCC10

2011-03-25 17:25:19.529 00865 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:25:19.529 Requirement: ODSCC10

2011-03-25 17:25:19.530 00868 PurgeHSM()
2011-03-25 17:25:19.530 Requirement: ODSCC10
2011-03-25 17:25:19.530 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:25:19.872 - runCommand: Process started, PID: 3687
2011-03-25 17:25:19.872 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:25:19.872 OUTPUT:	2 keys found.
2011-03-25 17:25:19.872 OUTPUT:	
2011-03-25 17:25:19.872 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:25:19.872 OUTPUT:	Starting purge...
2011-03-25 17:25:19.872 OUTPUT:	Key remove successful: e7e75f4c7f0eb08630d2e6af55a95063
2011-03-25 17:25:19.872 OUTPUT:	Key remove successful: e397a04d10720c88bbe29fa1baaccf0f
2011-03-25 17:25:19.872 OUTPUT:	Purge done.

2011-03-25 17:25:19.872 00870 Wait(10)

2011-03-25 17:25:19.872 Requirement: ODSCC10

2011-03-25 17:25:29.873 00872 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:25:29.873 Requirement: ODSCC10

2011-03-25 17:25:29.873 00875 LoadConfig()
2011-03-25 17:25:29.873 Requirement: ODSCC10
2011-03-25 17:25:29.873 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T150_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:25:29.878 - runCommand: Process started, PID: 3691
2011-03-25 17:25:29.878 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T150_conf.xml': No such file or directory
2011-03-25 17:25:29.878 ERROR:	return code = 1

2011-03-25 17:25:29.878 00878 LoadConfig()
2011-03-25 17:25:29.878 Requirement: ODSCC10
2011-03-25 17:25:29.878 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:25:29.882 - runCommand: Process started, PID: 3692
2011-03-25 17:25:29.882 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:25:29.882 ERROR:	return code = 1

2011-03-25 17:25:29.882 00880 Comment: Update all the configs.

2011-03-25 17:25:29.882 Requirement: ODSCC10

2011-03-25 17:25:29.883 00882 ODSSetup()
2011-03-25 17:25:29.883 Requirement: ODSCC10
2011-03-25 17:25:29.883 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:25:40.370 - runCommand: Process started, PID: 3693
2011-03-25 17:25:40.370 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:25:40.370 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:25:40.370 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:25:40.370 OUTPUT:	Repository SoftHSM found
2011-03-25 17:25:40.370 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:25:40.370 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:25:40.371 OUTPUT:	Policy default2 found
2011-03-25 17:25:40.371 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:25:40.371 OUTPUT:	Policy default found
2011-03-25 17:25:40.371 OUTPUT:	Zone ods found
2011-03-25 17:25:40.371 OUTPUT:	Policy set to default.
2011-03-25 17:25:40.371 OUTPUT:	Added zone ods to database
2011-03-25 17:25:40.371 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:25:40.371 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:25:40.371 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:25:40.371 00884 Wait(10)

2011-03-25 17:25:40.371 Requirement: ODSCC10

2011-03-25 17:25:50.372 00886 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:25:50.372 Requirement: ODSCC10

2011-03-25 17:25:50.372 00888 Start()
2011-03-25 17:25:50.372 Requirement: ODSCC10
2011-03-25 17:25:50.372 RunCommand(ods-control start)
2011-03-25 17:25:50.373 - runCommand: Background process started, PID: 3706
2011-03-25 17:25:51.397 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:25:51.412 - runCommand: Process started, PID: 3722
2011-03-25 17:25:51.412 OUTPUT:	ods-enforcerd
2011-03-25 17:25:51.412 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:25:51.440 - runCommand: Process started, PID: 3734
2011-03-25 17:25:51.440 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:25:51.440 00890 Comment: Sign the ods zone with the new configs.

2011-03-25 17:25:51.440 Requirement: ODSCC10

2011-03-25 17:25:51.440 00894 Wait(15)

2011-03-25 17:25:51.440 Requirement: ODSCC10

2011-03-25 17:26:06.441 00896 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:26:06.441 Requirement: ODSCC10

2011-03-25 17:26:06.441 00898 Stop()
2011-03-25 17:26:06.441 Requirement: ODSCC10
2011-03-25 17:26:06.441 RunCommand(ods-control stop)
2011-03-25 17:26:07.450 - runCommand: Process started, PID: 3756
2011-03-25 17:26:07.450 OUTPUT:	Stopping enforcer...
2011-03-25 17:26:07.450 OUTPUT:	Stopping signer engine..
2011-03-25 17:26:07.450 OUTPUT:	Engine shut down.
2011-03-25 17:26:07.450 RunCommand(ps -e | grep enforcer)
2011-03-25 17:26:07.465 - runCommand: Process started, PID: 3762
2011-03-25 17:26:07.465 ERROR:	return code = 1
2011-03-25 17:26:07.466 RunCommand(ps -e | grep signer)
2011-03-25 17:26:07.475 - runCommand: Process started, PID: 3765
2011-03-25 17:26:07.475 ERROR:	return code = 1

2011-03-25 17:26:07.476 00900 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. 

2011-03-25 17:26:07.476 Requirement: ODSCC10

2011-03-25 17:26:07.476 00903 CheckLog()
2011-03-25 17:26:07.476 Requirement: ODSCC10
2011-03-25 17:26:10.305 FAILED:	(Check for Like) - Expected: aborting operation Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC10T160: RequireBackup turned on, backup keys, and sign zone

2011-03-25 17:26:10.305 00910 Comment: RequireBackup is an optional element that specifies that keys from this repository may not be used until they are backed up. If backup has been done, then use ods-ksmutil to notify OpenDNSSEC about this. The backup notification is needed for OpenDNSSEC to be able to complete a key rollover.

2011-03-25 17:26:10.305 Requirement: ODSCC10

2011-03-25 17:26:10.306 00911 Comment: 

2011-03-25 17:26:10.306 Requirement: ODSCC10

2011-03-25 17:26:10.306 00913 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:26:10.306 Requirement: ODSCC10

2011-03-25 17:26:10.306 00915 Stop()
2011-03-25 17:26:10.306 Requirement: ODSCC10
2011-03-25 17:26:10.306 RunCommand(ods-control stop)
2011-03-25 17:26:10.309 - runCommand: Process started, PID: 3768
2011-03-25 17:26:10.309 OUTPUT:	Stopping enforcer...
2011-03-25 17:26:10.309 OUTPUT:	Cannot find PID file
2011-03-25 17:26:10.309 OUTPUT:	Stopping signer engine..
2011-03-25 17:26:10.309 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:26:10.310 ERROR:	return code = 1
2011-03-25 17:26:10.310 RunCommand(ps -e | grep enforcer)
2011-03-25 17:26:10.319 - runCommand: Process started, PID: 3771
2011-03-25 17:26:10.319 ERROR:	return code = 1
2011-03-25 17:26:10.319 RunCommand(ps -e | grep signer)
2011-03-25 17:26:10.328 - runCommand: Process started, PID: 3774
2011-03-25 17:26:10.328 ERROR:	return code = 1

2011-03-25 17:26:10.328 00917 Wait(10)

2011-03-25 17:26:10.328 Requirement: ODSCC10

2011-03-25 17:26:20.329 00919 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:26:20.329 Requirement: ODSCC10

2011-03-25 17:26:20.329 00925 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:26:20.329 Requirement: ODSCC10

2011-03-25 17:26:20.330 00928 PurgeHSM()
2011-03-25 17:26:20.330 Requirement: ODSCC10
2011-03-25 17:26:20.330 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:26:20.699 - runCommand: Process started, PID: 3777
2011-03-25 17:26:20.699 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:26:20.699 OUTPUT:	2 keys found.
2011-03-25 17:26:20.699 OUTPUT:	
2011-03-25 17:26:20.699 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:26:20.699 OUTPUT:	Starting purge...
2011-03-25 17:26:20.699 OUTPUT:	Key remove successful: 3219666923b882b906c98505b68c1d80
2011-03-25 17:26:20.699 OUTPUT:	Key remove successful: dc4b5751df7960237c20800eeb05a2c5
2011-03-25 17:26:20.699 OUTPUT:	Purge done.

2011-03-25 17:26:20.700 00930 Wait(10)

2011-03-25 17:26:20.700 Requirement: ODSCC10

2011-03-25 17:26:30.700 00933 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:26:30.700 Requirement: ODSCC10

2011-03-25 17:26:30.701 00936 LoadConfig()
2011-03-25 17:26:30.701 Requirement: ODSCC10
2011-03-25 17:26:30.701 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T160_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:26:30.705 - runCommand: Process started, PID: 3781
2011-03-25 17:26:30.705 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T160_conf.xml': No such file or directory
2011-03-25 17:26:30.705 ERROR:	return code = 1

2011-03-25 17:26:30.705 00939 LoadConfig()
2011-03-25 17:26:30.705 Requirement: ODSCC10
2011-03-25 17:26:30.705 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:26:30.709 - runCommand: Process started, PID: 3782
2011-03-25 17:26:30.709 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:26:30.709 ERROR:	return code = 1

2011-03-25 17:26:30.710 00941 Comment: Update all the configs.

2011-03-25 17:26:30.710 Requirement: ODSCC10

2011-03-25 17:26:30.710 00943 ODSSetup()
2011-03-25 17:26:30.710 Requirement: ODSCC10
2011-03-25 17:26:30.710 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:26:41.456 - runCommand: Process started, PID: 3783
2011-03-25 17:26:41.456 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:26:41.456 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:26:41.456 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:26:41.456 OUTPUT:	Repository SoftHSM found
2011-03-25 17:26:41.456 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:26:41.456 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:26:41.456 OUTPUT:	Policy default2 found
2011-03-25 17:26:41.456 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:26:41.456 OUTPUT:	Policy default found
2011-03-25 17:26:41.456 OUTPUT:	Zone ods found
2011-03-25 17:26:41.456 OUTPUT:	Policy set to default.
2011-03-25 17:26:41.456 OUTPUT:	Added zone ods to database
2011-03-25 17:26:41.456 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:26:41.456 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:26:41.456 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:26:41.456 00945 Wait(10)

2011-03-25 17:26:41.456 Requirement: ODSCC10

2011-03-25 17:26:51.457 00947 Comment: Prepare the backup by telling the Enforcer that you want to do backup of the keys.

2011-03-25 17:26:51.457 Requirement: ODSCC10

2011-03-25 17:26:51.457 00951 Wait(5)

2011-03-25 17:26:51.457 Requirement: ODSCC10

2011-03-25 17:26:56.458 00953 Comment: Backup keys is not a part of ODS (part of the HSM), and can therefor be skipped. Let the enforcer know that the backup step has been done.

2011-03-25 17:26:56.458 Requirement: ODSCC10

2011-03-25 17:26:56.458 00957 Wait(5)

2011-03-25 17:26:56.458 Requirement: ODSCC10

2011-03-25 17:27:01.459 00959 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:27:01.459 Requirement: ODSCC10

2011-03-25 17:27:01.459 00961 Start()
2011-03-25 17:27:01.459 Requirement: ODSCC10
2011-03-25 17:27:01.459 RunCommand(ods-control start)
2011-03-25 17:27:01.460 - runCommand: Background process started, PID: 3796
2011-03-25 17:27:02.485 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:27:02.501 - runCommand: Process started, PID: 3812
2011-03-25 17:27:02.501 OUTPUT:	ods-enforcerd
2011-03-25 17:27:02.501 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:27:02.515 - runCommand: Process started, PID: 3824
2011-03-25 17:27:02.515 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:27:02.516 00963 Wait(10)

2011-03-25 17:27:02.516 Requirement: ODSCC10

2011-03-25 17:27:12.516 00965 Comment: Sign the ods zone with the new configs.

2011-03-25 17:27:12.516 Requirement: ODSCC10

2011-03-25 17:27:12.517 00969 Wait(15)

2011-03-25 17:27:12.517 Requirement: ODSCC10

2011-03-25 17:27:27.517 00971 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:27:27.517 Requirement: ODSCC10

2011-03-25 17:27:27.518 00973 Stop()
2011-03-25 17:27:27.518 Requirement: ODSCC10
2011-03-25 17:27:27.518 RunCommand(ods-control stop)
2011-03-25 17:27:28.526 - runCommand: Process started, PID: 3846
2011-03-25 17:27:28.526 OUTPUT:	Stopping enforcer...
2011-03-25 17:27:28.526 OUTPUT:	Stopping signer engine..
2011-03-25 17:27:28.526 OUTPUT:	Engine shut down.
2011-03-25 17:27:28.526 RunCommand(ps -e | grep enforcer)
2011-03-25 17:27:28.538 - runCommand: Process started, PID: 3852
2011-03-25 17:27:28.538 ERROR:	return code = 1
2011-03-25 17:27:28.538 RunCommand(ps -e | grep signer)
2011-03-25 17:27:28.548 - runCommand: Process started, PID: 3855
2011-03-25 17:27:28.548 ERROR:	return code = 1

2011-03-25 17:27:28.548 00975 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-25 17:27:28.548 Requirement: ODSCC10

2011-03-25 17:27:28.549 00978 CheckLog()
2011-03-25 17:27:28.549 Requirement: ODSCC10
2011-03-25 17:27:31.373 PASSED:	(Check for Like) - Expected: all done! Found: Mar 25 17:27:27 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0
Testcondition - ODSCC20: The configuration of common settings located in conf.xml should operate according to requirements and intentions
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSCC20T10: Set logging to a different channel and check if only the new channel receives ODS logging

2011-03-25 17:27:31.374 00986 Comment: Channel "local5" is used in the xml template instead of "local0".

2011-03-25 17:27:31.374 Requirement: ODSCC20

2011-03-25 17:27:31.374 00988 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:27:31.374 Requirement: ODSCC20

2011-03-25 17:27:31.374 00990 Stop()
2011-03-25 17:27:31.374 Requirement: ODSCC20
2011-03-25 17:27:31.374 RunCommand(ods-control stop)
2011-03-25 17:27:31.377 - runCommand: Process started, PID: 3858
2011-03-25 17:27:31.378 OUTPUT:	Stopping enforcer...
2011-03-25 17:27:31.378 OUTPUT:	Cannot find PID file
2011-03-25 17:27:31.378 OUTPUT:	Stopping signer engine..
2011-03-25 17:27:31.378 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:27:31.378 ERROR:	return code = 1
2011-03-25 17:27:31.378 RunCommand(ps -e | grep enforcer)
2011-03-25 17:27:31.387 - runCommand: Process started, PID: 3861
2011-03-25 17:27:31.387 ERROR:	return code = 1
2011-03-25 17:27:31.387 RunCommand(ps -e | grep signer)
2011-03-25 17:27:31.396 - runCommand: Process started, PID: 3864
2011-03-25 17:27:31.396 ERROR:	return code = 1

2011-03-25 17:27:31.396 00992 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:27:31.396 Requirement: ODSCC20

2011-03-25 17:27:31.396 00998 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:27:31.397 Requirement: ODSCC20

2011-03-25 17:27:31.397 01001 PurgeHSM()
2011-03-25 17:27:31.397 Requirement: ODSCC20
2011-03-25 17:27:31.397 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:27:31.771 - runCommand: Process started, PID: 3867
2011-03-25 17:27:31.771 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:27:31.771 OUTPUT:	2 keys found.
2011-03-25 17:27:31.771 OUTPUT:	
2011-03-25 17:27:31.771 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:27:31.771 OUTPUT:	Starting purge...
2011-03-25 17:27:31.771 OUTPUT:	Key remove successful: 2acdfcdbf665101a7b1860f4d5dde42b
2011-03-25 17:27:31.771 OUTPUT:	Key remove successful: 339fc64b22b5e0f3201519f31b064090
2011-03-25 17:27:31.771 OUTPUT:	Purge done.

2011-03-25 17:27:31.772 01003 Wait(10)

2011-03-25 17:27:31.772 Requirement: ODSCC20

2011-03-25 17:27:41.772 01005 Wait(10)

2011-03-25 17:27:41.772 Requirement: ODSCC20

2011-03-25 17:27:51.773 01007 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:27:51.773 Requirement: ODSCC20

2011-03-25 17:27:51.773 01010 LoadConfig()
2011-03-25 17:27:51.773 Requirement: ODSCC20
2011-03-25 17:27:51.773 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:27:51.777 - runCommand: Process started, PID: 3876
2011-03-25 17:27:51.777 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T10_conf.xml': No such file or directory
2011-03-25 17:27:51.777 ERROR:	return code = 1

2011-03-25 17:27:51.778 01013 LoadConfig()
2011-03-25 17:27:51.778 Requirement: ODSCC20
2011-03-25 17:27:51.778 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:27:51.782 - runCommand: Process started, PID: 3877
2011-03-25 17:27:51.782 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:27:51.782 ERROR:	return code = 1

2011-03-25 17:27:51.782 01015 Comment: Syslog needs to be changed for this testcase. Ods.log is configured for local5 instead of local0

2011-03-25 17:27:51.782 Requirement: ODSCC20

2011-03-25 17:27:51.783 01017 Comment: Update all the configs.

2011-03-25 17:27:51.783 Requirement: ODSCC20

2011-03-25 17:27:51.783 01019 ODSSetup()
2011-03-25 17:27:51.783 Requirement: ODSCC20
2011-03-25 17:27:51.783 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:28:02.473 - runCommand: Process started, PID: 3878
2011-03-25 17:28:02.473 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:28:02.473 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:28:02.473 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:28:02.473 OUTPUT:	Repository SoftHSM found
2011-03-25 17:28:02.473 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:28:02.473 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:28:02.473 OUTPUT:	Policy default2 found
2011-03-25 17:28:02.473 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:28:02.473 OUTPUT:	Policy default found
2011-03-25 17:28:02.473 OUTPUT:	Zone ods found
2011-03-25 17:28:02.473 OUTPUT:	Policy set to default.
2011-03-25 17:28:02.473 OUTPUT:	Added zone ods to database
2011-03-25 17:28:02.473 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:28:02.473 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:28:02.473 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:28:02.473 01021 Wait(10)

2011-03-25 17:28:02.473 Requirement: ODSCC20

2011-03-25 17:28:12.474 01023 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:28:12.474 Requirement: ODSCC20

2011-03-25 17:28:12.474 01025 Start()
2011-03-25 17:28:12.474 Requirement: ODSCC20
2011-03-25 17:28:12.474 RunCommand(ods-control start)
2011-03-25 17:28:12.476 - runCommand: Background process started, PID: 3891
2011-03-25 17:28:13.501 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:28:13.513 - runCommand: Process started, PID: 3907
2011-03-25 17:28:13.513 OUTPUT:	ods-enforcerd
2011-03-25 17:28:13.513 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:28:13.529 - runCommand: Process started, PID: 3919
2011-03-25 17:28:13.529 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:28:13.529 01027 Comment: Sign the ods zone with the new configs.

2011-03-25 17:28:13.529 Requirement: ODSCC20

2011-03-25 17:28:13.529 01031 Wait(15)

2011-03-25 17:28:13.529 Requirement: ODSCC20

2011-03-25 17:28:28.530 01033 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:28:28.530 Requirement: ODSCC20

2011-03-25 17:28:28.530 01035 Stop()
2011-03-25 17:28:28.530 Requirement: ODSCC20
2011-03-25 17:28:28.530 RunCommand(ods-control stop)
2011-03-25 17:28:29.539 - runCommand: Process started, PID: 3941
2011-03-25 17:28:29.539 OUTPUT:	Stopping enforcer...
2011-03-25 17:28:29.539 OUTPUT:	Stopping signer engine..
2011-03-25 17:28:29.539 OUTPUT:	Engine shut down.
2011-03-25 17:28:29.539 RunCommand(ps -e | grep enforcer)
2011-03-25 17:28:29.555 - runCommand: Process started, PID: 3947
2011-03-25 17:28:29.555 ERROR:	return code = 1
2011-03-25 17:28:29.555 RunCommand(ps -e | grep signer)
2011-03-25 17:28:29.565 - runCommand: Process started, PID: 3950
2011-03-25 17:28:29.565 ERROR:	return code = 1

2011-03-25 17:28:29.565 01037 Comment: Check if the logging is succesfull. If a notify (new zonefile update) is available in, the signing & logging is succesful.

2011-03-25 17:28:29.565 Requirement: ODSCC20

2011-03-25 17:28:29.565 01040 CheckLog()
2011-03-25 17:28:29.566 Requirement: ODSCC20
2011-03-25 17:28:32.413 PASSED:	(Check for Like) - Expected: all done! Found: Mar 25 17:28:28 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

-------------------------------------------------------------------------------
Testcase - ODSCC20T20: Set logging to a different channel and check if only the new channel receives ODS logging

2011-03-25 17:28:32.413 01045 Comment: Channel "local10" is used in the xml template instead of "local0". Local10 is not allowed according tot specs. Only a value between local0 & local7 is allowed.

2011-03-25 17:28:32.413 Requirement: ODSCC20

2011-03-25 17:28:32.413 01047 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:28:32.413 Requirement: ODSCC20

2011-03-25 17:28:32.414 01049 Stop()
2011-03-25 17:28:32.414 Requirement: ODSCC20
2011-03-25 17:28:32.414 RunCommand(ods-control stop)
2011-03-25 17:28:32.417 - runCommand: Process started, PID: 3953
2011-03-25 17:28:32.417 OUTPUT:	Stopping enforcer...
2011-03-25 17:28:32.417 OUTPUT:	Cannot find PID file
2011-03-25 17:28:32.417 OUTPUT:	Stopping signer engine..
2011-03-25 17:28:32.417 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:28:32.417 ERROR:	return code = 1
2011-03-25 17:28:32.417 RunCommand(ps -e | grep enforcer)
2011-03-25 17:28:32.427 - runCommand: Process started, PID: 3956
2011-03-25 17:28:32.427 ERROR:	return code = 1
2011-03-25 17:28:32.427 RunCommand(ps -e | grep signer)
2011-03-25 17:28:32.436 - runCommand: Process started, PID: 3959
2011-03-25 17:28:32.436 ERROR:	return code = 1

2011-03-25 17:28:32.436 01051 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:28:32.436 Requirement: ODSCC20

2011-03-25 17:28:32.436 01057 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:28:32.436 Requirement: ODSCC20

2011-03-25 17:28:32.437 01060 PurgeHSM()
2011-03-25 17:28:32.437 Requirement: ODSCC20
2011-03-25 17:28:32.437 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:28:32.756 - runCommand: Process started, PID: 3962
2011-03-25 17:28:32.756 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:28:32.757 OUTPUT:	2 keys found.
2011-03-25 17:28:32.757 OUTPUT:	
2011-03-25 17:28:32.757 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:28:32.757 OUTPUT:	Starting purge...
2011-03-25 17:28:32.757 OUTPUT:	Key remove successful: ec5dcb7be2003897baa8c0a957f3c6c9
2011-03-25 17:28:32.757 OUTPUT:	Key remove successful: 6bf8bfecca84b69bfc6262a58592a236
2011-03-25 17:28:32.757 OUTPUT:	Purge done.

2011-03-25 17:28:32.757 01062 Wait(10)

2011-03-25 17:28:32.757 Requirement: ODSCC20

2011-03-25 17:28:42.758 01064 Wait(10)

2011-03-25 17:28:42.758 Requirement: ODSCC20

2011-03-25 17:28:52.758 01066 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:28:52.758 Requirement: ODSCC20

2011-03-25 17:28:52.758 01069 LoadConfig()
2011-03-25 17:28:52.758 Requirement: ODSCC20
2011-03-25 17:28:52.758 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:28:52.763 - runCommand: Process started, PID: 3966
2011-03-25 17:28:52.763 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T10_conf.xml': No such file or directory
2011-03-25 17:28:52.763 ERROR:	return code = 1

2011-03-25 17:28:52.763 01072 LoadConfig()
2011-03-25 17:28:52.763 Requirement: ODSCC20
2011-03-25 17:28:52.763 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:28:52.767 - runCommand: Process started, PID: 3967
2011-03-25 17:28:52.767 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:28:52.767 ERROR:	return code = 1

2011-03-25 17:28:52.768 01074 Comment: Syslog needs to be changed for this testcase. Ods.log is configured for local10 instead of local0

2011-03-25 17:28:52.768 Requirement: ODSCC20

2011-03-25 17:28:52.768 01076 Comment: Update all the configs.

2011-03-25 17:28:52.768 Requirement: ODSCC20

2011-03-25 17:28:52.768 01078 ODSSetup()
2011-03-25 17:28:52.768 Requirement: ODSCC20
2011-03-25 17:28:52.768 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:29:03.754 - runCommand: Process started, PID: 3968
2011-03-25 17:29:03.755 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:29:03.755 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:29:03.755 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:29:03.755 OUTPUT:	Repository SoftHSM found
2011-03-25 17:29:03.755 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:29:03.756 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:29:03.756 OUTPUT:	Policy default2 found
2011-03-25 17:29:03.756 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:29:03.756 OUTPUT:	Policy default found
2011-03-25 17:29:03.756 OUTPUT:	Zone ods found
2011-03-25 17:29:03.756 OUTPUT:	Policy set to default.
2011-03-25 17:29:03.757 OUTPUT:	Added zone ods to database
2011-03-25 17:29:03.757 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:29:03.757 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:29:03.757 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:29:03.761 01080 Wait(10)

2011-03-25 17:29:03.761 Requirement: ODSCC20

2011-03-25 17:29:13.766 01082 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:29:13.766 Requirement: ODSCC20

2011-03-25 17:29:13.770 01084 Start()
2011-03-25 17:29:13.770 Requirement: ODSCC20
2011-03-25 17:29:13.770 RunCommand(ods-control start)
2011-03-25 17:29:13.783 - runCommand: Background process started, PID: 3981
2011-03-25 17:29:14.934 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:29:14.104 - runCommand: Process started, PID: 3996
2011-03-25 17:29:14.104 OUTPUT:	ods-enforcerd
2011-03-25 17:29:14.104 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:29:14.119 - runCommand: Process started, PID: 4000
2011-03-25 17:29:14.119 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:29:14.119 01086 Comment: Sign the ods zone with the new configs.

2011-03-25 17:29:14.119 Requirement: ODSCC20

2011-03-25 17:29:14.119 01090 Wait(15)

2011-03-25 17:29:14.119 Requirement: ODSCC20

2011-03-25 17:29:29.120 01092 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:29:29.120 Requirement: ODSCC20

2011-03-25 17:29:29.120 01094 Stop()
2011-03-25 17:29:29.120 Requirement: ODSCC20
2011-03-25 17:29:29.120 RunCommand(ods-control stop)
2011-03-25 17:29:30.130 - runCommand: Process started, PID: 4031
2011-03-25 17:29:30.130 OUTPUT:	Stopping enforcer...
2011-03-25 17:29:30.130 OUTPUT:	Stopping signer engine..
2011-03-25 17:29:30.130 OUTPUT:	Engine shut down.
2011-03-25 17:29:30.130 RunCommand(ps -e | grep enforcer)
2011-03-25 17:29:30.145 - runCommand: Process started, PID: 4037
2011-03-25 17:29:30.145 ERROR:	return code = 1
2011-03-25 17:29:30.145 RunCommand(ps -e | grep signer)
2011-03-25 17:29:30.155 - runCommand: Process started, PID: 4040
2011-03-25 17:29:30.155 ERROR:	return code = 1

2011-03-25 17:29:30.155 01096 Comment: Check if the logging is unsuccesfull. If a notify (new zonefile update) is not available in the logging, thelogging is not succesfull.

2011-03-25 17:29:30.155 Requirement: ODSCC20

2011-03-25 17:29:30.155 01099 CheckLog()
2011-03-25 17:29:30.155 Requirement: ODSCC20
2011-03-25 17:29:32.994 PASSED:	(Check for Like) - Expected: all done! Found: Mar 25 17:29:29 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

-------------------------------------------------------------------------------
Testcase - ODSCC20T30: Change the kasp.xml location and change PolicyFile in conf.xml accordingly

2011-03-25 17:29:32.994 01104 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:29:32.994 Requirement: ODSCC20

2011-03-25 17:29:32.995 01106 Stop()
2011-03-25 17:29:32.995 Requirement: ODSCC20
2011-03-25 17:29:32.995 RunCommand(ods-control stop)
2011-03-25 17:29:32.998 - runCommand: Process started, PID: 4043
2011-03-25 17:29:32.998 OUTPUT:	Stopping enforcer...
2011-03-25 17:29:32.998 OUTPUT:	Cannot find PID file
2011-03-25 17:29:32.998 OUTPUT:	Stopping signer engine..
2011-03-25 17:29:32.998 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:29:32.998 ERROR:	return code = 1
2011-03-25 17:29:32.998 RunCommand(ps -e | grep enforcer)
2011-03-25 17:29:33.813 - runCommand: Process started, PID: 4046
2011-03-25 17:29:33.819 ERROR:	return code = 1
2011-03-25 17:29:33.821 RunCommand(ps -e | grep signer)
2011-03-25 17:29:33.188 - runCommand: Process started, PID: 4049
2011-03-25 17:29:33.188 ERROR:	return code = 1

2011-03-25 17:29:33.191 01108 Wait(10)

2011-03-25 17:29:33.191 Requirement: ODSCC20

2011-03-25 17:29:43.196 01110 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:29:43.196 Requirement: ODSCC20

2011-03-25 17:29:43.200 01116 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:29:43.200 Requirement: ODSCC20

2011-03-25 17:29:43.204 01119 PurgeHSM()
2011-03-25 17:29:43.204 Requirement: ODSCC20
2011-03-25 17:29:43.204 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:29:43.404 - runCommand: Process started, PID: 4052
2011-03-25 17:29:43.404 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:29:43.404 OUTPUT:	2 keys found.
2011-03-25 17:29:43.404 OUTPUT:	
2011-03-25 17:29:43.404 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:29:43.404 OUTPUT:	Starting purge...
2011-03-25 17:29:43.404 OUTPUT:	Key remove successful: 49a339afe2b4bd44e1f2f4d86e044b18
2011-03-25 17:29:43.404 OUTPUT:	Key remove successful: aa693b30a16146047ca3b2e8ddf63e61
2011-03-25 17:29:43.404 OUTPUT:	Purge done.

2011-03-25 17:29:43.404 01121 Wait(10)

2011-03-25 17:29:43.404 Requirement: ODSCC20

2011-03-25 17:29:53.405 01124 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:29:53.405 Requirement: ODSCC20

2011-03-25 17:29:53.405 01127 LoadConfig()
2011-03-25 17:29:53.405 Requirement: ODSCC20
2011-03-25 17:29:53.405 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T30_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:29:53.410 - runCommand: Process started, PID: 4056
2011-03-25 17:29:53.410 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T30_conf.xml': No such file or directory
2011-03-25 17:29:53.410 ERROR:	return code = 1

2011-03-25 17:29:53.410 01129 Comment: Make a new directory a copy the kasp.xml file to that new folder.

2011-03-25 17:29:53.410 Requirement: ODSCC20

2011-03-25 17:29:53.410 01135 Comment: Update all the configs.

2011-03-25 17:29:53.410 Requirement: ODSCC20

2011-03-25 17:29:53.411 01137 ODSSetup()
2011-03-25 17:29:53.411 Requirement: ODSCC20
2011-03-25 17:29:53.411 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:30:04.227 - runCommand: Process started, PID: 4057
2011-03-25 17:30:04.227 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:30:04.227 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:30:04.227 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:30:04.227 OUTPUT:	Repository SoftHSM found
2011-03-25 17:30:04.227 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:30:04.227 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:30:04.227 OUTPUT:	Policy default2 found
2011-03-25 17:30:04.227 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:30:04.227 OUTPUT:	Policy default found
2011-03-25 17:30:04.227 OUTPUT:	Zone ods found
2011-03-25 17:30:04.227 OUTPUT:	Policy set to default.
2011-03-25 17:30:04.227 OUTPUT:	Added zone ods to database
2011-03-25 17:30:04.227 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:30:04.227 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:30:04.227 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:30:04.228 01139 Wait(10)

2011-03-25 17:30:04.228 Requirement: ODSCC20

2011-03-25 17:30:14.228 01141 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:30:14.228 Requirement: ODSCC20

2011-03-25 17:30:14.229 01143 Start()
2011-03-25 17:30:14.229 Requirement: ODSCC20
2011-03-25 17:30:14.229 RunCommand(ods-control start)
2011-03-25 17:30:14.230 - runCommand: Background process started, PID: 4070
2011-03-25 17:30:15.254 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:30:15.269 - runCommand: Process started, PID: 4086
2011-03-25 17:30:15.269 OUTPUT:	ods-enforcerd
2011-03-25 17:30:15.269 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:30:15.284 - runCommand: Process started, PID: 4098
2011-03-25 17:30:15.284 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:30:15.284 01145 Comment: Sign the ods zone with the new configs.

2011-03-25 17:30:15.284 Requirement: ODSCC20

2011-03-25 17:30:15.284 01149 Wait(15)

2011-03-25 17:30:15.284 Requirement: ODSCC20

2011-03-25 17:30:30.285 01151 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:30:30.285 Requirement: ODSCC20

2011-03-25 17:30:30.285 01153 Stop()
2011-03-25 17:30:30.285 Requirement: ODSCC20
2011-03-25 17:30:30.285 RunCommand(ods-control stop)
2011-03-25 17:30:31.295 - runCommand: Process started, PID: 4120
2011-03-25 17:30:31.295 OUTPUT:	Stopping enforcer...
2011-03-25 17:30:31.295 OUTPUT:	Stopping signer engine..
2011-03-25 17:30:31.295 OUTPUT:	Engine shut down.
2011-03-25 17:30:31.295 RunCommand(ps -e | grep enforcer)
2011-03-25 17:30:31.310 - runCommand: Process started, PID: 4126
2011-03-25 17:30:31.310 ERROR:	return code = 1
2011-03-25 17:30:31.310 RunCommand(ps -e | grep signer)
2011-03-25 17:30:31.320 - runCommand: Process started, PID: 4129
2011-03-25 17:30:31.320 ERROR:	return code = 1

2011-03-25 17:30:31.320 01155 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-25 17:30:31.320 Requirement: ODSCC20

2011-03-25 17:30:31.320 01158 CheckLog()
2011-03-25 17:30:31.320 Requirement: ODSCC20
2011-03-25 17:30:34.156 PASSED:	(Check for Like) - Expected: all done! Found: Mar 25 17:30:30 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

-------------------------------------------------------------------------------
Testcase - ODSCC20T40: Change the zonelist.xml location and change ZoneListFile in conf.xml accordingly

2011-03-25 17:30:34.157 01163 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:30:34.157 Requirement: ODSCC20

2011-03-25 17:30:34.157 01165 Stop()
2011-03-25 17:30:34.157 Requirement: ODSCC20
2011-03-25 17:30:34.157 RunCommand(ods-control stop)
2011-03-25 17:30:34.161 - runCommand: Process started, PID: 4132
2011-03-25 17:30:34.161 OUTPUT:	Stopping enforcer...
2011-03-25 17:30:34.161 OUTPUT:	Cannot find PID file
2011-03-25 17:30:34.161 OUTPUT:	Stopping signer engine..
2011-03-25 17:30:34.161 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:30:34.161 ERROR:	return code = 1
2011-03-25 17:30:34.161 RunCommand(ps -e | grep enforcer)
2011-03-25 17:30:34.170 - runCommand: Process started, PID: 4135
2011-03-25 17:30:34.171 ERROR:	return code = 1
2011-03-25 17:30:34.171 RunCommand(ps -e | grep signer)
2011-03-25 17:30:34.181 - runCommand: Process started, PID: 4138
2011-03-25 17:30:34.181 ERROR:	return code = 1

2011-03-25 17:30:34.181 01167 Wait(10)

2011-03-25 17:30:34.181 Requirement: ODSCC20

2011-03-25 17:30:44.182 01169 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:30:44.182 Requirement: ODSCC20

2011-03-25 17:30:44.182 01175 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:30:44.182 Requirement: ODSCC20

2011-03-25 17:30:44.182 01178 PurgeHSM()
2011-03-25 17:30:44.182 Requirement: ODSCC20
2011-03-25 17:30:44.183 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:30:44.539 - runCommand: Process started, PID: 4141
2011-03-25 17:30:44.539 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:30:44.539 OUTPUT:	2 keys found.
2011-03-25 17:30:44.539 OUTPUT:	
2011-03-25 17:30:44.539 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:30:44.539 OUTPUT:	Starting purge...
2011-03-25 17:30:44.539 OUTPUT:	Key remove successful: af5eed4e22c27f4014a418fc79945ecb
2011-03-25 17:30:44.539 OUTPUT:	Key remove successful: dd61def0893bc5fb874299d732df7b2f
2011-03-25 17:30:44.539 OUTPUT:	Purge done.

2011-03-25 17:30:44.539 01180 Wait(10)

2011-03-25 17:30:44.539 Requirement: ODSCC20

2011-03-25 17:30:54.540 01182 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:30:54.540 Requirement: ODSCC20

2011-03-25 17:30:54.540 01185 LoadConfig()
2011-03-25 17:30:54.540 Requirement: ODSCC20
2011-03-25 17:30:54.540 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T40_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:30:54.545 - runCommand: Process started, PID: 4145
2011-03-25 17:30:54.545 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T40_conf.xml': No such file or directory
2011-03-25 17:30:54.545 ERROR:	return code = 1

2011-03-25 17:30:54.545 01187 Comment: Make a new directory a copy the ZoneListFile to that new folder.

2011-03-25 17:30:54.545 Requirement: ODSCC20

2011-03-25 17:30:54.546 01194 LoadConfig()
2011-03-25 17:30:54.546 Requirement: ODSCC20
2011-03-25 17:30:54.546 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:30:54.550 - runCommand: Process started, PID: 4146
2011-03-25 17:30:54.550 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:30:54.550 ERROR:	return code = 1

2011-03-25 17:30:54.550 01196 Comment: Update all the configs.

2011-03-25 17:30:54.550 Requirement: ODSCC20

2011-03-25 17:30:54.550 01198 ODSSetup()
2011-03-25 17:30:54.550 Requirement: ODSCC20
2011-03-25 17:30:54.550 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:31:04.929 - runCommand: Process started, PID: 4147
2011-03-25 17:31:04.929 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:31:04.929 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:31:04.929 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:31:04.929 OUTPUT:	Repository SoftHSM found
2011-03-25 17:31:04.929 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:31:04.929 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:31:04.929 OUTPUT:	Policy default2 found
2011-03-25 17:31:04.929 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:31:04.929 OUTPUT:	Policy default found
2011-03-25 17:31:04.929 OUTPUT:	Zone ods found
2011-03-25 17:31:04.929 OUTPUT:	Policy set to default.
2011-03-25 17:31:04.930 OUTPUT:	Added zone ods to database
2011-03-25 17:31:04.930 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:31:04.930 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:31:04.930 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:31:04.930 01200 Wait(10)

2011-03-25 17:31:04.930 Requirement: ODSCC20

2011-03-25 17:31:14.930 01202 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:31:14.930 Requirement: ODSCC20

2011-03-25 17:31:14.931 01204 Start()
2011-03-25 17:31:14.931 Requirement: ODSCC20
2011-03-25 17:31:14.931 RunCommand(ods-control start)
2011-03-25 17:31:14.932 - runCommand: Background process started, PID: 4160
2011-03-25 17:31:15.947 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:31:15.970 - runCommand: Process started, PID: 4176
2011-03-25 17:31:15.970 OUTPUT:	ods-enforcerd
2011-03-25 17:31:15.970 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:31:15.986 - runCommand: Process started, PID: 4188
2011-03-25 17:31:15.986 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:31:15.986 01206 Wait(10)

2011-03-25 17:31:15.986 Requirement: ODSCC20

2011-03-25 17:31:25.987 01208 Comment: Sign the ods zone with the new configs.

2011-03-25 17:31:25.987 Requirement: ODSCC20

2011-03-25 17:31:25.987 01212 Wait(15)

2011-03-25 17:31:25.987 Requirement: ODSCC20

2011-03-25 17:31:40.987 01214 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-25 17:31:40.987 Requirement: ODSCC20

2011-03-25 17:31:40.988 01216 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:31:40.988 Requirement: ODSCC20

2011-03-25 17:31:40.988 01218 Stop()
2011-03-25 17:31:40.988 Requirement: ODSCC20
2011-03-25 17:31:40.988 RunCommand(ods-control stop)
2011-03-25 17:31:41.997 - runCommand: Process started, PID: 4210
2011-03-25 17:31:41.997 OUTPUT:	Stopping enforcer...
2011-03-25 17:31:41.997 OUTPUT:	Stopping signer engine..
2011-03-25 17:31:41.997 OUTPUT:	Engine shut down.
2011-03-25 17:31:41.997 RunCommand(ps -e | grep enforcer)
2011-03-25 17:31:42.132 - runCommand: Process started, PID: 4216
2011-03-25 17:31:42.132 ERROR:	return code = 1
2011-03-25 17:31:42.133 RunCommand(ps -e | grep signer)
2011-03-25 17:31:42.232 - runCommand: Process started, PID: 4219
2011-03-25 17:31:42.233 ERROR:	return code = 1

2011-03-25 17:31:42.235 01221 CheckLog()
2011-03-25 17:31:42.235 Requirement: ODSCC20
2011-03-25 17:31:44.861 PASSED:	(Check for Like) - Expected: all done! Found: Mar 25 17:31:40 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

-------------------------------------------------------------------------------
Testcase - ODSCC20T50: Change the zonefetch.xml location and change ZoneFetchFile in conf.xml accordingly

2011-03-25 17:31:44.861 01227 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:31:44.861 Requirement: ODSCC20

2011-03-25 17:31:44.862 01229 Stop()
2011-03-25 17:31:44.862 Requirement: ODSCC20
2011-03-25 17:31:44.862 RunCommand(ods-control stop)
2011-03-25 17:31:44.865 - runCommand: Process started, PID: 4222
2011-03-25 17:31:44.865 OUTPUT:	Stopping enforcer...
2011-03-25 17:31:44.865 OUTPUT:	Cannot find PID file
2011-03-25 17:31:44.865 OUTPUT:	Stopping signer engine..
2011-03-25 17:31:44.865 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:31:44.865 ERROR:	return code = 1
2011-03-25 17:31:44.865 RunCommand(ps -e | grep enforcer)
2011-03-25 17:31:44.875 - runCommand: Process started, PID: 4225
2011-03-25 17:31:44.875 ERROR:	return code = 1
2011-03-25 17:31:44.875 RunCommand(ps -e | grep signer)
2011-03-25 17:31:44.885 - runCommand: Process started, PID: 4228
2011-03-25 17:31:44.885 ERROR:	return code = 1

2011-03-25 17:31:44.885 01231 Wait(10)

2011-03-25 17:31:44.886 Requirement: ODSCC20

2011-03-25 17:31:54.886 01233 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:31:54.886 Requirement: ODSCC20

2011-03-25 17:31:54.886 01239 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:31:54.886 Requirement: ODSCC20

2011-03-25 17:31:54.887 01242 PurgeHSM()
2011-03-25 17:31:54.887 Requirement: ODSCC20
2011-03-25 17:31:54.887 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:31:55.269 - runCommand: Process started, PID: 4231
2011-03-25 17:31:55.270 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:31:55.270 OUTPUT:	2 keys found.
2011-03-25 17:31:55.270 OUTPUT:	
2011-03-25 17:31:55.270 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:31:55.270 OUTPUT:	Starting purge...
2011-03-25 17:31:55.270 OUTPUT:	Key remove successful: ab34003baf165c68815165bb062dbe15
2011-03-25 17:31:55.270 OUTPUT:	Key remove successful: ee98b0a2481c8859bc40ce91602e72e8
2011-03-25 17:31:55.270 OUTPUT:	Purge done.

2011-03-25 17:31:55.270 01244 Wait(10)

2011-03-25 17:31:55.270 Requirement: ODSCC20

2011-03-25 17:32:05.271 01247 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:32:05.271 Requirement: ODSCC20

2011-03-25 17:32:05.271 01250 LoadConfig()
2011-03-25 17:32:05.271 Requirement: ODSCC20
2011-03-25 17:32:05.271 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T50_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:32:05.275 - runCommand: Process started, PID: 4235
2011-03-25 17:32:05.275 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T50_conf.xml': No such file or directory
2011-03-25 17:32:05.275 ERROR:	return code = 1

2011-03-25 17:32:05.276 01252 Comment: Make a new directory a copy the ZoneListFile to that new folder.

2011-03-25 17:32:05.276 Requirement: ODSCC20

2011-03-25 17:32:05.276 01259 LoadConfig()
2011-03-25 17:32:05.276 Requirement: ODSCC20
2011-03-25 17:32:05.276 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:32:05.280 - runCommand: Process started, PID: 4236
2011-03-25 17:32:05.280 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:32:05.280 ERROR:	return code = 1

2011-03-25 17:32:05.281 01261 Comment: Update all the configs.

2011-03-25 17:32:05.281 Requirement: ODSCC20

2011-03-25 17:32:05.281 01263 ODSSetup()
2011-03-25 17:32:05.281 Requirement: ODSCC20
2011-03-25 17:32:05.281 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:32:15.426 - runCommand: Process started, PID: 4237
2011-03-25 17:32:15.427 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:32:15.427 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:32:15.427 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:32:15.427 OUTPUT:	Repository SoftHSM found
2011-03-25 17:32:15.427 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:32:15.427 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:32:15.427 OUTPUT:	Policy default2 found
2011-03-25 17:32:15.427 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:32:15.427 OUTPUT:	Policy default found
2011-03-25 17:32:15.427 OUTPUT:	Zone ods found
2011-03-25 17:32:15.427 OUTPUT:	Policy set to default.
2011-03-25 17:32:15.427 OUTPUT:	Added zone ods to database
2011-03-25 17:32:15.427 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:32:15.427 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:32:15.427 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:32:15.427 01265 Wait(10)

2011-03-25 17:32:15.427 Requirement: ODSCC20

2011-03-25 17:32:25.428 01267 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:32:25.428 Requirement: ODSCC20

2011-03-25 17:32:25.428 01269 Start()
2011-03-25 17:32:25.428 Requirement: ODSCC20
2011-03-25 17:32:25.428 RunCommand(ods-control start)
2011-03-25 17:32:25.429 - runCommand: Background process started, PID: 4250
2011-03-25 17:32:26.457 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:32:26.470 - runCommand: Process started, PID: 4274
2011-03-25 17:32:26.470 OUTPUT:	ods-enforcerd
2011-03-25 17:32:26.470 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:32:26.486 - runCommand: Process started, PID: 4278
2011-03-25 17:32:26.486 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:32:26.486 01271 Wait(10)

2011-03-25 17:32:26.486 Requirement: ODSCC20

2011-03-25 17:32:36.487 01273 Comment: Sign the ods zone with the new configs.

2011-03-25 17:32:36.487 Requirement: ODSCC20

2011-03-25 17:32:36.487 01277 Wait(15)

2011-03-25 17:32:36.487 Requirement: ODSCC20

2011-03-25 17:32:51.488 01279 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:32:51.488 Requirement: ODSCC20

2011-03-25 17:32:51.488 01281 Stop()
2011-03-25 17:32:51.488 Requirement: ODSCC20
2011-03-25 17:32:51.488 RunCommand(ods-control stop)
2011-03-25 17:32:52.497 - runCommand: Process started, PID: 4300
2011-03-25 17:32:52.498 OUTPUT:	Stopping enforcer...
2011-03-25 17:32:52.498 OUTPUT:	Stopping signer engine..
2011-03-25 17:32:52.498 OUTPUT:	Engine shut down.
2011-03-25 17:32:52.498 RunCommand(ps -e | grep enforcer)
2011-03-25 17:32:52.513 - runCommand: Process started, PID: 4306
2011-03-25 17:32:52.513 ERROR:	return code = 1
2011-03-25 17:32:52.513 RunCommand(ps -e | grep signer)
2011-03-25 17:32:52.523 - runCommand: Process started, PID: 4309
2011-03-25 17:32:52.523 ERROR:	return code = 1

2011-03-25 17:32:52.523 01283 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-25 17:32:52.523 Requirement: ODSCC20

2011-03-25 17:32:52.523 01286 CheckLog()
2011-03-25 17:32:52.523 Requirement: ODSCC20
2011-03-25 17:32:55.362 PASSED:	(Check for Like) - Expected: all done! Found: Mar 25 17:32:51 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0
Testcondition - ODSCC30: The configuration of enforcer settings located in conf.xml should operate according to requirements and intentions
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSCC30T10: Use privileges test: test for enforcer in config only and check if enforcers fails to run

2011-03-25 17:32:55.363 01295 Comment: Privileges have been adjusted in the conf.xml

2011-03-25 17:32:55.363 Requirement: ODSCC30

2011-03-25 17:32:55.364 01297 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:32:55.364 Requirement: ODSCC30

2011-03-25 17:32:55.364 01299 Stop()
2011-03-25 17:32:55.364 Requirement: ODSCC30
2011-03-25 17:32:55.364 RunCommand(ods-control stop)
2011-03-25 17:32:55.367 - runCommand: Process started, PID: 4312
2011-03-25 17:32:55.367 OUTPUT:	Stopping enforcer...
2011-03-25 17:32:55.367 OUTPUT:	Cannot find PID file
2011-03-25 17:32:55.367 OUTPUT:	Stopping signer engine..
2011-03-25 17:32:55.367 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:32:55.367 ERROR:	return code = 1
2011-03-25 17:32:55.367 RunCommand(ps -e | grep enforcer)
2011-03-25 17:32:55.377 - runCommand: Process started, PID: 4315
2011-03-25 17:32:55.377 ERROR:	return code = 1
2011-03-25 17:32:55.377 RunCommand(ps -e | grep signer)
2011-03-25 17:32:55.386 - runCommand: Process started, PID: 4318
2011-03-25 17:32:55.386 ERROR:	return code = 1

2011-03-25 17:32:55.386 01301 Wait(10)

2011-03-25 17:32:55.386 Requirement: ODSCC30

2011-03-25 17:33:05.387 01303 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:33:05.387 Requirement: ODSCC30

2011-03-25 17:33:05.387 01309 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:33:05.387 Requirement: ODSCC30

2011-03-25 17:33:05.388 01312 PurgeHSM()
2011-03-25 17:33:05.388 Requirement: ODSCC30
2011-03-25 17:33:05.388 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:33:05.758 - runCommand: Process started, PID: 4321
2011-03-25 17:33:05.758 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:33:05.758 OUTPUT:	2 keys found.
2011-03-25 17:33:05.759 OUTPUT:	
2011-03-25 17:33:05.759 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:33:05.759 OUTPUT:	Starting purge...
2011-03-25 17:33:05.759 OUTPUT:	Key remove successful: 267cd0b1f31921edb001e8b4f5c6038a
2011-03-25 17:33:05.759 OUTPUT:	Key remove successful: 1f22330f78c3ab0b8d42838c4f5c4bc6
2011-03-25 17:33:05.759 OUTPUT:	Purge done.

2011-03-25 17:33:05.759 01314 Wait(10)

2011-03-25 17:33:05.759 Requirement: ODSCC30

2011-03-25 17:33:15.759 01316 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:33:15.760 Requirement: ODSCC30

2011-03-25 17:33:15.760 01319 LoadConfig()
2011-03-25 17:33:15.760 Requirement: ODSCC30
2011-03-25 17:33:15.760 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC30T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:33:15.764 - runCommand: Process started, PID: 4325
2011-03-25 17:33:15.764 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC30T10_conf.xml': No such file or directory
2011-03-25 17:33:15.764 ERROR:	return code = 1

2011-03-25 17:33:15.765 01322 LoadConfig()
2011-03-25 17:33:15.765 Requirement: ODSCC30
2011-03-25 17:33:15.765 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:33:15.769 - runCommand: Process started, PID: 4326
2011-03-25 17:33:15.769 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:33:15.769 ERROR:	return code = 1

2011-03-25 17:33:15.769 01324 Comment: 

2011-03-25 17:33:15.769 Requirement: ODSCC30

2011-03-25 17:33:15.770 01326 Comment: Update all the configs.

2011-03-25 17:33:15.770 Requirement: ODSCC30

2011-03-25 17:33:15.770 01328 ODSSetup()
2011-03-25 17:33:15.770 Requirement: ODSCC30
2011-03-25 17:33:15.770 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:33:26.290 - runCommand: Process started, PID: 4327
2011-03-25 17:33:26.290 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:33:26.290 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:33:26.290 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:33:26.290 OUTPUT:	Repository SoftHSM found
2011-03-25 17:33:26.290 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:33:26.290 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:33:26.290 OUTPUT:	Policy default2 found
2011-03-25 17:33:26.290 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:33:26.290 OUTPUT:	Policy default found
2011-03-25 17:33:26.290 OUTPUT:	Zone ods found
2011-03-25 17:33:26.290 OUTPUT:	Policy set to default.
2011-03-25 17:33:26.291 OUTPUT:	Added zone ods to database
2011-03-25 17:33:26.291 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:33:26.291 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:33:26.291 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:33:26.291 01330 Wait(10)

2011-03-25 17:33:26.291 Requirement: ODSCC30

2011-03-25 17:33:36.291 01332 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:33:36.291 Requirement: ODSCC30

2011-03-25 17:33:36.292 01334 Start()
2011-03-25 17:33:36.292 Requirement: ODSCC30
2011-03-25 17:33:36.292 RunCommand(ods-control start)
2011-03-25 17:33:36.293 - runCommand: Background process started, PID: 4340
2011-03-25 17:33:37.309 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:33:37.329 - runCommand: Process started, PID: 4355
2011-03-25 17:33:37.329 OUTPUT:	ods-enforcerd
2011-03-25 17:33:37.329 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:33:37.343 - runCommand: Process started, PID: 4360
2011-03-25 17:33:37.343 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:33:37.344 01336 Wait(10)

2011-03-25 17:33:37.344 Requirement: ODSCC30

2011-03-25 17:33:47.344 01339 Wait(15)

2011-03-25 17:33:47.344 Requirement: ODSCC30

2011-03-25 17:34:02.345 01341 Comment: The Enforcer should fail to run when restarting ODS with the new conf.xml.

2011-03-25 17:34:02.345 Requirement: ODSCC30

2011-03-25 17:34:02.345 01343 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:34:02.345 Requirement: ODSCC30

2011-03-25 17:34:02.345 01345 Stop()
2011-03-25 17:34:02.345 Requirement: ODSCC30
2011-03-25 17:34:02.345 RunCommand(ods-control stop)
2011-03-25 17:34:03.355 - runCommand: Process started, PID: 4390
2011-03-25 17:34:03.355 OUTPUT:	Stopping enforcer...
2011-03-25 17:34:03.355 OUTPUT:	Stopping signer engine..
2011-03-25 17:34:03.355 OUTPUT:	Engine shut down.
2011-03-25 17:34:03.355 RunCommand(ps -e | grep enforcer)
2011-03-25 17:34:03.370 - runCommand: Process started, PID: 4396
2011-03-25 17:34:03.370 ERROR:	return code = 1
2011-03-25 17:34:03.371 RunCommand(ps -e | grep signer)
2011-03-25 17:34:03.386 - runCommand: Process started, PID: 4399
2011-03-25 17:34:03.386 ERROR:	return code = 1

2011-03-25 17:34:03.386 01348 CheckLog()
2011-03-25 17:34:03.386 Requirement: ODSCC30
2011-03-25 17:34:06.229 FAILED:	(Check for Like) - Expected: User opendnssec1 does not exist Found: 

2011-03-25 17:34:06.229 01351 CheckLog()
2011-03-25 17:34:06.229 Requirement: ODSCC30
2011-03-25 17:34:09.733 FAILED:	(Check for Like) - Expected: Can't change to opendnssec1, opendnssec to check DB write permissions Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC30T20: Use privileges test: test for enforcer and kasp.db and check if enforcers runs without errors

2011-03-25 17:34:09.739 01357 Comment: Privileges have been adjusted in the conf.xml

2011-03-25 17:34:09.740 Requirement: ODSCC30

2011-03-25 17:34:09.742 01359 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:34:09.742 Requirement: ODSCC30

2011-03-25 17:34:09.744 01361 Stop()
2011-03-25 17:34:09.744 Requirement: ODSCC30
2011-03-25 17:34:09.744 RunCommand(ods-control stop)
2011-03-25 17:34:09.778 - runCommand: Process started, PID: 4404
2011-03-25 17:34:09.779 OUTPUT:	Stopping enforcer...
2011-03-25 17:34:09.779 OUTPUT:	Cannot find PID file
2011-03-25 17:34:09.779 OUTPUT:	Stopping signer engine..
2011-03-25 17:34:09.779 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:34:09.779 ERROR:	return code = 1
2011-03-25 17:34:09.779 RunCommand(ps -e | grep enforcer)
2011-03-25 17:34:09.873 - runCommand: Process started, PID: 4407
2011-03-25 17:34:09.874 ERROR:	return code = 1
2011-03-25 17:34:09.874 RunCommand(ps -e | grep signer)
2011-03-25 17:34:09.968 - runCommand: Process started, PID: 4410
2011-03-25 17:34:09.969 ERROR:	return code = 1

2011-03-25 17:34:09.971 01363 Wait(10)

2011-03-25 17:34:09.972 Requirement: ODSCC30

2011-03-25 17:34:19.976 01365 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:34:19.977 Requirement: ODSCC30

2011-03-25 17:34:19.980 01371 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:34:19.981 Requirement: ODSCC30

2011-03-25 17:34:19.984 01374 PurgeHSM()
2011-03-25 17:34:19.984 Requirement: ODSCC30
2011-03-25 17:34:19.984 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:34:19.479 - runCommand: Process started, PID: 4413
2011-03-25 17:34:19.479 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:34:19.479 OUTPUT:	2 keys found.
2011-03-25 17:34:19.479 OUTPUT:	
2011-03-25 17:34:19.479 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:34:19.479 OUTPUT:	Starting purge...
2011-03-25 17:34:19.479 OUTPUT:	Key remove successful: 6cbb529c12214d865fd0aab748454213
2011-03-25 17:34:19.479 OUTPUT:	Key remove successful: f3308536517d0a5cdceb409c1f6ced84
2011-03-25 17:34:19.479 OUTPUT:	Purge done.

2011-03-25 17:34:19.480 01376 Wait(10)

2011-03-25 17:34:19.480 Requirement: ODSCC30

2011-03-25 17:34:29.480 01378 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:34:29.480 Requirement: ODSCC30

2011-03-25 17:34:29.480 01381 LoadConfig()
2011-03-25 17:34:29.480 Requirement: ODSCC30
2011-03-25 17:34:29.481 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC30T20_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:34:29.485 - runCommand: Process started, PID: 4417
2011-03-25 17:34:29.485 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC30T20_conf.xml': No such file or directory
2011-03-25 17:34:29.485 ERROR:	return code = 1

2011-03-25 17:34:29.485 01384 LoadConfig()
2011-03-25 17:34:29.485 Requirement: ODSCC30
2011-03-25 17:34:29.485 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:34:29.490 - runCommand: Process started, PID: 4418
2011-03-25 17:34:29.490 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:34:29.490 ERROR:	return code = 1

2011-03-25 17:34:29.490 01386 Comment: 

2011-03-25 17:34:29.490 Requirement: ODSCC30

2011-03-25 17:34:29.491 01388 Comment: Update all the configs.

2011-03-25 17:34:29.491 Requirement: ODSCC30

2011-03-25 17:34:29.491 01390 ODSSetup()
2011-03-25 17:34:29.491 Requirement: ODSCC30
2011-03-25 17:34:29.491 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:34:39.919 - runCommand: Process started, PID: 4419
2011-03-25 17:34:39.919 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:34:39.919 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:34:39.919 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:34:39.919 OUTPUT:	Repository SoftHSM found
2011-03-25 17:34:39.919 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:34:39.919 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:34:39.919 OUTPUT:	Policy default2 found
2011-03-25 17:34:39.919 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:34:39.919 OUTPUT:	Policy default found
2011-03-25 17:34:39.919 OUTPUT:	Zone ods found
2011-03-25 17:34:39.919 OUTPUT:	Policy set to default.
2011-03-25 17:34:39.919 OUTPUT:	Added zone ods to database
2011-03-25 17:34:39.920 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:34:39.920 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:34:39.920 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:34:39.920 01392 Wait(10)

2011-03-25 17:34:39.920 Requirement: ODSCC30

2011-03-25 17:34:49.920 01394 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:34:49.920 Requirement: ODSCC30

2011-03-25 17:34:49.921 01396 Start()
2011-03-25 17:34:49.921 Requirement: ODSCC30
2011-03-25 17:34:49.921 RunCommand(ods-control start)
2011-03-25 17:34:49.922 - runCommand: Background process started, PID: 4432
2011-03-25 17:34:50.939 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:34:50.955 - runCommand: Process started, PID: 4447
2011-03-25 17:34:50.956 OUTPUT:	ods-enforcerd
2011-03-25 17:34:50.956 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:34:50.968 - runCommand: Process started, PID: 4451
2011-03-25 17:34:50.968 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:34:50.968 01398 Wait(10)

2011-03-25 17:34:50.968 Requirement: ODSCC30

2011-03-25 17:35:00.969 01401 Comment: The Enforcer should start up succesfully when restarting ODS with the new conf.xml.

2011-03-25 17:35:00.969 Requirement: ODSCC30

2011-03-25 17:35:00.969 01404 CheckLog()
2011-03-25 17:35:00.969 Requirement: ODSCC30
2011-03-25 17:35:03.832 FAILED:	(Check for Like) - Expected: enforcer started Found: 

2011-03-25 17:35:03.832 01407 CheckLog()
2011-03-25 17:35:03.832 Requirement: ODSCC30
2011-03-25 17:35:06.680 FAILED:	(Check for Like) - Expected: SQLite database set to: /var/lib/opendnssec/db/kasp.db Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC30T30: Change the kasp.db location and change Datastore in conf.xml accordingly

2011-03-25 17:35:06.681 01414 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:35:06.681 Requirement: ODSCC30

2011-03-25 17:35:06.681 01416 Stop()
2011-03-25 17:35:06.681 Requirement: ODSCC30
2011-03-25 17:35:06.681 RunCommand(ods-control stop)
2011-03-25 17:35:07.688 - runCommand: Process started, PID: 4482
2011-03-25 17:35:07.688 OUTPUT:	Stopping enforcer...
2011-03-25 17:35:07.688 OUTPUT:	Stopping signer engine..
2011-03-25 17:35:07.688 OUTPUT:	Engine shut down.
2011-03-25 17:35:07.688 RunCommand(ps -e | grep enforcer)
2011-03-25 17:35:07.704 - runCommand: Process started, PID: 4488
2011-03-25 17:35:07.704 ERROR:	return code = 1
2011-03-25 17:35:07.704 RunCommand(ps -e | grep signer)
2011-03-25 17:35:07.714 - runCommand: Process started, PID: 4491
2011-03-25 17:35:07.714 ERROR:	return code = 1

2011-03-25 17:35:07.714 01418 Wait(10)

2011-03-25 17:35:07.714 Requirement: ODSCC30

2011-03-25 17:35:17.714 01420 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:35:17.714 Requirement: ODSCC30

2011-03-25 17:35:17.715 01426 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:35:17.715 Requirement: ODSCC30

2011-03-25 17:35:17.715 01429 PurgeHSM()
2011-03-25 17:35:17.715 Requirement: ODSCC30
2011-03-25 17:35:17.715 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:35:18.124 - runCommand: Process started, PID: 4494
2011-03-25 17:35:18.124 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:35:18.124 OUTPUT:	2 keys found.
2011-03-25 17:35:18.124 OUTPUT:	
2011-03-25 17:35:18.124 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:35:18.124 OUTPUT:	Starting purge...
2011-03-25 17:35:18.124 OUTPUT:	Key remove successful: 92cd4083a5fdbf3bc0add5876fffde60
2011-03-25 17:35:18.124 OUTPUT:	Key remove successful: aa06e6e6596078d172c4211fa4c9e36e
2011-03-25 17:35:18.124 OUTPUT:	Purge done.

2011-03-25 17:35:18.125 01431 Wait(10)

2011-03-25 17:35:18.125 Requirement: ODSCC30

2011-03-25 17:35:28.125 01433 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:35:28.125 Requirement: ODSCC30

2011-03-25 17:35:28.126 01436 LoadConfig()
2011-03-25 17:35:28.126 Requirement: ODSCC30
2011-03-25 17:35:28.126 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC30T30_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:35:28.130 - runCommand: Process started, PID: 4498
2011-03-25 17:35:28.130 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC30T30_conf.xml': No such file or directory
2011-03-25 17:35:28.130 ERROR:	return code = 1

2011-03-25 17:35:28.130 01438 Comment: Make a new directory a copy the kasp.db file to that new folder.

2011-03-25 17:35:28.130 Requirement: ODSCC30

2011-03-25 17:35:28.131 01445 LoadConfig()
2011-03-25 17:35:28.131 Requirement: ODSCC30
2011-03-25 17:35:28.131 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:35:28.135 - runCommand: Process started, PID: 4499
2011-03-25 17:35:28.135 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:35:28.135 ERROR:	return code = 1

2011-03-25 17:35:28.135 01447 Comment: Update all the configs.

2011-03-25 17:35:28.135 Requirement: ODSCC30

2011-03-25 17:35:28.136 01449 ODSSetup()
2011-03-25 17:35:28.136 Requirement: ODSCC30
2011-03-25 17:35:28.136 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:35:38.931 - runCommand: Process started, PID: 4500
2011-03-25 17:35:38.931 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:35:38.931 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:35:38.931 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:35:38.931 OUTPUT:	Repository SoftHSM found
2011-03-25 17:35:38.931 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:35:38.931 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:35:38.931 OUTPUT:	Policy default2 found
2011-03-25 17:35:38.931 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:35:38.931 OUTPUT:	Policy default found
2011-03-25 17:35:38.931 OUTPUT:	Zone ods found
2011-03-25 17:35:38.931 OUTPUT:	Policy set to default.
2011-03-25 17:35:38.931 OUTPUT:	Added zone ods to database
2011-03-25 17:35:38.931 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:35:38.931 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:35:38.931 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:35:38.931 01451 Wait(10)

2011-03-25 17:35:38.931 Requirement: ODSCC30

2011-03-25 17:35:48.932 01453 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:35:48.932 Requirement: ODSCC30

2011-03-25 17:35:48.932 01455 Start()
2011-03-25 17:35:48.932 Requirement: ODSCC30
2011-03-25 17:35:48.932 RunCommand(ods-control start)
2011-03-25 17:35:48.934 - runCommand: Background process started, PID: 4513
2011-03-25 17:35:49.961 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:35:49.975 - runCommand: Process started, PID: 4529
2011-03-25 17:35:49.975 OUTPUT:	ods-enforcerd
2011-03-25 17:35:49.976 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:35:49.992 - runCommand: Process started, PID: 4541
2011-03-25 17:35:49.992 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:35:49.992 01457 Wait(10)

2011-03-25 17:35:49.992 Requirement: ODSCC30

2011-03-25 17:35:59.993 01460 CheckLog()
2011-03-25 17:35:59.993 Requirement: ODSCC30
2011-03-25 17:36:02.852 FAILED:	(Check for Like) - Expected: SQLite database set to: /var/lib/opendnssec/odscc30t30/kasp.db Found: 

2011-03-25 17:36:02.852 01462 Comment: Sign the ods zone with the new configs.

2011-03-25 17:36:02.852 Requirement: ODSCC30

2011-03-25 17:36:02.852 01466 Wait(15)

2011-03-25 17:36:02.852 Requirement: ODSCC30

2011-03-25 17:36:17.853 01468 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:36:17.853 Requirement: ODSCC30

2011-03-25 17:36:17.853 01470 Stop()
2011-03-25 17:36:17.853 Requirement: ODSCC30
2011-03-25 17:36:17.853 RunCommand(ods-control stop)
2011-03-25 17:36:18.863 - runCommand: Process started, PID: 4563
2011-03-25 17:36:18.863 OUTPUT:	Stopping enforcer...
2011-03-25 17:36:18.863 OUTPUT:	Stopping signer engine..
2011-03-25 17:36:18.863 OUTPUT:	Engine shut down.
2011-03-25 17:36:18.863 RunCommand(ps -e | grep enforcer)
2011-03-25 17:36:18.878 - runCommand: Process started, PID: 4569
2011-03-25 17:36:18.878 ERROR:	return code = 1
2011-03-25 17:36:18.878 RunCommand(ps -e | grep signer)
2011-03-25 17:36:18.892 - runCommand: Process started, PID: 4572
2011-03-25 17:36:18.892 ERROR:	return code = 1

2011-03-25 17:36:18.892 01472 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-25 17:36:18.892 Requirement: ODSCC30

2011-03-25 17:36:18.892 01475 CheckLog()
2011-03-25 17:36:18.892 Requirement: ODSCC30
2011-03-25 17:36:21.750 PASSED:	(Check for Like) - Expected: all done! Found: Mar 25 17:36:17 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

-------------------------------------------------------------------------------
Testcase - ODSCC30T40: Change the Interval to 60 seconds and check if the enforcer runs every minute

2011-03-25 17:36:21.750 01480 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:36:21.750 Requirement: ODSCC30

2011-03-25 17:36:21.751 01482 Stop()
2011-03-25 17:36:21.751 Requirement: ODSCC30
2011-03-25 17:36:21.751 RunCommand(ods-control stop)
2011-03-25 17:36:21.754 - runCommand: Process started, PID: 4575
2011-03-25 17:36:21.754 OUTPUT:	Stopping enforcer...
2011-03-25 17:36:21.754 OUTPUT:	Cannot find PID file
2011-03-25 17:36:21.754 OUTPUT:	Stopping signer engine..
2011-03-25 17:36:21.754 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:36:21.754 ERROR:	return code = 1
2011-03-25 17:36:21.754 RunCommand(ps -e | grep enforcer)
2011-03-25 17:36:21.763 - runCommand: Process started, PID: 4578
2011-03-25 17:36:21.764 ERROR:	return code = 1
2011-03-25 17:36:21.764 RunCommand(ps -e | grep signer)
2011-03-25 17:36:21.774 - runCommand: Process started, PID: 4581
2011-03-25 17:36:21.774 ERROR:	return code = 1

2011-03-25 17:36:21.774 01484 Wait(10)

2011-03-25 17:36:21.774 Requirement: ODSCC30

2011-03-25 17:36:31.775 01486 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:36:31.775 Requirement: ODSCC30

2011-03-25 17:36:31.775 01492 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:36:31.775 Requirement: ODSCC30

2011-03-25 17:36:31.776 01495 PurgeHSM()
2011-03-25 17:36:31.776 Requirement: ODSCC30
2011-03-25 17:36:31.776 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:36:32.119 - runCommand: Process started, PID: 4584
2011-03-25 17:36:32.120 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:36:32.120 OUTPUT:	2 keys found.
2011-03-25 17:36:32.120 OUTPUT:	
2011-03-25 17:36:32.120 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:36:32.120 OUTPUT:	Starting purge...
2011-03-25 17:36:32.120 OUTPUT:	Key remove successful: 6675abe82dccd2eebc40fddc019cffe6
2011-03-25 17:36:32.120 OUTPUT:	Key remove successful: d310d6b741a8a42fd195179dc73a1eb0
2011-03-25 17:36:32.120 OUTPUT:	Purge done.

2011-03-25 17:36:32.120 01497 Wait(10)

2011-03-25 17:36:32.120 Requirement: ODSCC30

2011-03-25 17:36:42.121 01500 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:36:42.121 Requirement: ODSCC30

2011-03-25 17:36:42.121 01503 LoadConfig()
2011-03-25 17:36:42.121 Requirement: ODSCC30
2011-03-25 17:36:42.121 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC30T40_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:36:42.125 - runCommand: Process started, PID: 4588
2011-03-25 17:36:42.125 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC30T40_conf.xml': No such file or directory
2011-03-25 17:36:42.126 ERROR:	return code = 1

2011-03-25 17:36:42.126 01505 Comment: Make a new directory a copy the ZoneListFile to that new folder.

2011-03-25 17:36:42.126 Requirement: ODSCC30

2011-03-25 17:36:42.126 01509 LoadConfig()
2011-03-25 17:36:42.126 Requirement: ODSCC30
2011-03-25 17:36:42.126 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:36:42.130 - runCommand: Process started, PID: 4589
2011-03-25 17:36:42.130 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:36:42.130 ERROR:	return code = 1

2011-03-25 17:36:42.131 01511 Comment: Update all the configs.

2011-03-25 17:36:42.131 Requirement: ODSCC30

2011-03-25 17:36:42.131 01513 ODSSetup()
2011-03-25 17:36:42.131 Requirement: ODSCC30
2011-03-25 17:36:42.131 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:36:52.501 - runCommand: Process started, PID: 4590
2011-03-25 17:36:52.502 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:36:52.502 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:36:52.502 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:36:52.502 OUTPUT:	Repository SoftHSM found
2011-03-25 17:36:52.502 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:36:52.502 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:36:52.502 OUTPUT:	Policy default2 found
2011-03-25 17:36:52.502 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:36:52.502 OUTPUT:	Policy default found
2011-03-25 17:36:52.502 OUTPUT:	Zone ods found
2011-03-25 17:36:52.502 OUTPUT:	Policy set to default.
2011-03-25 17:36:52.502 OUTPUT:	Added zone ods to database
2011-03-25 17:36:52.502 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:36:52.502 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:36:52.502 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:36:52.502 01515 Wait(10)

2011-03-25 17:36:52.502 Requirement: ODSCC30

2011-03-25 17:37:02.503 01517 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:37:02.503 Requirement: ODSCC30

2011-03-25 17:37:02.503 01519 Start()
2011-03-25 17:37:02.503 Requirement: ODSCC30
2011-03-25 17:37:02.503 RunCommand(ods-control start)
2011-03-25 17:37:02.504 - runCommand: Background process started, PID: 4603
2011-03-25 17:37:03.521 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:37:03.541 - runCommand: Process started, PID: 4618
2011-03-25 17:37:03.541 OUTPUT:	ods-enforcerd
2011-03-25 17:37:03.541 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:37:03.557 - runCommand: Process started, PID: 4623
2011-03-25 17:37:03.557 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:37:03.557 01521 Wait(10)

2011-03-25 17:37:03.557 Requirement: ODSCC30

2011-03-25 17:37:13.558 01523 Comment: Check each minute if the enforcer is running.

2011-03-25 17:37:13.558 Requirement: ODSCC30

2011-03-25 17:37:13.558 01526 CheckLog()
2011-03-25 17:37:13.558 Requirement: ODSCC30
2011-03-25 17:37:16.412 PASSED:	(Check for Like) - Expected: ods-enforcerd: Reading config "/etc/opendnssec/conf.xml" Found: Mar 25 17:37:02 DEVELOPER15 ods-enforcerd: Reading config "/etc/opendnssec/conf.xml"

2011-03-25 17:37:16.413 01528 Wait(60)

2011-03-25 17:37:16.413 Requirement: ODSCC30

2011-03-25 17:38:16.413 01531 CheckLog()
2011-03-25 17:38:16.413 Requirement: ODSCC30

2011-03-25 17:38:19.276 01533 Wait(60)

2011-03-25 17:38:19.276 Requirement: ODSCC30

2011-03-25 17:39:19.276 01536 CheckLog()
2011-03-25 17:39:19.276 Requirement: ODSCC30
2011-03-25 17:39:22.136 FAILED:	(Check for Like) - Expected: ods-enforcerd: Reading config "/etc/opendnssec/conf.xml" Found: 

2011-03-25 17:39:22.136 01538 Wait(60)

2011-03-25 17:39:22.136 Requirement: ODSCC30

2011-03-25 17:40:22.137 01541 CheckLog()
2011-03-25 17:40:22.137 Requirement: ODSCC30
Testcondition - ODSCC40: The datastore settings located in conf.xml should be configurable with different credentials
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSCC40T10: Change port of database and check if enforcer fails to connect

2011-03-25 17:40:24.995 01548 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:40:24.995 Requirement: ODSCC40

2011-03-25 17:40:24.995 01550 Stop()
2011-03-25 17:40:24.995 Requirement: ODSCC40
2011-03-25 17:40:24.995 RunCommand(ods-control stop)
2011-03-25 17:40:26.234 - runCommand: Process started, PID: 4666
2011-03-25 17:40:26.242 OUTPUT:	Stopping enforcer...
2011-03-25 17:40:26.244 OUTPUT:	Stopping signer engine..
2011-03-25 17:40:26.246 OUTPUT:	Engine shut down.
2011-03-25 17:40:26.250 RunCommand(ps -e | grep enforcer)
2011-03-25 17:40:26.178 - runCommand: Process started, PID: 4673
2011-03-25 17:40:26.179 ERROR:	return code = 1
2011-03-25 17:40:26.179 RunCommand(ps -e | grep signer)
2011-03-25 17:40:26.273 - runCommand: Process started, PID: 4676
2011-03-25 17:40:26.273 ERROR:	return code = 1

2011-03-25 17:40:26.276 01552 Wait(10)

2011-03-25 17:40:26.276 Requirement: ODSCC40

2011-03-25 17:40:36.281 01554 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:40:36.281 Requirement: ODSCC40

2011-03-25 17:40:36.285 01560 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:40:36.285 Requirement: ODSCC40

2011-03-25 17:40:36.288 01563 PurgeHSM()
2011-03-25 17:40:36.289 Requirement: ODSCC40
2011-03-25 17:40:36.289 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:40:36.428 - runCommand: Process started, PID: 4679
2011-03-25 17:40:36.428 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:40:36.428 OUTPUT:	2 keys found.
2011-03-25 17:40:36.428 OUTPUT:	
2011-03-25 17:40:36.428 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:40:36.428 OUTPUT:	Starting purge...
2011-03-25 17:40:36.428 OUTPUT:	Key remove successful: 103fb65f304fbfbdbfd9efdf19a202c0
2011-03-25 17:40:36.428 OUTPUT:	Key remove successful: f369367a0b5311172449941235c387e2
2011-03-25 17:40:36.428 OUTPUT:	Purge done.

2011-03-25 17:40:36.428 01565 Wait(10)

2011-03-25 17:40:36.428 Requirement: ODSCC40

2011-03-25 17:40:46.429 01567 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:40:46.429 Requirement: ODSCC40

2011-03-25 17:40:46.429 01570 LoadConfig()
2011-03-25 17:40:46.429 Requirement: ODSCC40
2011-03-25 17:40:46.429 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:40:46.434 - runCommand: Process started, PID: 4683
2011-03-25 17:40:46.434 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T10_conf.xml': No such file or directory
2011-03-25 17:40:46.434 ERROR:	return code = 1

2011-03-25 17:40:46.434 01573 LoadConfig()
2011-03-25 17:40:46.434 Requirement: ODSCC40
2011-03-25 17:40:46.434 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:40:46.438 - runCommand: Process started, PID: 4684
2011-03-25 17:40:46.438 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:40:46.438 ERROR:	return code = 1

2011-03-25 17:40:46.439 01575 Comment: Update all the configs.

2011-03-25 17:40:46.439 Requirement: ODSCC40

2011-03-25 17:40:46.439 01577 ODSSetup()
2011-03-25 17:40:46.439 Requirement: ODSCC40
2011-03-25 17:40:46.439 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:40:57.933 - runCommand: Process started, PID: 4685
2011-03-25 17:40:57.934 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:40:57.935 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:40:57.935 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:40:57.935 OUTPUT:	Repository SoftHSM found
2011-03-25 17:40:57.935 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:40:57.935 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:40:57.935 OUTPUT:	Policy default2 found
2011-03-25 17:40:57.936 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:40:57.936 OUTPUT:	Policy default found
2011-03-25 17:40:57.936 OUTPUT:	Zone ods found
2011-03-25 17:40:57.936 OUTPUT:	Policy set to default.
2011-03-25 17:40:57.936 OUTPUT:	Added zone ods to database
2011-03-25 17:40:57.936 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:40:57.937 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:40:57.937 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:40:57.941 01579 Wait(10)

2011-03-25 17:40:57.941 Requirement: ODSCC40

2011-03-25 17:41:07.946 01581 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:41:07.946 Requirement: ODSCC40

2011-03-25 17:41:07.950 01583 Start()
2011-03-25 17:41:07.950 Requirement: ODSCC40
2011-03-25 17:41:07.950 RunCommand(ods-control start)
2011-03-25 17:41:07.963 - runCommand: Background process started, PID: 4698
2011-03-25 17:41:08.111 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:41:08.134 - runCommand: Process started, PID: 4714
2011-03-25 17:41:08.134 OUTPUT:	ods-enforcerd
2011-03-25 17:41:08.134 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:41:08.150 - runCommand: Process started, PID: 4726
2011-03-25 17:41:08.150 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:41:08.150 01585 Wait(10)

2011-03-25 17:41:08.150 Requirement: ODSCC40

2011-03-25 17:41:18.151 01587 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:41:18.151 Requirement: ODSCC40

2011-03-25 17:41:18.151 01589 Stop()
2011-03-25 17:41:18.151 Requirement: ODSCC40
2011-03-25 17:41:18.151 RunCommand(ods-control stop)
2011-03-25 17:41:19.160 - runCommand: Process started, PID: 4748
2011-03-25 17:41:19.160 OUTPUT:	Stopping enforcer...
2011-03-25 17:41:19.160 OUTPUT:	Stopping signer engine..
2011-03-25 17:41:19.160 OUTPUT:	Engine shut down.
2011-03-25 17:41:19.160 RunCommand(ps -e | grep enforcer)
2011-03-25 17:41:19.171 - runCommand: Process started, PID: 4754
2011-03-25 17:41:19.171 ERROR:	return code = 1
2011-03-25 17:41:19.171 RunCommand(ps -e | grep signer)
2011-03-25 17:41:19.182 - runCommand: Process started, PID: 4757
2011-03-25 17:41:19.182 ERROR:	return code = 1

2011-03-25 17:41:19.182 01592 CheckLog()
2011-03-25 17:41:19.182 Requirement: ODSCC40
2011-03-25 17:41:22.393 FAILED:	(Check for Like) - Expected: all done! hsm_close results: 1 Found: 

2011-03-25 17:41:22.397 01595 CheckLog()
2011-03-25 17:41:22.397 Requirement: ODSCC40
2011-03-25 17:41:24.894 FAILED:	(Check for Like) - Expected: cfgfile /etc/opendnssec/conf.xml has errors Found: 

2011-03-25 17:41:24.894 01598 CheckLog()
2011-03-25 17:41:24.894 Requirement: ODSCC40
2011-03-25 17:41:27.750 FAILED:	(Check for Like) - Expected: Could not start signer Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC40T20: Use default port (1213) for database and configure a false port and check if enforcer fails to connect

2011-03-25 17:41:27.750 01606 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:41:27.750 Requirement: ODSCC40

2011-03-25 17:41:27.751 01608 Stop()
2011-03-25 17:41:27.751 Requirement: ODSCC40
2011-03-25 17:41:27.751 RunCommand(ods-control stop)
2011-03-25 17:41:27.754 - runCommand: Process started, PID: 4760
2011-03-25 17:41:27.754 OUTPUT:	Stopping enforcer...
2011-03-25 17:41:27.754 OUTPUT:	Cannot find PID file
2011-03-25 17:41:27.754 OUTPUT:	Stopping signer engine..
2011-03-25 17:41:27.754 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:41:27.754 ERROR:	return code = 1
2011-03-25 17:41:27.754 RunCommand(ps -e | grep enforcer)
2011-03-25 17:41:27.764 - runCommand: Process started, PID: 4763
2011-03-25 17:41:27.764 ERROR:	return code = 1
2011-03-25 17:41:27.764 RunCommand(ps -e | grep signer)
2011-03-25 17:41:27.774 - runCommand: Process started, PID: 4766
2011-03-25 17:41:27.774 ERROR:	return code = 1

2011-03-25 17:41:27.774 01610 Wait(10)

2011-03-25 17:41:27.774 Requirement: ODSCC40

2011-03-25 17:41:37.775 01612 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:41:37.775 Requirement: ODSCC40

2011-03-25 17:41:37.775 01618 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:41:37.775 Requirement: ODSCC40

2011-03-25 17:41:37.776 01621 PurgeHSM()
2011-03-25 17:41:37.776 Requirement: ODSCC40
2011-03-25 17:41:37.776 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:41:38.138 - runCommand: Process started, PID: 4770
2011-03-25 17:41:38.138 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:41:38.138 OUTPUT:	2 keys found.
2011-03-25 17:41:38.138 OUTPUT:	
2011-03-25 17:41:38.138 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:41:38.138 OUTPUT:	Starting purge...
2011-03-25 17:41:38.138 OUTPUT:	Key remove successful: b4a0d3a08c5634ec135fd7a6ada91987
2011-03-25 17:41:38.138 OUTPUT:	Key remove successful: 34f244a4c96934e484c6902219ddacb4
2011-03-25 17:41:38.138 OUTPUT:	Purge done.

2011-03-25 17:41:38.138 01623 Wait(10)

2011-03-25 17:41:38.138 Requirement: ODSCC40

2011-03-25 17:41:48.139 01625 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:41:48.139 Requirement: ODSCC40

2011-03-25 17:41:48.139 01628 LoadConfig()
2011-03-25 17:41:48.139 Requirement: ODSCC40
2011-03-25 17:41:48.139 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T20_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:41:48.144 - runCommand: Process started, PID: 4774
2011-03-25 17:41:48.144 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T20_conf.xml': No such file or directory
2011-03-25 17:41:48.144 ERROR:	return code = 1

2011-03-25 17:41:48.144 01631 LoadConfig()
2011-03-25 17:41:48.144 Requirement: ODSCC40
2011-03-25 17:41:48.144 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:41:48.148 - runCommand: Process started, PID: 4775
2011-03-25 17:41:48.148 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:41:48.148 ERROR:	return code = 1

2011-03-25 17:41:48.149 01633 Comment: Update all the configs.

2011-03-25 17:41:48.149 Requirement: ODSCC40

2011-03-25 17:41:48.149 01635 ODSSetup()
2011-03-25 17:41:48.149 Requirement: ODSCC40
2011-03-25 17:41:48.149 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:41:58.445 - runCommand: Process started, PID: 4776
2011-03-25 17:41:58.445 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:41:58.445 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:41:58.445 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:41:58.445 OUTPUT:	Repository SoftHSM found
2011-03-25 17:41:58.445 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:41:58.445 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:41:58.445 OUTPUT:	Policy default2 found
2011-03-25 17:41:58.445 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:41:58.445 OUTPUT:	Policy default found
2011-03-25 17:41:58.445 OUTPUT:	Zone ods found
2011-03-25 17:41:58.445 OUTPUT:	Policy set to default.
2011-03-25 17:41:58.445 OUTPUT:	Added zone ods to database
2011-03-25 17:41:58.445 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:41:58.445 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:41:58.445 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:41:58.446 01637 Wait(10)

2011-03-25 17:41:58.446 Requirement: ODSCC40

2011-03-25 17:42:08.446 01639 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:42:08.446 Requirement: ODSCC40

2011-03-25 17:42:08.446 01641 Stop()
2011-03-25 17:42:08.446 Requirement: ODSCC40
2011-03-25 17:42:08.446 RunCommand(ods-control stop)
2011-03-25 17:42:08.452 - runCommand: Process started, PID: 4789
2011-03-25 17:42:08.452 OUTPUT:	Stopping enforcer...
2011-03-25 17:42:08.452 OUTPUT:	Cannot find PID file
2011-03-25 17:42:08.452 OUTPUT:	Stopping signer engine..
2011-03-25 17:42:08.452 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 17:42:08.452 ERROR:	return code = 1
2011-03-25 17:42:08.452 RunCommand(ps -e | grep enforcer)
2011-03-25 17:42:08.467 - runCommand: Process started, PID: 4792
2011-03-25 17:42:08.467 ERROR:	return code = 1
2011-03-25 17:42:08.467 RunCommand(ps -e | grep signer)
2011-03-25 17:42:08.482 - runCommand: Process started, PID: 4795
2011-03-25 17:42:08.482 ERROR:	return code = 1

2011-03-25 17:42:08.483 01643 Comment: all done! hsm_close results: 1

2011-03-25 17:42:08.483 Requirement: ODSCC40

2011-03-25 17:42:08.483 01645 Start()
2011-03-25 17:42:08.483 Requirement: ODSCC40
2011-03-25 17:42:08.483 RunCommand(ods-control start)
2011-03-25 17:42:08.484 - runCommand: Background process started, PID: 4798
2011-03-25 17:42:09.509 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:42:09.529 - runCommand: Process started, PID: 4814
2011-03-25 17:42:09.529 OUTPUT:	ods-enforcerd
2011-03-25 17:42:09.529 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:42:09.548 - runCommand: Process started, PID: 4826
2011-03-25 17:42:09.548 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:42:09.548 01647 Wait(10)

2011-03-25 17:42:09.548 Requirement: ODSCC40

2011-03-25 17:42:19.549 01650 CheckLog()
2011-03-25 17:42:19.549 Requirement: ODSCC40
2011-03-25 17:42:22.408 FAILED:	(Check for Like) - Expected: element Datastore: Relax-NG validity error : Did not expect element Datastore there Found: 

2011-03-25 17:42:22.409 01653 CheckLog()
2011-03-25 17:42:22.409 Requirement: ODSCC40
2011-03-25 17:42:25.261 FAILED:	(Check for Like) - Expected: cfgfile /etc/opendnssec/conf.xml has errors Found: 

2011-03-25 17:42:25.262 01656 CheckLog()
2011-03-25 17:42:25.262 Requirement: ODSCC40
2011-03-25 17:42:28.115 FAILED:	(Check for Like) - Expected: Could not start signer Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC40T30: Use a different port for both database and config and check if enforcer successfully connects

2011-03-25 17:42:28.116 01662 Comment: MySQL port is 3307 instead of 3306. Changed in config.xml and my.cnf

2011-03-25 17:42:28.116 Requirement: ODSCC40

2011-03-25 17:42:28.116 01663 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:42:28.116 Requirement: ODSCC40

2011-03-25 17:42:28.116 01665 Stop()
2011-03-25 17:42:28.116 Requirement: ODSCC40
2011-03-25 17:42:28.116 RunCommand(ods-control stop)
2011-03-25 17:42:29.125 - runCommand: Process started, PID: 4848
2011-03-25 17:42:29.125 OUTPUT:	Stopping enforcer...
2011-03-25 17:42:29.125 OUTPUT:	Stopping signer engine..
2011-03-25 17:42:29.125 OUTPUT:	Engine shut down.
2011-03-25 17:42:29.125 RunCommand(ps -e | grep enforcer)
2011-03-25 17:42:29.141 - runCommand: Process started, PID: 4854
2011-03-25 17:42:29.141 ERROR:	return code = 1
2011-03-25 17:42:29.141 RunCommand(ps -e | grep signer)
2011-03-25 17:42:29.157 - runCommand: Process started, PID: 4857
2011-03-25 17:42:29.157 ERROR:	return code = 1

2011-03-25 17:42:29.158 01667 Wait(10)

2011-03-25 17:42:29.158 Requirement: ODSCC40

2011-03-25 17:42:39.158 01669 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:42:39.158 Requirement: ODSCC40

2011-03-25 17:42:39.159 01675 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:42:39.159 Requirement: ODSCC40

2011-03-25 17:42:39.159 01678 PurgeHSM()
2011-03-25 17:42:39.159 Requirement: ODSCC40
2011-03-25 17:42:39.159 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:42:39.556 - runCommand: Process started, PID: 4860
2011-03-25 17:42:39.557 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:42:39.557 OUTPUT:	2 keys found.
2011-03-25 17:42:39.557 OUTPUT:	
2011-03-25 17:42:39.557 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:42:39.557 OUTPUT:	Starting purge...
2011-03-25 17:42:39.557 OUTPUT:	Key remove successful: 928067831ca739ef261b96428dc2c9be
2011-03-25 17:42:39.557 OUTPUT:	Key remove successful: 48d33aabd94726adc29475df2e10b9f4
2011-03-25 17:42:39.557 OUTPUT:	Purge done.

2011-03-25 17:42:39.557 01680 Wait(10)

2011-03-25 17:42:39.557 Requirement: ODSCC40

2011-03-25 17:42:49.558 01682 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-25 17:42:49.558 Requirement: ODSCC40

2011-03-25 17:42:49.558 01688 Wait(60)

2011-03-25 17:42:49.558 Requirement: ODSCC40

2011-03-25 17:43:49.558 01692 Wait(60)

2011-03-25 17:43:49.558 Requirement: ODSCC40

2011-03-25 17:44:49.559 01696 Wait(60)

2011-03-25 17:44:49.559 Requirement: ODSCC40

2011-03-25 17:45:49.559 01698 Comment: After installation replace the original mysql config file with the adjusted one. Port is 3307 instead of the standard 3306 port.

2011-03-25 17:45:49.560 Requirement: ODSCC40

2011-03-25 17:45:49.560 01702 Comment: Update the mySQL configuration

2011-03-25 17:45:49.560 Requirement: ODSCC40

2011-03-25 17:45:49.560 01706 Wait(10)

2011-03-25 17:45:49.560 Requirement: ODSCC40

2011-03-25 17:45:59.561 01709 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:45:59.561 Requirement: ODSCC40

2011-03-25 17:45:59.561 01712 LoadConfig()
2011-03-25 17:45:59.561 Requirement: ODSCC40
2011-03-25 17:45:59.561 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T30_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:45:59.566 - runCommand: Process started, PID: 4864
2011-03-25 17:45:59.566 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T30_conf.xml': No such file or directory
2011-03-25 17:45:59.566 ERROR:	return code = 1

2011-03-25 17:45:59.566 01715 LoadConfig()
2011-03-25 17:45:59.566 Requirement: ODSCC40
2011-03-25 17:45:59.566 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:45:59.570 - runCommand: Process started, PID: 4865
2011-03-25 17:45:59.570 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:45:59.570 ERROR:	return code = 1

2011-03-25 17:45:59.571 01717 Comment: Run setup for rebuild of database

2011-03-25 17:45:59.571 Requirement: ODSCC40

2011-03-25 17:45:59.571 01721 Wait(20)

2011-03-25 17:45:59.571 Requirement: ODSCC40

2011-03-25 17:46:19.571 01723 Comment: Update all the configs.

2011-03-25 17:46:19.571 Requirement: ODSCC40

2011-03-25 17:46:19.572 01725 ODSSetup()
2011-03-25 17:46:19.572 Requirement: ODSCC40
2011-03-25 17:46:19.572 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:46:30.979 - runCommand: Process started, PID: 4866
2011-03-25 17:46:30.980 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:46:30.981 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:46:30.981 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:46:30.981 OUTPUT:	Repository SoftHSM found
2011-03-25 17:46:30.981 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:46:30.981 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:46:30.981 OUTPUT:	Policy default2 found
2011-03-25 17:46:30.982 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:46:30.982 OUTPUT:	Policy default found
2011-03-25 17:46:30.982 OUTPUT:	Zone ods found
2011-03-25 17:46:30.982 OUTPUT:	Policy set to default.
2011-03-25 17:46:30.982 OUTPUT:	Added zone ods to database
2011-03-25 17:46:30.982 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:46:30.983 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:46:30.983 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:46:30.987 01727 Wait(10)

2011-03-25 17:46:30.987 Requirement: ODSCC40

2011-03-25 17:46:40.992 01729 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:46:40.992 Requirement: ODSCC40

2011-03-25 17:46:40.995 01731 Start()
2011-03-25 17:46:40.996 Requirement: ODSCC40
2011-03-25 17:46:40.996 RunCommand(ods-control start)
2011-03-25 17:46:40.100 - runCommand: Background process started, PID: 4879
2011-03-25 17:46:41.115 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:46:41.141 - runCommand: Process started, PID: 4896
2011-03-25 17:46:41.141 OUTPUT:	ods-enforcerd
2011-03-25 17:46:41.141 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:46:41.156 - runCommand: Process started, PID: 4908
2011-03-25 17:46:41.156 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:46:41.157 01733 Wait(10)

2011-03-25 17:46:41.157 Requirement: ODSCC40

2011-03-25 17:46:51.157 01736 CheckLog()
2011-03-25 17:46:51.157 Requirement: ODSCC40
2011-03-25 17:46:54.238 PASSED:	(Check for Like) - Expected: signer engine started Found: Mar 25 17:46:41 DEVELOPER15 ods-signerd: signer engine started

2011-03-25 17:46:54.241 01739 Comment: Log should be checked

2011-03-25 17:46:54.241 Requirement: ODSCC40

2011-03-25 17:46:54.243 01742 Comment: Restore old config file mySQL

2011-03-25 17:46:54.243 Requirement: ODSCC40

2011-03-25 17:46:54.245 01746 Comment: Update the mySQL configuration

2011-03-25 17:46:54.246 Requirement: ODSCC40

-------------------------------------------------------------------------------
Testcase - ODSCC40T40: Use a different Hostname for database and check if enforcer fails to connect

2011-03-25 17:46:54.251 01754 Comment: Hostname is changed in conf.xml to "ods-db", port is the standard 3306 port.

2011-03-25 17:46:54.251 Requirement: ODSCC40

2011-03-25 17:46:54.253 01756 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:46:54.253 Requirement: ODSCC40

2011-03-25 17:46:54.255 01758 Stop()
2011-03-25 17:46:54.255 Requirement: ODSCC40
2011-03-25 17:46:54.256 RunCommand(ods-control stop)
2011-03-25 17:46:55.326 - runCommand: Process started, PID: 4930
2011-03-25 17:46:55.327 OUTPUT:	Stopping enforcer...
2011-03-25 17:46:55.327 OUTPUT:	Stopping signer engine..
2011-03-25 17:46:55.327 OUTPUT:	Engine shut down.
2011-03-25 17:46:55.328 RunCommand(ps -e | grep enforcer)
2011-03-25 17:46:55.481 - runCommand: Process started, PID: 4936
2011-03-25 17:46:55.481 ERROR:	return code = 1
2011-03-25 17:46:55.482 RunCommand(ps -e | grep signer)
2011-03-25 17:46:55.581 - runCommand: Process started, PID: 4939
2011-03-25 17:46:55.582 ERROR:	return code = 1

2011-03-25 17:46:55.584 01760 Wait(10)

2011-03-25 17:46:55.584 Requirement: ODSCC40

2011-03-25 17:47:05.589 01762 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:47:05.589 Requirement: ODSCC40

2011-03-25 17:47:05.593 01768 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:47:05.593 Requirement: ODSCC40

2011-03-25 17:47:05.597 01771 PurgeHSM()
2011-03-25 17:47:05.597 Requirement: ODSCC40
2011-03-25 17:47:05.597 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:47:05.429 - runCommand: Process started, PID: 4942
2011-03-25 17:47:05.429 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:47:05.429 OUTPUT:	2 keys found.
2011-03-25 17:47:05.429 OUTPUT:	
2011-03-25 17:47:05.429 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:47:05.429 OUTPUT:	Starting purge...
2011-03-25 17:47:05.429 OUTPUT:	Key remove successful: 51060270d998af21f32f69750d34721e
2011-03-25 17:47:05.429 OUTPUT:	Key remove successful: f364256e48c63eb58b7319a7cbe4af19
2011-03-25 17:47:05.429 OUTPUT:	Purge done.

2011-03-25 17:47:05.429 01773 Wait(10)

2011-03-25 17:47:05.429 Requirement: ODSCC40

2011-03-25 17:47:15.430 01776 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-25 17:47:15.430 Requirement: ODSCC40

2011-03-25 17:47:15.430 01782 Wait(60)

2011-03-25 17:47:15.430 Requirement: ODSCC40

2011-03-25 17:48:15.431 01786 Wait(60)

2011-03-25 17:48:15.431 Requirement: ODSCC40

2011-03-25 17:49:15.431 01790 Wait(60)

2011-03-25 17:49:15.431 Requirement: ODSCC40

2011-03-25 17:50:15.432 01792 Comment: After installation replace the original mysql config file with the adjusted one. Port is standard: 3306 port.

2011-03-25 17:50:15.432 Requirement: ODSCC40

2011-03-25 17:50:15.432 01796 Comment: Update the mySQL configuration

2011-03-25 17:50:15.432 Requirement: ODSCC40

2011-03-25 17:50:15.433 01800 Wait(10)

2011-03-25 17:50:15.433 Requirement: ODSCC40

2011-03-25 17:50:25.433 01803 Comment: Change the configuration with predefined xml config files.

2011-03-25 17:50:25.433 Requirement: ODSCC40

2011-03-25 17:50:25.433 01806 LoadConfig()
2011-03-25 17:50:25.434 Requirement: ODSCC40
2011-03-25 17:50:25.434 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T40_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:50:25.438 - runCommand: Process started, PID: 4948
2011-03-25 17:50:25.438 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T40_conf.xml': No such file or directory
2011-03-25 17:50:25.438 ERROR:	return code = 1

2011-03-25 17:50:25.438 01809 LoadConfig()
2011-03-25 17:50:25.438 Requirement: ODSCC40
2011-03-25 17:50:25.438 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:50:25.442 - runCommand: Process started, PID: 4949
2011-03-25 17:50:25.442 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:50:25.442 ERROR:	return code = 1

2011-03-25 17:50:25.443 01811 Comment: Run setup for rebuild of database

2011-03-25 17:50:25.443 Requirement: ODSCC40

2011-03-25 17:50:25.443 01815 Wait(20)

2011-03-25 17:50:25.443 Requirement: ODSCC40

2011-03-25 17:50:45.444 01817 Comment: Update all the configs.

2011-03-25 17:50:45.444 Requirement: ODSCC40

2011-03-25 17:50:45.444 01819 ODSSetup()
2011-03-25 17:50:45.444 Requirement: ODSCC40
2011-03-25 17:50:45.444 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:50:55.662 - runCommand: Process started, PID: 4950
2011-03-25 17:50:55.662 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:50:55.662 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:50:55.662 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:50:55.662 OUTPUT:	Repository SoftHSM found
2011-03-25 17:50:55.662 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:50:55.662 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:50:55.662 OUTPUT:	Policy default2 found
2011-03-25 17:50:55.662 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:50:55.662 OUTPUT:	Policy default found
2011-03-25 17:50:55.662 OUTPUT:	Zone ods found
2011-03-25 17:50:55.662 OUTPUT:	Policy set to default.
2011-03-25 17:50:55.662 OUTPUT:	Added zone ods to database
2011-03-25 17:50:55.662 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:50:55.662 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:50:55.662 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:50:55.662 01821 Wait(10)

2011-03-25 17:50:55.662 Requirement: ODSCC40

2011-03-25 17:51:05.663 01823 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:51:05.663 Requirement: ODSCC40

2011-03-25 17:51:05.663 01825 Start()
2011-03-25 17:51:05.663 Requirement: ODSCC40
2011-03-25 17:51:05.663 RunCommand(ods-control start)
2011-03-25 17:51:05.665 - runCommand: Background process started, PID: 4963
2011-03-25 17:51:06.682 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:51:06.694 - runCommand: Process started, PID: 4980
2011-03-25 17:51:06.694 OUTPUT:	ods-enforcerd
2011-03-25 17:51:06.694 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:51:06.711 - runCommand: Process started, PID: 4984
2011-03-25 17:51:06.711 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:51:06.711 01827 Wait(10)

2011-03-25 17:51:06.711 Requirement: ODSCC40

2011-03-25 17:51:16.712 01830 CheckLog()
2011-03-25 17:51:16.712 Requirement: ODSCC40
2011-03-25 17:51:19.576 PASSED:	(Check for Like) - Expected:  Found: Mar 25 17:51:05 DEVELOPER15 ods-enforcerd: HSM opened successfully.

2011-03-25 17:51:19.576 01833 CheckLog()
2011-03-25 17:51:19.576 Requirement: ODSCC40
2011-03-25 17:51:22.432 PASSED:	(Check for Like) - Expected:  Found: Mar 25 17:51:05 DEVELOPER15 ods-enforcerd: HSM opened successfully.

2011-03-25 17:51:22.432 01836 CheckLog()
2011-03-25 17:51:22.432 Requirement: ODSCC40
2011-03-25 17:51:25.290 FAILED:	(Check for Like) - Expected: Could not start signer Found: 

2011-03-25 17:51:25.291 01838 Comment: Restore old config file mySQL

2011-03-25 17:51:25.291 Requirement: ODSCC40

2011-03-25 17:51:25.291 01842 Comment: Update the mySQL configuration

2011-03-25 17:51:25.291 Requirement: ODSCC40

-------------------------------------------------------------------------------
Testcase - ODSCC40T50: Use a different Hostname for both database and config and check if enforcer successfully connects

2011-03-25 17:51:25.291 01850 Comment: Hostname is changed in conf.xml to "mysqlhost". This host is also in the hosts file in Unix.

2011-03-25 17:51:25.291 Requirement: ODSCC40

2011-03-25 17:51:25.292 01852 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:51:25.292 Requirement: ODSCC40

2011-03-25 17:51:25.292 01854 Stop()
2011-03-25 17:51:25.292 Requirement: ODSCC40
2011-03-25 17:51:25.292 RunCommand(ods-control stop)
2011-03-25 17:51:26.299 - runCommand: Process started, PID: 5014
2011-03-25 17:51:26.299 OUTPUT:	Stopping enforcer...
2011-03-25 17:51:26.299 OUTPUT:	Stopping signer engine..
2011-03-25 17:51:26.299 OUTPUT:	Engine shut down.
2011-03-25 17:51:26.299 RunCommand(ps -e | grep enforcer)
2011-03-25 17:51:26.315 - runCommand: Process started, PID: 5020
2011-03-25 17:51:26.315 ERROR:	return code = 1
2011-03-25 17:51:26.315 RunCommand(ps -e | grep signer)
2011-03-25 17:51:26.328 - runCommand: Process started, PID: 5023
2011-03-25 17:51:26.328 ERROR:	return code = 1

2011-03-25 17:51:26.328 01856 Wait(10)

2011-03-25 17:51:26.328 Requirement: ODSCC40

2011-03-25 17:51:36.329 01858 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:51:36.329 Requirement: ODSCC40

2011-03-25 17:51:36.329 01864 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:51:36.329 Requirement: ODSCC40

2011-03-25 17:51:36.330 01867 PurgeHSM()
2011-03-25 17:51:36.330 Requirement: ODSCC40
2011-03-25 17:51:36.330 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:51:36.665 - runCommand: Process started, PID: 5026
2011-03-25 17:51:36.665 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:51:36.665 OUTPUT:	2 keys found.
2011-03-25 17:51:36.665 OUTPUT:	
2011-03-25 17:51:36.665 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:51:36.665 OUTPUT:	Starting purge...
2011-03-25 17:51:36.665 OUTPUT:	Key remove successful: df98443eea7544d8ebd5004c2e59e3c1
2011-03-25 17:51:36.665 OUTPUT:	Key remove successful: 46799b82a6de987b94b37d2654ce6e19
2011-03-25 17:51:36.665 OUTPUT:	Purge done.

2011-03-25 17:51:36.666 01869 Wait(10)

2011-03-25 17:51:36.666 Requirement: ODSCC40

2011-03-25 17:51:46.666 01871 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-25 17:51:46.666 Requirement: ODSCC40

2011-03-25 17:51:46.666 01877 Wait(60)

2011-03-25 17:51:46.666 Requirement: ODSCC40

2011-03-25 17:52:46.667 01881 Wait(60)

2011-03-25 17:52:46.667 Requirement: ODSCC40

2011-03-25 17:53:46.667 01885 Wait(60)

2011-03-25 17:53:46.667 Requirement: ODSCC40

2011-03-25 17:54:46.668 01887 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-25 17:54:46.668 Requirement: ODSCC40

2011-03-25 17:54:46.668 01891 Wait(10)

2011-03-25 17:54:46.668 Requirement: ODSCC40

2011-03-25 17:54:56.669 01894 Comment: Change the configuration with predefined xml config files. Hostname is mysqlhost.

2011-03-25 17:54:56.669 Requirement: ODSCC40

2011-03-25 17:54:56.669 01897 LoadConfig()
2011-03-25 17:54:56.669 Requirement: ODSCC40
2011-03-25 17:54:56.669 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T50_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:54:56.673 - runCommand: Process started, PID: 5030
2011-03-25 17:54:56.674 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T50_conf.xml': No such file or directory
2011-03-25 17:54:56.674 ERROR:	return code = 1

2011-03-25 17:54:56.674 01900 LoadConfig()
2011-03-25 17:54:56.674 Requirement: ODSCC40
2011-03-25 17:54:56.674 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:54:56.678 - runCommand: Process started, PID: 5031
2011-03-25 17:54:56.678 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:54:56.678 ERROR:	return code = 1

2011-03-25 17:54:56.678 01902 Comment: Run setup for rebuild of database

2011-03-25 17:54:56.678 Requirement: ODSCC40

2011-03-25 17:54:56.679 01906 Wait(20)

2011-03-25 17:54:56.679 Requirement: ODSCC40

2011-03-25 17:55:16.679 01908 Comment: Update all the configs.

2011-03-25 17:55:16.679 Requirement: ODSCC40

2011-03-25 17:55:16.680 01910 ODSSetup()
2011-03-25 17:55:16.680 Requirement: ODSCC40
2011-03-25 17:55:16.680 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:55:27.398 - runCommand: Process started, PID: 5032
2011-03-25 17:55:27.399 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:55:27.399 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:55:27.399 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:55:27.400 OUTPUT:	Repository SoftHSM found
2011-03-25 17:55:27.400 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:55:27.400 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:55:27.400 OUTPUT:	Policy default2 found
2011-03-25 17:55:27.400 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:55:27.400 OUTPUT:	Policy default found
2011-03-25 17:55:27.401 OUTPUT:	Zone ods found
2011-03-25 17:55:27.401 OUTPUT:	Policy set to default.
2011-03-25 17:55:27.401 OUTPUT:	Added zone ods to database
2011-03-25 17:55:27.401 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:55:27.401 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:55:27.401 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:55:27.405 01912 Wait(10)

2011-03-25 17:55:27.406 Requirement: ODSCC40

2011-03-25 17:55:37.410 01914 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 17:55:37.411 Requirement: ODSCC40

2011-03-25 17:55:37.414 01916 Start()
2011-03-25 17:55:37.415 Requirement: ODSCC40
2011-03-25 17:55:37.415 RunCommand(ods-control start)
2011-03-25 17:55:37.428 - runCommand: Background process started, PID: 5045
2011-03-25 17:55:38.598 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 17:55:38.811 - runCommand: Process started, PID: 5061
2011-03-25 17:55:38.811 OUTPUT:	ods-enforcerd
2011-03-25 17:55:38.811 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 17:55:38.100 - runCommand: Process started, PID: 5066
2011-03-25 17:55:38.100 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 17:55:38.100 01918 Wait(10)

2011-03-25 17:55:38.100 Requirement: ODSCC40

2011-03-25 17:55:48.101 01921 CheckLog()
2011-03-25 17:55:48.101 Requirement: ODSCC40
2011-03-25 17:55:50.964 PASSED:	(Check for Like) - Expected:  Found: Mar 25 17:55:37 DEVELOPER15 ods-enforcerd: HSM opened successfully.

2011-03-25 17:55:50.965 01924 CheckLog()
2011-03-25 17:55:50.965 Requirement: ODSCC40
2011-03-25 17:55:53.824 FAILED:	(Check for Like) - Expected: Could not start signer Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC40T60: Use a different database name for database and check if enforcer fails to connect

2011-03-25 17:55:53.824 01930 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 17:55:53.824 Requirement: ODSCC40

2011-03-25 17:55:53.825 01932 Wait(10)

2011-03-25 17:55:53.825 Requirement: ODSCC40

2011-03-25 17:56:03.825 01934 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 17:56:03.825 Requirement: ODSCC40

2011-03-25 17:56:03.826 01940 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 17:56:03.826 Requirement: ODSCC40

2011-03-25 17:56:03.826 01943 PurgeHSM()
2011-03-25 17:56:03.826 Requirement: ODSCC40
2011-03-25 17:56:03.826 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 17:56:04.170 - runCommand: Process started, PID: 5096
2011-03-25 17:56:04.170 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 17:56:04.170 OUTPUT:	2 keys found.
2011-03-25 17:56:04.170 OUTPUT:	
2011-03-25 17:56:04.170 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 17:56:04.170 OUTPUT:	Starting purge...
2011-03-25 17:56:04.170 OUTPUT:	Key remove successful: ba20b690a130cfa131a4b8f20c514dfa
2011-03-25 17:56:04.170 OUTPUT:	Key remove successful: 82d616fdc75e053e592b29794f4a9a46
2011-03-25 17:56:04.170 OUTPUT:	Purge done.

2011-03-25 17:56:04.170 01945 Wait(10)

2011-03-25 17:56:04.170 Requirement: ODSCC40

2011-03-25 17:56:14.171 01948 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-25 17:56:14.171 Requirement: ODSCC40

2011-03-25 17:56:14.171 01954 Wait(60)

2011-03-25 17:56:14.171 Requirement: ODSCC40

2011-03-25 17:57:14.172 01958 Wait(60)

2011-03-25 17:57:14.172 Requirement: ODSCC40

2011-03-25 17:58:14.172 01962 Wait(60)

2011-03-25 17:58:14.172 Requirement: ODSCC40

2011-03-25 17:59:14.173 01964 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-25 17:59:14.173 Requirement: ODSCC40

2011-03-25 17:59:14.173 01968 Wait(10)

2011-03-25 17:59:14.173 Requirement: ODSCC40

2011-03-25 17:59:24.174 01971 Comment: Change the configuration with predefined xml config files. Database name is KASPFOUT.

2011-03-25 17:59:24.174 Requirement: ODSCC40

2011-03-25 17:59:24.174 01974 LoadConfig()
2011-03-25 17:59:24.174 Requirement: ODSCC40
2011-03-25 17:59:24.174 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T60_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 17:59:24.178 - runCommand: Process started, PID: 5102
2011-03-25 17:59:24.178 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T60_conf.xml': No such file or directory
2011-03-25 17:59:24.178 ERROR:	return code = 1

2011-03-25 17:59:24.179 01977 LoadConfig()
2011-03-25 17:59:24.179 Requirement: ODSCC40
2011-03-25 17:59:24.179 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 17:59:24.183 - runCommand: Process started, PID: 5103
2011-03-25 17:59:24.183 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 17:59:24.183 ERROR:	return code = 1

2011-03-25 17:59:24.183 01979 Comment: Run setup for rebuild of database

2011-03-25 17:59:24.183 Requirement: ODSCC40

2011-03-25 17:59:24.184 01983 Wait(20)

2011-03-25 17:59:24.184 Requirement: ODSCC40

2011-03-25 17:59:44.184 01985 Comment: Update all the configs.

2011-03-25 17:59:44.184 Requirement: ODSCC40

2011-03-25 17:59:44.185 01987 ODSSetup()
2011-03-25 17:59:44.185 Requirement: ODSCC40
2011-03-25 17:59:44.185 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 17:59:54.661 - runCommand: Process started, PID: 5115
2011-03-25 17:59:54.661 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 17:59:54.661 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 17:59:54.661 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 17:59:54.661 OUTPUT:	Repository SoftHSM found
2011-03-25 17:59:54.661 OUTPUT:	No Maximum Capacity set.
2011-03-25 17:59:54.661 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 17:59:54.661 OUTPUT:	Policy default2 found
2011-03-25 17:59:54.661 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 17:59:54.661 OUTPUT:	Policy default found
2011-03-25 17:59:54.661 OUTPUT:	Zone ods found
2011-03-25 17:59:54.661 OUTPUT:	Policy set to default.
2011-03-25 17:59:54.661 OUTPUT:	Added zone ods to database
2011-03-25 17:59:54.661 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 17:59:54.661 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 17:59:54.661 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 17:59:54.661 01989 Wait(10)

2011-03-25 17:59:54.661 Requirement: ODSCC40

2011-03-25 18:00:04.662 01991 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 18:00:04.662 Requirement: ODSCC40

2011-03-25 18:00:04.662 01993 Start()
2011-03-25 18:00:04.662 Requirement: ODSCC40
2011-03-25 18:00:04.662 RunCommand(ods-control start)
2011-03-25 18:00:04.664 - runCommand: Background process started, PID: 5128
2011-03-25 18:00:04.670 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 18:00:04.685 - runCommand: Process started, PID: 5135
2011-03-25 18:00:04.686 OUTPUT:	ods-enforcerd
2011-03-25 18:00:04.686 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 18:00:04.704 - runCommand: Process started, PID: 5139
2011-03-25 18:00:04.704 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 18:00:04.704 01995 Wait(10)

2011-03-25 18:00:04.704 Requirement: ODSCC40

2011-03-25 18:00:14.704 01998 CheckLog()
2011-03-25 18:00:14.704 Requirement: ODSCC40
2011-03-25 18:00:17.567 FAILED:	(Check for Like) - Expected: Could not start signer Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC40T70: Use a different Database name for both database and config and check if enforcer successfully connects

2011-03-25 18:00:17.567 02004 Comment: Databasename is changed in conf.xml to "KASPTEST"

2011-03-25 18:00:17.567 Requirement: ODSCC40

2011-03-25 18:00:17.568 02006 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 18:00:17.568 Requirement: ODSCC40

2011-03-25 18:00:17.568 02008 Stop()
2011-03-25 18:00:17.568 Requirement: ODSCC40
2011-03-25 18:00:17.568 RunCommand(ods-control stop)
2011-03-25 18:00:18.574 - runCommand: Process started, PID: 5144
2011-03-25 18:00:18.574 OUTPUT:	Stopping enforcer...
2011-03-25 18:00:18.574 OUTPUT:	Stopping signer engine..
2011-03-25 18:00:18.574 OUTPUT:	Engine shut down.
2011-03-25 18:00:18.574 RunCommand(ps -e | grep enforcer)
2011-03-25 18:00:18.589 - runCommand: Process started, PID: 5150
2011-03-25 18:00:18.589 ERROR:	return code = 1
2011-03-25 18:00:18.589 RunCommand(ps -e | grep signer)
2011-03-25 18:00:18.599 - runCommand: Process started, PID: 5153
2011-03-25 18:00:18.599 ERROR:	return code = 1

2011-03-25 18:00:18.599 02010 Wait(10)

2011-03-25 18:00:18.600 Requirement: ODSCC40

2011-03-25 18:00:28.600 02012 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 18:00:28.600 Requirement: ODSCC40

2011-03-25 18:00:28.600 02018 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 18:00:28.600 Requirement: ODSCC40

2011-03-25 18:00:28.601 02021 PurgeHSM()
2011-03-25 18:00:28.601 Requirement: ODSCC40
2011-03-25 18:00:28.601 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 18:00:28.614 - runCommand: Process started, PID: 5156
2011-03-25 18:00:28.614 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 18:00:28.614 OUTPUT:	0 keys found.
2011-03-25 18:00:28.614 ERROR:	return code = 255

2011-03-25 18:00:28.614 02023 Wait(10)

2011-03-25 18:00:28.614 Requirement: ODSCC40

2011-03-25 18:00:38.615 02025 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-25 18:00:38.615 Requirement: ODSCC40

2011-03-25 18:00:38.615 02031 Wait(60)

2011-03-25 18:00:38.615 Requirement: ODSCC40

2011-03-25 18:01:38.616 02035 Wait(60)

2011-03-25 18:01:38.616 Requirement: ODSCC40

2011-03-25 18:02:38.616 02039 Wait(60)

2011-03-25 18:02:38.616 Requirement: ODSCC40

2011-03-25 18:03:38.617 02041 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-25 18:03:38.617 Requirement: ODSCC40

2011-03-25 18:03:38.617 02045 Wait(10)

2011-03-25 18:03:38.617 Requirement: ODSCC40

2011-03-25 18:03:48.618 02048 Comment: Change the configuration with predefined xml config files. Database name is KASPTEST.

2011-03-25 18:03:48.618 Requirement: ODSCC40

2011-03-25 18:03:48.618 02051 LoadConfig()
2011-03-25 18:03:48.618 Requirement: ODSCC40
2011-03-25 18:03:48.618 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T70_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:03:48.622 - runCommand: Process started, PID: 5162
2011-03-25 18:03:48.622 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T70_conf.xml': No such file or directory
2011-03-25 18:03:48.622 ERROR:	return code = 1

2011-03-25 18:03:48.623 02054 LoadConfig()
2011-03-25 18:03:48.623 Requirement: ODSCC40
2011-03-25 18:03:48.623 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 18:03:48.627 - runCommand: Process started, PID: 5163
2011-03-25 18:03:48.627 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 18:03:48.627 ERROR:	return code = 1

2011-03-25 18:03:48.627 02056 Comment: Run setup for rebuild of database

2011-03-25 18:03:48.627 Requirement: ODSCC40

2011-03-25 18:03:48.628 02060 Wait(20)

2011-03-25 18:03:48.628 Requirement: ODSCC40

2011-03-25 18:04:08.628 02062 Comment: Update all the configs.

2011-03-25 18:04:08.628 Requirement: ODSCC40

2011-03-25 18:04:08.629 02064 ODSSetup()
2011-03-25 18:04:08.629 Requirement: ODSCC40
2011-03-25 18:04:08.629 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:04:19.184 - runCommand: Process started, PID: 5164
2011-03-25 18:04:19.184 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:04:19.184 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:04:19.184 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:04:19.184 OUTPUT:	Repository SoftHSM found
2011-03-25 18:04:19.184 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:04:19.184 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:04:19.184 OUTPUT:	Policy default2 found
2011-03-25 18:04:19.184 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:04:19.184 OUTPUT:	Policy default found
2011-03-25 18:04:19.184 OUTPUT:	Zone ods found
2011-03-25 18:04:19.184 OUTPUT:	Policy set to default.
2011-03-25 18:04:19.184 OUTPUT:	Added zone ods to database
2011-03-25 18:04:19.184 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:04:19.184 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:04:19.184 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 18:04:19.184 02066 Wait(10)

2011-03-25 18:04:19.184 Requirement: ODSCC40

2011-03-25 18:04:29.185 02068 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 18:04:29.185 Requirement: ODSCC40

2011-03-25 18:04:29.185 02070 Start()
2011-03-25 18:04:29.185 Requirement: ODSCC40
2011-03-25 18:04:29.185 RunCommand(ods-control start)
2011-03-25 18:04:29.187 - runCommand: Background process started, PID: 5177
2011-03-25 18:04:30.204 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 18:04:30.223 - runCommand: Process started, PID: 5193
2011-03-25 18:04:30.223 OUTPUT:	ods-enforcerd
2011-03-25 18:04:30.223 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 18:04:30.237 - runCommand: Process started, PID: 5198
2011-03-25 18:04:30.237 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 18:04:30.237 02072 Wait(10)

2011-03-25 18:04:30.237 Requirement: ODSCC40

2011-03-25 18:04:40.238 02075 CheckLog()
2011-03-25 18:04:40.238 Requirement: ODSCC40
2011-03-25 18:04:43.105 PASSED:	(Check for Like) - Expected: signer engine started Found: Mar 25 18:04:30 DEVELOPER15 ods-signerd: signer engine started

-------------------------------------------------------------------------------
Testcase - ODSCC40T80: Use a different Username for database and check if enforcer fails to connect

2011-03-25 18:04:43.105 02084 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 18:04:43.105 Requirement: ODSCC40

2011-03-25 18:04:43.105 02086 Stop()
2011-03-25 18:04:43.105 Requirement: ODSCC40
2011-03-25 18:04:43.105 RunCommand(ods-control stop)
2011-03-25 18:04:44.112 - runCommand: Process started, PID: 5228
2011-03-25 18:04:44.112 OUTPUT:	Stopping enforcer...
2011-03-25 18:04:44.112 OUTPUT:	Stopping signer engine..
2011-03-25 18:04:44.112 OUTPUT:	Engine shut down.
2011-03-25 18:04:44.112 RunCommand(ps -e | grep enforcer)
2011-03-25 18:04:44.128 - runCommand: Process started, PID: 5234
2011-03-25 18:04:44.129 ERROR:	return code = 1
2011-03-25 18:04:44.129 RunCommand(ps -e | grep signer)
2011-03-25 18:04:44.146 - runCommand: Process started, PID: 5237
2011-03-25 18:04:44.146 ERROR:	return code = 1

2011-03-25 18:04:44.146 02088 Wait(10)

2011-03-25 18:04:44.146 Requirement: ODSCC40

2011-03-25 18:04:54.147 02090 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 18:04:54.147 Requirement: ODSCC40

2011-03-25 18:04:54.147 02096 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 18:04:54.147 Requirement: ODSCC40

2011-03-25 18:04:54.147 02099 PurgeHSM()
2011-03-25 18:04:54.147 Requirement: ODSCC40
2011-03-25 18:04:54.148 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 18:04:54.548 - runCommand: Process started, PID: 5240
2011-03-25 18:04:54.548 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 18:04:54.548 OUTPUT:	2 keys found.
2011-03-25 18:04:54.548 OUTPUT:	
2011-03-25 18:04:54.548 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 18:04:54.548 OUTPUT:	Starting purge...
2011-03-25 18:04:54.548 OUTPUT:	Key remove successful: 7fc6df0c6ccb34ac48a3107cec85d51a
2011-03-25 18:04:54.548 OUTPUT:	Key remove successful: 8aabb094fb8bc74fe4a53874d357ecbe
2011-03-25 18:04:54.548 OUTPUT:	Purge done.

2011-03-25 18:04:54.549 02101 Wait(10)

2011-03-25 18:04:54.549 Requirement: ODSCC40

2011-03-25 18:05:04.549 02103 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-25 18:05:04.549 Requirement: ODSCC40

2011-03-25 18:05:04.550 02109 Wait(60)

2011-03-25 18:05:04.550 Requirement: ODSCC40

2011-03-25 18:06:04.550 02113 Wait(60)

2011-03-25 18:06:04.550 Requirement: ODSCC40

2011-03-25 18:07:04.551 02117 Wait(60)

2011-03-25 18:07:04.551 Requirement: ODSCC40

2011-03-25 18:08:04.551 02119 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-25 18:08:04.551 Requirement: ODSCC40

2011-03-25 18:08:04.552 02123 Wait(10)

2011-03-25 18:08:04.552 Requirement: ODSCC40

2011-03-25 18:08:14.552 02126 Comment: Change the configuration with predefined xml config files. Username is "wronguser".

2011-03-25 18:08:14.552 Requirement: ODSCC40

2011-03-25 18:08:14.552 02129 LoadConfig()
2011-03-25 18:08:14.553 Requirement: ODSCC40
2011-03-25 18:08:14.553 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T80_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:08:14.557 - runCommand: Process started, PID: 5244
2011-03-25 18:08:14.557 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T80_conf.xml': No such file or directory
2011-03-25 18:08:14.557 ERROR:	return code = 1

2011-03-25 18:08:14.557 02132 LoadConfig()
2011-03-25 18:08:14.557 Requirement: ODSCC40
2011-03-25 18:08:14.557 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 18:08:14.561 - runCommand: Process started, PID: 5245
2011-03-25 18:08:14.561 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 18:08:14.561 ERROR:	return code = 1

2011-03-25 18:08:14.562 02134 Comment: Run setup for rebuild of database

2011-03-25 18:08:14.562 Requirement: ODSCC40

2011-03-25 18:08:14.562 02138 Wait(20)

2011-03-25 18:08:14.562 Requirement: ODSCC40

2011-03-25 18:08:34.563 02140 Comment: Update all the configs.

2011-03-25 18:08:34.563 Requirement: ODSCC40

2011-03-25 18:08:34.563 02142 ODSSetup()
2011-03-25 18:08:34.563 Requirement: ODSCC40
2011-03-25 18:08:34.563 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:08:44.948 - runCommand: Process started, PID: 5246
2011-03-25 18:08:44.948 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:08:44.948 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:08:44.948 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:08:44.948 OUTPUT:	Repository SoftHSM found
2011-03-25 18:08:44.948 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:08:44.948 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:08:44.948 OUTPUT:	Policy default2 found
2011-03-25 18:08:44.948 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:08:44.948 OUTPUT:	Policy default found
2011-03-25 18:08:44.948 OUTPUT:	Zone ods found
2011-03-25 18:08:44.948 OUTPUT:	Policy set to default.
2011-03-25 18:08:44.948 OUTPUT:	Added zone ods to database
2011-03-25 18:08:44.948 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:08:44.948 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:08:44.948 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 18:08:44.948 02144 Wait(10)

2011-03-25 18:08:44.948 Requirement: ODSCC40

2011-03-25 18:08:54.949 02146 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 18:08:54.949 Requirement: ODSCC40

2011-03-25 18:08:54.949 02148 Start()
2011-03-25 18:08:54.949 Requirement: ODSCC40
2011-03-25 18:08:54.949 RunCommand(ods-control start)
2011-03-25 18:08:54.951 - runCommand: Background process started, PID: 5259
2011-03-25 18:08:55.973 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 18:08:55.992 - runCommand: Process started, PID: 5276
2011-03-25 18:08:55.992 OUTPUT:	ods-enforcerd
2011-03-25 18:08:55.992 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 18:08:56.100 - runCommand: Process started, PID: 5288
2011-03-25 18:08:56.100 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 18:08:56.103 02150 Wait(10)

2011-03-25 18:08:56.103 Requirement: ODSCC40

2011-03-25 18:09:06.108 02153 CheckLog()
2011-03-25 18:09:06.108 Requirement: ODSCC40
2011-03-25 18:09:08.881 FAILED:	(Check for Like) - Expected: Could not start signer Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC40T90: Use a different Username for both database and config and check if enforcer successfully connects

2011-03-25 18:09:08.881 02160 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 18:09:08.881 Requirement: ODSCC40

2011-03-25 18:09:08.881 02162 Stop()
2011-03-25 18:09:08.881 Requirement: ODSCC40
2011-03-25 18:09:08.881 RunCommand(ods-control stop)
2011-03-25 18:09:09.889 - runCommand: Process started, PID: 5310
2011-03-25 18:09:09.889 OUTPUT:	Stopping enforcer...
2011-03-25 18:09:09.889 OUTPUT:	Stopping signer engine..
2011-03-25 18:09:09.889 OUTPUT:	Engine shut down.
2011-03-25 18:09:09.889 RunCommand(ps -e | grep enforcer)
2011-03-25 18:09:09.904 - runCommand: Process started, PID: 5316
2011-03-25 18:09:09.904 ERROR:	return code = 1
2011-03-25 18:09:09.904 RunCommand(ps -e | grep signer)
2011-03-25 18:09:09.918 - runCommand: Process started, PID: 5319
2011-03-25 18:09:09.918 ERROR:	return code = 1

2011-03-25 18:09:09.918 02164 Wait(10)

2011-03-25 18:09:09.918 Requirement: ODSCC40

2011-03-25 18:09:19.919 02166 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 18:09:19.919 Requirement: ODSCC40

2011-03-25 18:09:19.919 02172 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 18:09:19.919 Requirement: ODSCC40

2011-03-25 18:09:19.920 02175 PurgeHSM()
2011-03-25 18:09:19.920 Requirement: ODSCC40
2011-03-25 18:09:19.920 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 18:09:20.246 - runCommand: Process started, PID: 5322
2011-03-25 18:09:20.246 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 18:09:20.246 OUTPUT:	2 keys found.
2011-03-25 18:09:20.246 OUTPUT:	
2011-03-25 18:09:20.246 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 18:09:20.246 OUTPUT:	Starting purge...
2011-03-25 18:09:20.246 OUTPUT:	Key remove successful: c7b219821aabf1a4ea408b04ef9f38bc
2011-03-25 18:09:20.246 OUTPUT:	Key remove successful: 8991c1e2957d75b1780718bc703fd3dd
2011-03-25 18:09:20.246 OUTPUT:	Purge done.

2011-03-25 18:09:20.246 02177 Wait(10)

2011-03-25 18:09:20.246 Requirement: ODSCC40

2011-03-25 18:09:30.247 02179 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-25 18:09:30.247 Requirement: ODSCC40

2011-03-25 18:09:30.247 02185 Wait(60)

2011-03-25 18:09:30.247 Requirement: ODSCC40

2011-03-25 18:10:30.248 02189 Wait(60)

2011-03-25 18:10:30.248 Requirement: ODSCC40

2011-03-25 18:11:30.248 02193 Wait(60)

2011-03-25 18:11:30.248 Requirement: ODSCC40

2011-03-25 18:12:30.249 02195 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-25 18:12:30.249 Requirement: ODSCC40

2011-03-25 18:12:30.249 02199 Wait(10)

2011-03-25 18:12:30.249 Requirement: ODSCC40

2011-03-25 18:12:40.249 02202 Comment: Change the configuration with predefined xml config files. Username is "gooduser".

2011-03-25 18:12:40.250 Requirement: ODSCC40

2011-03-25 18:12:40.250 02205 LoadConfig()
2011-03-25 18:12:40.250 Requirement: ODSCC40
2011-03-25 18:12:40.250 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T90_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:12:40.254 - runCommand: Process started, PID: 5327
2011-03-25 18:12:40.254 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T90_conf.xml': No such file or directory
2011-03-25 18:12:40.254 ERROR:	return code = 1

2011-03-25 18:12:40.255 02208 LoadConfig()
2011-03-25 18:12:40.255 Requirement: ODSCC40
2011-03-25 18:12:40.255 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 18:12:40.259 - runCommand: Process started, PID: 5328
2011-03-25 18:12:40.259 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 18:12:40.259 ERROR:	return code = 1

2011-03-25 18:12:40.259 02210 Comment: Run setup for rebuild of database

2011-03-25 18:12:40.259 Requirement: ODSCC40

2011-03-25 18:12:40.260 02214 Wait(20)

2011-03-25 18:12:40.260 Requirement: ODSCC40

2011-03-25 18:13:00.260 02216 Comment: Update all the configs.

2011-03-25 18:13:00.260 Requirement: ODSCC40

2011-03-25 18:13:00.260 02218 ODSSetup()
2011-03-25 18:13:00.260 Requirement: ODSCC40
2011-03-25 18:13:00.260 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:13:10.462 - runCommand: Process started, PID: 5329
2011-03-25 18:13:10.462 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:13:10.462 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:13:10.462 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:13:10.462 OUTPUT:	Repository SoftHSM found
2011-03-25 18:13:10.462 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:13:10.462 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:13:10.462 OUTPUT:	Policy default2 found
2011-03-25 18:13:10.462 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:13:10.462 OUTPUT:	Policy default found
2011-03-25 18:13:10.462 OUTPUT:	Zone ods found
2011-03-25 18:13:10.462 OUTPUT:	Policy set to default.
2011-03-25 18:13:10.462 OUTPUT:	Added zone ods to database
2011-03-25 18:13:10.462 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:13:10.462 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:13:10.462 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 18:13:10.463 02220 Wait(10)

2011-03-25 18:13:10.463 Requirement: ODSCC40

2011-03-25 18:13:20.463 02222 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 18:13:20.463 Requirement: ODSCC40

2011-03-25 18:13:20.463 02224 Start()
2011-03-25 18:13:20.463 Requirement: ODSCC40
2011-03-25 18:13:20.463 RunCommand(ods-control start)
2011-03-25 18:13:20.465 - runCommand: Background process started, PID: 5342
2011-03-25 18:13:21.480 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 18:13:21.505 - runCommand: Process started, PID: 5359
2011-03-25 18:13:21.505 OUTPUT:	ods-enforcerd
2011-03-25 18:13:21.505 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 18:13:21.521 - runCommand: Process started, PID: 5371
2011-03-25 18:13:21.521 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 18:13:21.521 02226 Wait(10)

2011-03-25 18:13:21.521 Requirement: ODSCC40

2011-03-25 18:13:31.521 02229 CheckLog()
2011-03-25 18:13:31.522 Requirement: ODSCC40
2011-03-25 18:13:34.392 PASSED:	(Check for Like) - Expected: signer engine started Found: Mar 25 18:13:21 DEVELOPER15 ods-signerd: signer engine started

-------------------------------------------------------------------------------
Testcase - ODSCC40T100: Use a different Password for database and check if enforcer fails to connect

2011-03-25 18:13:34.393 02238 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 18:13:34.393 Requirement: ODSCC40

2011-03-25 18:13:34.393 02240 Stop()
2011-03-25 18:13:34.393 Requirement: ODSCC40
2011-03-25 18:13:34.393 RunCommand(ods-control stop)
2011-03-25 18:13:35.400 - runCommand: Process started, PID: 5393
2011-03-25 18:13:35.400 OUTPUT:	Stopping enforcer...
2011-03-25 18:13:35.400 OUTPUT:	Stopping signer engine..
2011-03-25 18:13:35.400 OUTPUT:	Engine shut down.
2011-03-25 18:13:35.400 RunCommand(ps -e | grep enforcer)
2011-03-25 18:13:35.415 - runCommand: Process started, PID: 5399
2011-03-25 18:13:35.416 ERROR:	return code = 1
2011-03-25 18:13:35.416 RunCommand(ps -e | grep signer)
2011-03-25 18:13:35.431 - runCommand: Process started, PID: 5402
2011-03-25 18:13:35.431 ERROR:	return code = 1

2011-03-25 18:13:35.431 02242 Wait(10)

2011-03-25 18:13:35.431 Requirement: ODSCC40

2011-03-25 18:13:45.432 02244 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 18:13:45.432 Requirement: ODSCC40

2011-03-25 18:13:45.432 02250 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 18:13:45.432 Requirement: ODSCC40

2011-03-25 18:13:45.433 02253 PurgeHSM()
2011-03-25 18:13:45.433 Requirement: ODSCC40
2011-03-25 18:13:45.433 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 18:13:45.751 - runCommand: Process started, PID: 5405
2011-03-25 18:13:45.752 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 18:13:45.752 OUTPUT:	2 keys found.
2011-03-25 18:13:45.752 OUTPUT:	
2011-03-25 18:13:45.752 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 18:13:45.752 OUTPUT:	Starting purge...
2011-03-25 18:13:45.752 OUTPUT:	Key remove successful: cacad1e5479dbf3148b1444b0b3ba00c
2011-03-25 18:13:45.752 OUTPUT:	Key remove successful: eb841542297d71b375ec2a8fd1a5f75e
2011-03-25 18:13:45.752 OUTPUT:	Purge done.

2011-03-25 18:13:45.752 02255 Wait(10)

2011-03-25 18:13:45.752 Requirement: ODSCC40

2011-03-25 18:13:55.753 02257 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-25 18:13:55.753 Requirement: ODSCC40

2011-03-25 18:13:55.753 02263 Wait(60)

2011-03-25 18:13:55.753 Requirement: ODSCC40

2011-03-25 18:14:55.753 02267 Wait(60)

2011-03-25 18:14:55.753 Requirement: ODSCC40

2011-03-25 18:15:55.754 02271 Wait(60)

2011-03-25 18:15:55.754 Requirement: ODSCC40

2011-03-25 18:16:55.754 02273 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-25 18:16:55.754 Requirement: ODSCC40

2011-03-25 18:16:55.755 02277 Wait(10)

2011-03-25 18:16:55.755 Requirement: ODSCC40

2011-03-25 18:17:05.755 02280 Comment: Change the configuration with predefined xml config files. Password changed to "456abc".

2011-03-25 18:17:05.755 Requirement: ODSCC40

2011-03-25 18:17:05.756 02283 LoadConfig()
2011-03-25 18:17:05.756 Requirement: ODSCC40
2011-03-25 18:17:05.756 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T100_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:17:05.760 - runCommand: Process started, PID: 5413
2011-03-25 18:17:05.760 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T100_conf.xml': No such file or directory
2011-03-25 18:17:05.760 ERROR:	return code = 1

2011-03-25 18:17:05.761 02286 LoadConfig()
2011-03-25 18:17:05.761 Requirement: ODSCC40
2011-03-25 18:17:05.761 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 18:17:05.764 - runCommand: Process started, PID: 5414
2011-03-25 18:17:05.765 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 18:17:05.765 ERROR:	return code = 1

2011-03-25 18:17:05.765 02288 Comment: Run setup for rebuild of database

2011-03-25 18:17:05.765 Requirement: ODSCC40

2011-03-25 18:17:05.765 02292 Wait(20)

2011-03-25 18:17:05.765 Requirement: ODSCC40

2011-03-25 18:17:25.766 02294 Comment: Update all the configs.

2011-03-25 18:17:25.766 Requirement: ODSCC40

2011-03-25 18:17:25.766 02296 ODSSetup()
2011-03-25 18:17:25.766 Requirement: ODSCC40
2011-03-25 18:17:25.766 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:17:36.459 - runCommand: Process started, PID: 5415
2011-03-25 18:17:36.459 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:17:36.459 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:17:36.459 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:17:36.459 OUTPUT:	Repository SoftHSM found
2011-03-25 18:17:36.459 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:17:36.459 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:17:36.459 OUTPUT:	Policy default2 found
2011-03-25 18:17:36.459 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:17:36.459 OUTPUT:	Policy default found
2011-03-25 18:17:36.459 OUTPUT:	Zone ods found
2011-03-25 18:17:36.459 OUTPUT:	Policy set to default.
2011-03-25 18:17:36.459 OUTPUT:	Added zone ods to database
2011-03-25 18:17:36.459 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:17:36.459 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:17:36.459 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 18:17:36.460 02298 Wait(10)

2011-03-25 18:17:36.460 Requirement: ODSCC40

2011-03-25 18:17:46.460 02300 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 18:17:46.460 Requirement: ODSCC40

2011-03-25 18:17:46.461 02302 Start()
2011-03-25 18:17:46.461 Requirement: ODSCC40
2011-03-25 18:17:46.461 RunCommand(ods-control start)
2011-03-25 18:17:46.462 - runCommand: Background process started, PID: 5428
2011-03-25 18:17:47.478 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 18:17:47.495 - runCommand: Process started, PID: 5443
2011-03-25 18:17:47.495 OUTPUT:	ods-enforcerd
2011-03-25 18:17:47.495 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 18:17:47.511 - runCommand: Process started, PID: 5448
2011-03-25 18:17:47.511 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 18:17:47.511 02304 Wait(10)

2011-03-25 18:17:47.511 Requirement: ODSCC40

2011-03-25 18:17:57.512 02307 CheckLog()
2011-03-25 18:17:57.512 Requirement: ODSCC40
2011-03-25 18:18:00.390 FAILED:	(Check for Like) - Expected: Could not start signer Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC40T110: Use a different Password name for both database and config and check if enforcer successfully connects

2011-03-25 18:18:00.391 02317 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 18:18:00.391 Requirement: ODSCC40

2011-03-25 18:18:00.391 02319 Stop()
2011-03-25 18:18:00.391 Requirement: ODSCC40
2011-03-25 18:18:00.391 RunCommand(ods-control stop)
2011-03-25 18:18:01.398 - runCommand: Process started, PID: 5478
2011-03-25 18:18:01.398 OUTPUT:	Stopping enforcer...
2011-03-25 18:18:01.398 OUTPUT:	Stopping signer engine..
2011-03-25 18:18:01.398 OUTPUT:	Engine shut down.
2011-03-25 18:18:01.398 RunCommand(ps -e | grep enforcer)
2011-03-25 18:18:01.413 - runCommand: Process started, PID: 5484
2011-03-25 18:18:01.413 ERROR:	return code = 1
2011-03-25 18:18:01.413 RunCommand(ps -e | grep signer)
2011-03-25 18:18:01.425 - runCommand: Process started, PID: 5487
2011-03-25 18:18:01.425 ERROR:	return code = 1

2011-03-25 18:18:01.425 02321 Wait(10)

2011-03-25 18:18:01.425 Requirement: ODSCC40

2011-03-25 18:18:11.426 02323 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 18:18:11.426 Requirement: ODSCC40

2011-03-25 18:18:11.426 02329 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 18:18:11.426 Requirement: ODSCC40

2011-03-25 18:18:11.426 02332 PurgeHSM()
2011-03-25 18:18:11.427 Requirement: ODSCC40
2011-03-25 18:18:11.427 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 18:18:11.782 - runCommand: Process started, PID: 5490
2011-03-25 18:18:11.782 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 18:18:11.782 OUTPUT:	2 keys found.
2011-03-25 18:18:11.782 OUTPUT:	
2011-03-25 18:18:11.782 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 18:18:11.782 OUTPUT:	Starting purge...
2011-03-25 18:18:11.782 OUTPUT:	Key remove successful: a03eba8fd7448f9947e308cefd3b854e
2011-03-25 18:18:11.782 OUTPUT:	Key remove successful: 708870a12d917805719ab8b7be5a35f5
2011-03-25 18:18:11.782 OUTPUT:	Purge done.

2011-03-25 18:18:11.783 02334 Wait(10)

2011-03-25 18:18:11.783 Requirement: ODSCC40

2011-03-25 18:18:21.783 02336 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-25 18:18:21.783 Requirement: ODSCC40

2011-03-25 18:18:21.783 02342 Wait(60)

2011-03-25 18:18:21.783 Requirement: ODSCC40

2011-03-25 18:19:21.784 02346 Wait(60)

2011-03-25 18:19:21.784 Requirement: ODSCC40

2011-03-25 18:20:21.784 02350 Wait(60)

2011-03-25 18:20:21.784 Requirement: ODSCC40

2011-03-25 18:21:21.785 02352 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-25 18:21:21.785 Requirement: ODSCC40

2011-03-25 18:21:21.785 02356 Wait(10)

2011-03-25 18:21:21.785 Requirement: ODSCC40

2011-03-25 18:21:31.786 02359 Comment: Change the configuration with predefined xml config files. Password changed to "123abc".

2011-03-25 18:21:31.786 Requirement: ODSCC40

2011-03-25 18:21:31.786 02362 LoadConfig()
2011-03-25 18:21:31.786 Requirement: ODSCC40
2011-03-25 18:21:31.786 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T110_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:21:31.791 - runCommand: Process started, PID: 5494
2011-03-25 18:21:31.791 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T110_conf.xml': No such file or directory
2011-03-25 18:21:31.791 ERROR:	return code = 1

2011-03-25 18:21:31.791 02365 LoadConfig()
2011-03-25 18:21:31.791 Requirement: ODSCC40
2011-03-25 18:21:31.791 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 18:21:31.795 - runCommand: Process started, PID: 5495
2011-03-25 18:21:31.795 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 18:21:31.795 ERROR:	return code = 1

2011-03-25 18:21:31.795 02367 Comment: Run setup for rebuild of database

2011-03-25 18:21:31.796 Requirement: ODSCC40

2011-03-25 18:21:31.796 02371 Wait(20)

2011-03-25 18:21:31.796 Requirement: ODSCC40

2011-03-25 18:21:51.796 02373 Comment: Update all the configs.

2011-03-25 18:21:51.796 Requirement: ODSCC40

2011-03-25 18:21:51.797 02375 ODSSetup()
2011-03-25 18:21:51.797 Requirement: ODSCC40
2011-03-25 18:21:51.797 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:22:02.556 - runCommand: Process started, PID: 5496
2011-03-25 18:22:02.556 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:22:02.556 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:22:02.556 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:22:02.556 OUTPUT:	Repository SoftHSM found
2011-03-25 18:22:02.556 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:22:02.556 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:22:02.556 OUTPUT:	Policy default2 found
2011-03-25 18:22:02.556 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:22:02.556 OUTPUT:	Policy default found
2011-03-25 18:22:02.556 OUTPUT:	Zone ods found
2011-03-25 18:22:02.556 OUTPUT:	Policy set to default.
2011-03-25 18:22:02.556 OUTPUT:	Added zone ods to database
2011-03-25 18:22:02.556 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:22:02.557 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:22:02.557 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 18:22:02.557 02377 Wait(10)

2011-03-25 18:22:02.557 Requirement: ODSCC40

2011-03-25 18:22:12.557 02379 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-25 18:22:12.557 Requirement: ODSCC40

2011-03-25 18:22:12.558 02381 Start()
2011-03-25 18:22:12.558 Requirement: ODSCC40
2011-03-25 18:22:12.558 RunCommand(ods-control start)
2011-03-25 18:22:12.559 - runCommand: Background process started, PID: 5509
2011-03-25 18:22:13.574 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 18:22:13.599 - runCommand: Process started, PID: 5526
2011-03-25 18:22:13.599 OUTPUT:	ods-enforcerd
2011-03-25 18:22:13.599 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 18:22:13.613 - runCommand: Process started, PID: 5538
2011-03-25 18:22:13.613 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 18:22:13.614 02383 Wait(10)

2011-03-25 18:22:13.614 Requirement: ODSCC40

2011-03-25 18:22:23.614 02386 CheckLog()
2011-03-25 18:22:23.614 Requirement: ODSCC40
2011-03-25 18:22:26.491 PASSED:	(Check for Like) - Expected: signer engine started Found: Mar 25 18:22:13 DEVELOPER15 ods-signerd: signer engine started
Testcondition - ODSCC50: The configuration of signer settings located in conf.xml should operate according to requirements and intentions
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSCC50T10: Use privileges test:test for signer in config only and check if signer fails to run

2011-03-25 18:22:26.492 02393 Comment: Privileges have been adjusted for the signer in the conf.xml. User = opendnssec; Group = opendnssec. This user and group do not have acces to the correct folder.

2011-03-25 18:22:26.492 Requirement: ODSCC50

2011-03-25 18:22:26.492 02395 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 18:22:26.492 Requirement: ODSCC50

2011-03-25 18:22:26.492 02397 Stop()
2011-03-25 18:22:26.492 Requirement: ODSCC50
2011-03-25 18:22:26.492 RunCommand(ods-control stop)
2011-03-25 18:22:27.499 - runCommand: Process started, PID: 5560
2011-03-25 18:22:27.499 OUTPUT:	Stopping enforcer...
2011-03-25 18:22:27.499 OUTPUT:	Stopping signer engine..
2011-03-25 18:22:27.499 OUTPUT:	Engine shut down.
2011-03-25 18:22:27.499 RunCommand(ps -e | grep enforcer)
2011-03-25 18:22:27.514 - runCommand: Process started, PID: 5566
2011-03-25 18:22:27.515 ERROR:	return code = 1
2011-03-25 18:22:27.515 RunCommand(ps -e | grep signer)
2011-03-25 18:22:27.529 - runCommand: Process started, PID: 5569
2011-03-25 18:22:27.529 ERROR:	return code = 1

2011-03-25 18:22:27.530 02399 Wait(10)

2011-03-25 18:22:27.530 Requirement: ODSCC50

2011-03-25 18:22:37.530 02401 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 18:22:37.530 Requirement: ODSCC50

2011-03-25 18:22:37.530 02407 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 18:22:37.530 Requirement: ODSCC50

2011-03-25 18:22:37.531 02410 PurgeHSM()
2011-03-25 18:22:37.531 Requirement: ODSCC50
2011-03-25 18:22:37.531 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 18:22:37.846 - runCommand: Process started, PID: 5572
2011-03-25 18:22:37.846 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 18:22:37.846 OUTPUT:	2 keys found.
2011-03-25 18:22:37.846 OUTPUT:	
2011-03-25 18:22:37.846 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 18:22:37.846 OUTPUT:	Starting purge...
2011-03-25 18:22:37.846 OUTPUT:	Key remove successful: 9f6c781453895c04ab7b5a2865abdc91
2011-03-25 18:22:37.846 OUTPUT:	Key remove successful: a0b1308594720fc77cb3496e7057a862
2011-03-25 18:22:37.846 OUTPUT:	Purge done.

2011-03-25 18:22:37.846 02412 Wait(10)

2011-03-25 18:22:37.846 Requirement: ODSCC50

2011-03-25 18:22:47.847 02414 Comment: Rebuild ODS with SQLlite database.

2011-03-25 18:22:47.847 Requirement: ODSCC50

2011-03-25 18:22:47.847 02420 Wait(60)

2011-03-25 18:22:47.847 Requirement: ODSCC50

2011-03-25 18:23:47.848 02424 Wait(60)

2011-03-25 18:23:47.848 Requirement: ODSCC50

2011-03-25 18:24:47.848 02428 Wait(60)

2011-03-25 18:24:47.848 Requirement: ODSCC50

2011-03-25 18:25:47.849 02431 Comment: Change the configuration with predefined xml config files.

2011-03-25 18:25:47.849 Requirement: ODSCC50

2011-03-25 18:25:47.849 02434 LoadConfig()
2011-03-25 18:25:47.849 Requirement: ODSCC50
2011-03-25 18:25:47.849 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:25:47.853 - runCommand: Process started, PID: 5576
2011-03-25 18:25:47.854 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml': No such file or directory
2011-03-25 18:25:47.854 ERROR:	return code = 1

2011-03-25 18:25:47.854 02437 LoadConfig()
2011-03-25 18:25:47.854 Requirement: ODSCC50
2011-03-25 18:25:47.854 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 18:25:47.858 - runCommand: Process started, PID: 5577
2011-03-25 18:25:47.858 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 18:25:47.858 ERROR:	return code = 1

2011-03-25 18:25:47.858 02439 Comment: Run setup for rebuild of database

2011-03-25 18:25:47.858 Requirement: ODSCC50

2011-03-25 18:25:47.859 02443 Wait(20)

2011-03-25 18:25:47.859 Requirement: ODSCC50

2011-03-25 18:26:07.859 02445 Comment: Update all the configs.

2011-03-25 18:26:07.859 Requirement: ODSCC50

2011-03-25 18:26:07.860 02447 ODSSetup()
2011-03-25 18:26:07.860 Requirement: ODSCC50
2011-03-25 18:26:07.860 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:26:18.100 - runCommand: Process started, PID: 5578
2011-03-25 18:26:18.101 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:26:18.101 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:26:18.101 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:26:18.101 OUTPUT:	Repository SoftHSM found
2011-03-25 18:26:18.101 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:26:18.101 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:26:18.101 OUTPUT:	Policy default2 found
2011-03-25 18:26:18.101 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:26:18.101 OUTPUT:	Policy default found
2011-03-25 18:26:18.101 OUTPUT:	Zone ods found
2011-03-25 18:26:18.101 OUTPUT:	Policy set to default.
2011-03-25 18:26:18.101 OUTPUT:	Added zone ods to database
2011-03-25 18:26:18.101 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:26:18.101 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:26:18.101 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 18:26:18.101 02449 Wait(10)

2011-03-25 18:26:18.101 Requirement: ODSCC50

2011-03-25 18:26:28.102 02451 Comment: Change the configuration with predefined xml config files for this testcase.

2011-03-25 18:26:28.102 Requirement: ODSCC50

2011-03-25 18:26:28.102 02454 LoadConfig()
2011-03-25 18:26:28.102 Requirement: ODSCC50
2011-03-25 18:26:28.102 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:26:28.106 - runCommand: Process started, PID: 5591
2011-03-25 18:26:28.106 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T10_conf.xml': No such file or directory
2011-03-25 18:26:28.106 ERROR:	return code = 1

2011-03-25 18:26:28.107 02457 LoadConfig()
2011-03-25 18:26:28.107 Requirement: ODSCC50
2011-03-25 18:26:28.107 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 18:26:28.111 - runCommand: Process started, PID: 5592
2011-03-25 18:26:28.111 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 18:26:28.111 ERROR:	return code = 1

2011-03-25 18:26:28.111 02459 Comment: Update all the configs.

2011-03-25 18:26:28.111 Requirement: ODSCC50

2011-03-25 18:26:28.112 02461 ODSSetup()
2011-03-25 18:26:28.112 Requirement: ODSCC50
2011-03-25 18:26:28.112 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:26:38.740 - runCommand: Process started, PID: 5593
2011-03-25 18:26:38.740 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:26:38.740 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:26:38.740 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:26:38.740 OUTPUT:	Repository SoftHSM found
2011-03-25 18:26:38.740 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:26:38.740 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:26:38.740 OUTPUT:	Policy default2 found
2011-03-25 18:26:38.740 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:26:38.740 OUTPUT:	Policy default found
2011-03-25 18:26:38.740 OUTPUT:	Zone ods found
2011-03-25 18:26:38.740 OUTPUT:	Policy set to default.
2011-03-25 18:26:38.740 OUTPUT:	Added zone ods to database
2011-03-25 18:26:38.740 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:26:38.740 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:26:38.740 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 18:26:38.741 02463 Wait(10)

2011-03-25 18:26:38.741 Requirement: ODSCC50

2011-03-25 18:26:48.741 02466 CheckLog()
2011-03-25 18:26:48.741 Requirement: ODSCC50

2011-03-25 18:26:51.622 02468 Comment: Change the configuration with predefined original conf.xml file.

2011-03-25 18:26:51.622 Requirement: ODSCC50

2011-03-25 18:26:51.623 02471 LoadConfig()
2011-03-25 18:26:51.623 Requirement: ODSCC50
2011-03-25 18:26:51.623 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:26:51.625 - runCommand: Process started, PID: 5606
2011-03-25 18:26:51.625 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml': No such file or directory
2011-03-25 18:26:51.625 ERROR:	return code = 1

2011-03-25 18:26:51.626 02473 Comment: Update all the configs.

2011-03-25 18:26:51.626 Requirement: ODSCC50

2011-03-25 18:26:51.626 02475 ODSSetup()
2011-03-25 18:26:51.626 Requirement: ODSCC50
2011-03-25 18:26:51.626 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:27:02.200 - runCommand: Process started, PID: 5607
2011-03-25 18:27:02.201 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:27:02.202 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:27:02.202 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:27:02.202 OUTPUT:	Repository SoftHSM found
2011-03-25 18:27:02.202 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:27:02.202 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:27:02.202 OUTPUT:	Policy default2 found
2011-03-25 18:27:02.203 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:27:02.203 OUTPUT:	Policy default found
2011-03-25 18:27:02.203 OUTPUT:	Zone ods found
2011-03-25 18:27:02.203 OUTPUT:	Policy set to default.
2011-03-25 18:27:02.203 OUTPUT:	Added zone ods to database
2011-03-25 18:27:02.203 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:27:02.204 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:27:02.204 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSCC50T20: Use privileges test:test for signer and /tmp and check if signer runs without errors

2011-03-25 18:27:02.213 02480 Comment: Privileges have been adjusted for the signer in the conf.xml. User = ods; Group = ods. This user and group do not have acces to the correct folder.

2011-03-25 18:27:02.213 Requirement: ODSCC50

2011-03-25 18:27:02.217 02482 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 18:27:02.217 Requirement: ODSCC50

2011-03-25 18:27:02.220 02484 Stop()
2011-03-25 18:27:02.220 Requirement: ODSCC50
2011-03-25 18:27:02.221 RunCommand(ods-control stop)
2011-03-25 18:27:02.272 - runCommand: Process started, PID: 5620
2011-03-25 18:27:02.273 OUTPUT:	Stopping enforcer...
2011-03-25 18:27:02.273 OUTPUT:	Cannot find PID file
2011-03-25 18:27:02.273 OUTPUT:	Stopping signer engine..
2011-03-25 18:27:02.274 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 18:27:02.274 ERROR:	return code = 1
2011-03-25 18:27:02.274 RunCommand(ps -e | grep enforcer)
2011-03-25 18:27:02.422 - runCommand: Process started, PID: 5623
2011-03-25 18:27:02.423 ERROR:	return code = 1
2011-03-25 18:27:02.423 RunCommand(ps -e | grep signer)
2011-03-25 18:27:02.515 - runCommand: Process started, PID: 5626
2011-03-25 18:27:02.516 ERROR:	return code = 1

2011-03-25 18:27:02.518 02486 Wait(10)

2011-03-25 18:27:02.518 Requirement: ODSCC50

2011-03-25 18:27:12.523 02488 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 18:27:12.523 Requirement: ODSCC50

2011-03-25 18:27:12.527 02494 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 18:27:12.527 Requirement: ODSCC50

2011-03-25 18:27:12.531 02497 PurgeHSM()
2011-03-25 18:27:12.531 Requirement: ODSCC50
2011-03-25 18:27:12.531 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 18:27:12.651 - runCommand: Process started, PID: 5629
2011-03-25 18:27:12.652 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 18:27:12.652 OUTPUT:	0 keys found.
2011-03-25 18:27:12.652 ERROR:	return code = 255

2011-03-25 18:27:12.654 02499 Wait(10)

2011-03-25 18:27:12.655 Requirement: ODSCC50

2011-03-25 18:27:22.659 02501 Comment: Change the rights for the kasp.db file to user ods.

2011-03-25 18:27:22.659 Requirement: ODSCC50

2011-03-25 18:27:22.663 02507 Comment: Change the configuration with predefined xml config files.

2011-03-25 18:27:22.663 Requirement: ODSCC50

2011-03-25 18:27:22.667 02510 LoadConfig()
2011-03-25 18:27:22.667 Requirement: ODSCC50
2011-03-25 18:27:22.667 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T20_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:27:22.710 - runCommand: Process started, PID: 5633
2011-03-25 18:27:22.711 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T20_conf.xml': No such file or directory
2011-03-25 18:27:22.711 ERROR:	return code = 1

2011-03-25 18:27:22.715 02513 LoadConfig()
2011-03-25 18:27:22.715 Requirement: ODSCC50
2011-03-25 18:27:22.715 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 18:27:22.754 - runCommand: Process started, PID: 5634
2011-03-25 18:27:22.755 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 18:27:22.756 ERROR:	return code = 1

2011-03-25 18:27:22.759 02515 Comment: Update all the configs.

2011-03-25 18:27:22.759 Requirement: ODSCC50

2011-03-25 18:27:22.763 02517 ODSSetup()
2011-03-25 18:27:22.763 Requirement: ODSCC50
2011-03-25 18:27:22.763 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:27:32.429 - runCommand: Process started, PID: 5635
2011-03-25 18:27:32.429 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:27:32.429 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:27:32.429 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:27:32.429 OUTPUT:	Repository SoftHSM found
2011-03-25 18:27:32.429 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:27:32.429 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:27:32.429 OUTPUT:	Policy default2 found
2011-03-25 18:27:32.429 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:27:32.429 OUTPUT:	Policy default found
2011-03-25 18:27:32.429 OUTPUT:	Zone ods found
2011-03-25 18:27:32.429 OUTPUT:	Policy set to default.
2011-03-25 18:27:32.429 OUTPUT:	Added zone ods to database
2011-03-25 18:27:32.429 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:27:32.429 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:27:32.429 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 18:27:32.430 02519 Wait(10)

2011-03-25 18:27:32.430 Requirement: ODSCC50

2011-03-25 18:27:42.430 02521 Comment: Start enforcer

2011-03-25 18:27:42.430 Requirement: ODSCC50

2011-03-25 18:27:42.431 02523 Wait(10)

2011-03-25 18:27:42.431 Requirement: ODSCC50

2011-03-25 18:27:52.431 02528 Wait(15)

2011-03-25 18:27:52.431 Requirement: ODSCC50

2011-03-25 18:28:07.432 02531 CheckLog()
2011-03-25 18:28:07.432 Requirement: ODSCC50

2011-03-25 18:28:10.304 02535 Stop()
2011-03-25 18:28:10.304 Requirement: ODSCC50
2011-03-25 18:28:10.304 RunCommand(ods-control stop)
2011-03-25 18:28:10.307 - runCommand: Process started, PID: 5648
2011-03-25 18:28:10.307 OUTPUT:	Stopping enforcer...
2011-03-25 18:28:10.307 OUTPUT:	Cannot find PID file
2011-03-25 18:28:10.307 OUTPUT:	Stopping signer engine..
2011-03-25 18:28:10.307 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 18:28:10.307 ERROR:	return code = 1
2011-03-25 18:28:10.307 RunCommand(ps -e | grep enforcer)
2011-03-25 18:28:10.316 - runCommand: Process started, PID: 5651
2011-03-25 18:28:10.317 ERROR:	return code = 1
2011-03-25 18:28:10.317 RunCommand(ps -e | grep signer)
2011-03-25 18:28:10.327 - runCommand: Process started, PID: 5654
2011-03-25 18:28:10.327 ERROR:	return code = 1

2011-03-25 18:28:10.327 02537 Comment: Change the configuration with predefined original conf.xml file and the original rights for the kasp.db file.

2011-03-25 18:28:10.327 Requirement: ODSCC50

2011-03-25 18:28:10.327 02544 LoadConfig()
2011-03-25 18:28:10.327 Requirement: ODSCC50
2011-03-25 18:28:10.327 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:28:10.330 - runCommand: Process started, PID: 5657
2011-03-25 18:28:10.330 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml': No such file or directory
2011-03-25 18:28:10.330 ERROR:	return code = 1

2011-03-25 18:28:10.330 02546 Comment: Update all the configs.

2011-03-25 18:28:10.330 Requirement: ODSCC50

2011-03-25 18:28:10.330 02548 ODSSetup()
2011-03-25 18:28:10.330 Requirement: ODSCC50
2011-03-25 18:28:10.330 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:28:21.296 - runCommand: Process started, PID: 5658
2011-03-25 18:28:21.297 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:28:21.297 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:28:21.297 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:28:21.298 OUTPUT:	Repository SoftHSM found
2011-03-25 18:28:21.298 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:28:21.298 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:28:21.298 OUTPUT:	Policy default2 found
2011-03-25 18:28:21.298 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:28:21.298 OUTPUT:	Policy default found
2011-03-25 18:28:21.298 OUTPUT:	Zone ods found
2011-03-25 18:28:21.299 OUTPUT:	Policy set to default.
2011-03-25 18:28:21.299 OUTPUT:	Added zone ods to database
2011-03-25 18:28:21.299 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:28:21.299 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:28:21.299 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSCC50T30: Change the /tmp location and change WorkingDirectory in conf.xml accordingly

2011-03-25 18:28:21.308 02553 Comment: Working directory has been adjusted in the conf.xml. Working directory now is: var/opendnssec/temporary. Make sure that directory exists before running this testcase, if not it will be created in this testcase.

2011-03-25 18:28:21.309 Requirement: ODSCC50

2011-03-25 18:28:21.312 02555 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 18:28:21.312 Requirement: ODSCC50

2011-03-25 18:28:21.316 02557 Stop()
2011-03-25 18:28:21.316 Requirement: ODSCC50
2011-03-25 18:28:21.316 RunCommand(ods-control stop)
2011-03-25 18:28:21.368 - runCommand: Process started, PID: 5671
2011-03-25 18:28:21.369 OUTPUT:	Stopping enforcer...
2011-03-25 18:28:21.369 OUTPUT:	Cannot find PID file
2011-03-25 18:28:21.369 OUTPUT:	Stopping signer engine..
2011-03-25 18:28:21.369 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 18:28:21.370 ERROR:	return code = 1
2011-03-25 18:28:21.370 RunCommand(ps -e | grep enforcer)
2011-03-25 18:28:21.520 - runCommand: Process started, PID: 5674
2011-03-25 18:28:21.521 ERROR:	return code = 1
2011-03-25 18:28:21.522 RunCommand(ps -e | grep signer)
2011-03-25 18:28:21.672 - runCommand: Process started, PID: 5677
2011-03-25 18:28:21.673 ERROR:	return code = 1

2011-03-25 18:28:21.677 02559 Wait(10)

2011-03-25 18:28:21.677 Requirement: ODSCC50

2011-03-25 18:28:31.682 02561 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 18:28:31.682 Requirement: ODSCC50

2011-03-25 18:28:31.686 02567 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 18:28:31.686 Requirement: ODSCC50

2011-03-25 18:28:31.690 02570 PurgeHSM()
2011-03-25 18:28:31.690 Requirement: ODSCC50
2011-03-25 18:28:31.690 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 18:28:31.833 - runCommand: Process started, PID: 5683
2011-03-25 18:28:31.833 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 18:28:31.834 OUTPUT:	0 keys found.
2011-03-25 18:28:31.834 ERROR:	return code = 255

2011-03-25 18:28:31.838 02572 Wait(10)

2011-03-25 18:28:31.838 Requirement: ODSCC50

2011-03-25 18:28:41.843 02578 Comment: Change the configuration with predefined xml config files.

2011-03-25 18:28:41.843 Requirement: ODSCC50

2011-03-25 18:28:41.847 02581 LoadConfig()
2011-03-25 18:28:41.847 Requirement: ODSCC50
2011-03-25 18:28:41.847 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T30_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:28:41.889 - runCommand: Process started, PID: 5687
2011-03-25 18:28:41.890 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T30_conf.xml': No such file or directory
2011-03-25 18:28:41.891 ERROR:	return code = 1

2011-03-25 18:28:41.895 02584 LoadConfig()
2011-03-25 18:28:41.895 Requirement: ODSCC50
2011-03-25 18:28:41.895 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 18:28:41.934 - runCommand: Process started, PID: 5688
2011-03-25 18:28:41.935 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 18:28:41.935 ERROR:	return code = 1

2011-03-25 18:28:41.939 02586 Comment: Update all the configs.

2011-03-25 18:28:41.939 Requirement: ODSCC50

2011-03-25 18:28:41.943 02588 ODSSetup()
2011-03-25 18:28:41.943 Requirement: ODSCC50
2011-03-25 18:28:41.943 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:28:51.688 - runCommand: Process started, PID: 5689
2011-03-25 18:28:51.689 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:28:51.689 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:28:51.689 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:28:51.689 OUTPUT:	Repository SoftHSM found
2011-03-25 18:28:51.689 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:28:51.689 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:28:51.689 OUTPUT:	Policy default2 found
2011-03-25 18:28:51.689 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:28:51.689 OUTPUT:	Policy default found
2011-03-25 18:28:51.689 OUTPUT:	Zone ods found
2011-03-25 18:28:51.689 OUTPUT:	Policy set to default.
2011-03-25 18:28:51.689 OUTPUT:	Added zone ods to database
2011-03-25 18:28:51.689 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:28:51.689 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:28:51.689 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 18:28:51.689 02590 Wait(10)

2011-03-25 18:28:51.689 Requirement: ODSCC50

2011-03-25 18:29:01.690 02592 Comment: Start enforcer

2011-03-25 18:29:01.690 Requirement: ODSCC50

2011-03-25 18:29:01.690 02594 Start()
2011-03-25 18:29:01.690 Requirement: ODSCC50
2011-03-25 18:29:01.690 RunCommand(ods-control start)
2011-03-25 18:29:01.691 - runCommand: Background process started, PID: 5702
2011-03-25 18:29:02.706 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 18:29:02.725 - runCommand: Process started, PID: 5717
2011-03-25 18:29:02.725 OUTPUT:	ods-enforcerd
2011-03-25 18:29:02.725 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 18:29:02.740 - runCommand: Process started, PID: 5722
2011-03-25 18:29:02.740 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 18:29:02.740 02596 Wait(10)

2011-03-25 18:29:02.740 Requirement: ODSCC50

2011-03-25 18:29:12.741 02601 Wait(15)

2011-03-25 18:29:12.741 Requirement: ODSCC50

2011-03-25 18:29:27.741 02605 Stop()
2011-03-25 18:29:27.741 Requirement: ODSCC50
2011-03-25 18:29:27.741 RunCommand(ods-control stop)
2011-03-25 18:29:28.751 - runCommand: Process started, PID: 5752
2011-03-25 18:29:28.751 OUTPUT:	Stopping enforcer...
2011-03-25 18:29:28.751 OUTPUT:	Stopping signer engine..
2011-03-25 18:29:28.751 OUTPUT:	Engine shut down.
2011-03-25 18:29:28.751 RunCommand(ps -e | grep enforcer)
2011-03-25 18:29:28.766 - runCommand: Process started, PID: 5758
2011-03-25 18:29:28.766 ERROR:	return code = 1
2011-03-25 18:29:28.766 RunCommand(ps -e | grep signer)
2011-03-25 18:29:28.775 - runCommand: Process started, PID: 5761
2011-03-25 18:29:28.775 ERROR:	return code = 1

2011-03-25 18:29:28.776 02608 CheckLog()
2011-03-25 18:29:28.776 Requirement: ODSCC50
2011-03-25 18:29:31.653 PASSED:	(Check for Like) - Expected: all done! Found: Mar 25 18:29:27 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

2011-03-25 18:29:31.653 02610 Comment: Check if the ods files are present in the new temporay folder.

2011-03-25 18:29:31.653 Requirement: ODSCC50

2011-03-25 18:29:31.653 02614 CheckFilePresent(ods.denial)
2011-03-25 18:29:31.653 Requirement: ODSCC50
2011-03-25 18:29:31.653 FAILED:	(Check for Equal) - Expected: ods.denial Found: 

2011-03-25 18:29:31.653 02616 CheckFilePresent(ods.dnskeys)
2011-03-25 18:29:31.653 Requirement: ODSCC50
2011-03-25 18:29:31.653 FAILED:	(Check for Equal) - Expected: ods.dnskeys Found: 

2011-03-25 18:29:31.654 02618 CheckFilePresent(ods.finalized)
2011-03-25 18:29:31.654 Requirement: ODSCC50
2011-03-25 18:29:31.654 FAILED:	(Check for Equal) - Expected: ods.finalized Found: 

2011-03-25 18:29:31.654 02620 CheckFilePresent(ods.rrsigs)
2011-03-25 18:29:31.654 Requirement: ODSCC50
2011-03-25 18:29:31.654 FAILED:	(Check for Equal) - Expected: ods.rrsigs Found: 

2011-03-25 18:29:31.654 02622 CheckFilePresent(ods.state)
2011-03-25 18:29:31.654 Requirement: ODSCC50
2011-03-25 18:29:31.654 FAILED:	(Check for Equal) - Expected: ods.state Found: 

2011-03-25 18:29:31.654 02624 CheckFilePresent(ods.sc)
2011-03-25 18:29:31.654 Requirement: ODSCC50
2011-03-25 18:29:31.654 FAILED:	(Check for Equal) - Expected: ods.sc Found: 

2011-03-25 18:29:31.654 02626 CheckFilePresent(ods.unsorted)
2011-03-25 18:29:31.654 Requirement: ODSCC50
2011-03-25 18:29:31.654 FAILED:	(Check for Equal) - Expected: ods.unsorted Found: 

2011-03-25 18:29:31.655 02628 CheckFilePresent(ods.task)
2011-03-25 18:29:31.655 Requirement: ODSCC50
2011-03-25 18:29:31.655 FAILED:	(Check for Equal) - Expected: ods.task Found: 

2011-03-25 18:29:31.655 02631 Comment: Change the configuration with predefined original conf.xml file.

2011-03-25 18:29:31.655 Requirement: ODSCC50

2011-03-25 18:29:31.655 02635 LoadConfig()
2011-03-25 18:29:31.655 Requirement: ODSCC50
2011-03-25 18:29:31.655 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:29:31.658 - runCommand: Process started, PID: 5764
2011-03-25 18:29:31.658 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml': No such file or directory
2011-03-25 18:29:31.658 ERROR:	return code = 1

2011-03-25 18:29:31.658 02637 Comment: Update all the configs.

2011-03-25 18:29:31.658 Requirement: ODSCC50

2011-03-25 18:29:31.658 02639 ODSSetup()
2011-03-25 18:29:31.658 Requirement: ODSCC50
2011-03-25 18:29:31.658 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:29:42.964 - runCommand: Process started, PID: 5765
2011-03-25 18:29:42.965 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:29:42.966 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:29:42.966 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:29:42.966 OUTPUT:	Repository SoftHSM found
2011-03-25 18:29:42.966 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:29:42.966 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:29:42.966 OUTPUT:	Policy default2 found
2011-03-25 18:29:42.967 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:29:42.967 OUTPUT:	Policy default found
2011-03-25 18:29:42.967 OUTPUT:	Zone ods found
2011-03-25 18:29:42.967 OUTPUT:	Policy set to default.
2011-03-25 18:29:42.967 OUTPUT:	Added zone ods to database
2011-03-25 18:29:42.967 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:29:42.967 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:29:42.968 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSCC50T40: Change WorkerThreads to 1 and check if only 1 thread is used while signing

2011-03-25 18:29:42.977 02644 Comment: Number of working threads has been adjusted to 1 in the conf.xml.

2011-03-25 18:29:42.977 Requirement: ODSCC50

2011-03-25 18:29:42.981 02646 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 18:29:42.981 Requirement: ODSCC50

2011-03-25 18:29:42.984 02648 Stop()
2011-03-25 18:29:42.984 Requirement: ODSCC50
2011-03-25 18:29:42.985 RunCommand(ods-control stop)
2011-03-25 18:29:42.103 - runCommand: Process started, PID: 5778
2011-03-25 18:29:42.103 OUTPUT:	Stopping enforcer...
2011-03-25 18:29:42.103 OUTPUT:	Cannot find PID file
2011-03-25 18:29:42.103 OUTPUT:	Stopping signer engine..
2011-03-25 18:29:42.103 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 18:29:42.103 ERROR:	return code = 1
2011-03-25 18:29:42.103 RunCommand(ps -e | grep enforcer)
2011-03-25 18:29:42.118 - runCommand: Process started, PID: 5781
2011-03-25 18:29:42.118 ERROR:	return code = 1
2011-03-25 18:29:42.119 RunCommand(ps -e | grep signer)
2011-03-25 18:29:42.133 - runCommand: Process started, PID: 5784
2011-03-25 18:29:42.133 ERROR:	return code = 1

2011-03-25 18:29:42.134 02650 Wait(10)

2011-03-25 18:29:42.134 Requirement: ODSCC50

2011-03-25 18:29:52.134 02652 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 18:29:52.134 Requirement: ODSCC50

2011-03-25 18:29:52.135 02658 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 18:29:52.135 Requirement: ODSCC50

2011-03-25 18:29:52.135 02661 PurgeHSM()
2011-03-25 18:29:52.135 Requirement: ODSCC50
2011-03-25 18:29:52.135 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 18:29:52.507 - runCommand: Process started, PID: 5787
2011-03-25 18:29:52.507 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 18:29:52.507 OUTPUT:	2 keys found.
2011-03-25 18:29:52.507 OUTPUT:	
2011-03-25 18:29:52.507 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 18:29:52.507 OUTPUT:	Starting purge...
2011-03-25 18:29:52.507 OUTPUT:	Key remove successful: 5b8bb7e7dfd3e0b1e550f48566ca5403
2011-03-25 18:29:52.507 OUTPUT:	Key remove successful: 82c83535ec37d58b0b95aad55786e2d0
2011-03-25 18:29:52.507 OUTPUT:	Purge done.

2011-03-25 18:29:52.507 02663 Wait(10)

2011-03-25 18:29:52.507 Requirement: ODSCC50

2011-03-25 18:30:02.508 02665 Comment: Change the configuration with predefined xml config files.

2011-03-25 18:30:02.508 Requirement: ODSCC50

2011-03-25 18:30:02.508 02668 LoadConfig()
2011-03-25 18:30:02.508 Requirement: ODSCC50
2011-03-25 18:30:02.508 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T40_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:30:02.512 - runCommand: Process started, PID: 5791
2011-03-25 18:30:02.513 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T40_conf.xml': No such file or directory
2011-03-25 18:30:02.513 ERROR:	return code = 1

2011-03-25 18:30:02.513 02671 LoadConfig()
2011-03-25 18:30:02.513 Requirement: ODSCC50
2011-03-25 18:30:02.513 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 18:30:02.517 - runCommand: Process started, PID: 5792
2011-03-25 18:30:02.517 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 18:30:02.517 ERROR:	return code = 1

2011-03-25 18:30:02.517 02673 Comment: Update all the configs.

2011-03-25 18:30:02.517 Requirement: ODSCC50

2011-03-25 18:30:02.518 02675 ODSSetup()
2011-03-25 18:30:02.518 Requirement: ODSCC50
2011-03-25 18:30:02.518 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:30:13.389 - runCommand: Process started, PID: 5793
2011-03-25 18:30:13.390 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:30:13.391 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:30:13.391 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:30:13.391 OUTPUT:	Repository SoftHSM found
2011-03-25 18:30:13.391 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:30:13.391 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:30:13.391 OUTPUT:	Policy default2 found
2011-03-25 18:30:13.392 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:30:13.392 OUTPUT:	Policy default found
2011-03-25 18:30:13.392 OUTPUT:	Zone ods found
2011-03-25 18:30:13.392 OUTPUT:	Policy set to default.
2011-03-25 18:30:13.392 OUTPUT:	Added zone ods to database
2011-03-25 18:30:13.392 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:30:13.393 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:30:13.393 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 18:30:13.397 02677 Wait(10)

2011-03-25 18:30:13.397 Requirement: ODSCC50

2011-03-25 18:30:23.401 02679 Comment: Start enforcer

2011-03-25 18:30:23.402 Requirement: ODSCC50

2011-03-25 18:30:23.405 02681 Start()
2011-03-25 18:30:23.405 Requirement: ODSCC50
2011-03-25 18:30:23.406 RunCommand(ods-control start)
2011-03-25 18:30:23.419 - runCommand: Background process started, PID: 5806
2011-03-25 18:30:24.595 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 18:30:24.804 - runCommand: Process started, PID: 5821
2011-03-25 18:30:24.804 OUTPUT:	ods-enforcerd
2011-03-25 18:30:24.805 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 18:30:24.942 - runCommand: Process started, PID: 5826
2011-03-25 18:30:24.943 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 18:30:24.945 02683 Wait(10)

2011-03-25 18:30:24.945 Requirement: ODSCC50

2011-03-25 18:30:34.950 02688 Comment: Check if the number of threads is according to the conf.xml, in this case 1 thread for the proces ods-signerd.

2011-03-25 18:30:34.950 Requirement: ODSCC50

2011-03-25 18:30:34.954 02692 Wait(2)

2011-03-25 18:30:34.954 Requirement: ODSCC50

2011-03-25 18:30:36.959 02696 Wait(2)

2011-03-25 18:30:36.959 Requirement: ODSCC50

2011-03-25 18:30:38.963 02700 Wait(2)

2011-03-25 18:30:38.963 Requirement: ODSCC50

2011-03-25 18:30:40.968 02704 Wait(2)

2011-03-25 18:30:40.968 Requirement: ODSCC50

2011-03-25 18:30:42.972 02708 Wait(2)

2011-03-25 18:30:42.973 Requirement: ODSCC50

2011-03-25 18:30:44.977 02713 Wait(30)

2011-03-25 18:30:44.977 Requirement: ODSCC50

2011-03-25 18:31:14.982 02716 CheckLog()
2011-03-25 18:31:14.983 Requirement: ODSCC50
2011-03-25 18:31:16.983 FAILED:	(Check for Like) - Expected: ods-signerd: cmdhandler: zone ods scheduled for immediate re-sign Found: 

2011-03-25 18:31:16.983 02718 Comment: Change the configuration with predefined original conf.xml file.

2011-03-25 18:31:16.983 Requirement: ODSCC50

2011-03-25 18:31:16.983 02721 LoadConfig()
2011-03-25 18:31:16.984 Requirement: ODSCC50
2011-03-25 18:31:16.984 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:31:16.986 - runCommand: Process started, PID: 5856
2011-03-25 18:31:16.986 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml': No such file or directory
2011-03-25 18:31:16.986 ERROR:	return code = 1

2011-03-25 18:31:16.987 02723 Comment: Update all the configs.

2011-03-25 18:31:16.987 Requirement: ODSCC50

2011-03-25 18:31:16.987 02725 ODSSetup()
2011-03-25 18:31:16.987 Requirement: ODSCC50
2011-03-25 18:31:16.987 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:31:27.925 - runCommand: Process started, PID: 5857
2011-03-25 18:31:27.925 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:31:27.925 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:31:27.925 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:31:27.925 OUTPUT:	Repository SoftHSM found
2011-03-25 18:31:27.925 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:31:27.925 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:31:27.925 OUTPUT:	Policy default2 found
2011-03-25 18:31:27.925 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:31:27.925 OUTPUT:	Policy default found
2011-03-25 18:31:27.925 OUTPUT:	Zone ods found
2011-03-25 18:31:27.925 OUTPUT:	Policy set to default.
2011-03-25 18:31:27.925 OUTPUT:	Added zone ods to database
2011-03-25 18:31:27.925 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:31:27.925 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:31:27.925 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSCC50T50: Change WorkerThreads to 100 and check if 100 threads are used while signing

2011-03-25 18:31:27.926 02729 Comment: Number of working threads has been adjusted to 100 in the conf.xml.

2011-03-25 18:31:27.926 Requirement: ODSCC50

2011-03-25 18:31:27.927 02731 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 18:31:27.927 Requirement: ODSCC50

2011-03-25 18:31:27.927 02733 Stop()
2011-03-25 18:31:27.927 Requirement: ODSCC50
2011-03-25 18:31:27.927 RunCommand(ods-control stop)
2011-03-25 18:31:28.936 - runCommand: Process started, PID: 5880
2011-03-25 18:31:28.936 OUTPUT:	Stopping enforcer...
2011-03-25 18:31:28.936 OUTPUT:	Stopping signer engine..
2011-03-25 18:31:28.936 OUTPUT:	Engine shut down.
2011-03-25 18:31:28.936 RunCommand(ps -e | grep enforcer)
2011-03-25 18:31:28.952 - runCommand: Process started, PID: 5886
2011-03-25 18:31:28.952 ERROR:	return code = 1
2011-03-25 18:31:28.952 RunCommand(ps -e | grep signer)
2011-03-25 18:31:28.963 - runCommand: Process started, PID: 5889
2011-03-25 18:31:28.963 ERROR:	return code = 1

2011-03-25 18:31:28.963 02735 Wait(10)

2011-03-25 18:31:28.963 Requirement: ODSCC50

2011-03-25 18:31:38.964 02737 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 18:31:38.964 Requirement: ODSCC50

2011-03-25 18:31:38.964 02743 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 18:31:38.964 Requirement: ODSCC50

2011-03-25 18:31:38.965 02746 PurgeHSM()
2011-03-25 18:31:38.965 Requirement: ODSCC50
2011-03-25 18:31:38.965 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 18:31:39.344 - runCommand: Process started, PID: 5892
2011-03-25 18:31:39.344 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 18:31:39.344 OUTPUT:	2 keys found.
2011-03-25 18:31:39.344 OUTPUT:	
2011-03-25 18:31:39.344 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 18:31:39.344 OUTPUT:	Starting purge...
2011-03-25 18:31:39.344 OUTPUT:	Key remove successful: 18d17e2e2665fbb28691cd37a9e32cc0
2011-03-25 18:31:39.344 OUTPUT:	Key remove successful: ac23b5512bda839cc62cba7b1a7bbe03
2011-03-25 18:31:39.344 OUTPUT:	Purge done.

2011-03-25 18:31:39.344 02748 Wait(10)

2011-03-25 18:31:39.344 Requirement: ODSCC50

2011-03-25 18:31:49.345 02750 Comment: Change the configuration with predefined xml config files.

2011-03-25 18:31:49.345 Requirement: ODSCC50

2011-03-25 18:31:49.345 02753 LoadConfig()
2011-03-25 18:31:49.345 Requirement: ODSCC50
2011-03-25 18:31:49.345 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T50_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:31:49.349 - runCommand: Process started, PID: 5896
2011-03-25 18:31:49.350 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T50_conf.xml': No such file or directory
2011-03-25 18:31:49.350 ERROR:	return code = 1

2011-03-25 18:31:49.350 02756 LoadConfig()
2011-03-25 18:31:49.350 Requirement: ODSCC50
2011-03-25 18:31:49.350 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 18:31:49.354 - runCommand: Process started, PID: 5897
2011-03-25 18:31:49.354 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 18:31:49.354 ERROR:	return code = 1

2011-03-25 18:31:49.354 02758 Comment: Update all the configs.

2011-03-25 18:31:49.354 Requirement: ODSCC50

2011-03-25 18:31:49.355 02760 ODSSetup()
2011-03-25 18:31:49.355 Requirement: ODSCC50
2011-03-25 18:31:49.355 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:31:59.601 - runCommand: Process started, PID: 5898
2011-03-25 18:31:59.601 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:31:59.601 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:31:59.601 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:31:59.601 OUTPUT:	Repository SoftHSM found
2011-03-25 18:31:59.601 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:31:59.601 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:31:59.601 OUTPUT:	Policy default2 found
2011-03-25 18:31:59.601 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:31:59.601 OUTPUT:	Policy default found
2011-03-25 18:31:59.601 OUTPUT:	Zone ods found
2011-03-25 18:31:59.601 OUTPUT:	Policy set to default.
2011-03-25 18:31:59.601 OUTPUT:	Added zone ods to database
2011-03-25 18:31:59.601 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:31:59.601 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:31:59.601 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 18:31:59.601 02762 Wait(10)

2011-03-25 18:31:59.601 Requirement: ODSCC50

2011-03-25 18:32:09.602 02764 Comment: Start enforcer

2011-03-25 18:32:09.602 Requirement: ODSCC50

2011-03-25 18:32:09.602 02766 Start()
2011-03-25 18:32:09.602 Requirement: ODSCC50
2011-03-25 18:32:09.602 RunCommand(ods-control start)
2011-03-25 18:32:09.604 - runCommand: Background process started, PID: 5911
2011-03-25 18:32:10.621 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 18:32:10.633 - runCommand: Process started, PID: 5926
2011-03-25 18:32:10.633 OUTPUT:	ods-enforcerd
2011-03-25 18:32:10.633 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 18:32:10.647 - runCommand: Process started, PID: 5931
2011-03-25 18:32:10.647 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 18:32:10.647 02768 Wait(10)

2011-03-25 18:32:10.647 Requirement: ODSCC50

2011-03-25 18:32:20.647 02774 Comment: Check if the number of threads is according to the conf.xml, in this case 100 thread for the proces ods-signerd.

2011-03-25 18:32:20.647 Requirement: ODSCC50

2011-03-25 18:32:20.648 02778 Wait(2)

2011-03-25 18:32:20.648 Requirement: ODSCC50

2011-03-25 18:32:22.648 02782 Wait(2)

2011-03-25 18:32:22.648 Requirement: ODSCC50

2011-03-25 18:32:24.649 02786 Wait(2)

2011-03-25 18:32:24.649 Requirement: ODSCC50

2011-03-25 18:32:26.649 02790 Wait(2)

2011-03-25 18:32:26.649 Requirement: ODSCC50

2011-03-25 18:32:28.650 02794 Wait(2)

2011-03-25 18:32:28.650 Requirement: ODSCC50

2011-03-25 18:32:30.650 02798 Wait(15)

2011-03-25 18:32:30.650 Requirement: ODSCC50

2011-03-25 18:32:45.651 02801 CheckLog()
2011-03-25 18:32:45.651 Requirement: ODSCC50
2011-03-25 18:32:48.532 FAILED:	(Check for Like) - Expected: ods-signerd: cmdhandler: zone ods scheduled for immediate re-sign Found: 

2011-03-25 18:32:48.532 02803 Comment: Change the configuration with predefined original conf.xml file.

2011-03-25 18:32:48.532 Requirement: ODSCC50

2011-03-25 18:32:48.533 02806 LoadConfig()
2011-03-25 18:32:48.533 Requirement: ODSCC50
2011-03-25 18:32:48.533 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:32:48.535 - runCommand: Process started, PID: 5961
2011-03-25 18:32:48.536 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml': No such file or directory
2011-03-25 18:32:48.536 ERROR:	return code = 1

2011-03-25 18:32:48.536 02808 Comment: Update all the configs.

2011-03-25 18:32:48.536 Requirement: ODSCC50

-------------------------------------------------------------------------------
Testcase - ODSCC50T60: Use a simple script as NotifyCommand and check if it is executed after signing

2011-03-25 18:32:48.536 02814 Comment: Notify script will be started, to check the notify functionality in the conf.xml configuration.

2011-03-25 18:32:48.536 Requirement: ODSCC50

2011-03-25 18:32:48.537 02816 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 18:32:48.537 Requirement: ODSCC50

2011-03-25 18:32:48.537 02818 Stop()
2011-03-25 18:32:48.537 Requirement: ODSCC50
2011-03-25 18:32:48.537 RunCommand(ods-control stop)
2011-03-25 18:32:49.543 - runCommand: Process started, PID: 5962
2011-03-25 18:32:49.543 OUTPUT:	Stopping enforcer...
2011-03-25 18:32:49.543 OUTPUT:	Stopping signer engine..
2011-03-25 18:32:49.543 OUTPUT:	Engine shut down.
2011-03-25 18:32:49.543 RunCommand(ps -e | grep enforcer)
2011-03-25 18:32:49.562 - runCommand: Process started, PID: 5968
2011-03-25 18:32:49.562 ERROR:	return code = 1
2011-03-25 18:32:49.562 RunCommand(ps -e | grep signer)
2011-03-25 18:32:49.577 - runCommand: Process started, PID: 5971
2011-03-25 18:32:49.577 ERROR:	return code = 1

2011-03-25 18:32:49.577 02820 Wait(10)

2011-03-25 18:32:49.577 Requirement: ODSCC50

2011-03-25 18:32:59.578 02822 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 18:32:59.578 Requirement: ODSCC50

2011-03-25 18:32:59.578 02828 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 18:32:59.578 Requirement: ODSCC50

2011-03-25 18:32:59.579 02831 PurgeHSM()
2011-03-25 18:32:59.579 Requirement: ODSCC50
2011-03-25 18:32:59.579 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 18:32:59.961 - runCommand: Process started, PID: 5974
2011-03-25 18:32:59.961 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 18:32:59.961 OUTPUT:	2 keys found.
2011-03-25 18:32:59.961 OUTPUT:	
2011-03-25 18:32:59.961 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 18:32:59.961 OUTPUT:	Starting purge...
2011-03-25 18:32:59.961 OUTPUT:	Key remove successful: c7e1170ec004720b942dbeaef151d05d
2011-03-25 18:32:59.961 OUTPUT:	Key remove successful: 0206e0eba77503ebb16ecc700f09fb11
2011-03-25 18:32:59.961 OUTPUT:	Purge done.

2011-03-25 18:32:59.961 02833 Wait(10)

2011-03-25 18:32:59.961 Requirement: ODSCC50

2011-03-25 18:33:09.962 02835 Comment: Change the configuration with predefined xml config files.

2011-03-25 18:33:09.962 Requirement: ODSCC50

2011-03-25 18:33:09.962 02838 LoadConfig()
2011-03-25 18:33:09.962 Requirement: ODSCC50
2011-03-25 18:33:09.962 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T60_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:33:09.967 - runCommand: Process started, PID: 5978
2011-03-25 18:33:09.967 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T60_conf.xml': No such file or directory
2011-03-25 18:33:09.967 ERROR:	return code = 1

2011-03-25 18:33:09.967 02841 LoadConfig()
2011-03-25 18:33:09.967 Requirement: ODSCC50
2011-03-25 18:33:09.967 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 18:33:09.971 - runCommand: Process started, PID: 5979
2011-03-25 18:33:09.971 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 18:33:09.971 ERROR:	return code = 1

2011-03-25 18:33:09.971 02843 Comment: Update all the configs.

2011-03-25 18:33:09.972 Requirement: ODSCC50

2011-03-25 18:33:09.972 02845 ODSSetup()
2011-03-25 18:33:09.972 Requirement: ODSCC50
2011-03-25 18:33:09.972 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:33:20.767 - runCommand: Process started, PID: 5980
2011-03-25 18:33:20.768 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:33:20.768 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:33:20.768 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:33:20.768 OUTPUT:	Repository SoftHSM found
2011-03-25 18:33:20.768 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:33:20.768 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:33:20.768 OUTPUT:	Policy default2 found
2011-03-25 18:33:20.768 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:33:20.768 OUTPUT:	Policy default found
2011-03-25 18:33:20.768 OUTPUT:	Zone ods found
2011-03-25 18:33:20.768 OUTPUT:	Policy set to default.
2011-03-25 18:33:20.768 OUTPUT:	Added zone ods to database
2011-03-25 18:33:20.768 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:33:20.768 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:33:20.768 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 18:33:20.768 02847 Wait(10)

2011-03-25 18:33:20.768 Requirement: ODSCC50

2011-03-25 18:33:30.769 02849 Comment: Start enforcer

2011-03-25 18:33:30.769 Requirement: ODSCC50

2011-03-25 18:33:30.769 02851 Start()
2011-03-25 18:33:30.769 Requirement: ODSCC50
2011-03-25 18:33:30.769 RunCommand(ods-control start)
2011-03-25 18:33:30.770 - runCommand: Background process started, PID: 5993
2011-03-25 18:33:31.793 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 18:33:31.808 - runCommand: Process started, PID: 6009
2011-03-25 18:33:31.808 OUTPUT:	ods-enforcerd
2011-03-25 18:33:31.808 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 18:33:31.823 - runCommand: Process started, PID: 6021
2011-03-25 18:33:31.823 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 18:33:31.823 02853 Wait(10)

2011-03-25 18:33:31.823 Requirement: ODSCC50

2011-03-25 18:33:41.824 02858 Wait(15)

2011-03-25 18:33:41.824 Requirement: ODSCC50

2011-03-25 18:33:56.824 02861 CheckLog()
2011-03-25 18:33:56.824 Requirement: ODSCC50
2011-03-25 18:33:59.710 FAILED:	(Check for Like) - Expected: ods-signerd: cmdhandler: zone ods scheduled for immediate re-sign Found: 

2011-03-25 18:33:59.710 02863 Comment: Check if new file has been created in folder /tmp

2011-03-25 18:33:59.710 Requirement: ODSCC50

2011-03-25 18:33:59.710 02867 CheckFilePresent(ods-notify-230311)
2011-03-25 18:33:59.710 Requirement: ODSCC50
2011-03-25 18:33:59.710 FAILED:	(Check for Equal) - Expected: ods-notify-230311 Found: 

2011-03-25 18:33:59.710 02869 Comment: Change the configuration with predefined original conf.xml file.

2011-03-25 18:33:59.710 Requirement: ODSCC50

2011-03-25 18:33:59.711 02872 LoadConfig()
2011-03-25 18:33:59.711 Requirement: ODSCC50
2011-03-25 18:33:59.711 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:33:59.713 - runCommand: Process started, PID: 6043
2011-03-25 18:33:59.714 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml': No such file or directory
2011-03-25 18:33:59.714 ERROR:	return code = 1

2011-03-25 18:33:59.714 02874 Comment: Update all the configs.

2011-03-25 18:33:59.714 Requirement: ODSCC50
Testcondition - ODSCC60: Auditor should run during every resign and if configured in partial mode
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSCC60T10: Use privileges test:test for auditor in config only and check if auditor fails to run

2011-03-25 18:33:59.715 02881 Comment: Privileges have been adjusted for the auditor in the conf.xml. User = opendnssec; Group = opendnssec. This user and group do not have acces to the correct folder.

2011-03-25 18:33:59.715 Requirement: ODSCC60

2011-03-25 18:33:59.715 02883 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 18:33:59.715 Requirement: ODSCC60

2011-03-25 18:33:59.715 02885 Stop()
2011-03-25 18:33:59.715 Requirement: ODSCC60
2011-03-25 18:33:59.715 RunCommand(ods-control stop)
2011-03-25 18:34:00.722 - runCommand: Process started, PID: 6044
2011-03-25 18:34:00.722 OUTPUT:	Stopping enforcer...
2011-03-25 18:34:00.722 OUTPUT:	Stopping signer engine..
2011-03-25 18:34:00.722 OUTPUT:	Engine shut down.
2011-03-25 18:34:00.722 RunCommand(ps -e | grep enforcer)
2011-03-25 18:34:00.737 - runCommand: Process started, PID: 6050
2011-03-25 18:34:00.737 ERROR:	return code = 1
2011-03-25 18:34:00.737 RunCommand(ps -e | grep signer)
2011-03-25 18:34:00.750 - runCommand: Process started, PID: 6053
2011-03-25 18:34:00.750 ERROR:	return code = 1

2011-03-25 18:34:00.750 02887 Wait(10)

2011-03-25 18:34:00.750 Requirement: ODSCC60

2011-03-25 18:34:10.750 02889 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 18:34:10.750 Requirement: ODSCC60

2011-03-25 18:34:10.751 02895 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 18:34:10.751 Requirement: ODSCC60

2011-03-25 18:34:10.751 02898 PurgeHSM()
2011-03-25 18:34:10.751 Requirement: ODSCC60
2011-03-25 18:34:10.751 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 18:34:11.116 - runCommand: Process started, PID: 6056
2011-03-25 18:34:11.116 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 18:34:11.116 OUTPUT:	2 keys found.
2011-03-25 18:34:11.116 OUTPUT:	
2011-03-25 18:34:11.116 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-25 18:34:11.116 OUTPUT:	Starting purge...
2011-03-25 18:34:11.116 OUTPUT:	Key remove successful: 4a7b9cd2d1c6fc738f7046c10861ada9
2011-03-25 18:34:11.116 OUTPUT:	Key remove successful: 35f17e7f51f47910eefc3468eb070e53
2011-03-25 18:34:11.116 OUTPUT:	Purge done.

2011-03-25 18:34:11.117 02900 Wait(10)

2011-03-25 18:34:11.117 Requirement: ODSCC60

2011-03-25 18:34:21.117 02902 Comment: Rebuild ODS with SQLlite database.

2011-03-25 18:34:21.117 Requirement: ODSCC60

2011-03-25 18:34:21.117 02908 Wait(60)

2011-03-25 18:34:21.117 Requirement: ODSCC60

2011-03-25 18:35:21.118 02912 Wait(60)

2011-03-25 18:35:21.118 Requirement: ODSCC60

2011-03-25 18:36:21.118 02916 Wait(60)

2011-03-25 18:36:21.118 Requirement: ODSCC60

2011-03-25 18:37:21.119 02919 Comment: Change the configuration with predefined xml config files.

2011-03-25 18:37:21.119 Requirement: ODSCC60

2011-03-25 18:37:21.119 02922 LoadConfig()
2011-03-25 18:37:21.119 Requirement: ODSCC60
2011-03-25 18:37:21.119 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:37:21.124 - runCommand: Process started, PID: 6060
2011-03-25 18:37:21.124 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml': No such file or directory
2011-03-25 18:37:21.124 ERROR:	return code = 1

2011-03-25 18:37:21.124 02925 LoadConfig()
2011-03-25 18:37:21.124 Requirement: ODSCC60
2011-03-25 18:37:21.124 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 18:37:21.128 - runCommand: Process started, PID: 6061
2011-03-25 18:37:21.128 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 18:37:21.128 ERROR:	return code = 1

2011-03-25 18:37:21.129 02927 Comment: Run setup for rebuild of database

2011-03-25 18:37:21.129 Requirement: ODSCC60

2011-03-25 18:37:21.129 02931 Wait(20)

2011-03-25 18:37:21.129 Requirement: ODSCC60

2011-03-25 18:37:41.129 02933 Comment: Update all the configs.

2011-03-25 18:37:41.130 Requirement: ODSCC60

2011-03-25 18:37:41.130 02935 ODSSetup()
2011-03-25 18:37:41.130 Requirement: ODSCC60
2011-03-25 18:37:41.130 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:37:51.712 - runCommand: Process started, PID: 6062
2011-03-25 18:37:51.712 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:37:51.712 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:37:51.712 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:37:51.712 OUTPUT:	Repository SoftHSM found
2011-03-25 18:37:51.712 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:37:51.712 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:37:51.712 OUTPUT:	Policy default2 found
2011-03-25 18:37:51.712 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:37:51.712 OUTPUT:	Policy default found
2011-03-25 18:37:51.712 OUTPUT:	Zone ods found
2011-03-25 18:37:51.712 OUTPUT:	Policy set to default.
2011-03-25 18:37:51.712 OUTPUT:	Added zone ods to database
2011-03-25 18:37:51.712 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:37:51.712 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:37:51.712 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 18:37:51.713 02937 Wait(10)

2011-03-25 18:37:51.713 Requirement: ODSCC60

2011-03-25 18:38:01.713 02939 Comment: Change the configuration with predefined xml config files for this testcase.

2011-03-25 18:38:01.713 Requirement: ODSCC60

2011-03-25 18:38:01.714 02942 LoadConfig()
2011-03-25 18:38:01.714 Requirement: ODSCC60
2011-03-25 18:38:01.714 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC60T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:38:01.718 - runCommand: Process started, PID: 6075
2011-03-25 18:38:01.718 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC60T10_conf.xml': No such file or directory
2011-03-25 18:38:01.718 ERROR:	return code = 1

2011-03-25 18:38:01.719 02945 LoadConfig()
2011-03-25 18:38:01.719 Requirement: ODSCC60
2011-03-25 18:38:01.719 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 18:38:01.723 - runCommand: Process started, PID: 6076
2011-03-25 18:38:01.723 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 18:38:01.723 ERROR:	return code = 1

2011-03-25 18:38:01.723 02947 Comment: Update all the configs.

2011-03-25 18:38:01.723 Requirement: ODSCC60

2011-03-25 18:38:01.723 02949 ODSSetup()
2011-03-25 18:38:01.723 Requirement: ODSCC60
2011-03-25 18:38:01.723 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:38:12.260 - runCommand: Process started, PID: 6077
2011-03-25 18:38:12.260 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:38:12.260 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:38:12.260 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:38:12.260 OUTPUT:	Repository SoftHSM found
2011-03-25 18:38:12.260 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:38:12.260 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:38:12.260 OUTPUT:	Policy default2 found
2011-03-25 18:38:12.260 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:38:12.260 OUTPUT:	Policy default found
2011-03-25 18:38:12.260 OUTPUT:	Zone ods found
2011-03-25 18:38:12.260 OUTPUT:	Policy set to default.
2011-03-25 18:38:12.260 OUTPUT:	Added zone ods to database
2011-03-25 18:38:12.260 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:38:12.260 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:38:12.260 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 18:38:12.261 02951 Wait(10)

2011-03-25 18:38:12.261 Requirement: ODSCC60

2011-03-25 18:38:22.261 02954 CheckLog()
2011-03-25 18:38:22.261 Requirement: ODSCC60

2011-03-25 18:38:25.137 02956 Comment: Change the configuration with predefined original conf.xml file.

2011-03-25 18:38:25.137 Requirement: ODSCC60

2011-03-25 18:38:25.137 02959 LoadConfig()
2011-03-25 18:38:25.137 Requirement: ODSCC60
2011-03-25 18:38:25.137 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:38:25.140 - runCommand: Process started, PID: 6090
2011-03-25 18:38:25.140 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml': No such file or directory
2011-03-25 18:38:25.140 ERROR:	return code = 1

2011-03-25 18:38:25.140 02961 Comment: Update all the configs.

2011-03-25 18:38:25.140 Requirement: ODSCC60

2011-03-25 18:38:25.140 02963 ODSSetup()
2011-03-25 18:38:25.140 Requirement: ODSCC60
2011-03-25 18:38:25.140 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:38:35.398 - runCommand: Process started, PID: 6091
2011-03-25 18:38:35.398 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:38:35.398 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:38:35.398 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:38:35.398 OUTPUT:	Repository SoftHSM found
2011-03-25 18:38:35.398 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:38:35.398 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:38:35.398 OUTPUT:	Policy default2 found
2011-03-25 18:38:35.398 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:38:35.398 OUTPUT:	Policy default found
2011-03-25 18:38:35.398 OUTPUT:	Zone ods found
2011-03-25 18:38:35.398 OUTPUT:	Policy set to default.
2011-03-25 18:38:35.398 OUTPUT:	Added zone ods to database
2011-03-25 18:38:35.398 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:38:35.398 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:38:35.398 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSCC60T20: Use privileges kasptest:kasptest for ods-auditor and at auditor in config and check if auditor runs without errors

2011-03-25 18:38:35.399 02970 Comment: Privileges have been adjusted for the auditor in the conf.xml. User = kasptest; Group = kasptest. This user and group do have acces to the correct folders: 
- /var/opendnssec/tmp/
- /etc/opendnssec/

2011-03-25 18:38:35.399 Requirement: ODSCC60

2011-03-25 18:38:35.400 02971 Comment: Change permissions of the folders mentioned above. 

2011-03-25 18:38:35.400 Requirement: ODSCC60

2011-03-25 18:38:35.400 02981 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 18:38:35.400 Requirement: ODSCC60

2011-03-25 18:38:35.400 02983 Stop()
2011-03-25 18:38:35.400 Requirement: ODSCC60
2011-03-25 18:38:35.401 RunCommand(ods-control stop)
2011-03-25 18:38:35.406 - runCommand: Process started, PID: 6104
2011-03-25 18:38:35.406 OUTPUT:	Stopping enforcer...
2011-03-25 18:38:35.406 OUTPUT:	Cannot find PID file
2011-03-25 18:38:35.406 OUTPUT:	Stopping signer engine..
2011-03-25 18:38:35.406 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 18:38:35.406 ERROR:	return code = 1
2011-03-25 18:38:35.406 RunCommand(ps -e | grep enforcer)
2011-03-25 18:38:35.421 - runCommand: Process started, PID: 6107
2011-03-25 18:38:35.421 ERROR:	return code = 1
2011-03-25 18:38:35.421 RunCommand(ps -e | grep signer)
2011-03-25 18:38:35.436 - runCommand: Process started, PID: 6110
2011-03-25 18:38:35.436 ERROR:	return code = 1

2011-03-25 18:38:35.437 02985 Wait(10)

2011-03-25 18:38:35.437 Requirement: ODSCC60

2011-03-25 18:38:45.437 02987 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 18:38:45.437 Requirement: ODSCC60

2011-03-25 18:38:45.437 02993 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 18:38:45.437 Requirement: ODSCC60

2011-03-25 18:38:45.438 02996 PurgeHSM()
2011-03-25 18:38:45.438 Requirement: ODSCC60
2011-03-25 18:38:45.438 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 18:38:45.449 - runCommand: Process started, PID: 6113
2011-03-25 18:38:45.449 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 18:38:45.449 OUTPUT:	0 keys found.
2011-03-25 18:38:45.449 ERROR:	return code = 255

2011-03-25 18:38:45.450 02998 Wait(10)

2011-03-25 18:38:45.450 Requirement: ODSCC60

2011-03-25 18:38:55.450 03000 Comment: Change the configuration with predefined xml config files for this testcase.

2011-03-25 18:38:55.450 Requirement: ODSCC60

2011-03-25 18:38:55.450 03003 LoadConfig()
2011-03-25 18:38:55.450 Requirement: ODSCC60
2011-03-25 18:38:55.451 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC60T20_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:38:55.455 - runCommand: Process started, PID: 6117
2011-03-25 18:38:55.455 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC60T20_conf.xml': No such file or directory
2011-03-25 18:38:55.455 ERROR:	return code = 1

2011-03-25 18:38:55.455 03006 LoadConfig()
2011-03-25 18:38:55.455 Requirement: ODSCC60
2011-03-25 18:38:55.455 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 18:38:55.459 - runCommand: Process started, PID: 6118
2011-03-25 18:38:55.459 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 18:38:55.459 ERROR:	return code = 1

2011-03-25 18:38:55.460 03008 Comment: Update all the configs.

2011-03-25 18:38:55.460 Requirement: ODSCC60

2011-03-25 18:38:55.460 03010 ODSSetup()
2011-03-25 18:38:55.460 Requirement: ODSCC60
2011-03-25 18:38:55.460 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:39:05.766 - runCommand: Process started, PID: 6119
2011-03-25 18:39:05.766 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:39:05.766 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:39:05.766 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:39:05.766 OUTPUT:	Repository SoftHSM found
2011-03-25 18:39:05.766 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:39:05.766 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:39:05.766 OUTPUT:	Policy default2 found
2011-03-25 18:39:05.766 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:39:05.766 OUTPUT:	Policy default found
2011-03-25 18:39:05.766 OUTPUT:	Zone ods found
2011-03-25 18:39:05.766 OUTPUT:	Policy set to default.
2011-03-25 18:39:05.766 OUTPUT:	Added zone ods to database
2011-03-25 18:39:05.766 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:39:05.766 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:39:05.766 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 18:39:05.767 03012 Wait(10)

2011-03-25 18:39:05.767 Requirement: ODSCC60

2011-03-25 18:39:15.767 03016 Stop()
2011-03-25 18:39:15.767 Requirement: ODSCC60
2011-03-25 18:39:15.767 RunCommand(ods-control stop)
2011-03-25 18:39:15.772 - runCommand: Process started, PID: 6132
2011-03-25 18:39:15.773 OUTPUT:	Stopping enforcer...
2011-03-25 18:39:15.773 OUTPUT:	Cannot find PID file
2011-03-25 18:39:15.773 OUTPUT:	Stopping signer engine..
2011-03-25 18:39:15.773 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 18:39:15.773 ERROR:	return code = 1
2011-03-25 18:39:15.773 RunCommand(ps -e | grep enforcer)
2011-03-25 18:39:15.788 - runCommand: Process started, PID: 6135
2011-03-25 18:39:15.788 ERROR:	return code = 1
2011-03-25 18:39:15.788 RunCommand(ps -e | grep signer)
2011-03-25 18:39:15.803 - runCommand: Process started, PID: 6138
2011-03-25 18:39:15.803 ERROR:	return code = 1

2011-03-25 18:39:15.803 03018 Comment: If the change is ok, the signing of the zone will be succesfull. 

2011-03-25 18:39:15.803 Requirement: ODSCC60

2011-03-25 18:39:15.804 03021 CheckLog()
2011-03-25 18:39:15.804 Requirement: ODSCC60

2011-03-25 18:39:18.689 03023 Comment: Restore the situation/configuration as it was before running the testcase.

2011-03-25 18:39:18.689 Requirement: ODSCC60

2011-03-25 18:39:18.690 03025 Comment: Change permissions of the folders mentioned above. 

2011-03-25 18:39:18.690 Requirement: ODSCC60

2011-03-25 18:39:18.690 03035 Comment: Change the configuration with predefined original conf.xml file.

2011-03-25 18:39:18.690 Requirement: ODSCC60

2011-03-25 18:39:18.690 03038 LoadConfig()
2011-03-25 18:39:18.690 Requirement: ODSCC60
2011-03-25 18:39:18.690 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:39:18.693 - runCommand: Process started, PID: 6141
2011-03-25 18:39:18.693 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml': No such file or directory
2011-03-25 18:39:18.693 ERROR:	return code = 1

2011-03-25 18:39:18.693 03040 Comment: Update all the configs.

2011-03-25 18:39:18.693 Requirement: ODSCC60

2011-03-25 18:39:18.693 03042 ODSSetup()
2011-03-25 18:39:18.693 Requirement: ODSCC60
2011-03-25 18:39:18.693 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:39:29.154 - runCommand: Process started, PID: 6142
2011-03-25 18:39:29.154 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:39:29.154 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:39:29.154 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:39:29.154 OUTPUT:	Repository SoftHSM found
2011-03-25 18:39:29.154 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:39:29.154 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:39:29.154 OUTPUT:	Policy default2 found
2011-03-25 18:39:29.154 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:39:29.154 OUTPUT:	Policy default found
2011-03-25 18:39:29.154 OUTPUT:	Zone ods found
2011-03-25 18:39:29.154 OUTPUT:	Policy set to default.
2011-03-25 18:39:29.154 OUTPUT:	Added zone ods to database
2011-03-25 18:39:29.154 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:39:29.154 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:39:29.154 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSCC60T30: Change the /tmp location and change WorkingDirectory in conf.xml accordingly

2011-03-25 18:39:29.155 03047 Comment: Working directory has been adjusted in the conf.xml. Working directory now is: var/opendnssec/temporary_auditor. Make sure that directory exists before running this testcase, if not it will be created in this testcase.

2011-03-25 18:39:29.155 Requirement: ODSCC60

2011-03-25 18:39:29.156 03049 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-25 18:39:29.156 Requirement: ODSCC60

2011-03-25 18:39:29.156 03051 Stop()
2011-03-25 18:39:29.156 Requirement: ODSCC60
2011-03-25 18:39:29.156 RunCommand(ods-control stop)
2011-03-25 18:39:29.161 - runCommand: Process started, PID: 6155
2011-03-25 18:39:29.161 OUTPUT:	Stopping enforcer...
2011-03-25 18:39:29.161 OUTPUT:	Cannot find PID file
2011-03-25 18:39:29.161 OUTPUT:	Stopping signer engine..
2011-03-25 18:39:29.161 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-25 18:39:29.161 ERROR:	return code = 1
2011-03-25 18:39:29.161 RunCommand(ps -e | grep enforcer)
2011-03-25 18:39:29.176 - runCommand: Process started, PID: 6158
2011-03-25 18:39:29.177 ERROR:	return code = 1
2011-03-25 18:39:29.177 RunCommand(ps -e | grep signer)
2011-03-25 18:39:29.191 - runCommand: Process started, PID: 6161
2011-03-25 18:39:29.192 ERROR:	return code = 1

2011-03-25 18:39:29.192 03053 Wait(10)

2011-03-25 18:39:29.192 Requirement: ODSCC60

2011-03-25 18:39:39.192 03055 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-25 18:39:39.192 Requirement: ODSCC60

2011-03-25 18:39:39.193 03061 Comment: Purge the keys in the SoftHSM repositories.

2011-03-25 18:39:39.193 Requirement: ODSCC60

2011-03-25 18:39:39.193 03064 PurgeHSM()
2011-03-25 18:39:39.193 Requirement: ODSCC60
2011-03-25 18:39:39.193 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-25 18:39:39.206 - runCommand: Process started, PID: 6164
2011-03-25 18:39:39.206 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-25 18:39:39.206 OUTPUT:	0 keys found.
2011-03-25 18:39:39.206 ERROR:	return code = 255

2011-03-25 18:39:39.207 03066 Wait(10)

2011-03-25 18:39:39.207 Requirement: ODSCC60

2011-03-25 18:39:49.207 03072 Comment: Change the configuration with predefined xml config files.

2011-03-25 18:39:49.207 Requirement: ODSCC60

2011-03-25 18:39:49.208 03075 LoadConfig()
2011-03-25 18:39:49.208 Requirement: ODSCC60
2011-03-25 18:39:49.208 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC60T30_conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:39:49.212 - runCommand: Process started, PID: 6168
2011-03-25 18:39:49.212 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC60T30_conf.xml': No such file or directory
2011-03-25 18:39:49.212 ERROR:	return code = 1

2011-03-25 18:39:49.212 03078 LoadConfig()
2011-03-25 18:39:49.212 Requirement: ODSCC60
2011-03-25 18:39:49.212 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-25 18:39:49.216 - runCommand: Process started, PID: 6169
2011-03-25 18:39:49.216 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml': No such file or directory
2011-03-25 18:39:49.216 ERROR:	return code = 1

2011-03-25 18:39:49.217 03080 Comment: Update all the configs.

2011-03-25 18:39:49.217 Requirement: ODSCC60

2011-03-25 18:39:49.217 03082 ODSSetup()
2011-03-25 18:39:49.217 Requirement: ODSCC60
2011-03-25 18:39:49.217 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:39:59.622 - runCommand: Process started, PID: 6170
2011-03-25 18:39:59.622 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:39:59.622 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:39:59.622 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:39:59.622 OUTPUT:	Repository SoftHSM found
2011-03-25 18:39:59.622 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:39:59.622 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:39:59.622 OUTPUT:	Policy default2 found
2011-03-25 18:39:59.622 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:39:59.622 OUTPUT:	Policy default found
2011-03-25 18:39:59.622 OUTPUT:	Zone ods found
2011-03-25 18:39:59.622 OUTPUT:	Policy set to default.
2011-03-25 18:39:59.622 OUTPUT:	Added zone ods to database
2011-03-25 18:39:59.622 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:39:59.622 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:39:59.622 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-25 18:39:59.622 03084 Wait(10)

2011-03-25 18:39:59.622 Requirement: ODSCC60

2011-03-25 18:40:09.623 03086 Comment: Start enforcer

2011-03-25 18:40:09.623 Requirement: ODSCC60

2011-03-25 18:40:09.623 03088 Start()
2011-03-25 18:40:09.623 Requirement: ODSCC60
2011-03-25 18:40:09.623 RunCommand(ods-control start)
2011-03-25 18:40:09.625 - runCommand: Background process started, PID: 6183
2011-03-25 18:40:10.641 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-25 18:40:10.658 - runCommand: Process started, PID: 6199
2011-03-25 18:40:10.658 OUTPUT:	ods-enforcerd
2011-03-25 18:40:10.658 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-25 18:40:10.672 - runCommand: Process started, PID: 6203
2011-03-25 18:40:10.672 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-25 18:40:10.672 03090 Wait(10)

2011-03-25 18:40:10.672 Requirement: ODSCC60

2011-03-25 18:40:20.673 03095 Wait(15)

2011-03-25 18:40:20.673 Requirement: ODSCC60

2011-03-25 18:40:35.673 03099 Stop()
2011-03-25 18:40:35.673 Requirement: ODSCC60
2011-03-25 18:40:35.673 RunCommand(ods-control stop)
2011-03-25 18:40:36.682 - runCommand: Process started, PID: 6234
2011-03-25 18:40:36.682 OUTPUT:	Stopping enforcer...
2011-03-25 18:40:36.682 OUTPUT:	Stopping signer engine..
2011-03-25 18:40:36.682 OUTPUT:	Engine shut down.
2011-03-25 18:40:36.682 RunCommand(ps -e | grep enforcer)
2011-03-25 18:40:36.697 - runCommand: Process started, PID: 6240
2011-03-25 18:40:36.697 ERROR:	return code = 1
2011-03-25 18:40:36.697 RunCommand(ps -e | grep signer)
2011-03-25 18:40:36.707 - runCommand: Process started, PID: 6243
2011-03-25 18:40:36.707 ERROR:	return code = 1

2011-03-25 18:40:36.707 03102 CheckLog()
2011-03-25 18:40:36.707 Requirement: ODSCC60
2011-03-25 18:40:39.588 PASSED:	(Check for Like) - Expected: all done! Found: Mar 25 18:40:35 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

2011-03-25 18:40:39.589 03104 Comment: Check if the ods files are present in the new temporary folder.

2011-03-25 18:40:39.589 Requirement: ODSCC60

2011-03-25 18:40:39.589 03108 CheckFilePresent(ods.denial)
2011-03-25 18:40:39.589 Requirement: ODSCC60
2011-03-25 18:40:39.589 FAILED:	(Check for Equal) - Expected: ods.denial Found: 

2011-03-25 18:40:39.589 03110 CheckFilePresent(ods.dnskeys)
2011-03-25 18:40:39.589 Requirement: ODSCC60
2011-03-25 18:40:39.589 FAILED:	(Check for Equal) - Expected: ods.dnskeys Found: 

2011-03-25 18:40:39.589 03112 CheckFilePresent(ods.finalized)
2011-03-25 18:40:39.589 Requirement: ODSCC60
2011-03-25 18:40:39.589 FAILED:	(Check for Equal) - Expected: ods.finalized Found: 

2011-03-25 18:40:39.589 03114 CheckFilePresent(ods.rrsigs)
2011-03-25 18:40:39.589 Requirement: ODSCC60
2011-03-25 18:40:39.589 FAILED:	(Check for Equal) - Expected: ods.rrsigs Found: 

2011-03-25 18:40:39.590 03116 CheckFilePresent(ods.state)
2011-03-25 18:40:39.590 Requirement: ODSCC60
2011-03-25 18:40:39.590 FAILED:	(Check for Equal) - Expected: ods.state Found: 

2011-03-25 18:40:39.590 03118 CheckFilePresent(ods.sc)
2011-03-25 18:40:39.590 Requirement: ODSCC60
2011-03-25 18:40:39.590 FAILED:	(Check for Equal) - Expected: ods.sc Found: 

2011-03-25 18:40:39.590 03120 CheckFilePresent(ods.unsorted)
2011-03-25 18:40:39.590 Requirement: ODSCC60
2011-03-25 18:40:39.590 FAILED:	(Check for Equal) - Expected: ods.unsorted Found: 

2011-03-25 18:40:39.590 03122 CheckFilePresent(ods.task)
2011-03-25 18:40:39.590 Requirement: ODSCC60
2011-03-25 18:40:39.590 FAILED:	(Check for Equal) - Expected: ods.task Found: 

2011-03-25 18:40:39.591 03124 Comment: Change the configuration with predefined original conf.xml file.

2011-03-25 18:40:39.591 Requirement: ODSCC60

2011-03-25 18:40:39.591 03127 LoadConfig()
2011-03-25 18:40:39.591 Requirement: ODSCC60
2011-03-25 18:40:39.591 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-25 18:40:39.594 - runCommand: Process started, PID: 6246
2011-03-25 18:40:39.594 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml': No such file or directory
2011-03-25 18:40:39.594 ERROR:	return code = 1

2011-03-25 18:40:39.594 03129 Comment: Update all the configs.

2011-03-25 18:40:39.594 Requirement: ODSCC60

2011-03-25 18:40:39.594 03131 ODSSetup()
2011-03-25 18:40:39.594 Requirement: ODSCC60
2011-03-25 18:40:39.594 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-25 18:40:50.713 - runCommand: Process started, PID: 6247
2011-03-25 18:40:50.714 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-25 18:40:50.714 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-25 18:40:50.714 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-25 18:40:50.714 OUTPUT:	Repository SoftHSM found
2011-03-25 18:40:50.715 OUTPUT:	No Maximum Capacity set.
2011-03-25 18:40:50.715 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-25 18:40:50.715 OUTPUT:	Policy default2 found
2011-03-25 18:40:50.715 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-25 18:40:50.715 OUTPUT:	Policy default found
2011-03-25 18:40:50.715 OUTPUT:	Zone ods found
2011-03-25 18:40:50.716 OUTPUT:	Policy set to default.
2011-03-25 18:40:50.716 OUTPUT:	Added zone ods to database
2011-03-25 18:40:50.716 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-25 18:40:50.716 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-25 18:40:50.716 ERROR:	/etc/opendnssec/kasp.xml validates
Testcondition - ODSCCLOG: Backup logfiles and testresults
-------------------------------------------------------------------------------

2011-03-25 18:40:50.724 03140 Comment: Create folders for logfile backup of syslog and messages logfiles.

2011-03-25 18:40:50.725 Requirement: ODSCCLOG

2011-03-25 18:40:50.728 03148 Comment: Copy the syslog and messages logfiles to the specific folders.

2011-03-25 18:40:50.728 Requirement: ODSCCLOG

