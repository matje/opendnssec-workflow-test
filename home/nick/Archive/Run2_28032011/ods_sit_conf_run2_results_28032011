root@DEVELOPER15:/home/elmo/opendnssec_test_engine# sh autotestODS.sh
FILE  : /home/elmo/Downloads/ODS_Test_folder/Run1_23032011/ODS1.2_SIT_CONF.xls
COUNT : 11
AUTHOR: Calc
- Argument: /home/elmo/Downloads/ODS_Test_folder/Run1_23032011/ODS1.2_SIT_CONF.xls
- Argument: ODSC
SHEET: ODSC
---------

2011-03-28 11:02:00.176 00014 Comment: Fill in date of test execution in the field below (format ddmmyy)


2011-03-28 11:02:00.177 00015 Comment: 230311


2011-03-28 11:02:00.177 00017 Comment: Users & ODS versions


2011-03-28 11:02:00.177 00018 Comment: Check if user opendnssec exists on unix. (part of group opendnssec)


2011-03-28 11:02:00.177 00019 Comment: Check if user kaspuser (with password abc123) exists on unix. 


2011-03-28 11:02:00.177 00020 Comment: Check if user gooduser (with password 123abc) exists on unix. 


2011-03-28 11:02:00.177 00021 Comment: Check if the correct ODS version is installed.


2011-03-28 11:02:00.178 00022 Comment: If user is not avaliable you can add them via the command (as root):
- useradd <user>
and then add the correct password via the command.
- passwd <user>


2011-03-28 11:02:00.178 00024 Comment: Copy all the files needed for this script to the directories below


2011-03-28 11:02:00.178 00025 Comment: BEWARE: For all files created in WinOS, use the fromdos application (apt-get install tofromdos) to remove symbols from the xml files (like conf and kasp) to prevent errors.


2011-03-28 11:02:00.178 00026 Comment: Standard folder for all the conf.xml files is /home/ods/ods_testautomation/ods_sit_conf/conf


2011-03-28 11:02:00.178 00027 Comment: Standard folder for all the kasp.xml files is /home/ods/ods_testautomation/ods_sit_conf/kasp


2011-03-28 11:02:00.178 00028 Comment: Standard folder for all the zonelist.xml files is /home/ods/ods_testautomation/ods_sit_conf/zonelist


2011-03-28 11:02:00.179 00029 Comment: Standard folder for all the MySQL files is /home/ods/ods_testautomation/ods_sit_conf/mysql


2011-03-28 11:02:00.179 00030 Comment: Standard folder for all the script files is /home/ods/ods_testautomation/ods_sit_conf/script


2011-03-28 11:02:00.179 00032 Comment: Logfiles


2011-03-28 11:02:00.179 00033 Comment: Make sure that the following folder exists: /home/ods/ods_testautomation/ods_sit_conf/logging


2011-03-28 11:02:00.179 00035 Comment: Specify Download folder for ODS


2011-03-28 11:02:00.179 00036 Comment: /home/ods/Downloads/opendnssec-1.2.1


2011-03-28 11:02:00.180 00038 Comment: Specific folders


2011-03-28 11:02:00.180 00039 Comment: Make sure that the next folder exists: "var/opendnssec/temporary"


2011-03-28 11:02:00.180 00041 Comment: MySQL settings


2011-03-28 11:02:00.180 00042 Comment: Standard MySQL database name = KASP


2011-03-28 11:02:00.180 00043 Comment: Standard MySQL username = kaspuser


2011-03-28 11:02:00.180 00044 Comment: Standard MySQL password = abc123


2011-03-28 11:02:00.180 00045 Comment: Second MySQL database = KASPTEST


2011-03-28 11:02:00.181 00046 Comment: Second MySQL username = kaspuser


2011-03-28 11:02:00.181 00047 Comment: Second MySQL password = abc123


2011-03-28 11:02:00.181 00048 Comment: Thirth MySQL database = KASPTEST2


2011-03-28 11:02:00.181 00049 Comment: Thirth MySQL username = gooduser


2011-03-28 11:02:00.181 00050 Comment: Thirth MySQL password = 123abc


2011-03-28 11:02:00.181 00051 Comment: If the databases above are not available they can be created via the command:
- mysql -p
- create database <databasename>


2011-03-28 11:02:00.182 00052 Comment: After this the users should be granted for using the database using the following 2 commands:
- grant usage on <databasename>.* to <user>@localhost identified by '<password of user>'
- grant all privileges on <databasename>.* to <user>@localhost identified by '<password of user>'


2011-03-28 11:02:00.182 00054 Comment: Zone file


2011-03-28 11:02:00.182 00055 Comment: Make sure that the zone with name "ods" is available in the test environment in folder /var/opendnssec/unsigned


2011-03-28 11:02:00.182 00057 Comment: Host file


2011-03-28 11:02:00.182 00058 Comment: Make sure that the following line is in the host file in the "/etc" folder:
127.0.0.1 mysqltest


2011-03-28 11:02:00.182 00061 Comment: Make sure that the "ods-notify"-script is in the /home/ods/ods-testautomation/ods_sit_conf/scripts folder


2011-03-28 11:02:00.183 00064 Comment: Check if the application "logger" is available on the test environment (location: /usr/bin/). The logger will put the result of a command, for example "ods-kaspcheck", in the messages logfile (location: /var/log/messages). Example of usage: "command | /usr/bin/logger"

Testcondition - ODSCC10: The configuration of repositories located in conf.xml should operate according to requirements and intentions
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSCC10T10: Configure and sign with one repository (SoftHSM)

2011-03-28 11:02:00.183 00069 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:02:00.183 Requirement: ODSCC10

2011-03-28 11:02:00.184 00071 Stop()
2011-03-28 11:02:00.184 Requirement: ODSCC10
2011-03-28 11:02:00.184 RunCommand(ods-control stop)
2011-03-28 11:02:00.187 - runCommand: Process started, PID: 8235
2011-03-28 11:02:00.187 OUTPUT:	Stopping enforcer...
2011-03-28 11:02:00.187 OUTPUT:	Cannot find PID file
2011-03-28 11:02:00.187 OUTPUT:	Stopping signer engine..
2011-03-28 11:02:00.187 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 11:02:00.187 ERROR:	return code = 1
2011-03-28 11:02:00.187 RunCommand(ps -e | grep enforcer)
2011-03-28 11:02:00.198 - runCommand: Process started, PID: 8238
2011-03-28 11:02:00.198 ERROR:	return code = 1
2011-03-28 11:02:00.198 RunCommand(ps -e | grep signer)
2011-03-28 11:02:00.208 - runCommand: Process started, PID: 8241
2011-03-28 11:02:00.208 ERROR:	return code = 1

2011-03-28 11:02:00.208 00073 Wait(3)

2011-03-28 11:02:00.208 Requirement: ODSCC10

2011-03-28 11:02:03.208 00075 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:02:03.208 Requirement: ODSCC10

2011-03-28 11:02:03.209 00081 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:02:03.209 Requirement: ODSCC10

2011-03-28 11:02:03.209 00084 PurgeHSM()
2011-03-28 11:02:03.209 Requirement: ODSCC10
2011-03-28 11:02:03.209 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:02:03.542 - runCommand: Process started, PID: 8244
2011-03-28 11:02:03.542 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:02:03.542 OUTPUT:	2 keys found.
2011-03-28 11:02:03.542 OUTPUT:	
2011-03-28 11:02:03.542 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-28 11:02:03.542 OUTPUT:	Starting purge...
2011-03-28 11:02:03.542 OUTPUT:	Key remove successful: 0f898256a5395a7c562c9415437b9ff6
2011-03-28 11:02:03.542 OUTPUT:	Key remove successful: f262c2b0b6b38a91dd74f1a15a7e58d2
2011-03-28 11:02:03.542 OUTPUT:	Purge done.

2011-03-28 11:02:03.542 00086 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:02:03.542 Requirement: ODSCC10

2011-03-28 11:02:03.543 00089 LoadConfig()
2011-03-28 11:02:03.543 Requirement: ODSCC10
2011-03-28 11:02:03.543 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:02:03.547 - runCommand: Process started, PID: 8249

2011-03-28 11:02:03.547 00092 LoadConfig()
2011-03-28 11:02:03.547 Requirement: ODSCC10
2011-03-28 11:02:03.547 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:02:03.551 - runCommand: Process started, PID: 8250

2011-03-28 11:02:03.551 00094 Comment: Setup of ODS database

2011-03-28 11:02:03.551 Requirement: ODSCC10

2011-03-28 11:02:03.552 00096 ODSSetup()
2011-03-28 11:02:03.552 Requirement: ODSCC10
2011-03-28 11:02:03.552 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:02:15.205 - runCommand: Process started, PID: 8251
2011-03-28 11:02:15.206 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:02:15.206 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:02:15.206 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:02:15.206 OUTPUT:	Repository SoftHSM found
2011-03-28 11:02:15.206 OUTPUT:	No Maximum Capacity set.
2011-03-28 11:02:15.207 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 11:02:15.207 OUTPUT:	Policy default2 found
2011-03-28 11:02:15.207 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:02:15.207 OUTPUT:	Policy default found
2011-03-28 11:02:15.207 OUTPUT:	Zone ods found
2011-03-28 11:02:15.207 OUTPUT:	Policy set to default.
2011-03-28 11:02:15.207 OUTPUT:	Added zone ods to database
2011-03-28 11:02:15.207 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:02:15.207 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:02:15.207 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:02:15.210 00098 Wait(5)

2011-03-28 11:02:15.210 Requirement: ODSCC10

2011-03-28 11:02:20.215 00100 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:02:20.215 Requirement: ODSCC10

2011-03-28 11:02:20.219 00102 Start()
2011-03-28 11:02:20.219 Requirement: ODSCC10
2011-03-28 11:02:20.219 RunCommand(ods-control start)
2011-03-28 11:02:20.231 - runCommand: Background process started, PID: 8300
2011-03-28 11:02:21.428 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:02:21.616 - runCommand: Process started, PID: 8315
2011-03-28 11:02:21.617 OUTPUT:	ods-enforcerd
2011-03-28 11:02:21.617 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:02:21.782 - runCommand: Process started, PID: 8328
2011-03-28 11:02:21.782 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:02:21.785 00104 Wait(5)

2011-03-28 11:02:21.785 Requirement: ODSCC10

2011-03-28 11:02:26.790 00106 Comment: Sign the ods zone with the new configs.

2011-03-28 11:02:26.790 Requirement: ODSCC10

2011-03-28 11:02:26.794 00110 Wait(5)

2011-03-28 11:02:26.794 Requirement: ODSCC10

2011-03-28 11:02:31.799 00112 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-28 11:02:31.799 Requirement: ODSCC10

2011-03-28 11:02:31.810 00114 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:02:31.811 Requirement: ODSCC10

2011-03-28 11:02:31.814 00116 Stop()
2011-03-28 11:02:31.814 Requirement: ODSCC10
2011-03-28 11:02:31.815 RunCommand(ods-control stop)
2011-03-28 11:02:32.913 - runCommand: Process started, PID: 8337
2011-03-28 11:02:32.914 OUTPUT:	Stopping enforcer...
2011-03-28 11:02:32.914 OUTPUT:	Stopping signer engine..
2011-03-28 11:02:32.914 OUTPUT:	Engine shut down.
2011-03-28 11:02:32.915 RunCommand(ps -e | grep enforcer)
2011-03-28 11:02:32.106 - runCommand: Process started, PID: 8343
2011-03-28 11:02:32.106 ERROR:	return code = 1
2011-03-28 11:02:32.106 RunCommand(ps -e | grep signer)
2011-03-28 11:02:32.118 - runCommand: Process started, PID: 8346
2011-03-28 11:02:32.118 ERROR:	return code = 1

2011-03-28 11:02:32.119 00119 CheckLog()
2011-03-28 11:02:32.119 Requirement: ODSCC10
2011-03-28 11:02:32.123 PASSED:	(Check for Like) - Expected: all done! Found: Mar 28 11:02:31 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

-------------------------------------------------------------------------------
Testcase - ODSCC10T20: Configure 4 repositories (2x SoftHSM, 2x hardware HSM) and sign using 2 of these different repositories

2011-03-28 11:02:32.124 00127 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:02:32.124 Requirement: ODSCC10

2011-03-28 11:02:32.124 00129 Stop()
2011-03-28 11:02:32.124 Requirement: ODSCC10
2011-03-28 11:02:32.124 RunCommand(ods-control stop)
2011-03-28 11:02:32.127 - runCommand: Process started, PID: 8349
2011-03-28 11:02:32.128 OUTPUT:	Stopping enforcer...
2011-03-28 11:02:32.128 OUTPUT:	Cannot find PID file
2011-03-28 11:02:32.128 OUTPUT:	Stopping signer engine..
2011-03-28 11:02:32.128 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 11:02:32.128 ERROR:	return code = 1
2011-03-28 11:02:32.128 RunCommand(ps -e | grep enforcer)
2011-03-28 11:02:32.137 - runCommand: Process started, PID: 8352
2011-03-28 11:02:32.137 ERROR:	return code = 1
2011-03-28 11:02:32.137 RunCommand(ps -e | grep signer)
2011-03-28 11:02:32.146 - runCommand: Process started, PID: 8355
2011-03-28 11:02:32.146 ERROR:	return code = 1

2011-03-28 11:02:32.146 00131 Wait(10)

2011-03-28 11:02:32.146 Requirement: ODSCC10

2011-03-28 11:02:42.147 00133 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:02:42.147 Requirement: ODSCC10

2011-03-28 11:02:42.147 00139 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:02:42.147 Requirement: ODSCC10

2011-03-28 11:02:42.148 00142 PurgeHSM()
2011-03-28 11:02:42.148 Requirement: ODSCC10
2011-03-28 11:02:42.148 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:02:42.505 - runCommand: Process started, PID: 8358
2011-03-28 11:02:42.505 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:02:42.505 OUTPUT:	2 keys found.
2011-03-28 11:02:42.505 OUTPUT:	
2011-03-28 11:02:42.505 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-28 11:02:42.505 OUTPUT:	Starting purge...
2011-03-28 11:02:42.505 OUTPUT:	Key remove successful: f19561749ccf3ff01b79985c148adc2a
2011-03-28 11:02:42.505 OUTPUT:	Key remove successful: 6bbed560ceafaa2a6c83f090815e733b
2011-03-28 11:02:42.505 OUTPUT:	Purge done.

2011-03-28 11:02:42.506 00144 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:02:42.506 Requirement: ODSCC10

2011-03-28 11:02:42.506 00147 LoadConfig()
2011-03-28 11:02:42.506 Requirement: ODSCC10
2011-03-28 11:02:42.506 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T20_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:02:42.510 - runCommand: Process started, PID: 8362

2011-03-28 11:02:42.511 00150 LoadConfig()
2011-03-28 11:02:42.511 Requirement: ODSCC10
2011-03-28 11:02:42.511 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:02:42.515 - runCommand: Process started, PID: 8363

2011-03-28 11:02:42.515 00152 Comment: Update all the configs.

2011-03-28 11:02:42.515 Requirement: ODSCC10

2011-03-28 11:02:42.516 00154 ODSSetup()
2011-03-28 11:02:42.516 Requirement: ODSCC10
2011-03-28 11:02:42.516 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:02:53.401 - runCommand: Process started, PID: 8364
2011-03-28 11:02:53.401 OUTPUT:	ERROR: Module /usr/lib/libCryptoki2_64.so in Repository HSM-HA cannot be found
2011-03-28 11:02:53.401 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:02:53.401 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:02:53.401 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:02:53.401 OUTPUT:	Repository SoftHSM found
2011-03-28 11:02:53.401 OUTPUT:	No Maximum Capacity set.
2011-03-28 11:02:53.401 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 11:02:53.401 OUTPUT:	Repository SoftHSM2 found
2011-03-28 11:02:53.401 OUTPUT:	No Maximum Capacity set.
2011-03-28 11:02:53.401 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 11:02:53.401 OUTPUT:	Repository HSM-HA found
2011-03-28 11:02:53.401 OUTPUT:	Capacity set to 35.
2011-03-28 11:02:53.401 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 11:02:53.401 OUTPUT:	Policy default2 found
2011-03-28 11:02:53.401 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:02:53.401 OUTPUT:	Policy default found
2011-03-28 11:02:53.401 OUTPUT:	Zone ods found
2011-03-28 11:02:53.401 OUTPUT:	Policy set to default.
2011-03-28 11:02:53.401 OUTPUT:	Added zone ods to database
2011-03-28 11:02:53.401 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:02:53.401 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:02:53.401 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:02:53.401 00156 Wait(10)

2011-03-28 11:02:53.402 Requirement: ODSCC10

2011-03-28 11:03:03.402 00158 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:03:03.402 Requirement: ODSCC10

2011-03-28 11:03:03.402 00160 Start()
2011-03-28 11:03:03.402 Requirement: ODSCC10
2011-03-28 11:03:03.402 RunCommand(ods-control start)
2011-03-28 11:03:03.404 - runCommand: Background process started, PID: 8379
2011-03-28 11:03:08.435 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:03:08.452 - runCommand: Process started, PID: 8402
2011-03-28 11:03:08.452 ERROR:	return code = 1
2011-03-28 11:03:08.452 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:03:08.465 - runCommand: Process started, PID: 8407

2011-03-28 11:03:08.465 00162 Comment: Sign the ods zone with the new configs.

2011-03-28 11:03:08.465 Requirement: ODSCC10

2011-03-28 11:03:08.465 00166 Wait(15)

2011-03-28 11:03:08.465 Requirement: ODSCC10

2011-03-28 11:03:23.466 00168 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-28 11:03:23.466 Requirement: ODSCC10

2011-03-28 11:03:23.466 00170 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:03:23.466 Requirement: ODSCC10

2011-03-28 11:03:23.467 00172 Stop()
2011-03-28 11:03:23.467 Requirement: ODSCC10
2011-03-28 11:03:23.467 RunCommand(ods-control stop)
2011-03-28 11:03:23.472 - runCommand: Process started, PID: 8412
2011-03-28 11:03:23.472 OUTPUT:	Stopping enforcer...
2011-03-28 11:03:23.472 OUTPUT:	Cannot find PID file
2011-03-28 11:03:23.472 OUTPUT:	Stopping signer engine..
2011-03-28 11:03:23.472 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:03:23.472 ERROR:	return code = 1
2011-03-28 11:03:23.472 RunCommand(ps -e | grep enforcer)
2011-03-28 11:03:23.487 - runCommand: Process started, PID: 8415
2011-03-28 11:03:23.487 ERROR:	return code = 1
2011-03-28 11:03:23.487 RunCommand(ps -e | grep signer)
2011-03-28 11:03:23.502 - runCommand: Process started, PID: 8418
2011-03-28 11:03:23.502 ERROR:	return code = 1

2011-03-28 11:03:23.503 00175 CheckLog()
2011-03-28 11:03:23.503 Requirement: ODSCC10
2011-03-28 11:03:23.507 PASSED:	(Check for Like) - Expected: all done! Found: Mar 28 11:02:31 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

-------------------------------------------------------------------------------
Testcase - ODSCC10T30: Configure no module location and expect failure

2011-03-28 11:03:23.508 00182 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:03:23.508 Requirement: ODSCC10

2011-03-28 11:03:23.508 00184 Stop()
2011-03-28 11:03:23.508 Requirement: ODSCC10
2011-03-28 11:03:23.508 RunCommand(ods-control stop)
2011-03-28 11:03:23.512 - runCommand: Process started, PID: 8421
2011-03-28 11:03:23.512 OUTPUT:	Stopping enforcer...
2011-03-28 11:03:23.512 OUTPUT:	Cannot find PID file
2011-03-28 11:03:23.512 OUTPUT:	Stopping signer engine..
2011-03-28 11:03:23.512 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:03:23.512 ERROR:	return code = 1
2011-03-28 11:03:23.512 RunCommand(ps -e | grep enforcer)
2011-03-28 11:03:23.521 - runCommand: Process started, PID: 8424
2011-03-28 11:03:23.521 ERROR:	return code = 1
2011-03-28 11:03:23.521 RunCommand(ps -e | grep signer)
2011-03-28 11:03:23.530 - runCommand: Process started, PID: 8427
2011-03-28 11:03:23.530 ERROR:	return code = 1

2011-03-28 11:03:23.531 00186 Wait(10)

2011-03-28 11:03:23.531 Requirement: ODSCC10

2011-03-28 11:03:33.531 00188 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:03:33.531 Requirement: ODSCC10

2011-03-28 11:03:33.531 00194 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:03:33.531 Requirement: ODSCC10

2011-03-28 11:03:33.532 00197 PurgeHSM()
2011-03-28 11:03:33.532 Requirement: ODSCC10
2011-03-28 11:03:33.532 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:03:33.546 - runCommand: Process started, PID: 8430
2011-03-28 11:03:33.546 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM2
2011-03-28 11:03:33.546 ERROR:	return code = 255

2011-03-28 11:03:33.546 00199 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:03:33.546 Requirement: ODSCC10

2011-03-28 11:03:33.546 00202 LoadConfig()
2011-03-28 11:03:33.546 Requirement: ODSCC10
2011-03-28 11:03:33.546 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T30_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:03:33.549 - runCommand: Process started, PID: 8434

2011-03-28 11:03:33.549 00205 LoadConfig()
2011-03-28 11:03:33.549 Requirement: ODSCC10
2011-03-28 11:03:33.549 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:03:33.552 - runCommand: Process started, PID: 8435

2011-03-28 11:03:33.552 00207 Comment: Update all the configs.

2011-03-28 11:03:33.552 Requirement: ODSCC10

2011-03-28 11:03:33.552 00209 ODSSetup()
2011-03-28 11:03:33.552 Requirement: ODSCC10
2011-03-28 11:03:33.552 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:03:44.266 - runCommand: Process started, PID: 8436
2011-03-28 11:03:44.266 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:03:44.266 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:03:44.266 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:03:44.266 OUTPUT:	Repository SoftHSM found
2011-03-28 11:03:44.266 OUTPUT:	No Maximum Capacity set.
2011-03-28 11:03:44.266 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 11:03:44.266 OUTPUT:	Policy default2 found
2011-03-28 11:03:44.266 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:03:44.267 OUTPUT:	Policy default found
2011-03-28 11:03:44.267 OUTPUT:	Zone ods found
2011-03-28 11:03:44.267 OUTPUT:	Policy set to default.
2011-03-28 11:03:44.267 OUTPUT:	Added zone ods to database
2011-03-28 11:03:44.267 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:03:44.267 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:03:44.267 ERROR:	/usr/local/lib/opendnssec/kasp_checker.rb:222:in `check_config_file': undefined method `+' for nil:NilClass (NoMethodError)
2011-03-28 11:03:44.267 ERROR:		from /usr/lib/ruby/1.8/rexml/element.rb:892:in `each'
2011-03-28 11:03:44.267 ERROR:		from /usr/lib/ruby/1.8/rexml/xpath.rb:53:in `each'
2011-03-28 11:03:44.267 ERROR:		from /usr/lib/ruby/1.8/rexml/element.rb:892:in `each'
2011-03-28 11:03:44.267 ERROR:		from /usr/local/lib/opendnssec/kasp_checker.rb:214:in `check_config_file'
2011-03-28 11:03:44.267 ERROR:		from /usr/local/lib/opendnssec/kasp_checker.rb:146:in `open'
2011-03-28 11:03:44.267 ERROR:		from /usr/local/lib/opendnssec/kasp_checker.rb:146:in `check_config_file'
2011-03-28 11:03:44.267 ERROR:		from /usr/local/lib/opendnssec/kasp_checker.rb:55:in `check'
2011-03-28 11:03:44.267 ERROR:		from /usr/local/bin/ods-kaspcheck:110
2011-03-28 11:03:44.267 ERROR:	Couldn't run kaspcheck, will carry on

2011-03-28 11:03:44.267 00211 Wait(10)

2011-03-28 11:03:44.267 Requirement: ODSCC10

2011-03-28 11:03:54.268 00213 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:03:54.268 Requirement: ODSCC10

2011-03-28 11:03:54.268 00215 Start()
2011-03-28 11:03:54.268 Requirement: ODSCC10
2011-03-28 11:03:54.268 RunCommand(ods-control start)
2011-03-28 11:03:54.269 - runCommand: Background process started, PID: 8447
2011-03-28 11:03:59.301 ERROR:	return code = 1
2011-03-28 11:03:59.301 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:03:59.316 - runCommand: Process started, PID: 8468
2011-03-28 11:03:59.316 ERROR:	return code = 1
2011-03-28 11:03:59.317 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:03:59.332 - runCommand: Process started, PID: 8472

2011-03-28 11:03:59.332 00217 Comment: Sign the ods zone with the new configs.

2011-03-28 11:03:59.332 Requirement: ODSCC10

2011-03-28 11:03:59.332 00221 Wait(15)

2011-03-28 11:03:59.332 Requirement: ODSCC10

2011-03-28 11:04:14.333 00223 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:04:14.333 Requirement: ODSCC10

2011-03-28 11:04:14.333 00225 Stop()
2011-03-28 11:04:14.333 Requirement: ODSCC10
2011-03-28 11:04:14.333 RunCommand(ods-control stop)
2011-03-28 11:04:14.338 - runCommand: Process started, PID: 8477
2011-03-28 11:04:14.338 OUTPUT:	Stopping enforcer...
2011-03-28 11:04:14.338 OUTPUT:	Cannot find PID file
2011-03-28 11:04:14.339 OUTPUT:	Stopping signer engine..
2011-03-28 11:04:14.339 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:04:14.339 ERROR:	return code = 1
2011-03-28 11:04:14.339 RunCommand(ps -e | grep enforcer)
2011-03-28 11:04:14.356 - runCommand: Process started, PID: 8480
2011-03-28 11:04:14.356 ERROR:	return code = 1
2011-03-28 11:04:14.356 RunCommand(ps -e | grep signer)
2011-03-28 11:04:14.373 - runCommand: Process started, PID: 8483
2011-03-28 11:04:14.373 ERROR:	return code = 1

2011-03-28 11:04:14.374 00228 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful.

2011-03-28 11:04:14.374 Requirement: ODSCC10

2011-03-28 11:04:14.374 00231 CheckLog()
2011-03-28 11:04:14.374 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T40: Configure Incorrect module location and expect failure

2011-03-28 11:04:14.378 00237 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:04:14.378 Requirement: ODSCC10

2011-03-28 11:04:14.379 00239 Stop()
2011-03-28 11:04:14.379 Requirement: ODSCC10
2011-03-28 11:04:14.379 RunCommand(ods-control stop)
2011-03-28 11:04:14.382 - runCommand: Process started, PID: 8486
2011-03-28 11:04:14.382 OUTPUT:	Stopping enforcer...
2011-03-28 11:04:14.382 OUTPUT:	Cannot find PID file
2011-03-28 11:04:14.382 OUTPUT:	Stopping signer engine..
2011-03-28 11:04:14.382 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:04:14.382 ERROR:	return code = 1
2011-03-28 11:04:14.382 RunCommand(ps -e | grep enforcer)
2011-03-28 11:04:14.391 - runCommand: Process started, PID: 8489
2011-03-28 11:04:14.391 ERROR:	return code = 1
2011-03-28 11:04:14.391 RunCommand(ps -e | grep signer)
2011-03-28 11:04:14.400 - runCommand: Process started, PID: 8492
2011-03-28 11:04:14.400 ERROR:	return code = 1

2011-03-28 11:04:14.401 00241 Wait(10)

2011-03-28 11:04:14.401 Requirement: ODSCC10

2011-03-28 11:04:24.401 00243 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:04:24.401 Requirement: ODSCC10

2011-03-28 11:04:24.401 00249 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:04:24.401 Requirement: ODSCC10

2011-03-28 11:04:24.402 00252 PurgeHSM()
2011-03-28 11:04:24.402 Requirement: ODSCC10
2011-03-28 11:04:24.402 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:04:24.407 - runCommand: Process started, PID: 8495
2011-03-28 11:04:24.407 ERROR:	hsm_session_init(): PKCS#11 module load failed: 
2011-03-28 11:04:24.407 ERROR:	return code = 255

2011-03-28 11:04:24.407 00254 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:04:24.407 Requirement: ODSCC10

2011-03-28 11:04:24.407 00257 LoadConfig()
2011-03-28 11:04:24.407 Requirement: ODSCC10
2011-03-28 11:04:24.407 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T40_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:04:24.411 - runCommand: Process started, PID: 8498

2011-03-28 11:04:24.412 00260 LoadConfig()
2011-03-28 11:04:24.412 Requirement: ODSCC10
2011-03-28 11:04:24.412 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:04:24.415 - runCommand: Process started, PID: 8499

2011-03-28 11:04:24.416 00262 Comment: Update all the configs.

2011-03-28 11:04:24.416 Requirement: ODSCC10

2011-03-28 11:04:24.416 00264 ODSSetup()
2011-03-28 11:04:24.416 Requirement: ODSCC10
2011-03-28 11:04:24.416 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:04:35.157 - runCommand: Process started, PID: 8500
2011-03-28 11:04:35.157 OUTPUT:	ERROR: Module /usr/libsofthsm.so in Repository SoftHSM cannot be found
2011-03-28 11:04:35.157 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:04:35.157 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:04:35.157 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:04:35.157 OUTPUT:	Repository SoftHSM found
2011-03-28 11:04:35.157 OUTPUT:	No Maximum Capacity set.
2011-03-28 11:04:35.157 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 11:04:35.157 OUTPUT:	Policy default2 found
2011-03-28 11:04:35.157 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:04:35.157 OUTPUT:	Policy default found
2011-03-28 11:04:35.157 OUTPUT:	Zone ods found
2011-03-28 11:04:35.157 OUTPUT:	Policy set to default.
2011-03-28 11:04:35.157 OUTPUT:	Added zone ods to database
2011-03-28 11:04:35.157 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:04:35.157 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:04:35.157 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:04:35.158 00266 Wait(10)

2011-03-28 11:04:35.158 Requirement: ODSCC10

2011-03-28 11:04:45.158 00268 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:04:45.158 Requirement: ODSCC10

2011-03-28 11:04:45.158 00270 Start()
2011-03-28 11:04:45.158 Requirement: ODSCC10
2011-03-28 11:04:45.159 RunCommand(ods-control start)
2011-03-28 11:04:45.160 - runCommand: Background process started, PID: 8513
2011-03-28 11:04:50.190 ERROR:	return code = 1
2011-03-28 11:04:50.190 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:04:50.205 - runCommand: Process started, PID: 8534
2011-03-28 11:04:50.206 ERROR:	return code = 1
2011-03-28 11:04:50.206 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:04:50.221 - runCommand: Process started, PID: 8538

2011-03-28 11:04:50.222 00272 Comment: Sign the ods zone with the new configs.

2011-03-28 11:04:50.222 Requirement: ODSCC10

2011-03-28 11:04:50.222 00276 Wait(15)

2011-03-28 11:04:50.222 Requirement: ODSCC10

2011-03-28 11:05:05.222 00278 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:05:05.222 Requirement: ODSCC10

2011-03-28 11:05:05.223 00280 Stop()
2011-03-28 11:05:05.223 Requirement: ODSCC10
2011-03-28 11:05:05.223 RunCommand(ods-control stop)
2011-03-28 11:05:05.228 - runCommand: Process started, PID: 8543
2011-03-28 11:05:05.228 OUTPUT:	Stopping enforcer...
2011-03-28 11:05:05.228 OUTPUT:	Cannot find PID file
2011-03-28 11:05:05.228 OUTPUT:	Stopping signer engine..
2011-03-28 11:05:05.228 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:05:05.228 ERROR:	return code = 1
2011-03-28 11:05:05.228 RunCommand(ps -e | grep enforcer)
2011-03-28 11:05:05.243 - runCommand: Process started, PID: 8546
2011-03-28 11:05:05.243 ERROR:	return code = 1
2011-03-28 11:05:05.243 RunCommand(ps -e | grep signer)
2011-03-28 11:05:05.258 - runCommand: Process started, PID: 8549
2011-03-28 11:05:05.259 ERROR:	return code = 1

2011-03-28 11:05:05.259 00283 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. No SoftHSM has been found.

2011-03-28 11:05:05.259 Requirement: ODSCC10

2011-03-28 11:05:05.259 00286 CheckLog()
2011-03-28 11:05:05.259 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T50: Use a Tokenlabel with 1 character

2011-03-28 11:05:05.264 00292 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:05:05.264 Requirement: ODSCC10

2011-03-28 11:05:05.265 00294 Stop()
2011-03-28 11:05:05.265 Requirement: ODSCC10
2011-03-28 11:05:05.265 RunCommand(ods-control stop)
2011-03-28 11:05:05.270 - runCommand: Process started, PID: 8552
2011-03-28 11:05:05.270 OUTPUT:	Stopping enforcer...
2011-03-28 11:05:05.270 OUTPUT:	Cannot find PID file
2011-03-28 11:05:05.270 OUTPUT:	Stopping signer engine..
2011-03-28 11:05:05.270 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:05:05.270 ERROR:	return code = 1
2011-03-28 11:05:05.270 RunCommand(ps -e | grep enforcer)
2011-03-28 11:05:05.279 - runCommand: Process started, PID: 8555
2011-03-28 11:05:05.279 ERROR:	return code = 1
2011-03-28 11:05:05.279 RunCommand(ps -e | grep signer)
2011-03-28 11:05:05.290 - runCommand: Process started, PID: 8558
2011-03-28 11:05:05.290 ERROR:	return code = 1

2011-03-28 11:05:05.291 00296 Wait(10)

2011-03-28 11:05:05.291 Requirement: ODSCC10

2011-03-28 11:05:15.291 00298 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:05:15.291 Requirement: ODSCC10

2011-03-28 11:05:15.291 00304 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:05:15.291 Requirement: ODSCC10

2011-03-28 11:05:15.292 00307 PurgeHSM()
2011-03-28 11:05:15.292 Requirement: ODSCC10
2011-03-28 11:05:15.292 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:05:15.296 - runCommand: Process started, PID: 8561
2011-03-28 11:05:15.296 ERROR:	hsm_session_init(): PKCS#11 module load failed: /usr/libsofthsm.so
2011-03-28 11:05:15.297 ERROR:	return code = 255

2011-03-28 11:05:15.297 00309 Comment: Change the tokenlabel of slot1  to "S"

2011-03-28 11:05:15.297 Requirement: ODSCC10

2011-03-28 11:05:15.297 00311 InitRepo()
2011-03-28 11:05:15.297 Requirement: ODSCC10
2011-03-28 11:05:15.297 RunCommand(softhsm --init-token --slot  --label softhsm --init-token --slot 1 --label S --so-pin 4321 --pin 4321 --so-pin  --pin )
2011-03-28 11:05:15.304 - runCommand: Process started, PID: 8564
2011-03-28 11:05:15.305 ERROR:	Error: The given SO PIN does not match the one in the token.

2011-03-28 11:05:15.305 00313 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:05:15.305 Requirement: ODSCC10

2011-03-28 11:05:15.305 00316 LoadConfig()
2011-03-28 11:05:15.305 Requirement: ODSCC10
2011-03-28 11:05:15.305 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T50_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:05:15.308 - runCommand: Process started, PID: 8566

2011-03-28 11:05:15.308 00319 LoadConfig()
2011-03-28 11:05:15.308 Requirement: ODSCC10
2011-03-28 11:05:15.308 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:05:15.310 - runCommand: Process started, PID: 8567

2011-03-28 11:05:15.310 00321 Comment: Update all the configs.

2011-03-28 11:05:15.310 Requirement: ODSCC10

2011-03-28 11:05:15.311 00323 ODSSetup()
2011-03-28 11:05:15.311 Requirement: ODSCC10
2011-03-28 11:05:15.311 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:05:25.639 - runCommand: Process started, PID: 8568
2011-03-28 11:05:25.639 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:05:25.639 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:05:25.640 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:05:25.640 OUTPUT:	Repository SoftHSM found
2011-03-28 11:05:25.640 OUTPUT:	No Maximum Capacity set.
2011-03-28 11:05:25.640 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 11:05:25.640 OUTPUT:	Repository SoftHSM2 found
2011-03-28 11:05:25.640 OUTPUT:	No Maximum Capacity set.
2011-03-28 11:05:25.640 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 11:05:25.640 OUTPUT:	Policy default2 found
2011-03-28 11:05:25.640 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:05:25.640 OUTPUT:	Policy default found
2011-03-28 11:05:25.640 OUTPUT:	Zone ods found
2011-03-28 11:05:25.640 OUTPUT:	Policy set to default.
2011-03-28 11:05:25.640 OUTPUT:	Added zone ods to database
2011-03-28 11:05:25.640 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:05:25.640 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:05:25.640 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:05:25.640 00325 Wait(10)

2011-03-28 11:05:25.640 Requirement: ODSCC10

2011-03-28 11:05:35.641 00327 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:05:35.641 Requirement: ODSCC10

2011-03-28 11:05:35.641 00329 Start()
2011-03-28 11:05:35.641 Requirement: ODSCC10
2011-03-28 11:05:35.641 RunCommand(ods-control start)
2011-03-28 11:05:35.642 - runCommand: Background process started, PID: 8581
2011-03-28 11:05:40.672 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:05:40.683 - runCommand: Process started, PID: 8604
2011-03-28 11:05:40.683 ERROR:	return code = 1
2011-03-28 11:05:40.683 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:05:40.698 - runCommand: Process started, PID: 8609

2011-03-28 11:05:40.698 00331 Wait(10)

2011-03-28 11:05:40.698 Requirement: ODSCC10

2011-03-28 11:05:50.699 00333 Comment: Sign the ods zone with the new configs.

2011-03-28 11:05:50.699 Requirement: ODSCC10

2011-03-28 11:05:50.699 00337 Wait(15)

2011-03-28 11:05:50.699 Requirement: ODSCC10

2011-03-28 11:06:05.700 00339 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:06:05.700 Requirement: ODSCC10

2011-03-28 11:06:05.700 00341 Stop()
2011-03-28 11:06:05.700 Requirement: ODSCC10
2011-03-28 11:06:05.700 RunCommand(ods-control stop)
2011-03-28 11:06:05.705 - runCommand: Process started, PID: 8614
2011-03-28 11:06:05.705 OUTPUT:	Stopping enforcer...
2011-03-28 11:06:05.705 OUTPUT:	Cannot find PID file
2011-03-28 11:06:05.705 OUTPUT:	Stopping signer engine..
2011-03-28 11:06:05.705 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:06:05.705 ERROR:	return code = 1
2011-03-28 11:06:05.705 RunCommand(ps -e | grep enforcer)
2011-03-28 11:06:05.721 - runCommand: Process started, PID: 8617
2011-03-28 11:06:05.721 ERROR:	return code = 1
2011-03-28 11:06:05.721 RunCommand(ps -e | grep signer)
2011-03-28 11:06:05.736 - runCommand: Process started, PID: 8620
2011-03-28 11:06:05.736 ERROR:	return code = 1

2011-03-28 11:06:05.737 00343 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-28 11:06:05.737 Requirement: ODSCC10

2011-03-28 11:06:05.737 00346 CheckLog()
2011-03-28 11:06:05.737 Requirement: ODSCC10
2011-03-28 11:06:05.741 FAILED:	(Check for Like) - Expected: all done! Found: 

2011-03-28 11:06:05.742 00348 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:06:05.742 Requirement: ODSCC10

2011-03-28 11:06:05.742 00350 Stop()
2011-03-28 11:06:05.742 Requirement: ODSCC10
2011-03-28 11:06:05.742 RunCommand(ods-control stop)
2011-03-28 11:06:05.745 - runCommand: Process started, PID: 8623
2011-03-28 11:06:05.745 OUTPUT:	Stopping enforcer...
2011-03-28 11:06:05.745 OUTPUT:	Cannot find PID file
2011-03-28 11:06:05.745 OUTPUT:	Stopping signer engine..
2011-03-28 11:06:05.745 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:06:05.745 ERROR:	return code = 1
2011-03-28 11:06:05.745 RunCommand(ps -e | grep enforcer)
2011-03-28 11:06:05.754 - runCommand: Process started, PID: 8626
2011-03-28 11:06:05.754 ERROR:	return code = 1
2011-03-28 11:06:05.754 RunCommand(ps -e | grep signer)
2011-03-28 11:06:05.763 - runCommand: Process started, PID: 8629
2011-03-28 11:06:05.763 ERROR:	return code = 1

2011-03-28 11:06:05.764 00352 Wait(10)

2011-03-28 11:06:05.764 Requirement: ODSCC10

2011-03-28 11:06:15.764 00354 Comment: Change the token to the previous label.

2011-03-28 11:06:15.764 Requirement: ODSCC10

2011-03-28 11:06:15.765 00356 InitRepo()
2011-03-28 11:06:15.765 Requirement: ODSCC10
2011-03-28 11:06:15.765 RunCommand(softhsm --init-token --slot  --label softhsm --init-token --slot 1 --label OpenDNSSEC2 --so-pin 4321 --pin 4321 --so-pin  --pin )
2011-03-28 11:06:15.774 - runCommand: Process started, PID: 8632
2011-03-28 11:06:15.774 ERROR:	Error: The given SO PIN does not match the one in the token.

2011-03-28 11:06:15.774 00358 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:06:15.775 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T60: Use a Tokenlabel with 257 characters

2011-03-28 11:06:15.775 00368 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:06:15.775 Requirement: ODSCC10

2011-03-28 11:06:15.776 00370 Stop()
2011-03-28 11:06:15.776 Requirement: ODSCC10
2011-03-28 11:06:15.776 RunCommand(ods-control stop)
2011-03-28 11:06:15.781 - runCommand: Process started, PID: 8634
2011-03-28 11:06:15.781 OUTPUT:	Stopping enforcer...
2011-03-28 11:06:15.781 OUTPUT:	Cannot find PID file
2011-03-28 11:06:15.781 OUTPUT:	Stopping signer engine..
2011-03-28 11:06:15.781 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:06:15.781 ERROR:	return code = 1
2011-03-28 11:06:15.781 RunCommand(ps -e | grep enforcer)
2011-03-28 11:06:15.795 - runCommand: Process started, PID: 8637
2011-03-28 11:06:15.795 ERROR:	return code = 1
2011-03-28 11:06:15.795 RunCommand(ps -e | grep signer)
2011-03-28 11:06:15.806 - runCommand: Process started, PID: 8640
2011-03-28 11:06:15.806 ERROR:	return code = 1

2011-03-28 11:06:15.806 00372 Wait(10)

2011-03-28 11:06:15.806 Requirement: ODSCC10

2011-03-28 11:06:25.807 00374 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:06:25.807 Requirement: ODSCC10

2011-03-28 11:06:25.807 00380 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:06:25.807 Requirement: ODSCC10

2011-03-28 11:06:25.807 00383 PurgeHSM()
2011-03-28 11:06:25.807 Requirement: ODSCC10
2011-03-28 11:06:25.807 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:06:25.821 - runCommand: Process started, PID: 8643
2011-03-28 11:06:25.821 ERROR:	hsm_get_slot_id(): could not find token with the name S
2011-03-28 11:06:25.821 ERROR:	return code = 255

2011-03-28 11:06:25.822 00386 Comment: Change the tokenlabel of slot1  to "SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM"
(257 characters)

2011-03-28 11:06:25.822 Requirement: ODSCC10

2011-03-28 11:06:25.822 00388 InitRepo()
2011-03-28 11:06:25.822 Requirement: ODSCC10
2011-03-28 11:06:25.822 RunCommand(softhsm --init-token --slot  --label softhsm --init-token --slot 1 --label SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM --so-pin 4321 --pin 4321 --so-pin  --pin )
2011-03-28 11:06:25.830 - runCommand: Process started, PID: 8647
2011-03-28 11:06:25.830 ERROR:	Error: The token label must not have a length greater than 32 chars.

2011-03-28 11:06:25.831 00390 Wait(1/5/1900)

2011-03-28 11:06:25.831 Requirement: ODSCC10

2011-03-28 11:06:26.831 00392 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:06:26.831 Requirement: ODSCC10

2011-03-28 11:06:26.832 00395 LoadConfig()
2011-03-28 11:06:26.832 Requirement: ODSCC10
2011-03-28 11:06:26.832 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T60_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:06:26.835 - runCommand: Process started, PID: 8649

2011-03-28 11:06:26.836 00398 LoadConfig()
2011-03-28 11:06:26.836 Requirement: ODSCC10
2011-03-28 11:06:26.836 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:06:26.840 - runCommand: Process started, PID: 8650

2011-03-28 11:06:26.840 00400 Comment: Update all the configs.

2011-03-28 11:06:26.840 Requirement: ODSCC10

2011-03-28 11:06:26.840 00402 ODSSetup()
2011-03-28 11:06:26.841 Requirement: ODSCC10
2011-03-28 11:06:26.841 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:06:37.386 - runCommand: Process started, PID: 8651
2011-03-28 11:06:37.386 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:06:37.386 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:06:37.386 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:06:37.386 OUTPUT:	Repository SoftHSM found
2011-03-28 11:06:37.386 OUTPUT:	No Maximum Capacity set.
2011-03-28 11:06:37.386 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 11:06:37.386 OUTPUT:	Repository SoftHSM2 found
2011-03-28 11:06:37.386 OUTPUT:	No Maximum Capacity set.
2011-03-28 11:06:37.386 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 11:06:37.386 OUTPUT:	Policy default2 found
2011-03-28 11:06:37.386 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:06:37.386 OUTPUT:	Policy default found
2011-03-28 11:06:37.386 OUTPUT:	Zone ods found
2011-03-28 11:06:37.386 OUTPUT:	Policy set to default.
2011-03-28 11:06:37.386 OUTPUT:	Added zone ods to database
2011-03-28 11:06:37.386 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:06:37.386 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:06:37.386 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:06:37.387 00404 Wait(10)

2011-03-28 11:06:37.387 Requirement: ODSCC10

2011-03-28 11:06:47.387 00406 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:06:47.387 Requirement: ODSCC10

2011-03-28 11:06:47.388 00408 Start()
2011-03-28 11:06:47.388 Requirement: ODSCC10
2011-03-28 11:06:47.388 RunCommand(ods-control start)
2011-03-28 11:06:47.389 - runCommand: Background process started, PID: 8664
2011-03-28 11:06:52.420 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:06:52.435 - runCommand: Process started, PID: 8688
2011-03-28 11:06:52.435 ERROR:	return code = 1
2011-03-28 11:06:52.435 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:06:52.447 - runCommand: Process started, PID: 8693

2011-03-28 11:06:52.448 00410 Comment: Sign the ods zone with the new configs.

2011-03-28 11:06:52.448 Requirement: ODSCC10

2011-03-28 11:06:52.448 00414 Wait(15)

2011-03-28 11:06:52.448 Requirement: ODSCC10

2011-03-28 11:07:07.448 00417 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:07:07.448 Requirement: ODSCC10

2011-03-28 11:07:07.449 00419 Stop()
2011-03-28 11:07:07.449 Requirement: ODSCC10
2011-03-28 11:07:07.449 RunCommand(ods-control stop)
2011-03-28 11:07:07.454 - runCommand: Process started, PID: 8698
2011-03-28 11:07:07.454 OUTPUT:	Stopping enforcer...
2011-03-28 11:07:07.454 OUTPUT:	Cannot find PID file
2011-03-28 11:07:07.454 OUTPUT:	Stopping signer engine..
2011-03-28 11:07:07.454 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:07:07.454 ERROR:	return code = 1
2011-03-28 11:07:07.454 RunCommand(ps -e | grep enforcer)
2011-03-28 11:07:07.469 - runCommand: Process started, PID: 8701
2011-03-28 11:07:07.469 ERROR:	return code = 1
2011-03-28 11:07:07.469 RunCommand(ps -e | grep signer)
2011-03-28 11:07:07.485 - runCommand: Process started, PID: 8704
2011-03-28 11:07:07.485 ERROR:	return code = 1

2011-03-28 11:07:07.485 00422 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-28 11:07:07.485 Requirement: ODSCC10

2011-03-28 11:07:07.485 00426 CheckLog()
2011-03-28 11:07:07.485 Requirement: ODSCC10
2011-03-28 11:07:07.490 FAILED:	(Check for Like) - Expected: all done! Found: 

2011-03-28 11:07:07.490 00428 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:07:07.490 Requirement: ODSCC10

2011-03-28 11:07:07.490 00430 Wait(10)

2011-03-28 11:07:07.490 Requirement: ODSCC10

2011-03-28 11:07:17.491 00432 Stop()
2011-03-28 11:07:17.491 Requirement: ODSCC10
2011-03-28 11:07:17.491 RunCommand(ods-control stop)
2011-03-28 11:07:17.496 - runCommand: Process started, PID: 8707
2011-03-28 11:07:17.496 OUTPUT:	Stopping enforcer...
2011-03-28 11:07:17.496 OUTPUT:	Cannot find PID file
2011-03-28 11:07:17.496 OUTPUT:	Stopping signer engine..
2011-03-28 11:07:17.496 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:07:17.496 ERROR:	return code = 1
2011-03-28 11:07:17.496 RunCommand(ps -e | grep enforcer)
2011-03-28 11:07:17.511 - runCommand: Process started, PID: 8710
2011-03-28 11:07:17.511 ERROR:	return code = 1
2011-03-28 11:07:17.511 RunCommand(ps -e | grep signer)
2011-03-28 11:07:17.526 - runCommand: Process started, PID: 8713
2011-03-28 11:07:17.526 ERROR:	return code = 1

2011-03-28 11:07:17.527 00434 Comment: Change the token to the previous label.

2011-03-28 11:07:17.527 Requirement: ODSCC10

2011-03-28 11:07:17.527 00436 InitRepo()
2011-03-28 11:07:17.527 Requirement: ODSCC10
2011-03-28 11:07:17.527 RunCommand(softhsm --init-token --slot  --label softhsm --init-token --slot 1 --label OpenDNSSEC2 --so-pin 4321 --pin 4321 --so-pin  --pin )
2011-03-28 11:07:17.537 - runCommand: Process started, PID: 8716
2011-03-28 11:07:17.537 ERROR:	Error: The given SO PIN does not match the one in the token.

2011-03-28 11:07:17.537 00438 Wait(5)

2011-03-28 11:07:17.537 Requirement: ODSCC10

2011-03-28 11:07:22.538 00440 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:07:22.538 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T70: Configure no PIN while PIN is needed

2011-03-28 11:07:22.538 00446 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:07:22.539 Requirement: ODSCC10

2011-03-28 11:07:22.539 00448 Stop()
2011-03-28 11:07:22.539 Requirement: ODSCC10
2011-03-28 11:07:22.539 RunCommand(ods-control stop)
2011-03-28 11:07:22.545 - runCommand: Process started, PID: 8718
2011-03-28 11:07:22.545 OUTPUT:	Stopping enforcer...
2011-03-28 11:07:22.545 OUTPUT:	Cannot find PID file
2011-03-28 11:07:22.545 OUTPUT:	Stopping signer engine..
2011-03-28 11:07:22.545 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:07:22.545 ERROR:	return code = 1
2011-03-28 11:07:22.545 RunCommand(ps -e | grep enforcer)
2011-03-28 11:07:22.560 - runCommand: Process started, PID: 8721
2011-03-28 11:07:22.560 ERROR:	return code = 1
2011-03-28 11:07:22.560 RunCommand(ps -e | grep signer)
2011-03-28 11:07:22.575 - runCommand: Process started, PID: 8724
2011-03-28 11:07:22.575 ERROR:	return code = 1

2011-03-28 11:07:22.576 00450 Wait(10)

2011-03-28 11:07:22.576 Requirement: ODSCC10

2011-03-28 11:07:32.576 00452 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:07:32.576 Requirement: ODSCC10

2011-03-28 11:07:32.577 00458 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:07:32.577 Requirement: ODSCC10

2011-03-28 11:07:32.577 00461 PurgeHSM()
2011-03-28 11:07:32.577 Requirement: ODSCC10
2011-03-28 11:07:32.577 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:07:32.587 - runCommand: Process started, PID: 8727
2011-03-28 11:07:32.587 ERROR:	hsm_get_slot_id(): could not find token with the name 
2011-03-28 11:07:32.587 ERROR:	SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM123SoftHSM
2011-03-28 11:07:32.587 ERROR:	return code = 255

2011-03-28 11:07:32.588 00463 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:07:32.588 Requirement: ODSCC10

2011-03-28 11:07:32.588 00466 LoadConfig()
2011-03-28 11:07:32.588 Requirement: ODSCC10
2011-03-28 11:07:32.588 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T70_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:07:32.590 - runCommand: Process started, PID: 8731

2011-03-28 11:07:32.591 00469 LoadConfig()
2011-03-28 11:07:32.591 Requirement: ODSCC10
2011-03-28 11:07:32.591 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:07:32.593 - runCommand: Process started, PID: 8732

2011-03-28 11:07:32.593 00471 Comment: Update all the configs.

2011-03-28 11:07:32.594 Requirement: ODSCC10

2011-03-28 11:07:32.594 00473 ODSSetup()
2011-03-28 11:07:32.594 Requirement: ODSCC10
2011-03-28 11:07:32.594 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:07:43.361 - runCommand: Process started, PID: 8733
2011-03-28 11:07:43.362 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:07:43.363 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:07:43.363 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:07:43.363 OUTPUT:	Repository SoftHSM found
2011-03-28 11:07:43.363 OUTPUT:	No Maximum Capacity set.
2011-03-28 11:07:43.363 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 11:07:43.363 OUTPUT:	Policy default2 found
2011-03-28 11:07:43.364 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:07:43.364 OUTPUT:	Policy default found
2011-03-28 11:07:43.364 OUTPUT:	Zone ods found
2011-03-28 11:07:43.364 OUTPUT:	Policy set to default.
2011-03-28 11:07:43.364 OUTPUT:	Added zone ods to database
2011-03-28 11:07:43.364 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:07:43.364 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:07:43.365 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:07:43.369 00475 Wait(10)

2011-03-28 11:07:43.369 Requirement: ODSCC10

2011-03-28 11:07:53.373 00477 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:07:53.374 Requirement: ODSCC10

2011-03-28 11:07:53.377 00479 Start()
2011-03-28 11:07:53.377 Requirement: ODSCC10
2011-03-28 11:07:53.378 RunCommand(ods-control start)
2011-03-28 11:07:53.390 - runCommand: Background process started, PID: 8746
2011-03-28 11:07:58.692 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:07:58.810 - runCommand: Process started, PID: 8770
2011-03-28 11:07:58.811 ERROR:	return code = 1
2011-03-28 11:07:58.811 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:07:58.955 - runCommand: Process started, PID: 8775

2011-03-28 11:07:58.958 00481 Comment: Sign the ods zone with the new configs.

2011-03-28 11:07:58.958 Requirement: ODSCC10

2011-03-28 11:07:58.960 00485 Wait(15)

2011-03-28 11:07:58.960 Requirement: ODSCC10

2011-03-28 11:08:13.965 00487 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:08:13.965 Requirement: ODSCC10

2011-03-28 11:08:13.969 00489 Stop()
2011-03-28 11:08:13.969 Requirement: ODSCC10
2011-03-28 11:08:13.969 RunCommand(ods-control stop)
2011-03-28 11:08:13.102 - runCommand: Process started, PID: 8780
2011-03-28 11:08:13.102 OUTPUT:	Stopping enforcer...
2011-03-28 11:08:13.102 OUTPUT:	Cannot find PID file
2011-03-28 11:08:13.102 OUTPUT:	Stopping signer engine..
2011-03-28 11:08:13.102 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:08:13.102 ERROR:	return code = 1
2011-03-28 11:08:13.102 RunCommand(ps -e | grep enforcer)
2011-03-28 11:08:13.117 - runCommand: Process started, PID: 8783
2011-03-28 11:08:13.117 ERROR:	return code = 1
2011-03-28 11:08:13.117 RunCommand(ps -e | grep signer)
2011-03-28 11:08:13.126 - runCommand: Process started, PID: 8786
2011-03-28 11:08:13.126 ERROR:	return code = 1

2011-03-28 11:08:13.127 00491 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. 

2011-03-28 11:08:13.127 Requirement: ODSCC10

2011-03-28 11:08:13.127 00494 CheckLog()
2011-03-28 11:08:13.127 Requirement: ODSCC10
2011-03-28 11:08:13.130 FAILED:	(Check for Like) - Expected: Aborting operation Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC10T80: Configure an Incorrect PIN and run signing

2011-03-28 11:08:13.130 00499 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:08:13.130 Requirement: ODSCC10

2011-03-28 11:08:13.130 00501 Stop()
2011-03-28 11:08:13.130 Requirement: ODSCC10
2011-03-28 11:08:13.130 RunCommand(ods-control stop)
2011-03-28 11:08:13.134 - runCommand: Process started, PID: 8789
2011-03-28 11:08:13.134 OUTPUT:	Stopping enforcer...
2011-03-28 11:08:13.134 OUTPUT:	Cannot find PID file
2011-03-28 11:08:13.134 OUTPUT:	Stopping signer engine..
2011-03-28 11:08:13.134 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:08:13.134 ERROR:	return code = 1
2011-03-28 11:08:13.134 RunCommand(ps -e | grep enforcer)
2011-03-28 11:08:13.143 - runCommand: Process started, PID: 8792
2011-03-28 11:08:13.143 ERROR:	return code = 1
2011-03-28 11:08:13.143 RunCommand(ps -e | grep signer)
2011-03-28 11:08:13.152 - runCommand: Process started, PID: 8795
2011-03-28 11:08:13.152 ERROR:	return code = 1

2011-03-28 11:08:13.153 00503 Wait(10)

2011-03-28 11:08:13.153 Requirement: ODSCC10

2011-03-28 11:08:23.153 00505 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:08:23.153 Requirement: ODSCC10

2011-03-28 11:08:23.154 00511 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:08:23.154 Requirement: ODSCC10

2011-03-28 11:08:23.154 00514 PurgeHSM()
2011-03-28 11:08:23.154 Requirement: ODSCC10
2011-03-28 11:08:23.154 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:08:23.165 - runCommand: Process started, PID: 8798
2011-03-28 11:08:23.165 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-28 11:08:23.165 ERROR:	return code = 255

2011-03-28 11:08:23.166 00516 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:08:23.166 Requirement: ODSCC10

2011-03-28 11:08:23.166 00519 LoadConfig()
2011-03-28 11:08:23.166 Requirement: ODSCC10
2011-03-28 11:08:23.166 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T80_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:08:23.168 - runCommand: Process started, PID: 8802

2011-03-28 11:08:23.169 00522 LoadConfig()
2011-03-28 11:08:23.169 Requirement: ODSCC10
2011-03-28 11:08:23.169 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:08:23.171 - runCommand: Process started, PID: 8803

2011-03-28 11:08:23.171 00524 Comment: Update all the configs.

2011-03-28 11:08:23.171 Requirement: ODSCC10

2011-03-28 11:08:23.172 00526 ODSSetup()
2011-03-28 11:08:23.172 Requirement: ODSCC10
2011-03-28 11:08:23.172 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:08:33.760 - runCommand: Process started, PID: 8804
2011-03-28 11:08:33.760 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:08:33.760 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:08:33.760 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:08:33.760 OUTPUT:	Repository SoftHSM found
2011-03-28 11:08:33.760 OUTPUT:	No Maximum Capacity set.
2011-03-28 11:08:33.760 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 11:08:33.760 OUTPUT:	Policy default2 found
2011-03-28 11:08:33.760 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:08:33.760 OUTPUT:	Policy default found
2011-03-28 11:08:33.760 OUTPUT:	Zone ods found
2011-03-28 11:08:33.760 OUTPUT:	Policy set to default.
2011-03-28 11:08:33.760 OUTPUT:	Added zone ods to database
2011-03-28 11:08:33.760 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:08:33.760 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:08:33.760 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:08:33.760 00528 Wait(10)

2011-03-28 11:08:33.760 Requirement: ODSCC10

2011-03-28 11:08:43.761 00530 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:08:43.761 Requirement: ODSCC10

2011-03-28 11:08:43.761 00532 Start()
2011-03-28 11:08:43.761 Requirement: ODSCC10
2011-03-28 11:08:43.761 RunCommand(ods-control start)
2011-03-28 11:08:43.763 - runCommand: Background process started, PID: 8817
2011-03-28 11:08:48.793 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:08:48.804 - runCommand: Process started, PID: 8840
2011-03-28 11:08:48.804 ERROR:	return code = 1
2011-03-28 11:08:48.804 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:08:48.820 - runCommand: Process started, PID: 8845

2011-03-28 11:08:48.820 00534 Comment: Sign the ods zone with the new configs.

2011-03-28 11:08:48.820 Requirement: ODSCC10

2011-03-28 11:08:48.820 00538 Wait(15)

2011-03-28 11:08:48.820 Requirement: ODSCC10

2011-03-28 11:09:03.821 00541 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:09:03.821 Requirement: ODSCC10

2011-03-28 11:09:03.821 00543 Stop()
2011-03-28 11:09:03.821 Requirement: ODSCC10
2011-03-28 11:09:03.821 RunCommand(ods-control stop)
2011-03-28 11:09:03.826 - runCommand: Process started, PID: 8850
2011-03-28 11:09:03.826 OUTPUT:	Stopping enforcer...
2011-03-28 11:09:03.826 OUTPUT:	Cannot find PID file
2011-03-28 11:09:03.826 OUTPUT:	Stopping signer engine..
2011-03-28 11:09:03.826 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:09:03.826 ERROR:	return code = 1
2011-03-28 11:09:03.826 RunCommand(ps -e | grep enforcer)
2011-03-28 11:09:03.841 - runCommand: Process started, PID: 8853
2011-03-28 11:09:03.841 ERROR:	return code = 1
2011-03-28 11:09:03.841 RunCommand(ps -e | grep signer)
2011-03-28 11:09:03.851 - runCommand: Process started, PID: 8856
2011-03-28 11:09:03.851 ERROR:	return code = 1

2011-03-28 11:09:03.851 00546 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. 

2011-03-28 11:09:03.851 Requirement: ODSCC10

2011-03-28 11:09:03.851 00549 CheckLog()
2011-03-28 11:09:03.851 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T90: Use correct PIN plus one additional character

2011-03-28 11:09:03.854 00554 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:09:03.855 Requirement: ODSCC10

2011-03-28 11:09:03.855 00556 Stop()
2011-03-28 11:09:03.855 Requirement: ODSCC10
2011-03-28 11:09:03.855 RunCommand(ods-control stop)
2011-03-28 11:09:03.858 - runCommand: Process started, PID: 8859
2011-03-28 11:09:03.858 OUTPUT:	Stopping enforcer...
2011-03-28 11:09:03.858 OUTPUT:	Cannot find PID file
2011-03-28 11:09:03.858 OUTPUT:	Stopping signer engine..
2011-03-28 11:09:03.858 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:09:03.858 ERROR:	return code = 1
2011-03-28 11:09:03.858 RunCommand(ps -e | grep enforcer)
2011-03-28 11:09:03.868 - runCommand: Process started, PID: 8862
2011-03-28 11:09:03.868 ERROR:	return code = 1
2011-03-28 11:09:03.868 RunCommand(ps -e | grep signer)
2011-03-28 11:09:03.878 - runCommand: Process started, PID: 8865
2011-03-28 11:09:03.878 ERROR:	return code = 1

2011-03-28 11:09:03.878 00558 Wait(10)

2011-03-28 11:09:03.878 Requirement: ODSCC10

2011-03-28 11:09:13.878 00560 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:09:13.878 Requirement: ODSCC10

2011-03-28 11:09:13.879 00566 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:09:13.879 Requirement: ODSCC10

2011-03-28 11:09:13.879 00569 PurgeHSM()
2011-03-28 11:09:13.879 Requirement: ODSCC10
2011-03-28 11:09:13.879 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:09:13.893 - runCommand: Process started, PID: 8868
2011-03-28 11:09:13.893 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-28 11:09:13.893 ERROR:	return code = 255

2011-03-28 11:09:13.894 00571 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:09:13.894 Requirement: ODSCC10

2011-03-28 11:09:13.894 00574 LoadConfig()
2011-03-28 11:09:13.894 Requirement: ODSCC10
2011-03-28 11:09:13.894 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T90_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:09:13.898 - runCommand: Process started, PID: 8872

2011-03-28 11:09:13.898 00577 LoadConfig()
2011-03-28 11:09:13.898 Requirement: ODSCC10
2011-03-28 11:09:13.898 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:09:13.900 - runCommand: Process started, PID: 8873

2011-03-28 11:09:13.901 00579 Comment: Update all the configs.

2011-03-28 11:09:13.901 Requirement: ODSCC10

2011-03-28 11:09:13.901 00581 ODSSetup()
2011-03-28 11:09:13.901 Requirement: ODSCC10
2011-03-28 11:09:13.901 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:09:24.375 - runCommand: Process started, PID: 8874
2011-03-28 11:09:24.376 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:09:24.376 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:09:24.376 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:09:24.376 OUTPUT:	Repository SoftHSM found
2011-03-28 11:09:24.376 OUTPUT:	No Maximum Capacity set.
2011-03-28 11:09:24.376 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 11:09:24.376 OUTPUT:	Policy default2 found
2011-03-28 11:09:24.376 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:09:24.376 OUTPUT:	Policy default found
2011-03-28 11:09:24.376 OUTPUT:	Zone ods found
2011-03-28 11:09:24.376 OUTPUT:	Policy set to default.
2011-03-28 11:09:24.376 OUTPUT:	Added zone ods to database
2011-03-28 11:09:24.376 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:09:24.376 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:09:24.376 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:09:24.376 00583 Wait(10)

2011-03-28 11:09:24.376 Requirement: ODSCC10

2011-03-28 11:09:34.377 00585 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:09:34.377 Requirement: ODSCC10

2011-03-28 11:09:34.377 00587 Start()
2011-03-28 11:09:34.377 Requirement: ODSCC10
2011-03-28 11:09:34.377 RunCommand(ods-control start)
2011-03-28 11:09:34.378 - runCommand: Background process started, PID: 8887
2011-03-28 11:09:39.409 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:09:39.421 - runCommand: Process started, PID: 8910
2011-03-28 11:09:39.421 ERROR:	return code = 1
2011-03-28 11:09:39.421 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:09:39.435 - runCommand: Process started, PID: 8915

2011-03-28 11:09:39.435 00589 Comment: Sign the ods zone with the new configs.

2011-03-28 11:09:39.435 Requirement: ODSCC10

2011-03-28 11:09:39.436 00593 Wait(15)

2011-03-28 11:09:39.436 Requirement: ODSCC10

2011-03-28 11:09:54.436 00595 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:09:54.436 Requirement: ODSCC10

2011-03-28 11:09:54.436 00597 Stop()
2011-03-28 11:09:54.436 Requirement: ODSCC10
2011-03-28 11:09:54.436 RunCommand(ods-control stop)
2011-03-28 11:09:54.442 - runCommand: Process started, PID: 8920
2011-03-28 11:09:54.442 OUTPUT:	Stopping enforcer...
2011-03-28 11:09:54.442 OUTPUT:	Cannot find PID file
2011-03-28 11:09:54.442 OUTPUT:	Stopping signer engine..
2011-03-28 11:09:54.442 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:09:54.442 ERROR:	return code = 1
2011-03-28 11:09:54.442 RunCommand(ps -e | grep enforcer)
2011-03-28 11:09:54.457 - runCommand: Process started, PID: 8923
2011-03-28 11:09:54.457 ERROR:	return code = 1
2011-03-28 11:09:54.457 RunCommand(ps -e | grep signer)
2011-03-28 11:09:54.466 - runCommand: Process started, PID: 8926
2011-03-28 11:09:54.466 ERROR:	return code = 1

2011-03-28 11:09:54.467 00600 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. 

2011-03-28 11:09:54.467 Requirement: ODSCC10

2011-03-28 11:09:54.467 00603 CheckLog()
2011-03-28 11:09:54.467 Requirement: ODSCC10
2011-03-28 11:09:54.470 FAILED:	(Check for Like) - Expected: Aborting operation Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC10T100: Use a Repository Capacity of 0 and expect failure

2011-03-28 11:09:54.470 00610 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:09:54.470 Requirement: ODSCC10

2011-03-28 11:09:54.470 00612 Stop()
2011-03-28 11:09:54.470 Requirement: ODSCC10
2011-03-28 11:09:54.471 RunCommand(ods-control stop)
2011-03-28 11:09:54.474 - runCommand: Process started, PID: 8929
2011-03-28 11:09:54.474 OUTPUT:	Stopping enforcer...
2011-03-28 11:09:54.474 OUTPUT:	Cannot find PID file
2011-03-28 11:09:54.474 OUTPUT:	Stopping signer engine..
2011-03-28 11:09:54.474 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:09:54.474 ERROR:	return code = 1
2011-03-28 11:09:54.474 RunCommand(ps -e | grep enforcer)
2011-03-28 11:09:54.483 - runCommand: Process started, PID: 8932
2011-03-28 11:09:54.483 ERROR:	return code = 1
2011-03-28 11:09:54.483 RunCommand(ps -e | grep signer)
2011-03-28 11:09:54.493 - runCommand: Process started, PID: 8935
2011-03-28 11:09:54.493 ERROR:	return code = 1

2011-03-28 11:09:54.493 00614 Wait(10)

2011-03-28 11:09:54.493 Requirement: ODSCC10

2011-03-28 11:10:04.493 00616 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:10:04.493 Requirement: ODSCC10

2011-03-28 11:10:04.494 00622 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:10:04.494 Requirement: ODSCC10

2011-03-28 11:10:04.494 00625 PurgeHSM()
2011-03-28 11:10:04.494 Requirement: ODSCC10
2011-03-28 11:10:04.494 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:10:04.505 - runCommand: Process started, PID: 8938
2011-03-28 11:10:04.505 ERROR:	hsm_session_init(): Incorrect PIN for repository SoftHSM
2011-03-28 11:10:04.505 ERROR:	return code = 255

2011-03-28 11:10:04.506 00627 Wait(10)

2011-03-28 11:10:04.506 Requirement: ODSCC10

2011-03-28 11:10:14.506 00629 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:10:14.506 Requirement: ODSCC10

2011-03-28 11:10:14.506 00632 LoadConfig()
2011-03-28 11:10:14.506 Requirement: ODSCC10
2011-03-28 11:10:14.506 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T100_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:10:14.510 - runCommand: Process started, PID: 8942

2011-03-28 11:10:14.511 00635 LoadConfig()
2011-03-28 11:10:14.511 Requirement: ODSCC10
2011-03-28 11:10:14.511 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:10:14.515 - runCommand: Process started, PID: 8943

2011-03-28 11:10:14.515 00637 Comment: Update all the configs.

2011-03-28 11:10:14.515 Requirement: ODSCC10

2011-03-28 11:10:14.515 00639 ODSSetup()
2011-03-28 11:10:14.515 Requirement: ODSCC10
2011-03-28 11:10:14.515 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:10:14.525 - runCommand: Process started, PID: 8944
2011-03-28 11:10:14.525 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error validating file "/etc/opendnssec/conf.xml"
2011-03-28 11:10:14.525 ERROR:	/etc/opendnssec/conf.xml:10: element Capacity: Relax-NG validity error : Type positiveInteger doesn't allow value '0'
2011-03-28 11:10:14.525 ERROR:	/etc/opendnssec/conf.xml:10: element Capacity: Relax-NG validity error : Error validating datatype positiveInteger
2011-03-28 11:10:14.525 ERROR:	/etc/opendnssec/conf.xml:10: element Capacity: Relax-NG validity error : Element Capacity failed to validate content
2011-03-28 11:10:14.525 ERROR:	return code = 255

2011-03-28 11:10:14.525 00641 Wait(10)

2011-03-28 11:10:14.525 Requirement: ODSCC10

2011-03-28 11:10:24.526 00643 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:10:24.526 Requirement: ODSCC10

2011-03-28 11:10:24.526 00645 Start()
2011-03-28 11:10:24.526 Requirement: ODSCC10
2011-03-28 11:10:24.526 RunCommand(ods-control start)
2011-03-28 11:10:24.527 - runCommand: Background process started, PID: 8947
2011-03-28 11:10:34.584 ERROR:	return code = 1
2011-03-28 11:10:34.584 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:10:34.599 - runCommand: Process started, PID: 8975
2011-03-28 11:10:34.599 ERROR:	return code = 1
2011-03-28 11:10:34.599 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:10:34.620 - runCommand: Process started, PID: 8979

2011-03-28 11:10:34.620 00647 Comment: Sign the ods zone with the new configs.

2011-03-28 11:10:34.620 Requirement: ODSCC10

2011-03-28 11:10:34.621 00651 Wait(15)

2011-03-28 11:10:34.621 Requirement: ODSCC10

2011-03-28 11:10:49.621 00653 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:10:49.621 Requirement: ODSCC10

2011-03-28 11:10:49.621 00655 Stop()
2011-03-28 11:10:49.621 Requirement: ODSCC10
2011-03-28 11:10:49.621 RunCommand(ods-control stop)
2011-03-28 11:10:49.627 - runCommand: Process started, PID: 8984
2011-03-28 11:10:49.627 OUTPUT:	Stopping enforcer...
2011-03-28 11:10:49.627 OUTPUT:	Cannot find PID file
2011-03-28 11:10:49.627 OUTPUT:	Stopping signer engine..
2011-03-28 11:10:49.627 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:10:49.627 ERROR:	return code = 1
2011-03-28 11:10:49.627 RunCommand(ps -e | grep enforcer)
2011-03-28 11:10:49.642 - runCommand: Process started, PID: 8987
2011-03-28 11:10:49.642 ERROR:	return code = 1
2011-03-28 11:10:49.642 RunCommand(ps -e | grep signer)
2011-03-28 11:10:49.652 - runCommand: Process started, PID: 8990
2011-03-28 11:10:49.653 ERROR:	return code = 1

2011-03-28 11:10:49.653 00657 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. 

2011-03-28 11:10:49.653 Requirement: ODSCC10

2011-03-28 11:10:49.653 00660 CheckLog()
2011-03-28 11:10:49.653 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T110: Use a Repository Capacity of 1 and expect failure

2011-03-28 11:10:49.656 00667 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:10:49.656 Requirement: ODSCC10

2011-03-28 11:10:49.657 00669 Stop()
2011-03-28 11:10:49.657 Requirement: ODSCC10
2011-03-28 11:10:49.657 RunCommand(ods-control stop)
2011-03-28 11:10:49.660 - runCommand: Process started, PID: 8993
2011-03-28 11:10:49.660 OUTPUT:	Stopping enforcer...
2011-03-28 11:10:49.660 OUTPUT:	Cannot find PID file
2011-03-28 11:10:49.660 OUTPUT:	Stopping signer engine..
2011-03-28 11:10:49.660 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:10:49.660 ERROR:	return code = 1
2011-03-28 11:10:49.660 RunCommand(ps -e | grep enforcer)
2011-03-28 11:10:49.669 - runCommand: Process started, PID: 8996
2011-03-28 11:10:49.669 ERROR:	return code = 1
2011-03-28 11:10:49.669 RunCommand(ps -e | grep signer)
2011-03-28 11:10:49.679 - runCommand: Process started, PID: 8999
2011-03-28 11:10:49.679 ERROR:	return code = 1

2011-03-28 11:10:49.679 00671 Wait(10)

2011-03-28 11:10:49.679 Requirement: ODSCC10

2011-03-28 11:10:59.679 00673 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:10:59.679 Requirement: ODSCC10

2011-03-28 11:10:59.680 00679 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:10:59.680 Requirement: ODSCC10

2011-03-28 11:10:59.680 00682 PurgeHSM()
2011-03-28 11:10:59.680 Requirement: ODSCC10
2011-03-28 11:10:59.680 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:10:59.692 - runCommand: Process started, PID: 9002
2011-03-28 11:10:59.692 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:10:59.692 OUTPUT:	0 keys found.
2011-03-28 11:10:59.692 ERROR:	return code = 255

2011-03-28 11:10:59.693 00684 Wait(10)

2011-03-28 11:10:59.693 Requirement: ODSCC10

2011-03-28 11:11:09.693 00687 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:11:09.693 Requirement: ODSCC10

2011-03-28 11:11:09.693 00690 LoadConfig()
2011-03-28 11:11:09.693 Requirement: ODSCC10
2011-03-28 11:11:09.693 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T110_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:11:09.697 - runCommand: Process started, PID: 9006

2011-03-28 11:11:09.698 00693 LoadConfig()
2011-03-28 11:11:09.698 Requirement: ODSCC10
2011-03-28 11:11:09.698 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:11:09.702 - runCommand: Process started, PID: 9007

2011-03-28 11:11:09.702 00695 Comment: Update all the configs.

2011-03-28 11:11:09.702 Requirement: ODSCC10

2011-03-28 11:11:09.702 00697 ODSSetup()
2011-03-28 11:11:09.702 Requirement: ODSCC10
2011-03-28 11:11:09.702 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:11:20.441 - runCommand: Process started, PID: 9008
2011-03-28 11:11:20.441 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:11:20.441 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:11:20.441 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:11:20.441 OUTPUT:	Repository SoftHSM found
2011-03-28 11:11:20.441 OUTPUT:	Capacity set to 1.
2011-03-28 11:11:20.441 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 11:11:20.441 OUTPUT:	Policy default2 found
2011-03-28 11:11:20.441 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:11:20.441 OUTPUT:	Policy default found
2011-03-28 11:11:20.441 OUTPUT:	Zone ods found
2011-03-28 11:11:20.441 OUTPUT:	Policy set to default.
2011-03-28 11:11:20.441 OUTPUT:	Added zone ods to database
2011-03-28 11:11:20.441 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:11:20.441 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:11:20.441 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:11:20.442 00699 Wait(10)

2011-03-28 11:11:20.442 Requirement: ODSCC10

2011-03-28 11:11:30.442 00701 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:11:30.442 Requirement: ODSCC10

2011-03-28 11:11:30.443 00703 Start()
2011-03-28 11:11:30.443 Requirement: ODSCC10
2011-03-28 11:11:30.443 RunCommand(ods-control start)
2011-03-28 11:11:30.444 - runCommand: Background process started, PID: 9021
2011-03-28 11:11:31.461 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:11:31.478 - runCommand: Process started, PID: 9038
2011-03-28 11:11:31.478 OUTPUT:	ods-enforcerd
2011-03-28 11:11:31.478 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:11:31.498 - runCommand: Process started, PID: 9043

2011-03-28 11:11:31.498 00705 Comment: Sign the ods zone with the new configs.

2011-03-28 11:11:31.498 Requirement: ODSCC10

2011-03-28 11:11:31.499 00709 Wait(15)

2011-03-28 11:11:31.499 Requirement: ODSCC10

2011-03-28 11:11:46.499 00711 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:11:46.499 Requirement: ODSCC10

2011-03-28 11:11:46.499 00713 Stop()
2011-03-28 11:11:46.500 Requirement: ODSCC10
2011-03-28 11:11:46.500 RunCommand(ods-control stop)
2011-03-28 11:11:47.508 - runCommand: Process started, PID: 9048
2011-03-28 11:11:47.508 OUTPUT:	Stopping enforcer...
2011-03-28 11:11:47.508 OUTPUT:	Stopping signer engine..
2011-03-28 11:11:47.508 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:11:47.508 ERROR:	return code = 1
2011-03-28 11:11:47.508 RunCommand(ps -e | grep enforcer)
2011-03-28 11:11:47.524 - runCommand: Process started, PID: 9053
2011-03-28 11:11:47.524 ERROR:	return code = 1
2011-03-28 11:11:47.524 RunCommand(ps -e | grep signer)
2011-03-28 11:11:47.537 - runCommand: Process started, PID: 9056
2011-03-28 11:11:47.538 ERROR:	return code = 1

2011-03-28 11:11:47.538 00715 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. 

2011-03-28 11:11:47.538 Requirement: ODSCC10

2011-03-28 11:11:47.538 00718 CheckLog()
2011-03-28 11:11:47.538 Requirement: ODSCC10
2011-03-28 11:11:47.543 PASSED:	(Check for Like) - Expected: Not enough keys Found: Mar 28 11:11:31 DEVELOPER15 ods-enforcerd: Not enough keys to satisfy zsk policy for zone: ods

-------------------------------------------------------------------------------
Testcase - ODSCC10T120: Use a Repository Capacity of 4 and expect success

2011-03-28 11:11:47.544 00724 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:11:47.544 Requirement: ODSCC10

2011-03-28 11:11:47.544 00726 Stop()
2011-03-28 11:11:47.544 Requirement: ODSCC10
2011-03-28 11:11:47.544 RunCommand(ods-control stop)
2011-03-28 11:11:47.548 - runCommand: Process started, PID: 9059
2011-03-28 11:11:47.548 OUTPUT:	Stopping enforcer...
2011-03-28 11:11:47.548 OUTPUT:	Cannot find PID file
2011-03-28 11:11:47.548 OUTPUT:	Stopping signer engine..
2011-03-28 11:11:47.548 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:11:47.548 ERROR:	return code = 1
2011-03-28 11:11:47.548 RunCommand(ps -e | grep enforcer)
2011-03-28 11:11:47.559 - runCommand: Process started, PID: 9062
2011-03-28 11:11:47.559 ERROR:	return code = 1
2011-03-28 11:11:47.559 RunCommand(ps -e | grep signer)
2011-03-28 11:11:47.572 - runCommand: Process started, PID: 9065
2011-03-28 11:11:47.572 ERROR:	return code = 1

2011-03-28 11:11:47.572 00728 Wait(10)

2011-03-28 11:11:47.572 Requirement: ODSCC10

2011-03-28 11:11:57.572 00730 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:11:57.572 Requirement: ODSCC10

2011-03-28 11:11:57.573 00736 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:11:57.573 Requirement: ODSCC10

2011-03-28 11:11:57.573 00739 PurgeHSM()
2011-03-28 11:11:57.573 Requirement: ODSCC10
2011-03-28 11:11:57.573 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:11:57.788 - runCommand: Process started, PID: 9068
2011-03-28 11:11:57.788 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:11:57.788 OUTPUT:	1 key found.
2011-03-28 11:11:57.788 OUTPUT:	
2011-03-28 11:11:57.788 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-28 11:11:57.788 OUTPUT:	Starting purge...
2011-03-28 11:11:57.788 OUTPUT:	Key remove successful: c424a083322e6cf021a77fdd1dc140cf
2011-03-28 11:11:57.788 OUTPUT:	Purge done.

2011-03-28 11:11:57.788 00741 Wait(10)

2011-03-28 11:11:57.788 Requirement: ODSCC10

2011-03-28 11:12:07.789 00743 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:12:07.789 Requirement: ODSCC10

2011-03-28 11:12:07.789 00746 LoadConfig()
2011-03-28 11:12:07.789 Requirement: ODSCC10
2011-03-28 11:12:07.789 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T120_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:12:07.793 - runCommand: Process started, PID: 9072

2011-03-28 11:12:07.794 00749 LoadConfig()
2011-03-28 11:12:07.794 Requirement: ODSCC10
2011-03-28 11:12:07.794 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:12:07.797 - runCommand: Process started, PID: 9073

2011-03-28 11:12:07.798 00751 Comment: Update all the configs.

2011-03-28 11:12:07.798 Requirement: ODSCC10

2011-03-28 11:12:07.798 00753 ODSSetup()
2011-03-28 11:12:07.798 Requirement: ODSCC10
2011-03-28 11:12:07.798 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:12:18.345 - runCommand: Process started, PID: 9074
2011-03-28 11:12:18.345 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:12:18.345 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:12:18.345 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:12:18.345 OUTPUT:	Repository SoftHSM found
2011-03-28 11:12:18.345 OUTPUT:	Capacity set to 4.
2011-03-28 11:12:18.345 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 11:12:18.345 OUTPUT:	Policy default2 found
2011-03-28 11:12:18.345 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:12:18.345 OUTPUT:	Policy default found
2011-03-28 11:12:18.345 OUTPUT:	Zone ods found
2011-03-28 11:12:18.345 OUTPUT:	Policy set to default.
2011-03-28 11:12:18.345 OUTPUT:	Added zone ods to database
2011-03-28 11:12:18.345 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:12:18.345 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:12:18.345 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:12:18.345 00755 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:12:18.345 Requirement: ODSCC10

2011-03-28 11:12:18.346 00757 Start()
2011-03-28 11:12:18.346 Requirement: ODSCC10
2011-03-28 11:12:18.346 RunCommand(ods-control start)
2011-03-28 11:12:18.347 - runCommand: Background process started, PID: 9087
2011-03-28 11:12:20.370 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:12:20.385 - runCommand: Process started, PID: 9115
2011-03-28 11:12:20.386 OUTPUT:	ods-enforcerd
2011-03-28 11:12:20.386 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:12:20.402 - runCommand: Process started, PID: 9119
2011-03-28 11:12:20.402 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:12:20.402 00759 Wait(10)

2011-03-28 11:12:20.402 Requirement: ODSCC10

2011-03-28 11:12:30.403 00761 Comment: Sign the ods zone with the new configs.

2011-03-28 11:12:30.403 Requirement: ODSCC10

2011-03-28 11:12:30.403 00765 Wait(15)

2011-03-28 11:12:30.403 Requirement: ODSCC10

2011-03-28 11:12:45.404 00767 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:12:45.404 Requirement: ODSCC10

2011-03-28 11:12:45.404 00769 Stop()
2011-03-28 11:12:45.404 Requirement: ODSCC10
2011-03-28 11:12:45.404 RunCommand(ods-control stop)
2011-03-28 11:12:46.413 - runCommand: Process started, PID: 9141
2011-03-28 11:12:46.413 OUTPUT:	Stopping enforcer...
2011-03-28 11:12:46.413 OUTPUT:	Stopping signer engine..
2011-03-28 11:12:46.413 OUTPUT:	Engine shut down.
2011-03-28 11:12:46.414 RunCommand(ps -e | grep enforcer)
2011-03-28 11:12:46.429 - runCommand: Process started, PID: 9147
2011-03-28 11:12:46.429 ERROR:	return code = 1
2011-03-28 11:12:46.429 RunCommand(ps -e | grep signer)
2011-03-28 11:12:46.439 - runCommand: Process started, PID: 9150
2011-03-28 11:12:46.439 ERROR:	return code = 1

2011-03-28 11:12:46.440 00771 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-28 11:12:46.440 Requirement: ODSCC10

2011-03-28 11:12:46.440 00774 CheckLog()
2011-03-28 11:12:46.440 Requirement: ODSCC10
2011-03-28 11:12:46.448 PASSED:	(Check for Like) - Expected: all done! Found: Mar 28 11:12:45 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

-------------------------------------------------------------------------------
Testcase - ODSCC10T130: Use a Repository Capacity of 100000 and expect success

2011-03-28 11:12:46.449 00781 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:12:46.449 Requirement: ODSCC10

2011-03-28 11:12:46.449 00783 Stop()
2011-03-28 11:12:46.449 Requirement: ODSCC10
2011-03-28 11:12:46.449 RunCommand(ods-control stop)
2011-03-28 11:12:46.452 - runCommand: Process started, PID: 9153
2011-03-28 11:12:46.452 OUTPUT:	Stopping enforcer...
2011-03-28 11:12:46.452 OUTPUT:	Cannot find PID file
2011-03-28 11:12:46.452 OUTPUT:	Stopping signer engine..
2011-03-28 11:12:46.452 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 11:12:46.452 ERROR:	return code = 1
2011-03-28 11:12:46.452 RunCommand(ps -e | grep enforcer)
2011-03-28 11:12:46.462 - runCommand: Process started, PID: 9156
2011-03-28 11:12:46.462 ERROR:	return code = 1
2011-03-28 11:12:46.462 RunCommand(ps -e | grep signer)
2011-03-28 11:12:46.471 - runCommand: Process started, PID: 9159
2011-03-28 11:12:46.471 ERROR:	return code = 1

2011-03-28 11:12:46.471 00785 Wait(10)

2011-03-28 11:12:46.471 Requirement: ODSCC10

2011-03-28 11:12:56.472 00787 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:12:56.472 Requirement: ODSCC10

2011-03-28 11:12:56.472 00793 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:12:56.472 Requirement: ODSCC10

2011-03-28 11:12:56.472 00796 PurgeHSM()
2011-03-28 11:12:56.472 Requirement: ODSCC10
2011-03-28 11:12:56.472 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:12:56.816 - runCommand: Process started, PID: 9162
2011-03-28 11:12:56.816 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:12:56.816 OUTPUT:	2 keys found.
2011-03-28 11:12:56.816 OUTPUT:	
2011-03-28 11:12:56.816 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-28 11:12:56.816 OUTPUT:	Starting purge...
2011-03-28 11:12:56.816 OUTPUT:	Key remove successful: 0d82ff9af494e74b9ec61a5903c42386
2011-03-28 11:12:56.816 OUTPUT:	Key remove successful: 0bfe3c661f44ccaded5a761de582ee08
2011-03-28 11:12:56.816 OUTPUT:	Purge done.

2011-03-28 11:12:56.816 00798 Wait(10)

2011-03-28 11:12:56.816 Requirement: ODSCC10

2011-03-28 11:13:06.817 00801 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:13:06.817 Requirement: ODSCC10

2011-03-28 11:13:06.817 00804 LoadConfig()
2011-03-28 11:13:06.817 Requirement: ODSCC10
2011-03-28 11:13:06.817 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T130_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:13:06.821 - runCommand: Process started, PID: 9166

2011-03-28 11:13:06.822 00807 LoadConfig()
2011-03-28 11:13:06.822 Requirement: ODSCC10
2011-03-28 11:13:06.822 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:13:06.825 - runCommand: Process started, PID: 9167

2011-03-28 11:13:06.826 00809 Comment: Update all the configs.

2011-03-28 11:13:06.826 Requirement: ODSCC10

2011-03-28 11:13:06.826 00811 ODSSetup()
2011-03-28 11:13:06.826 Requirement: ODSCC10
2011-03-28 11:13:06.826 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:13:17.656 - runCommand: Process started, PID: 9168
2011-03-28 11:13:17.656 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:13:17.656 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:13:17.656 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:13:17.656 OUTPUT:	Repository SoftHSM found
2011-03-28 11:13:17.656 OUTPUT:	Capacity set to 100000.
2011-03-28 11:13:17.656 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 11:13:17.656 OUTPUT:	Policy default2 found
2011-03-28 11:13:17.656 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:13:17.656 OUTPUT:	Policy default found
2011-03-28 11:13:17.656 OUTPUT:	Zone ods found
2011-03-28 11:13:17.656 OUTPUT:	Policy set to default.
2011-03-28 11:13:17.656 OUTPUT:	Added zone ods to database
2011-03-28 11:13:17.656 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:13:17.656 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:13:17.656 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:13:17.657 00813 Wait(10)

2011-03-28 11:13:17.657 Requirement: ODSCC10

2011-03-28 11:13:27.657 00815 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:13:27.657 Requirement: ODSCC10

2011-03-28 11:13:27.658 00817 Start()
2011-03-28 11:13:27.658 Requirement: ODSCC10
2011-03-28 11:13:27.658 RunCommand(ods-control start)
2011-03-28 11:13:27.659 - runCommand: Background process started, PID: 9181
2011-03-28 11:13:28.678 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:13:28.702 - runCommand: Process started, PID: 9197
2011-03-28 11:13:28.702 OUTPUT:	ods-enforcerd
2011-03-28 11:13:28.702 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:13:28.728 - runCommand: Process started, PID: 9209
2011-03-28 11:13:28.728 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:13:28.728 00819 Comment: Sign the ods zone with the new configs.

2011-03-28 11:13:28.728 Requirement: ODSCC10

2011-03-28 11:13:28.728 00823 Wait(15)

2011-03-28 11:13:28.728 Requirement: ODSCC10

2011-03-28 11:13:43.729 00825 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:13:43.729 Requirement: ODSCC10

2011-03-28 11:13:43.729 00827 Stop()
2011-03-28 11:13:43.729 Requirement: ODSCC10
2011-03-28 11:13:43.729 RunCommand(ods-control stop)
2011-03-28 11:13:44.741 - runCommand: Process started, PID: 9231
2011-03-28 11:13:44.741 OUTPUT:	Stopping enforcer...
2011-03-28 11:13:44.741 OUTPUT:	Stopping signer engine..
2011-03-28 11:13:44.741 OUTPUT:	Engine shut down.
2011-03-28 11:13:44.741 RunCommand(ps -e | grep enforcer)
2011-03-28 11:13:44.756 - runCommand: Process started, PID: 9237
2011-03-28 11:13:44.756 ERROR:	return code = 1
2011-03-28 11:13:44.756 RunCommand(ps -e | grep signer)
2011-03-28 11:13:44.769 - runCommand: Process started, PID: 9240
2011-03-28 11:13:44.769 ERROR:	return code = 1

2011-03-28 11:13:44.769 00829 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-28 11:13:44.769 Requirement: ODSCC10

2011-03-28 11:13:44.769 00832 CheckLog()
2011-03-28 11:13:44.769 Requirement: ODSCC10
2011-03-28 11:13:44.776 PASSED:	(Check for Like) - Expected: all done! Found: Mar 28 11:12:45 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

-------------------------------------------------------------------------------
Testcase - ODSCC10T140: RequireBackup turned off and check if backup is not required to use a key

2011-03-28 11:13:44.776 00839 Comment: RequireBackup is an optional element that specifies that keys from this repository may not be used until they are backed up. If backup has been done, then use ods-ksmutil to notify OpenDNSSEC about this. The backup notification is needed for OpenDNSSEC to be able to complete a key rollover.

2011-03-28 11:13:44.776 Requirement: ODSCC10

2011-03-28 11:13:44.776 00840 Comment: This has been already tested in DSCC10T10

2011-03-28 11:13:44.777 Requirement: ODSCC10

-------------------------------------------------------------------------------
Testcase - ODSCC10T150: RequireBackup turned on and check if backup is required to use a key

2011-03-28 11:13:44.777 00850 Comment: RequireBackup is an optional element that specifies that keys from this repository may not be used until they are backed up. If backup has been done, then use ods-ksmutil to notify OpenDNSSEC about this. The backup notification is needed for OpenDNSSEC to be able to complete a key rollover.

2011-03-28 11:13:44.777 Requirement: ODSCC10

2011-03-28 11:13:44.777 00851 Comment: 

2011-03-28 11:13:44.777 Requirement: ODSCC10

2011-03-28 11:13:44.777 00853 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:13:44.777 Requirement: ODSCC10

2011-03-28 11:13:44.778 00855 Stop()
2011-03-28 11:13:44.778 Requirement: ODSCC10
2011-03-28 11:13:44.778 RunCommand(ods-control stop)
2011-03-28 11:13:44.781 - runCommand: Process started, PID: 9243
2011-03-28 11:13:44.781 OUTPUT:	Stopping enforcer...
2011-03-28 11:13:44.781 OUTPUT:	Cannot find PID file
2011-03-28 11:13:44.781 OUTPUT:	Stopping signer engine..
2011-03-28 11:13:44.781 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 11:13:44.781 ERROR:	return code = 1
2011-03-28 11:13:44.781 RunCommand(ps -e | grep enforcer)
2011-03-28 11:13:44.790 - runCommand: Process started, PID: 9246
2011-03-28 11:13:44.790 ERROR:	return code = 1
2011-03-28 11:13:44.791 RunCommand(ps -e | grep signer)
2011-03-28 11:13:44.800 - runCommand: Process started, PID: 9249
2011-03-28 11:13:44.800 ERROR:	return code = 1

2011-03-28 11:13:44.800 00857 Wait(10)

2011-03-28 11:13:44.800 Requirement: ODSCC10

2011-03-28 11:13:54.800 00859 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:13:54.800 Requirement: ODSCC10

2011-03-28 11:13:54.801 00865 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:13:54.801 Requirement: ODSCC10

2011-03-28 11:13:54.801 00868 PurgeHSM()
2011-03-28 11:13:54.801 Requirement: ODSCC10
2011-03-28 11:13:54.801 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:13:55.144 - runCommand: Process started, PID: 9252
2011-03-28 11:13:55.144 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:13:55.144 OUTPUT:	2 keys found.
2011-03-28 11:13:55.144 OUTPUT:	
2011-03-28 11:13:55.144 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-28 11:13:55.144 OUTPUT:	Starting purge...
2011-03-28 11:13:55.144 OUTPUT:	Key remove successful: 4f5aaea7d591056af2d5fe8c66112b2c
2011-03-28 11:13:55.144 OUTPUT:	Key remove successful: 348d3cdd42252a13433bc63a04f5aadf
2011-03-28 11:13:55.144 OUTPUT:	Purge done.

2011-03-28 11:13:55.145 00870 Wait(10)

2011-03-28 11:13:55.145 Requirement: ODSCC10

2011-03-28 11:14:05.145 00872 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:14:05.145 Requirement: ODSCC10

2011-03-28 11:14:05.146 00875 LoadConfig()
2011-03-28 11:14:05.146 Requirement: ODSCC10
2011-03-28 11:14:05.146 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T150_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:14:05.150 - runCommand: Process started, PID: 9256

2011-03-28 11:14:05.150 00878 LoadConfig()
2011-03-28 11:14:05.150 Requirement: ODSCC10
2011-03-28 11:14:05.150 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:14:05.154 - runCommand: Process started, PID: 9257

2011-03-28 11:14:05.154 00880 Comment: Update all the configs.

2011-03-28 11:14:05.154 Requirement: ODSCC10

2011-03-28 11:14:05.155 00882 ODSSetup()
2011-03-28 11:14:05.155 Requirement: ODSCC10
2011-03-28 11:14:05.155 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:14:15.776 - runCommand: Process started, PID: 9258
2011-03-28 11:14:15.776 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:14:15.776 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:14:15.776 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:14:15.776 OUTPUT:	Repository SoftHSM found
2011-03-28 11:14:15.776 OUTPUT:	Capacity set to 10.
2011-03-28 11:14:15.776 OUTPUT:	RequireBackup set.
2011-03-28 11:14:15.777 OUTPUT:	Policy default2 found
2011-03-28 11:14:15.777 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:14:15.777 OUTPUT:	Policy default found
2011-03-28 11:14:15.777 OUTPUT:	Zone ods found
2011-03-28 11:14:15.777 OUTPUT:	Policy set to default.
2011-03-28 11:14:15.777 OUTPUT:	Added zone ods to database
2011-03-28 11:14:15.777 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:14:15.777 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:14:15.777 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:14:15.777 00884 Wait(10)

2011-03-28 11:14:15.777 Requirement: ODSCC10

2011-03-28 11:14:25.778 00886 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:14:25.778 Requirement: ODSCC10

2011-03-28 11:14:25.778 00888 Start()
2011-03-28 11:14:25.778 Requirement: ODSCC10
2011-03-28 11:14:25.778 RunCommand(ods-control start)
2011-03-28 11:14:25.779 - runCommand: Background process started, PID: 9271
2011-03-28 11:14:26.797 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:14:26.809 - runCommand: Process started, PID: 9286
2011-03-28 11:14:26.809 OUTPUT:	ods-enforcerd
2011-03-28 11:14:26.809 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:14:26.828 - runCommand: Process started, PID: 9291
2011-03-28 11:14:26.828 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:14:26.828 00890 Comment: Sign the ods zone with the new configs.

2011-03-28 11:14:26.828 Requirement: ODSCC10

2011-03-28 11:14:26.828 00894 Wait(15)

2011-03-28 11:14:26.828 Requirement: ODSCC10

2011-03-28 11:14:41.829 00896 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:14:41.829 Requirement: ODSCC10

2011-03-28 11:14:41.829 00898 Stop()
2011-03-28 11:14:41.829 Requirement: ODSCC10
2011-03-28 11:14:41.829 RunCommand(ods-control stop)
2011-03-28 11:14:42.839 - runCommand: Process started, PID: 9304
2011-03-28 11:14:42.839 OUTPUT:	Stopping enforcer...
2011-03-28 11:14:42.839 OUTPUT:	Stopping signer engine..
2011-03-28 11:14:42.839 OUTPUT:	Engine shut down.
2011-03-28 11:14:42.839 RunCommand(ps -e | grep enforcer)
2011-03-28 11:14:42.854 - runCommand: Process started, PID: 9310
2011-03-28 11:14:42.854 ERROR:	return code = 1
2011-03-28 11:14:42.854 RunCommand(ps -e | grep signer)
2011-03-28 11:14:42.868 - runCommand: Process started, PID: 9313
2011-03-28 11:14:42.868 ERROR:	return code = 1

2011-03-28 11:14:42.868 00900 Comment: Check if the signing was unsuccesfull. If a "aborting operation" is in the logging, the signing was unsuccesful. 

2011-03-28 11:14:42.868 Requirement: ODSCC10

2011-03-28 11:14:42.868 00903 CheckLog()
2011-03-28 11:14:42.868 Requirement: ODSCC10
2011-03-28 11:14:42.880 FAILED:	(Check for Like) - Expected: aborting operation Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC10T160: RequireBackup turned on, backup keys, and sign zone

2011-03-28 11:14:42.881 00910 Comment: RequireBackup is an optional element that specifies that keys from this repository may not be used until they are backed up. If backup has been done, then use ods-ksmutil to notify OpenDNSSEC about this. The backup notification is needed for OpenDNSSEC to be able to complete a key rollover.

2011-03-28 11:14:42.881 Requirement: ODSCC10

2011-03-28 11:14:42.881 00911 Comment: 

2011-03-28 11:14:42.881 Requirement: ODSCC10

2011-03-28 11:14:42.881 00913 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:14:42.881 Requirement: ODSCC10

2011-03-28 11:14:42.881 00915 Stop()
2011-03-28 11:14:42.881 Requirement: ODSCC10
2011-03-28 11:14:42.881 RunCommand(ods-control stop)
2011-03-28 11:14:42.885 - runCommand: Process started, PID: 9316
2011-03-28 11:14:42.885 OUTPUT:	Stopping enforcer...
2011-03-28 11:14:42.885 OUTPUT:	Cannot find PID file
2011-03-28 11:14:42.885 OUTPUT:	Stopping signer engine..
2011-03-28 11:14:42.885 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 11:14:42.885 ERROR:	return code = 1
2011-03-28 11:14:42.885 RunCommand(ps -e | grep enforcer)
2011-03-28 11:14:42.894 - runCommand: Process started, PID: 9319
2011-03-28 11:14:42.894 ERROR:	return code = 1
2011-03-28 11:14:42.894 RunCommand(ps -e | grep signer)
2011-03-28 11:14:42.906 - runCommand: Process started, PID: 9322
2011-03-28 11:14:42.906 ERROR:	return code = 1

2011-03-28 11:14:42.906 00917 Wait(10)

2011-03-28 11:14:42.906 Requirement: ODSCC10

2011-03-28 11:14:52.906 00919 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:14:52.906 Requirement: ODSCC10

2011-03-28 11:14:52.907 00925 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:14:52.907 Requirement: ODSCC10

2011-03-28 11:14:52.907 00928 PurgeHSM()
2011-03-28 11:14:52.907 Requirement: ODSCC10
2011-03-28 11:14:52.907 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:14:53.223 - runCommand: Process started, PID: 9325
2011-03-28 11:14:53.223 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:14:53.223 OUTPUT:	2 keys found.
2011-03-28 11:14:53.223 OUTPUT:	
2011-03-28 11:14:53.223 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-28 11:14:53.223 OUTPUT:	Starting purge...
2011-03-28 11:14:53.223 OUTPUT:	Key remove successful: d6c8034a7ebc0a173d28022df40bfff2
2011-03-28 11:14:53.223 OUTPUT:	Key remove successful: 53b60c26fcb13800f61830927a02b6c5
2011-03-28 11:14:53.223 OUTPUT:	Purge done.

2011-03-28 11:14:53.223 00930 Wait(10)

2011-03-28 11:14:53.223 Requirement: ODSCC10

2011-03-28 11:15:03.224 00933 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:15:03.224 Requirement: ODSCC10

2011-03-28 11:15:03.224 00936 LoadConfig()
2011-03-28 11:15:03.224 Requirement: ODSCC10
2011-03-28 11:15:03.224 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC10T160_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:15:03.228 - runCommand: Process started, PID: 9329

2011-03-28 11:15:03.229 00939 LoadConfig()
2011-03-28 11:15:03.229 Requirement: ODSCC10
2011-03-28 11:15:03.229 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:15:03.232 - runCommand: Process started, PID: 9330

2011-03-28 11:15:03.233 00941 Comment: Update all the configs.

2011-03-28 11:15:03.233 Requirement: ODSCC10

2011-03-28 11:15:03.233 00943 ODSSetup()
2011-03-28 11:15:03.233 Requirement: ODSCC10
2011-03-28 11:15:03.233 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:15:13.438 - runCommand: Process started, PID: 9331
2011-03-28 11:15:13.439 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:15:13.439 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:15:13.439 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:15:13.439 OUTPUT:	Repository SoftHSM found
2011-03-28 11:15:13.439 OUTPUT:	Capacity set to 10.
2011-03-28 11:15:13.439 OUTPUT:	RequireBackup set.
2011-03-28 11:15:13.439 OUTPUT:	Policy default2 found
2011-03-28 11:15:13.439 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:15:13.439 OUTPUT:	Policy default found
2011-03-28 11:15:13.439 OUTPUT:	Zone ods found
2011-03-28 11:15:13.439 OUTPUT:	Policy set to default.
2011-03-28 11:15:13.439 OUTPUT:	Added zone ods to database
2011-03-28 11:15:13.439 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:15:13.439 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:15:13.439 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:15:13.439 00945 Wait(10)

2011-03-28 11:15:13.439 Requirement: ODSCC10

2011-03-28 11:15:23.440 00947 Comment: Prepare the backup by telling the Enforcer that you want to do backup of the keys.

2011-03-28 11:15:23.440 Requirement: ODSCC10

2011-03-28 11:15:23.440 00951 Wait(5)

2011-03-28 11:15:23.440 Requirement: ODSCC10

2011-03-28 11:15:28.441 00953 Comment: Backup keys is not a part of ODS (part of the HSM), and can therefor be skipped. Let the enforcer know that the backup step has been done.

2011-03-28 11:15:28.441 Requirement: ODSCC10

2011-03-28 11:15:28.441 00957 Wait(5)

2011-03-28 11:15:28.441 Requirement: ODSCC10

2011-03-28 11:15:33.441 00959 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:15:33.441 Requirement: ODSCC10

2011-03-28 11:15:33.442 00961 Start()
2011-03-28 11:15:33.442 Requirement: ODSCC10
2011-03-28 11:15:33.442 RunCommand(ods-control start)
2011-03-28 11:15:33.443 - runCommand: Background process started, PID: 9344
2011-03-28 11:15:34.469 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:15:34.481 - runCommand: Process started, PID: 9360
2011-03-28 11:15:34.481 OUTPUT:	ods-enforcerd
2011-03-28 11:15:34.481 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:15:34.495 - runCommand: Process started, PID: 9372
2011-03-28 11:15:34.495 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:15:34.495 00963 Wait(10)

2011-03-28 11:15:34.495 Requirement: ODSCC10

2011-03-28 11:15:44.496 00965 Comment: Sign the ods zone with the new configs.

2011-03-28 11:15:44.496 Requirement: ODSCC10

2011-03-28 11:15:44.496 00969 Wait(15)

2011-03-28 11:15:44.496 Requirement: ODSCC10

2011-03-28 11:15:59.496 00971 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:15:59.496 Requirement: ODSCC10

2011-03-28 11:15:59.497 00973 Stop()
2011-03-28 11:15:59.497 Requirement: ODSCC10
2011-03-28 11:15:59.497 RunCommand(ods-control stop)
2011-03-28 11:16:00.506 - runCommand: Process started, PID: 9377
2011-03-28 11:16:00.506 OUTPUT:	Stopping enforcer...
2011-03-28 11:16:00.506 OUTPUT:	Stopping signer engine..
2011-03-28 11:16:00.506 OUTPUT:	Engine shut down.
2011-03-28 11:16:00.506 RunCommand(ps -e | grep enforcer)
2011-03-28 11:16:00.522 - runCommand: Process started, PID: 9383
2011-03-28 11:16:00.522 ERROR:	return code = 1
2011-03-28 11:16:00.522 RunCommand(ps -e | grep signer)
2011-03-28 11:16:00.535 - runCommand: Process started, PID: 9386
2011-03-28 11:16:00.535 ERROR:	return code = 1

2011-03-28 11:16:00.535 00975 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-28 11:16:00.535 Requirement: ODSCC10

2011-03-28 11:16:00.536 00978 CheckLog()
2011-03-28 11:16:00.536 Requirement: ODSCC10
2011-03-28 11:16:00.549 PASSED:	(Check for Like) - Expected: all done! Found: Mar 28 11:15:59 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0
Testcondition - ODSCC20: The configuration of common settings located in conf.xml should operate according to requirements and intentions
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSCC20T10: Set logging to a different channel and check if only the new channel receives ODS logging

2011-03-28 11:16:00.550 00986 Comment: Channel "local5" is used in the xml template instead of "local0".

2011-03-28 11:16:00.550 Requirement: ODSCC20

2011-03-28 11:16:00.550 00988 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:16:00.550 Requirement: ODSCC20

2011-03-28 11:16:00.550 00990 Stop()
2011-03-28 11:16:00.550 Requirement: ODSCC20
2011-03-28 11:16:00.550 RunCommand(ods-control stop)
2011-03-28 11:16:00.553 - runCommand: Process started, PID: 9389
2011-03-28 11:16:00.553 OUTPUT:	Stopping enforcer...
2011-03-28 11:16:00.553 OUTPUT:	Cannot find PID file
2011-03-28 11:16:00.553 OUTPUT:	Stopping signer engine..
2011-03-28 11:16:00.553 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 11:16:00.553 ERROR:	return code = 1
2011-03-28 11:16:00.553 RunCommand(ps -e | grep enforcer)
2011-03-28 11:16:00.563 - runCommand: Process started, PID: 9392
2011-03-28 11:16:00.563 ERROR:	return code = 1
2011-03-28 11:16:00.563 RunCommand(ps -e | grep signer)
2011-03-28 11:16:00.574 - runCommand: Process started, PID: 9395
2011-03-28 11:16:00.574 ERROR:	return code = 1

2011-03-28 11:16:00.574 00992 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:16:00.574 Requirement: ODSCC20

2011-03-28 11:16:00.575 00998 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:16:00.575 Requirement: ODSCC20

2011-03-28 11:16:00.575 01001 PurgeHSM()
2011-03-28 11:16:00.575 Requirement: ODSCC20
2011-03-28 11:16:00.575 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:16:00.955 - runCommand: Process started, PID: 9398
2011-03-28 11:16:00.955 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:16:00.955 OUTPUT:	2 keys found.
2011-03-28 11:16:00.955 OUTPUT:	
2011-03-28 11:16:00.955 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-28 11:16:00.955 OUTPUT:	Starting purge...
2011-03-28 11:16:00.955 OUTPUT:	Key remove successful: 761743eecd8f6bdfe0e992b6794f705f
2011-03-28 11:16:00.955 OUTPUT:	Key remove successful: 648e7ad0e1434fd3852ad979bbc8aa94
2011-03-28 11:16:00.955 OUTPUT:	Purge done.

2011-03-28 11:16:00.955 01003 Wait(10)

2011-03-28 11:16:00.955 Requirement: ODSCC20

2011-03-28 11:16:10.956 01005 Wait(10)

2011-03-28 11:16:10.956 Requirement: ODSCC20

2011-03-28 11:16:20.956 01007 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:16:20.956 Requirement: ODSCC20

2011-03-28 11:16:20.957 01010 LoadConfig()
2011-03-28 11:16:20.957 Requirement: ODSCC20
2011-03-28 11:16:20.957 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:16:20.961 - runCommand: Process started, PID: 9402

2011-03-28 11:16:20.961 01013 LoadConfig()
2011-03-28 11:16:20.961 Requirement: ODSCC20
2011-03-28 11:16:20.961 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:16:20.965 - runCommand: Process started, PID: 9403

2011-03-28 11:16:20.965 01015 Comment: Syslog needs to be changed for this testcase. Ods.log is configured for local5 instead of local0

2011-03-28 11:16:20.965 Requirement: ODSCC20

2011-03-28 11:16:20.966 01017 Comment: Update all the configs.

2011-03-28 11:16:20.966 Requirement: ODSCC20

2011-03-28 11:16:20.966 01019 ODSSetup()
2011-03-28 11:16:20.966 Requirement: ODSCC20
2011-03-28 11:16:20.966 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:16:31.307 - runCommand: Process started, PID: 9404
2011-03-28 11:16:31.307 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:16:31.307 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:16:31.307 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:16:31.307 OUTPUT:	Repository SoftHSM found
2011-03-28 11:16:31.307 OUTPUT:	Capacity set to 10.
2011-03-28 11:16:31.307 OUTPUT:	RequireBackup set.
2011-03-28 11:16:31.307 OUTPUT:	Policy default2 found
2011-03-28 11:16:31.307 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:16:31.307 OUTPUT:	Policy default found
2011-03-28 11:16:31.307 OUTPUT:	Zone ods found
2011-03-28 11:16:31.307 OUTPUT:	Policy set to default.
2011-03-28 11:16:31.307 OUTPUT:	Added zone ods to database
2011-03-28 11:16:31.307 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:16:31.307 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:16:31.307 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:16:31.308 01021 Wait(10)

2011-03-28 11:16:31.308 Requirement: ODSCC20

2011-03-28 11:16:41.308 01023 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:16:41.308 Requirement: ODSCC20

2011-03-28 11:16:41.309 01025 Start()
2011-03-28 11:16:41.309 Requirement: ODSCC20
2011-03-28 11:16:41.309 RunCommand(ods-control start)
2011-03-28 11:16:41.310 - runCommand: Background process started, PID: 9417
2011-03-28 11:16:42.326 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:16:42.340 - runCommand: Process started, PID: 9432
2011-03-28 11:16:42.340 OUTPUT:	ods-enforcerd
2011-03-28 11:16:42.340 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:16:42.355 - runCommand: Process started, PID: 9437
2011-03-28 11:16:42.355 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:16:42.355 01027 Comment: Sign the ods zone with the new configs.

2011-03-28 11:16:42.355 Requirement: ODSCC20

2011-03-28 11:16:42.355 01031 Wait(15)

2011-03-28 11:16:42.355 Requirement: ODSCC20

2011-03-28 11:16:57.356 01033 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:16:57.356 Requirement: ODSCC20

2011-03-28 11:16:57.356 01035 Stop()
2011-03-28 11:16:57.356 Requirement: ODSCC20
2011-03-28 11:16:57.356 RunCommand(ods-control stop)
2011-03-28 11:16:58.366 - runCommand: Process started, PID: 9450
2011-03-28 11:16:58.366 OUTPUT:	Stopping enforcer...
2011-03-28 11:16:58.366 OUTPUT:	Stopping signer engine..
2011-03-28 11:16:58.366 OUTPUT:	Engine shut down.
2011-03-28 11:16:58.366 RunCommand(ps -e | grep enforcer)
2011-03-28 11:16:58.381 - runCommand: Process started, PID: 9456
2011-03-28 11:16:58.381 ERROR:	return code = 1
2011-03-28 11:16:58.381 RunCommand(ps -e | grep signer)
2011-03-28 11:16:58.391 - runCommand: Process started, PID: 9459
2011-03-28 11:16:58.391 ERROR:	return code = 1

2011-03-28 11:16:58.391 01037 Comment: Check if the logging is succesfull. If a notify (new zonefile update) is available in, the signing & logging is succesful.

2011-03-28 11:16:58.391 Requirement: ODSCC20

2011-03-28 11:16:58.391 01040 CheckLog()
2011-03-28 11:16:58.391 Requirement: ODSCC20
2011-03-28 11:16:58.403 PASSED:	(Check for Like) - Expected: all done! Found: Mar 28 11:15:59 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

-------------------------------------------------------------------------------
Testcase - ODSCC20T20: Set logging to a different channel and check if only the new channel receives ODS logging

2011-03-28 11:16:58.403 01045 Comment: Channel "local10" is used in the xml template instead of "local0". Local10 is not allowed according tot specs. Only a value between local0 & local7 is allowed.

2011-03-28 11:16:58.403 Requirement: ODSCC20

2011-03-28 11:16:58.404 01047 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:16:58.404 Requirement: ODSCC20

2011-03-28 11:16:58.404 01049 Stop()
2011-03-28 11:16:58.404 Requirement: ODSCC20
2011-03-28 11:16:58.404 RunCommand(ods-control stop)
2011-03-28 11:16:58.407 - runCommand: Process started, PID: 9462
2011-03-28 11:16:58.407 OUTPUT:	Stopping enforcer...
2011-03-28 11:16:58.407 OUTPUT:	Cannot find PID file
2011-03-28 11:16:58.407 OUTPUT:	Stopping signer engine..
2011-03-28 11:16:58.407 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 11:16:58.407 ERROR:	return code = 1
2011-03-28 11:16:58.407 RunCommand(ps -e | grep enforcer)
2011-03-28 11:16:58.417 - runCommand: Process started, PID: 9465
2011-03-28 11:16:58.417 ERROR:	return code = 1
2011-03-28 11:16:58.417 RunCommand(ps -e | grep signer)
2011-03-28 11:16:58.426 - runCommand: Process started, PID: 9468
2011-03-28 11:16:58.426 ERROR:	return code = 1

2011-03-28 11:16:58.426 01051 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:16:58.426 Requirement: ODSCC20

2011-03-28 11:16:58.426 01057 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:16:58.426 Requirement: ODSCC20

2011-03-28 11:16:58.427 01060 PurgeHSM()
2011-03-28 11:16:58.427 Requirement: ODSCC20
2011-03-28 11:16:58.427 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:16:58.775 - runCommand: Process started, PID: 9471
2011-03-28 11:16:58.775 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:16:58.775 OUTPUT:	2 keys found.
2011-03-28 11:16:58.775 OUTPUT:	
2011-03-28 11:16:58.775 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-28 11:16:58.775 OUTPUT:	Starting purge...
2011-03-28 11:16:58.775 OUTPUT:	Key remove successful: 5451f84218873dd59892f45b9e15f730
2011-03-28 11:16:58.775 OUTPUT:	Key remove successful: 0d5bd660c3c62231ef181e2aaa61de78
2011-03-28 11:16:58.775 OUTPUT:	Purge done.

2011-03-28 11:16:58.776 01062 Wait(10)

2011-03-28 11:16:58.776 Requirement: ODSCC20

2011-03-28 11:17:08.776 01064 Wait(10)

2011-03-28 11:17:08.776 Requirement: ODSCC20

2011-03-28 11:17:18.777 01066 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:17:18.777 Requirement: ODSCC20

2011-03-28 11:17:18.777 01069 LoadConfig()
2011-03-28 11:17:18.777 Requirement: ODSCC20
2011-03-28 11:17:18.777 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:17:18.781 - runCommand: Process started, PID: 9478

2011-03-28 11:17:18.782 01072 LoadConfig()
2011-03-28 11:17:18.782 Requirement: ODSCC20
2011-03-28 11:17:18.782 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:17:18.785 - runCommand: Process started, PID: 9479

2011-03-28 11:17:18.786 01074 Comment: Syslog needs to be changed for this testcase. Ods.log is configured for local10 instead of local0

2011-03-28 11:17:18.786 Requirement: ODSCC20

2011-03-28 11:17:18.786 01076 Comment: Update all the configs.

2011-03-28 11:17:18.786 Requirement: ODSCC20

2011-03-28 11:17:18.786 01078 ODSSetup()
2011-03-28 11:17:18.787 Requirement: ODSCC20
2011-03-28 11:17:18.787 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:17:29.585 - runCommand: Process started, PID: 9480
2011-03-28 11:17:29.586 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:17:29.586 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:17:29.586 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:17:29.586 OUTPUT:	Repository SoftHSM found
2011-03-28 11:17:29.586 OUTPUT:	Capacity set to 10.
2011-03-28 11:17:29.586 OUTPUT:	RequireBackup set.
2011-03-28 11:17:29.586 OUTPUT:	Policy default2 found
2011-03-28 11:17:29.586 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:17:29.586 OUTPUT:	Policy default found
2011-03-28 11:17:29.586 OUTPUT:	Zone ods found
2011-03-28 11:17:29.586 OUTPUT:	Policy set to default.
2011-03-28 11:17:29.586 OUTPUT:	Added zone ods to database
2011-03-28 11:17:29.586 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:17:29.586 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:17:29.586 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:17:29.586 01080 Wait(10)

2011-03-28 11:17:29.586 Requirement: ODSCC20

2011-03-28 11:17:39.587 01082 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:17:39.587 Requirement: ODSCC20

2011-03-28 11:17:39.587 01084 Start()
2011-03-28 11:17:39.587 Requirement: ODSCC20
2011-03-28 11:17:39.587 RunCommand(ods-control start)
2011-03-28 11:17:39.588 - runCommand: Background process started, PID: 9493
2011-03-28 11:17:40.606 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:17:40.631 - runCommand: Process started, PID: 9508
2011-03-28 11:17:40.631 OUTPUT:	ods-enforcerd
2011-03-28 11:17:40.631 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:17:40.655 - runCommand: Process started, PID: 9513
2011-03-28 11:17:40.655 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:17:40.655 01086 Comment: Sign the ods zone with the new configs.

2011-03-28 11:17:40.655 Requirement: ODSCC20

2011-03-28 11:17:40.655 01090 Wait(15)

2011-03-28 11:17:40.655 Requirement: ODSCC20

2011-03-28 11:17:55.656 01092 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:17:55.656 Requirement: ODSCC20

2011-03-28 11:17:55.656 01094 Stop()
2011-03-28 11:17:55.656 Requirement: ODSCC20
2011-03-28 11:17:55.656 RunCommand(ods-control stop)
2011-03-28 11:17:56.665 - runCommand: Process started, PID: 9526
2011-03-28 11:17:56.665 OUTPUT:	Stopping enforcer...
2011-03-28 11:17:56.666 OUTPUT:	Stopping signer engine..
2011-03-28 11:17:56.666 OUTPUT:	Engine shut down.
2011-03-28 11:17:56.666 RunCommand(ps -e | grep enforcer)
2011-03-28 11:17:56.681 - runCommand: Process started, PID: 9532
2011-03-28 11:17:56.681 ERROR:	return code = 1
2011-03-28 11:17:56.681 RunCommand(ps -e | grep signer)
2011-03-28 11:17:56.698 - runCommand: Process started, PID: 9535
2011-03-28 11:17:56.698 ERROR:	return code = 1

2011-03-28 11:17:56.698 01096 Comment: Check if the logging is unsuccesfull. If a notify (new zonefile update) is not available in the logging, thelogging is not succesfull.

2011-03-28 11:17:56.698 Requirement: ODSCC20

2011-03-28 11:17:56.699 01099 CheckLog()
2011-03-28 11:17:56.699 Requirement: ODSCC20
2011-03-28 11:17:56.713 PASSED:	(Check for Like) - Expected: all done! Found: Mar 28 11:16:57 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

-------------------------------------------------------------------------------
Testcase - ODSCC20T30: Change the kasp.xml location and change PolicyFile in conf.xml accordingly

2011-03-28 11:17:56.713 01104 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:17:56.713 Requirement: ODSCC20

2011-03-28 11:17:56.713 01106 Stop()
2011-03-28 11:17:56.713 Requirement: ODSCC20
2011-03-28 11:17:56.713 RunCommand(ods-control stop)
2011-03-28 11:17:56.717 - runCommand: Process started, PID: 9538
2011-03-28 11:17:56.717 OUTPUT:	Stopping enforcer...
2011-03-28 11:17:56.717 OUTPUT:	Cannot find PID file
2011-03-28 11:17:56.717 OUTPUT:	Stopping signer engine..
2011-03-28 11:17:56.717 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 11:17:56.717 ERROR:	return code = 1
2011-03-28 11:17:56.717 RunCommand(ps -e | grep enforcer)
2011-03-28 11:17:56.726 - runCommand: Process started, PID: 9541
2011-03-28 11:17:56.726 ERROR:	return code = 1
2011-03-28 11:17:56.726 RunCommand(ps -e | grep signer)
2011-03-28 11:17:56.735 - runCommand: Process started, PID: 9544
2011-03-28 11:17:56.736 ERROR:	return code = 1

2011-03-28 11:17:56.736 01108 Wait(10)

2011-03-28 11:17:56.736 Requirement: ODSCC20

2011-03-28 11:18:06.736 01110 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:18:06.736 Requirement: ODSCC20

2011-03-28 11:18:06.737 01116 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:18:06.737 Requirement: ODSCC20

2011-03-28 11:18:06.737 01119 PurgeHSM()
2011-03-28 11:18:06.737 Requirement: ODSCC20
2011-03-28 11:18:06.737 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:18:07.823 - runCommand: Process started, PID: 9547
2011-03-28 11:18:07.824 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:18:07.824 OUTPUT:	2 keys found.
2011-03-28 11:18:07.824 OUTPUT:	
2011-03-28 11:18:07.824 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-28 11:18:07.824 OUTPUT:	Starting purge...
2011-03-28 11:18:07.825 OUTPUT:	Key remove successful: ecf3c580d5552e53b16f9c55eb63a6bb
2011-03-28 11:18:07.825 OUTPUT:	Key remove successful: 639916629c85693a4cc2089663a29786
2011-03-28 11:18:07.825 OUTPUT:	Purge done.

2011-03-28 11:18:07.829 01121 Wait(10)

2011-03-28 11:18:07.829 Requirement: ODSCC20

2011-03-28 11:18:17.834 01124 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:18:17.834 Requirement: ODSCC20

2011-03-28 11:18:17.837 01127 LoadConfig()
2011-03-28 11:18:17.838 Requirement: ODSCC20
2011-03-28 11:18:17.838 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T30_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:18:17.878 - runCommand: Process started, PID: 9551

2011-03-28 11:18:17.882 01129 Comment: Make a new directory a copy the kasp.xml file to that new folder.

2011-03-28 11:18:17.883 Requirement: ODSCC20

2011-03-28 11:18:17.886 01135 Comment: Update all the configs.

2011-03-28 11:18:17.886 Requirement: ODSCC20

2011-03-28 11:18:17.890 01137 ODSSetup()
2011-03-28 11:18:17.890 Requirement: ODSCC20
2011-03-28 11:18:17.890 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:18:27.331 - runCommand: Process started, PID: 9552
2011-03-28 11:18:27.331 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:18:27.331 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:18:27.331 OUTPUT:	kasp filename set to /etc/opendnssec/odscc20t30/kasp.xml.
2011-03-28 11:18:27.331 OUTPUT:	Repository SoftHSM found
2011-03-28 11:18:27.331 OUTPUT:	Capacity set to 10.
2011-03-28 11:18:27.331 OUTPUT:	RequireBackup set.
2011-03-28 11:18:27.331 OUTPUT:	Policy default found
2011-03-28 11:18:27.331 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:18:27.331 OUTPUT:	Policy test found
2011-03-28 11:18:27.331 OUTPUT:	Zone ods found
2011-03-28 11:18:27.331 OUTPUT:	Policy set to default.
2011-03-28 11:18:27.331 OUTPUT:	Added zone ods to database
2011-03-28 11:18:27.331 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:18:27.331 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:18:27.331 ERROR:	/etc/opendnssec/odscc20t30/kasp.xml validates

2011-03-28 11:18:27.332 01139 Wait(10)

2011-03-28 11:18:27.332 Requirement: ODSCC20

2011-03-28 11:18:37.332 01141 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:18:37.332 Requirement: ODSCC20

2011-03-28 11:18:37.332 01143 Start()
2011-03-28 11:18:37.332 Requirement: ODSCC20
2011-03-28 11:18:37.332 RunCommand(ods-control start)
2011-03-28 11:18:37.334 - runCommand: Background process started, PID: 9565
2011-03-28 11:18:38.351 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:18:38.370 - runCommand: Process started, PID: 9580
2011-03-28 11:18:38.370 OUTPUT:	ods-enforcerd
2011-03-28 11:18:38.370 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:18:38.388 - runCommand: Process started, PID: 9585
2011-03-28 11:18:38.388 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:18:38.388 01145 Comment: Sign the ods zone with the new configs.

2011-03-28 11:18:38.388 Requirement: ODSCC20

2011-03-28 11:18:38.388 01149 Wait(15)

2011-03-28 11:18:38.388 Requirement: ODSCC20

2011-03-28 11:18:53.389 01151 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:18:53.389 Requirement: ODSCC20

2011-03-28 11:18:53.389 01153 Stop()
2011-03-28 11:18:53.389 Requirement: ODSCC20
2011-03-28 11:18:53.389 RunCommand(ods-control stop)
2011-03-28 11:18:54.398 - runCommand: Process started, PID: 9598
2011-03-28 11:18:54.398 OUTPUT:	Stopping enforcer...
2011-03-28 11:18:54.398 OUTPUT:	Stopping signer engine..
2011-03-28 11:18:54.398 OUTPUT:	Engine shut down.
2011-03-28 11:18:54.398 RunCommand(ps -e | grep enforcer)
2011-03-28 11:18:54.414 - runCommand: Process started, PID: 9604
2011-03-28 11:18:54.414 ERROR:	return code = 1
2011-03-28 11:18:54.414 RunCommand(ps -e | grep signer)
2011-03-28 11:18:54.426 - runCommand: Process started, PID: 9607
2011-03-28 11:18:54.426 ERROR:	return code = 1

2011-03-28 11:18:54.426 01155 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-28 11:18:54.427 Requirement: ODSCC20

2011-03-28 11:18:54.427 01158 CheckLog()
2011-03-28 11:18:54.427 Requirement: ODSCC20
2011-03-28 11:18:54.441 PASSED:	(Check for Like) - Expected: all done! Found: Mar 28 11:17:55 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

-------------------------------------------------------------------------------
Testcase - ODSCC20T40: Change the zonelist.xml location and change ZoneListFile in conf.xml accordingly

2011-03-28 11:18:54.442 01163 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:18:54.442 Requirement: ODSCC20

2011-03-28 11:18:54.442 01165 Stop()
2011-03-28 11:18:54.442 Requirement: ODSCC20
2011-03-28 11:18:54.442 RunCommand(ods-control stop)
2011-03-28 11:18:54.445 - runCommand: Process started, PID: 9610
2011-03-28 11:18:54.445 OUTPUT:	Stopping enforcer...
2011-03-28 11:18:54.445 OUTPUT:	Cannot find PID file
2011-03-28 11:18:54.445 OUTPUT:	Stopping signer engine..
2011-03-28 11:18:54.445 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 11:18:54.446 ERROR:	return code = 1
2011-03-28 11:18:54.446 RunCommand(ps -e | grep enforcer)
2011-03-28 11:18:54.455 - runCommand: Process started, PID: 9613
2011-03-28 11:18:54.455 ERROR:	return code = 1
2011-03-28 11:18:54.455 RunCommand(ps -e | grep signer)
2011-03-28 11:18:54.465 - runCommand: Process started, PID: 9616
2011-03-28 11:18:54.465 ERROR:	return code = 1

2011-03-28 11:18:54.465 01167 Wait(10)

2011-03-28 11:18:54.465 Requirement: ODSCC20

2011-03-28 11:19:04.466 01169 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:19:04.466 Requirement: ODSCC20

2011-03-28 11:19:04.466 01175 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:19:04.466 Requirement: ODSCC20

2011-03-28 11:19:04.467 01178 PurgeHSM()
2011-03-28 11:19:04.467 Requirement: ODSCC20
2011-03-28 11:19:04.467 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:19:04.819 - runCommand: Process started, PID: 9619
2011-03-28 11:19:04.819 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:19:04.819 OUTPUT:	2 keys found.
2011-03-28 11:19:04.819 OUTPUT:	
2011-03-28 11:19:04.819 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-28 11:19:04.819 OUTPUT:	Starting purge...
2011-03-28 11:19:04.819 OUTPUT:	Key remove successful: 4990a2298fec684a438ab15d7541bf3a
2011-03-28 11:19:04.819 OUTPUT:	Key remove successful: 38732df7bc4f8ae0713274c88f4a9150
2011-03-28 11:19:04.819 OUTPUT:	Purge done.

2011-03-28 11:19:04.820 01180 Wait(10)

2011-03-28 11:19:04.820 Requirement: ODSCC20

2011-03-28 11:19:14.820 01182 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:19:14.820 Requirement: ODSCC20

2011-03-28 11:19:14.820 01185 LoadConfig()
2011-03-28 11:19:14.820 Requirement: ODSCC20
2011-03-28 11:19:14.820 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T40_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:19:14.824 - runCommand: Process started, PID: 9623

2011-03-28 11:19:14.825 01187 Comment: Make a new directory a copy the ZoneListFile to that new folder.

2011-03-28 11:19:14.825 Requirement: ODSCC20

2011-03-28 11:19:14.825 01194 LoadConfig()
2011-03-28 11:19:14.825 Requirement: ODSCC20
2011-03-28 11:19:14.825 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:19:14.829 - runCommand: Process started, PID: 9624

2011-03-28 11:19:14.829 01196 Comment: Update all the configs.

2011-03-28 11:19:14.829 Requirement: ODSCC20

2011-03-28 11:19:14.830 01198 ODSSetup()
2011-03-28 11:19:14.830 Requirement: ODSCC20
2011-03-28 11:19:14.830 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:19:25.510 - runCommand: Process started, PID: 9625
2011-03-28 11:19:25.510 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:19:25.510 OUTPUT:	zonelist filename set to /etc/opendnssec/odscc20t40/zonelist.xml.
2011-03-28 11:19:25.510 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:19:25.510 OUTPUT:	Repository SoftHSM found
2011-03-28 11:19:25.510 OUTPUT:	Capacity set to 10.
2011-03-28 11:19:25.510 OUTPUT:	RequireBackup set.
2011-03-28 11:19:25.510 OUTPUT:	Policy default2 found
2011-03-28 11:19:25.510 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:19:25.510 OUTPUT:	Policy default found
2011-03-28 11:19:25.510 OUTPUT:	Unable to open /etc/opendnssec/odscc20t40/zonelist.xml
2011-03-28 11:19:25.510 OUTPUT:	Unable to open /etc/opendnssec/odscc20t40/zonelist.xml
2011-03-28 11:19:25.510 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:19:25.510 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:19:25.510 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:19:25.510 01200 Wait(10)

2011-03-28 11:19:25.510 Requirement: ODSCC20

2011-03-28 11:19:35.511 01202 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:19:35.511 Requirement: ODSCC20

2011-03-28 11:19:35.511 01204 Start()
2011-03-28 11:19:35.511 Requirement: ODSCC20
2011-03-28 11:19:35.511 RunCommand(ods-control start)
2011-03-28 11:19:35.513 - runCommand: Background process started, PID: 9638
2011-03-28 11:19:36.529 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:19:36.541 - runCommand: Process started, PID: 9653
2011-03-28 11:19:36.541 OUTPUT:	ods-enforcerd
2011-03-28 11:19:36.541 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:19:36.554 - runCommand: Process started, PID: 9666
2011-03-28 11:19:36.555 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:19:36.555 01206 Wait(10)

2011-03-28 11:19:36.555 Requirement: ODSCC20

2011-03-28 11:19:46.555 01208 Comment: Sign the ods zone with the new configs.

2011-03-28 11:19:46.555 Requirement: ODSCC20

2011-03-28 11:19:46.556 01212 Wait(15)

2011-03-28 11:19:46.556 Requirement: ODSCC20

2011-03-28 11:20:01.556 01214 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-28 11:20:01.556 Requirement: ODSCC20

2011-03-28 11:20:01.557 01216 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:20:01.557 Requirement: ODSCC20

2011-03-28 11:20:01.557 01218 Stop()
2011-03-28 11:20:01.557 Requirement: ODSCC20
2011-03-28 11:20:01.557 RunCommand(ods-control stop)
2011-03-28 11:20:02.566 - runCommand: Process started, PID: 9671
2011-03-28 11:20:02.566 OUTPUT:	Stopping enforcer...
2011-03-28 11:20:02.566 OUTPUT:	Stopping signer engine..
2011-03-28 11:20:02.566 OUTPUT:	Engine shut down.
2011-03-28 11:20:02.566 RunCommand(ps -e | grep enforcer)
2011-03-28 11:20:02.581 - runCommand: Process started, PID: 9677
2011-03-28 11:20:02.581 ERROR:	return code = 1
2011-03-28 11:20:02.581 RunCommand(ps -e | grep signer)
2011-03-28 11:20:02.590 - runCommand: Process started, PID: 9680
2011-03-28 11:20:02.591 ERROR:	return code = 1

2011-03-28 11:20:02.591 01221 CheckLog()
2011-03-28 11:20:02.591 Requirement: ODSCC20
2011-03-28 11:20:02.610 PASSED:	(Check for Like) - Expected: all done! Found: Mar 28 11:20:01 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

-------------------------------------------------------------------------------
Testcase - ODSCC20T50: Change the zonefetch.xml location and change ZoneFetchFile in conf.xml accordingly

2011-03-28 11:20:02.610 01227 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:20:02.610 Requirement: ODSCC20

2011-03-28 11:20:02.611 01229 Stop()
2011-03-28 11:20:02.611 Requirement: ODSCC20
2011-03-28 11:20:02.611 RunCommand(ods-control stop)
2011-03-28 11:20:02.614 - runCommand: Process started, PID: 9683
2011-03-28 11:20:02.614 OUTPUT:	Stopping enforcer...
2011-03-28 11:20:02.614 OUTPUT:	Cannot find PID file
2011-03-28 11:20:02.614 OUTPUT:	Stopping signer engine..
2011-03-28 11:20:02.614 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 11:20:02.614 ERROR:	return code = 1
2011-03-28 11:20:02.614 RunCommand(ps -e | grep enforcer)
2011-03-28 11:20:02.624 - runCommand: Process started, PID: 9686
2011-03-28 11:20:02.624 ERROR:	return code = 1
2011-03-28 11:20:02.624 RunCommand(ps -e | grep signer)
2011-03-28 11:20:02.634 - runCommand: Process started, PID: 9689
2011-03-28 11:20:02.634 ERROR:	return code = 1

2011-03-28 11:20:02.634 01231 Wait(10)

2011-03-28 11:20:02.634 Requirement: ODSCC20

2011-03-28 11:20:12.634 01233 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:20:12.634 Requirement: ODSCC20

2011-03-28 11:20:12.635 01239 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:20:12.635 Requirement: ODSCC20

2011-03-28 11:20:12.635 01242 PurgeHSM()
2011-03-28 11:20:12.635 Requirement: ODSCC20
2011-03-28 11:20:12.635 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:20:12.649 - runCommand: Process started, PID: 9692
2011-03-28 11:20:12.649 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:20:12.649 OUTPUT:	0 keys found.
2011-03-28 11:20:12.649 ERROR:	return code = 255

2011-03-28 11:20:12.650 01244 Wait(10)

2011-03-28 11:20:12.650 Requirement: ODSCC20

2011-03-28 11:20:22.650 01247 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:20:22.650 Requirement: ODSCC20

2011-03-28 11:20:22.651 01250 LoadConfig()
2011-03-28 11:20:22.651 Requirement: ODSCC20
2011-03-28 11:20:22.651 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC20T50_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:20:22.655 - runCommand: Process started, PID: 9696

2011-03-28 11:20:22.655 01252 Comment: Make a new directory a copy the ZoneListFile to that new folder.

2011-03-28 11:20:22.655 Requirement: ODSCC20

2011-03-28 11:20:22.656 01259 LoadConfig()
2011-03-28 11:20:22.656 Requirement: ODSCC20
2011-03-28 11:20:22.656 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:20:22.659 - runCommand: Process started, PID: 9697

2011-03-28 11:20:22.660 01261 Comment: Update all the configs.

2011-03-28 11:20:22.660 Requirement: ODSCC20

2011-03-28 11:20:22.660 01263 ODSSetup()
2011-03-28 11:20:22.660 Requirement: ODSCC20
2011-03-28 11:20:22.660 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:20:32.900 - runCommand: Process started, PID: 9698
2011-03-28 11:20:32.900 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:20:32.900 OUTPUT:	zonelist filename set to /etc/opendnssec/odscc20t40/zonelist.xml.
2011-03-28 11:20:32.900 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:20:32.900 OUTPUT:	Repository SoftHSM found
2011-03-28 11:20:32.900 OUTPUT:	Capacity set to 10.
2011-03-28 11:20:32.900 OUTPUT:	RequireBackup set.
2011-03-28 11:20:32.900 OUTPUT:	Policy default2 found
2011-03-28 11:20:32.900 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:20:32.900 OUTPUT:	Policy default found
2011-03-28 11:20:32.900 OUTPUT:	Unable to open /etc/opendnssec/odscc20t40/zonelist.xml
2011-03-28 11:20:32.900 OUTPUT:	Unable to open /etc/opendnssec/odscc20t40/zonelist.xml
2011-03-28 11:20:32.900 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:20:32.900 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:20:32.900 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:20:32.901 01265 Wait(10)

2011-03-28 11:20:32.901 Requirement: ODSCC20

2011-03-28 11:20:42.901 01267 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:20:42.901 Requirement: ODSCC20

2011-03-28 11:20:42.902 01269 Start()
2011-03-28 11:20:42.902 Requirement: ODSCC20
2011-03-28 11:20:42.902 RunCommand(ods-control start)
2011-03-28 11:20:42.903 - runCommand: Background process started, PID: 9711
2011-03-28 11:20:43.920 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:20:43.940 - runCommand: Process started, PID: 9727
2011-03-28 11:20:43.940 OUTPUT:	ods-enforcerd
2011-03-28 11:20:43.940 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:20:43.953 - runCommand: Process started, PID: 9740
2011-03-28 11:20:43.953 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:20:43.953 01271 Wait(10)

2011-03-28 11:20:43.953 Requirement: ODSCC20

2011-03-28 11:20:53.953 01273 Comment: Sign the ods zone with the new configs.

2011-03-28 11:20:53.953 Requirement: ODSCC20

2011-03-28 11:20:53.954 01277 Wait(15)

2011-03-28 11:20:53.954 Requirement: ODSCC20

2011-03-28 11:21:08.954 01279 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:21:08.954 Requirement: ODSCC20

2011-03-28 11:21:08.955 01281 Stop()
2011-03-28 11:21:08.955 Requirement: ODSCC20
2011-03-28 11:21:08.955 RunCommand(ods-control stop)
2011-03-28 11:21:09.964 - runCommand: Process started, PID: 9745
2011-03-28 11:21:09.964 OUTPUT:	Stopping enforcer...
2011-03-28 11:21:09.964 OUTPUT:	Stopping signer engine..
2011-03-28 11:21:09.964 OUTPUT:	Engine shut down.
2011-03-28 11:21:09.964 RunCommand(ps -e | grep enforcer)
2011-03-28 11:21:09.979 - runCommand: Process started, PID: 9751
2011-03-28 11:21:09.979 ERROR:	return code = 1
2011-03-28 11:21:09.979 RunCommand(ps -e | grep signer)
2011-03-28 11:21:09.991 - runCommand: Process started, PID: 9754
2011-03-28 11:21:09.991 ERROR:	return code = 1

2011-03-28 11:21:09.991 01283 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-28 11:21:09.991 Requirement: ODSCC20

2011-03-28 11:21:09.991 01286 CheckLog()
2011-03-28 11:21:09.991 Requirement: ODSCC20
2011-03-28 11:21:10.120 PASSED:	(Check for Like) - Expected: all done! Found: Mar 28 11:21:08 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0
Testcondition - ODSCC30: The configuration of enforcer settings located in conf.xml should operate according to requirements and intentions
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSCC30T10: Use privileges test: test for enforcer in config only and check if enforcers fails to run

2011-03-28 11:21:10.128 01295 Comment: Privileges have been adjusted in the conf.xml

2011-03-28 11:21:10.128 Requirement: ODSCC30

2011-03-28 11:21:10.130 01297 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:21:10.130 Requirement: ODSCC30

2011-03-28 11:21:10.132 01299 Stop()
2011-03-28 11:21:10.132 Requirement: ODSCC30
2011-03-28 11:21:10.132 RunCommand(ods-control stop)
2011-03-28 11:21:10.164 - runCommand: Process started, PID: 9757
2011-03-28 11:21:10.164 OUTPUT:	Stopping enforcer...
2011-03-28 11:21:10.165 OUTPUT:	Cannot find PID file
2011-03-28 11:21:10.165 OUTPUT:	Stopping signer engine..
2011-03-28 11:21:10.165 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 11:21:10.165 ERROR:	return code = 1
2011-03-28 11:21:10.165 RunCommand(ps -e | grep enforcer)
2011-03-28 11:21:10.258 - runCommand: Process started, PID: 9760
2011-03-28 11:21:10.259 ERROR:	return code = 1
2011-03-28 11:21:10.259 RunCommand(ps -e | grep signer)
2011-03-28 11:21:10.366 - runCommand: Process started, PID: 9763
2011-03-28 11:21:10.367 ERROR:	return code = 1

2011-03-28 11:21:10.369 01301 Wait(10)

2011-03-28 11:21:10.369 Requirement: ODSCC30

2011-03-28 11:21:20.374 01303 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:21:20.374 Requirement: ODSCC30

2011-03-28 11:21:20.378 01309 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:21:20.378 Requirement: ODSCC30

2011-03-28 11:21:20.381 01312 PurgeHSM()
2011-03-28 11:21:20.381 Requirement: ODSCC30
2011-03-28 11:21:20.382 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:21:20.522 - runCommand: Process started, PID: 9766
2011-03-28 11:21:20.523 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:21:20.523 OUTPUT:	0 keys found.
2011-03-28 11:21:20.523 ERROR:	return code = 255

2011-03-28 11:21:20.527 01314 Wait(10)

2011-03-28 11:21:20.527 Requirement: ODSCC30

2011-03-28 11:21:30.532 01316 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:21:30.532 Requirement: ODSCC30

2011-03-28 11:21:30.536 01319 LoadConfig()
2011-03-28 11:21:30.536 Requirement: ODSCC30
2011-03-28 11:21:30.537 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC30T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:21:30.577 - runCommand: Process started, PID: 9770

2011-03-28 11:21:30.582 01322 LoadConfig()
2011-03-28 11:21:30.582 Requirement: ODSCC30
2011-03-28 11:21:30.582 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:21:30.619 - runCommand: Process started, PID: 9771

2011-03-28 11:21:30.623 01324 Comment: 

2011-03-28 11:21:30.623 Requirement: ODSCC30

2011-03-28 11:21:30.627 01326 Comment: Update all the configs.

2011-03-28 11:21:30.627 Requirement: ODSCC30

2011-03-28 11:21:30.630 01328 ODSSetup()
2011-03-28 11:21:30.631 Requirement: ODSCC30
2011-03-28 11:21:30.631 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:21:40.998 - runCommand: Process started, PID: 9772
2011-03-28 11:21:40.998 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:21:40.999 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:21:40.999 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:21:40.999 OUTPUT:	Repository SoftHSM found
2011-03-28 11:21:40.999 OUTPUT:	Capacity set to 10.
2011-03-28 11:21:40.999 OUTPUT:	RequireBackup set.
2011-03-28 11:21:40.999 OUTPUT:	Policy default2 found
2011-03-28 11:21:40.999 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:21:40.999 OUTPUT:	Policy default found
2011-03-28 11:21:40.999 OUTPUT:	Zone ods found
2011-03-28 11:21:40.999 OUTPUT:	Policy set to default.
2011-03-28 11:21:40.999 OUTPUT:	Added zone ods to database
2011-03-28 11:21:40.999 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:21:40.999 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:21:40.999 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:21:40.999 01330 Wait(10)

2011-03-28 11:21:40.999 Requirement: ODSCC30

2011-03-28 11:21:51.072 01332 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:21:51.105 Requirement: ODSCC30

2011-03-28 11:21:51.446 01334 Start()
2011-03-28 11:21:51.466 Requirement: ODSCC30
2011-03-28 11:21:51.488 RunCommand(ods-control start)
2011-03-28 11:21:51.173 - runCommand: Background process started, PID: 9785
2011-03-28 11:21:52.182 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:21:52.350 - runCommand: Process started, PID: 9800
2011-03-28 11:21:52.351 OUTPUT:	ods-enforcerd
2011-03-28 11:21:52.351 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:21:52.518 - runCommand: Process started, PID: 9805
2011-03-28 11:21:52.519 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:21:52.521 01336 Wait(10)

2011-03-28 11:21:52.521 Requirement: ODSCC30

2011-03-28 11:22:02.526 01339 Wait(15)

2011-03-28 11:22:02.526 Requirement: ODSCC30

2011-03-28 11:22:17.531 01341 Comment: The Enforcer should fail to run when restarting ODS with the new conf.xml.

2011-03-28 11:22:17.531 Requirement: ODSCC30

2011-03-28 11:22:17.535 01343 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:22:17.535 Requirement: ODSCC30

2011-03-28 11:22:17.538 01345 Stop()
2011-03-28 11:22:17.538 Requirement: ODSCC30
2011-03-28 11:22:17.539 RunCommand(ods-control stop)
2011-03-28 11:22:18.632 - runCommand: Process started, PID: 9818
2011-03-28 11:22:18.633 OUTPUT:	Stopping enforcer...
2011-03-28 11:22:18.633 OUTPUT:	Stopping signer engine..
2011-03-28 11:22:18.633 OUTPUT:	Engine shut down.
2011-03-28 11:22:18.634 RunCommand(ps -e | grep enforcer)
2011-03-28 11:22:18.787 - runCommand: Process started, PID: 9824
2011-03-28 11:22:18.788 ERROR:	return code = 1
2011-03-28 11:22:18.788 RunCommand(ps -e | grep signer)
2011-03-28 11:22:18.908 - runCommand: Process started, PID: 9827
2011-03-28 11:22:18.908 ERROR:	return code = 1

2011-03-28 11:22:18.911 01348 CheckLog()
2011-03-28 11:22:18.911 Requirement: ODSCC30
2011-03-28 11:22:18.113 FAILED:	(Check for Like) - Expected: User opendnssec1 does not exist Found: 

2011-03-28 11:22:18.113 01351 CheckLog()
2011-03-28 11:22:18.113 Requirement: ODSCC30
2011-03-28 11:22:18.135 FAILED:	(Check for Like) - Expected: Can't change to opendnssec1, opendnssec to check DB write permissions Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC30T20: Use privileges test: test for enforcer and kasp.db and check if enforcers runs without errors

2011-03-28 11:22:18.135 01357 Comment: Privileges have been adjusted in the conf.xml

2011-03-28 11:22:18.135 Requirement: ODSCC30

2011-03-28 11:22:18.136 01359 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:22:18.136 Requirement: ODSCC30

2011-03-28 11:22:18.136 01361 Stop()
2011-03-28 11:22:18.136 Requirement: ODSCC30
2011-03-28 11:22:18.136 RunCommand(ods-control stop)
2011-03-28 11:22:18.139 - runCommand: Process started, PID: 9830
2011-03-28 11:22:18.139 OUTPUT:	Stopping enforcer...
2011-03-28 11:22:18.139 OUTPUT:	Cannot find PID file
2011-03-28 11:22:18.139 OUTPUT:	Stopping signer engine..
2011-03-28 11:22:18.139 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 11:22:18.139 ERROR:	return code = 1
2011-03-28 11:22:18.139 RunCommand(ps -e | grep enforcer)
2011-03-28 11:22:18.149 - runCommand: Process started, PID: 9833
2011-03-28 11:22:18.149 ERROR:	return code = 1
2011-03-28 11:22:18.149 RunCommand(ps -e | grep signer)
2011-03-28 11:22:18.158 - runCommand: Process started, PID: 9836
2011-03-28 11:22:18.158 ERROR:	return code = 1

2011-03-28 11:22:18.158 01363 Wait(10)

2011-03-28 11:22:18.158 Requirement: ODSCC30

2011-03-28 11:22:28.158 01365 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:22:28.158 Requirement: ODSCC30

2011-03-28 11:22:28.159 01371 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:22:28.159 Requirement: ODSCC30

2011-03-28 11:22:28.159 01374 PurgeHSM()
2011-03-28 11:22:28.159 Requirement: ODSCC30
2011-03-28 11:22:28.159 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:22:28.523 - runCommand: Process started, PID: 9839
2011-03-28 11:22:28.523 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:22:28.523 OUTPUT:	2 keys found.
2011-03-28 11:22:28.523 OUTPUT:	
2011-03-28 11:22:28.523 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-28 11:22:28.523 OUTPUT:	Starting purge...
2011-03-28 11:22:28.523 OUTPUT:	Key remove successful: ffeb9e38097bc66ca7419de899d5ea67
2011-03-28 11:22:28.523 OUTPUT:	Key remove successful: fdc83890ecb12e890c8264bb609decc7
2011-03-28 11:22:28.523 OUTPUT:	Purge done.

2011-03-28 11:22:28.524 01376 Wait(10)

2011-03-28 11:22:28.524 Requirement: ODSCC30

2011-03-28 11:22:38.524 01378 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:22:38.524 Requirement: ODSCC30

2011-03-28 11:22:38.524 01381 LoadConfig()
2011-03-28 11:22:38.525 Requirement: ODSCC30
2011-03-28 11:22:38.525 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC30T20_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:22:38.529 - runCommand: Process started, PID: 9843

2011-03-28 11:22:38.529 01384 LoadConfig()
2011-03-28 11:22:38.529 Requirement: ODSCC30
2011-03-28 11:22:38.529 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:22:38.533 - runCommand: Process started, PID: 9844

2011-03-28 11:22:38.533 01386 Comment: 

2011-03-28 11:22:38.533 Requirement: ODSCC30

2011-03-28 11:22:38.534 01388 Comment: Update all the configs.

2011-03-28 11:22:38.534 Requirement: ODSCC30

2011-03-28 11:22:38.534 01390 ODSSetup()
2011-03-28 11:22:38.534 Requirement: ODSCC30
2011-03-28 11:22:38.534 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:22:48.605 - runCommand: Process started, PID: 9845
2011-03-28 11:22:48.606 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:22:48.606 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:22:48.606 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:22:48.606 OUTPUT:	Repository SoftHSM found
2011-03-28 11:22:48.606 OUTPUT:	Capacity set to 10.
2011-03-28 11:22:48.606 OUTPUT:	RequireBackup set.
2011-03-28 11:22:48.606 OUTPUT:	Policy default2 found
2011-03-28 11:22:48.606 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:22:48.606 OUTPUT:	Policy default found
2011-03-28 11:22:48.606 OUTPUT:	Zone ods found
2011-03-28 11:22:48.606 OUTPUT:	Policy set to default.
2011-03-28 11:22:48.606 OUTPUT:	Added zone ods to database
2011-03-28 11:22:48.606 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:22:48.606 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:22:48.606 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:22:48.606 01392 Wait(10)

2011-03-28 11:22:48.606 Requirement: ODSCC30

2011-03-28 11:22:58.607 01394 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:22:58.607 Requirement: ODSCC30

2011-03-28 11:22:58.607 01396 Start()
2011-03-28 11:22:58.607 Requirement: ODSCC30
2011-03-28 11:22:58.607 RunCommand(ods-control start)
2011-03-28 11:22:58.608 - runCommand: Background process started, PID: 9859
2011-03-28 11:23:08.656 ERROR:	return code = 1
2011-03-28 11:23:08.656 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:23:08.672 - runCommand: Process started, PID: 9889
2011-03-28 11:23:08.672 ERROR:	return code = 1
2011-03-28 11:23:08.672 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:23:08.686 - runCommand: Process started, PID: 9893

2011-03-28 11:23:08.686 01398 Wait(10)

2011-03-28 11:23:08.686 Requirement: ODSCC30

2011-03-28 11:23:18.687 01401 Comment: The Enforcer should start up succesfully when restarting ODS with the new conf.xml.

2011-03-28 11:23:18.687 Requirement: ODSCC30

2011-03-28 11:23:18.687 01404 CheckLog()
2011-03-28 11:23:18.687 Requirement: ODSCC30
2011-03-28 11:23:18.712 FAILED:	(Check for Like) - Expected: enforcer started Found: 

2011-03-28 11:23:18.712 01407 CheckLog()
2011-03-28 11:23:18.712 Requirement: ODSCC30
2011-03-28 11:23:18.732 FAILED:	(Check for Like) - Expected: SQLite database set to: /var/lib/opendnssec/db/kasp.db Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC30T30: Change the kasp.db location and change Datastore in conf.xml accordingly

2011-03-28 11:23:18.733 01414 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:23:18.733 Requirement: ODSCC30

2011-03-28 11:23:18.733 01416 Stop()
2011-03-28 11:23:18.733 Requirement: ODSCC30
2011-03-28 11:23:18.733 RunCommand(ods-control stop)
2011-03-28 11:23:18.737 - runCommand: Process started, PID: 9898
2011-03-28 11:23:18.737 OUTPUT:	Stopping enforcer...
2011-03-28 11:23:18.737 OUTPUT:	Cannot find PID file
2011-03-28 11:23:18.737 OUTPUT:	Stopping signer engine..
2011-03-28 11:23:18.737 ERROR:	Unable to connect to engine: connect() failed: No such file or directory
2011-03-28 11:23:18.737 ERROR:	return code = 1
2011-03-28 11:23:18.737 RunCommand(ps -e | grep enforcer)
2011-03-28 11:23:18.746 - runCommand: Process started, PID: 9901
2011-03-28 11:23:18.746 ERROR:	return code = 1
2011-03-28 11:23:18.746 RunCommand(ps -e | grep signer)
2011-03-28 11:23:18.757 - runCommand: Process started, PID: 9904
2011-03-28 11:23:18.757 ERROR:	return code = 1

2011-03-28 11:23:18.758 01418 Wait(10)

2011-03-28 11:23:18.758 Requirement: ODSCC30

2011-03-28 11:23:28.758 01420 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:23:28.758 Requirement: ODSCC30

2011-03-28 11:23:28.758 01426 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:23:28.758 Requirement: ODSCC30

2011-03-28 11:23:28.759 01429 PurgeHSM()
2011-03-28 11:23:28.759 Requirement: ODSCC30
2011-03-28 11:23:28.759 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:23:28.773 - runCommand: Process started, PID: 9907
2011-03-28 11:23:28.773 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:23:28.773 OUTPUT:	0 keys found.
2011-03-28 11:23:28.773 ERROR:	return code = 255

2011-03-28 11:23:28.773 01431 Wait(10)

2011-03-28 11:23:28.773 Requirement: ODSCC30

2011-03-28 11:23:38.774 01433 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:23:38.774 Requirement: ODSCC30

2011-03-28 11:23:38.774 01436 LoadConfig()
2011-03-28 11:23:38.774 Requirement: ODSCC30
2011-03-28 11:23:38.774 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC30T30_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:23:38.778 - runCommand: Process started, PID: 9911

2011-03-28 11:23:38.779 01438 Comment: Make a new directory a copy the kasp.db file to that new folder.

2011-03-28 11:23:38.779 Requirement: ODSCC30

2011-03-28 11:23:38.779 01445 LoadConfig()
2011-03-28 11:23:38.779 Requirement: ODSCC30
2011-03-28 11:23:38.779 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:23:38.783 - runCommand: Process started, PID: 9912

2011-03-28 11:23:38.783 01447 Comment: Update all the configs.

2011-03-28 11:23:38.783 Requirement: ODSCC30

2011-03-28 11:23:38.784 01449 ODSSetup()
2011-03-28 11:23:38.784 Requirement: ODSCC30
2011-03-28 11:23:38.784 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:23:38.790 - runCommand: Process started, PID: 9913
2011-03-28 11:23:38.790 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] /var/opendnssec/odscc30t30/kasp.db.our_lock could not be opened
2011-03-28 11:23:38.790 OUTPUT:	Error getting db lock
2011-03-28 11:23:38.790 ERROR:	SQLite database set to: /var/opendnssec/odscc30t30/kasp.db
2011-03-28 11:23:38.790 ERROR:	return code = 1

2011-03-28 11:23:38.790 01451 Wait(10)

2011-03-28 11:23:38.790 Requirement: ODSCC30

2011-03-28 11:23:48.791 01453 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:23:48.791 Requirement: ODSCC30

2011-03-28 11:23:48.791 01455 Start()
2011-03-28 11:23:48.791 Requirement: ODSCC30
2011-03-28 11:23:48.791 RunCommand(ods-control start)
2011-03-28 11:23:48.792 - runCommand: Background process started, PID: 9916
2011-03-28 11:23:53.825 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:23:53.843 - runCommand: Process started, PID: 9939
2011-03-28 11:23:53.843 ERROR:	return code = 1
2011-03-28 11:23:53.843 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:23:53.859 - runCommand: Process started, PID: 9944
2011-03-28 11:23:53.859 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:23:53.859 01457 Wait(10)

2011-03-28 11:23:53.859 Requirement: ODSCC30

2011-03-28 11:24:03.860 01460 CheckLog()
2011-03-28 11:24:03.860 Requirement: ODSCC30
2011-03-28 11:24:03.888 FAILED:	(Check for Like) - Expected: SQLite database set to: /var/lib/opendnssec/odscc30t30/kasp.db Found: 

2011-03-28 11:24:03.888 01462 Comment: Sign the ods zone with the new configs.

2011-03-28 11:24:03.888 Requirement: ODSCC30

2011-03-28 11:24:03.888 01466 Wait(15)

2011-03-28 11:24:03.888 Requirement: ODSCC30

2011-03-28 11:24:18.889 01468 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:24:18.889 Requirement: ODSCC30

2011-03-28 11:24:18.889 01470 Stop()
2011-03-28 11:24:18.889 Requirement: ODSCC30
2011-03-28 11:24:18.889 RunCommand(ods-control stop)
2011-03-28 11:24:18.894 - runCommand: Process started, PID: 9957
2011-03-28 11:24:18.895 OUTPUT:	Stopping enforcer...
2011-03-28 11:24:18.895 OUTPUT:	Cannot find PID file
2011-03-28 11:24:18.895 OUTPUT:	Stopping signer engine..
2011-03-28 11:24:18.895 OUTPUT:	Engine shut down.
2011-03-28 11:24:18.895 RunCommand(ps -e | grep enforcer)
2011-03-28 11:24:18.910 - runCommand: Process started, PID: 9961
2011-03-28 11:24:18.910 ERROR:	return code = 1
2011-03-28 11:24:18.910 RunCommand(ps -e | grep signer)
2011-03-28 11:24:18.920 - runCommand: Process started, PID: 9964
2011-03-28 11:24:18.920 ERROR:	return code = 1

2011-03-28 11:24:18.921 01472 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-28 11:24:18.921 Requirement: ODSCC30

2011-03-28 11:24:18.921 01475 CheckLog()
2011-03-28 11:24:18.921 Requirement: ODSCC30
2011-03-28 11:24:18.942 FAILED:	(Check for Like) - Expected: all done! Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC30T40: Change the Interval to 60 seconds and check if the enforcer runs every minute

2011-03-28 11:24:18.943 01480 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:24:18.943 Requirement: ODSCC30

2011-03-28 11:24:18.943 01482 Stop()
2011-03-28 11:24:18.943 Requirement: ODSCC30
2011-03-28 11:24:18.943 RunCommand(ods-control stop)
2011-03-28 11:24:18.946 - runCommand: Process started, PID: 9967
2011-03-28 11:24:18.946 OUTPUT:	Stopping enforcer...
2011-03-28 11:24:18.946 OUTPUT:	Cannot find PID file
2011-03-28 11:24:18.946 OUTPUT:	Stopping signer engine..
2011-03-28 11:24:18.946 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 11:24:18.946 ERROR:	return code = 1
2011-03-28 11:24:18.946 RunCommand(ps -e | grep enforcer)
2011-03-28 11:24:18.956 - runCommand: Process started, PID: 9970
2011-03-28 11:24:18.956 ERROR:	return code = 1
2011-03-28 11:24:18.956 RunCommand(ps -e | grep signer)
2011-03-28 11:24:18.967 - runCommand: Process started, PID: 9973
2011-03-28 11:24:18.967 ERROR:	return code = 1

2011-03-28 11:24:18.967 01484 Wait(10)

2011-03-28 11:24:18.967 Requirement: ODSCC30

2011-03-28 11:24:28.967 01486 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:24:28.967 Requirement: ODSCC30

2011-03-28 11:24:28.968 01492 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:24:28.968 Requirement: ODSCC30

2011-03-28 11:24:28.968 01495 PurgeHSM()
2011-03-28 11:24:28.968 Requirement: ODSCC30
2011-03-28 11:24:28.968 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:24:28.986 - runCommand: Process started, PID: 9976
2011-03-28 11:24:28.986 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:24:28.986 OUTPUT:	0 keys found.
2011-03-28 11:24:28.986 ERROR:	return code = 255

2011-03-28 11:24:28.987 01497 Wait(10)

2011-03-28 11:24:28.987 Requirement: ODSCC30

2011-03-28 11:24:38.987 01500 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:24:38.987 Requirement: ODSCC30

2011-03-28 11:24:38.988 01503 LoadConfig()
2011-03-28 11:24:38.988 Requirement: ODSCC30
2011-03-28 11:24:38.988 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC30T40_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:24:38.992 - runCommand: Process started, PID: 9980

2011-03-28 11:24:38.992 01505 Comment: Make a new directory a copy the ZoneListFile to that new folder.

2011-03-28 11:24:38.992 Requirement: ODSCC30

2011-03-28 11:24:38.992 01509 LoadConfig()
2011-03-28 11:24:38.992 Requirement: ODSCC30
2011-03-28 11:24:38.993 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:24:38.996 - runCommand: Process started, PID: 9981

2011-03-28 11:24:38.997 01511 Comment: Update all the configs.

2011-03-28 11:24:38.997 Requirement: ODSCC30

2011-03-28 11:24:38.997 01513 ODSSetup()
2011-03-28 11:24:38.997 Requirement: ODSCC30
2011-03-28 11:24:38.997 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:24:49.352 - runCommand: Process started, PID: 9982
2011-03-28 11:24:49.352 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 11:24:49.352 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 11:24:49.352 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 11:24:49.352 OUTPUT:	Repository SoftHSM found
2011-03-28 11:24:49.352 OUTPUT:	Capacity set to 10.
2011-03-28 11:24:49.352 OUTPUT:	RequireBackup set.
2011-03-28 11:24:49.352 OUTPUT:	Policy default2 found
2011-03-28 11:24:49.352 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 11:24:49.352 OUTPUT:	Policy default found
2011-03-28 11:24:49.352 OUTPUT:	Zone ods found
2011-03-28 11:24:49.352 OUTPUT:	Policy set to default.
2011-03-28 11:24:49.352 OUTPUT:	Added zone ods to database
2011-03-28 11:24:49.352 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 11:24:49.352 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 11:24:49.352 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 11:24:49.353 01515 Wait(10)

2011-03-28 11:24:49.353 Requirement: ODSCC30

2011-03-28 11:24:59.353 01517 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:24:59.353 Requirement: ODSCC30

2011-03-28 11:24:59.354 01519 Start()
2011-03-28 11:24:59.354 Requirement: ODSCC30
2011-03-28 11:24:59.354 RunCommand(ods-control start)
2011-03-28 11:24:59.355 - runCommand: Background process started, PID: 9995
2011-03-28 11:25:00.372 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:25:00.393 - runCommand: Process started, PID: 10010
2011-03-28 11:25:00.393 OUTPUT:	ods-enforcerd
2011-03-28 11:25:00.393 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:25:00.409 - runCommand: Process started, PID: 10015
2011-03-28 11:25:00.409 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:25:00.409 01521 Wait(10)

2011-03-28 11:25:00.409 Requirement: ODSCC30

2011-03-28 11:25:10.410 01523 Comment: Check each minute if the enforcer is running.

2011-03-28 11:25:10.410 Requirement: ODSCC30

2011-03-28 11:25:10.410 01526 CheckLog()
2011-03-28 11:25:10.410 Requirement: ODSCC30
2011-03-28 11:25:10.434 PASSED:	(Check for Like) - Expected: ods-enforcerd: Reading config "/etc/opendnssec/conf.xml" Found: Mar 28 11:24:59 DEVELOPER15 ods-enforcerd: Reading config "/etc/opendnssec/conf.xml"

2011-03-28 11:25:10.434 01528 Wait(60)

2011-03-28 11:25:10.434 Requirement: ODSCC30

2011-03-28 11:26:10.435 01531 CheckLog()
2011-03-28 11:26:10.435 Requirement: ODSCC30
2011-03-28 11:26:10.464 PASSED:	(Check for Like) - Expected: ods-enforcerd: Reading config "/etc/opendnssec/conf.xml" Found: Mar 28 11:26:00 DEVELOPER15 ods-enforcerd: Reading config "/etc/opendnssec/conf.xml"

2011-03-28 11:26:10.465 01533 Wait(60)

2011-03-28 11:26:10.465 Requirement: ODSCC30

2011-03-28 11:27:10.465 01536 CheckLog()
2011-03-28 11:27:10.465 Requirement: ODSCC30
2011-03-28 11:27:10.493 PASSED:	(Check for Like) - Expected: ods-enforcerd: Reading config "/etc/opendnssec/conf.xml" Found: Mar 28 11:27:00 DEVELOPER15 ods-enforcerd: Reading config "/etc/opendnssec/conf.xml"

2011-03-28 11:27:10.494 01538 Wait(60)

2011-03-28 11:27:10.494 Requirement: ODSCC30

2011-03-28 11:28:10.494 01541 CheckLog()
2011-03-28 11:28:10.494 Requirement: ODSCC30
2011-03-28 11:28:10.521 PASSED:	(Check for Like) - Expected: ods-enforcerd: Reading config "/etc/opendnssec/conf.xml" Found: Mar 28 11:28:01 DEVELOPER15 ods-enforcerd: Reading config "/etc/opendnssec/conf.xml"
Testcondition - ODSCC40: The datastore settings located in conf.xml should be configurable with different credentials
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSCC40T10: Change port of database and check if enforcer fails to connect

2011-03-28 11:28:10.522 01548 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:28:10.522 Requirement: ODSCC40

2011-03-28 11:28:10.522 01550 Stop()
2011-03-28 11:28:10.522 Requirement: ODSCC40
2011-03-28 11:28:10.522 RunCommand(ods-control stop)
2011-03-28 11:28:11.529 - runCommand: Process started, PID: 10029
2011-03-28 11:28:11.529 OUTPUT:	Stopping enforcer...
2011-03-28 11:28:11.529 OUTPUT:	Stopping signer engine..
2011-03-28 11:28:11.529 OUTPUT:	Engine shut down.
2011-03-28 11:28:11.529 RunCommand(ps -e | grep enforcer)
2011-03-28 11:28:11.545 - runCommand: Process started, PID: 10035
2011-03-28 11:28:11.545 ERROR:	return code = 1
2011-03-28 11:28:11.545 RunCommand(ps -e | grep signer)
2011-03-28 11:28:11.556 - runCommand: Process started, PID: 10038
2011-03-28 11:28:11.556 ERROR:	return code = 1

2011-03-28 11:28:11.556 01552 Wait(10)

2011-03-28 11:28:11.556 Requirement: ODSCC40

2011-03-28 11:28:21.557 01554 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:28:21.557 Requirement: ODSCC40

2011-03-28 11:28:21.557 01560 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:28:21.557 Requirement: ODSCC40

2011-03-28 11:28:21.557 01563 PurgeHSM()
2011-03-28 11:28:21.557 Requirement: ODSCC40
2011-03-28 11:28:21.557 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:28:21.909 - runCommand: Process started, PID: 10041
2011-03-28 11:28:21.909 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:28:21.909 OUTPUT:	2 keys found.
2011-03-28 11:28:21.909 OUTPUT:	
2011-03-28 11:28:21.909 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-28 11:28:21.909 OUTPUT:	Starting purge...
2011-03-28 11:28:21.909 OUTPUT:	Key remove successful: bc0ca830b0b3cc155378f1067c88687e
2011-03-28 11:28:21.909 OUTPUT:	Key remove successful: 34f58aca2bd4ba805807f69b9de09df7
2011-03-28 11:28:21.909 OUTPUT:	Purge done.

2011-03-28 11:28:21.909 01565 Wait(10)

2011-03-28 11:28:21.909 Requirement: ODSCC40

2011-03-28 11:28:31.910 01567 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:28:31.910 Requirement: ODSCC40

2011-03-28 11:28:31.910 01570 LoadConfig()
2011-03-28 11:28:31.910 Requirement: ODSCC40
2011-03-28 11:28:31.910 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:28:31.914 - runCommand: Process started, PID: 10045

2011-03-28 11:28:31.915 01573 LoadConfig()
2011-03-28 11:28:31.915 Requirement: ODSCC40
2011-03-28 11:28:31.915 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:28:31.918 - runCommand: Process started, PID: 10046

2011-03-28 11:28:31.919 01575 Comment: Update all the configs.

2011-03-28 11:28:31.919 Requirement: ODSCC40

2011-03-28 11:28:31.919 01577 ODSSetup()
2011-03-28 11:28:31.919 Requirement: ODSCC40
2011-03-28 11:28:31.919 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:28:31.925 - runCommand: Process started, PID: 10047
2011-03-28 11:28:31.925 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-28 11:28:31.925 ERROR:	MySQL database host set to: dnssec-db
2011-03-28 11:28:31.925 ERROR:	MySQL database port set to: 3000
2011-03-28 11:28:31.925 ERROR:	MySQL database schema set to: KASP
2011-03-28 11:28:31.925 ERROR:	MySQL database user set to: kaspuser
2011-03-28 11:28:31.925 ERROR:	MySQL database password set
2011-03-28 11:28:31.925 ERROR:	return code = 255

2011-03-28 11:28:31.926 01579 Wait(10)

2011-03-28 11:28:31.926 Requirement: ODSCC40

2011-03-28 11:28:41.926 01581 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:28:41.926 Requirement: ODSCC40

2011-03-28 11:28:41.927 01583 Start()
2011-03-28 11:28:41.927 Requirement: ODSCC40
2011-03-28 11:28:41.927 RunCommand(ods-control start)
2011-03-28 11:28:41.928 - runCommand: Background process started, PID: 10050
2011-03-28 11:28:46.958 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:28:46.970 - runCommand: Process started, PID: 10072
2011-03-28 11:28:46.970 ERROR:	return code = 1
2011-03-28 11:28:46.970 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:28:46.987 - runCommand: Process started, PID: 10077
2011-03-28 11:28:46.987 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:28:46.988 01585 Wait(10)

2011-03-28 11:28:46.988 Requirement: ODSCC40

2011-03-28 11:28:56.988 01587 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:28:56.988 Requirement: ODSCC40

2011-03-28 11:28:56.988 01589 Stop()
2011-03-28 11:28:56.988 Requirement: ODSCC40
2011-03-28 11:28:56.988 RunCommand(ods-control stop)
2011-03-28 11:28:56.994 - runCommand: Process started, PID: 10090
2011-03-28 11:28:56.994 OUTPUT:	Stopping enforcer...
2011-03-28 11:28:56.994 OUTPUT:	Cannot find PID file
2011-03-28 11:28:56.994 OUTPUT:	Stopping signer engine..
2011-03-28 11:28:56.994 OUTPUT:	Engine shut down.
2011-03-28 11:28:56.994 RunCommand(ps -e | grep enforcer)
2011-03-28 11:28:57.120 - runCommand: Process started, PID: 10094
2011-03-28 11:28:57.121 ERROR:	return code = 1
2011-03-28 11:28:57.121 RunCommand(ps -e | grep signer)
2011-03-28 11:28:57.250 - runCommand: Process started, PID: 10097
2011-03-28 11:28:57.251 ERROR:	return code = 1

2011-03-28 11:28:57.253 01592 CheckLog()
2011-03-28 11:28:57.253 Requirement: ODSCC40
2011-03-28 11:28:57.533 FAILED:	(Check for Like) - Expected: all done! hsm_close results: 1 Found: 

2011-03-28 11:28:57.536 01595 CheckLog()
2011-03-28 11:28:57.536 Requirement: ODSCC40
2011-03-28 11:28:57.809 FAILED:	(Check for Like) - Expected: cfgfile /etc/opendnssec/conf.xml has errors Found: 

2011-03-28 11:28:57.812 01598 CheckLog()
2011-03-28 11:28:57.812 Requirement: ODSCC40
2011-03-28 11:28:57.108 FAILED:	(Check for Like) - Expected: Could not start signer Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC40T20: Use default port (1213) for database and configure a false port and check if enforcer fails to connect

2011-03-28 11:28:57.109 01606 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:28:57.109 Requirement: ODSCC40

2011-03-28 11:28:57.109 01608 Stop()
2011-03-28 11:28:57.109 Requirement: ODSCC40
2011-03-28 11:28:57.109 RunCommand(ods-control stop)
2011-03-28 11:28:57.112 - runCommand: Process started, PID: 10100
2011-03-28 11:28:57.112 OUTPUT:	Stopping enforcer...
2011-03-28 11:28:57.112 OUTPUT:	Cannot find PID file
2011-03-28 11:28:57.112 OUTPUT:	Stopping signer engine..
2011-03-28 11:28:57.112 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 11:28:57.112 ERROR:	return code = 1
2011-03-28 11:28:57.112 RunCommand(ps -e | grep enforcer)
2011-03-28 11:28:57.123 - runCommand: Process started, PID: 10103
2011-03-28 11:28:57.123 ERROR:	return code = 1
2011-03-28 11:28:57.123 RunCommand(ps -e | grep signer)
2011-03-28 11:28:57.132 - runCommand: Process started, PID: 10106
2011-03-28 11:28:57.132 ERROR:	return code = 1

2011-03-28 11:28:57.132 01610 Wait(10)

2011-03-28 11:28:57.132 Requirement: ODSCC40

2011-03-28 11:29:07.133 01612 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:29:07.133 Requirement: ODSCC40

2011-03-28 11:29:07.133 01618 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:29:07.133 Requirement: ODSCC40

2011-03-28 11:29:07.133 01621 PurgeHSM()
2011-03-28 11:29:07.133 Requirement: ODSCC40
2011-03-28 11:29:07.133 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:29:07.145 - runCommand: Process started, PID: 10109
2011-03-28 11:29:07.145 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:29:07.145 OUTPUT:	0 keys found.
2011-03-28 11:29:07.145 ERROR:	return code = 255

2011-03-28 11:29:07.145 01623 Wait(10)

2011-03-28 11:29:07.145 Requirement: ODSCC40

2011-03-28 11:29:17.146 01625 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:29:17.146 Requirement: ODSCC40

2011-03-28 11:29:17.146 01628 LoadConfig()
2011-03-28 11:29:17.146 Requirement: ODSCC40
2011-03-28 11:29:17.146 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T20_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:29:17.150 - runCommand: Process started, PID: 10113

2011-03-28 11:29:17.151 01631 LoadConfig()
2011-03-28 11:29:17.151 Requirement: ODSCC40
2011-03-28 11:29:17.151 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:29:17.154 - runCommand: Process started, PID: 10114

2011-03-28 11:29:17.155 01633 Comment: Update all the configs.

2011-03-28 11:29:17.155 Requirement: ODSCC40

2011-03-28 11:29:17.155 01635 ODSSetup()
2011-03-28 11:29:17.155 Requirement: ODSCC40
2011-03-28 11:29:17.155 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:29:17.161 - runCommand: Process started, PID: 10115
2011-03-28 11:29:17.161 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-28 11:29:17.161 ERROR:	MySQL database host set to: dnssec-db
2011-03-28 11:29:17.161 ERROR:	MySQL database port set to: 1213
2011-03-28 11:29:17.161 ERROR:	MySQL database schema set to: KASP
2011-03-28 11:29:17.161 ERROR:	MySQL database user set to: kaspuser
2011-03-28 11:29:17.161 ERROR:	MySQL database password set
2011-03-28 11:29:17.161 ERROR:	return code = 255

2011-03-28 11:29:17.162 01637 Wait(10)

2011-03-28 11:29:17.162 Requirement: ODSCC40

2011-03-28 11:29:27.162 01639 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:29:27.162 Requirement: ODSCC40

2011-03-28 11:29:27.162 01641 Stop()
2011-03-28 11:29:27.162 Requirement: ODSCC40
2011-03-28 11:29:27.162 RunCommand(ods-control stop)
2011-03-28 11:29:27.168 - runCommand: Process started, PID: 10118
2011-03-28 11:29:27.168 OUTPUT:	Stopping enforcer...
2011-03-28 11:29:27.168 OUTPUT:	Cannot find PID file
2011-03-28 11:29:27.168 OUTPUT:	Stopping signer engine..
2011-03-28 11:29:27.168 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 11:29:27.168 ERROR:	return code = 1
2011-03-28 11:29:27.168 RunCommand(ps -e | grep enforcer)
2011-03-28 11:29:27.183 - runCommand: Process started, PID: 10121
2011-03-28 11:29:27.183 ERROR:	return code = 1
2011-03-28 11:29:27.183 RunCommand(ps -e | grep signer)
2011-03-28 11:29:27.198 - runCommand: Process started, PID: 10124
2011-03-28 11:29:27.198 ERROR:	return code = 1

2011-03-28 11:29:27.199 01643 Comment: all done! hsm_close results: 1

2011-03-28 11:29:27.199 Requirement: ODSCC40

2011-03-28 11:29:27.199 01645 Start()
2011-03-28 11:29:27.199 Requirement: ODSCC40
2011-03-28 11:29:27.199 RunCommand(ods-control start)
2011-03-28 11:29:27.200 - runCommand: Background process started, PID: 10127
2011-03-28 11:29:32.231 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:29:32.245 - runCommand: Process started, PID: 10149
2011-03-28 11:29:32.245 ERROR:	return code = 1
2011-03-28 11:29:32.245 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:29:32.260 - runCommand: Process started, PID: 10154
2011-03-28 11:29:32.260 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:29:32.260 01647 Wait(10)

2011-03-28 11:29:32.260 Requirement: ODSCC40

2011-03-28 11:29:42.260 01650 CheckLog()
2011-03-28 11:29:42.260 Requirement: ODSCC40
2011-03-28 11:29:42.293 FAILED:	(Check for Like) - Expected: element Datastore: Relax-NG validity error : Did not expect element Datastore there Found: 

2011-03-28 11:29:42.293 01653 CheckLog()
2011-03-28 11:29:42.293 Requirement: ODSCC40
2011-03-28 11:29:42.319 FAILED:	(Check for Like) - Expected: cfgfile /etc/opendnssec/conf.xml has errors Found: 

2011-03-28 11:29:42.319 01656 CheckLog()
2011-03-28 11:29:42.319 Requirement: ODSCC40
2011-03-28 11:29:42.345 FAILED:	(Check for Like) - Expected: Could not start signer Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC40T30: Use a different port for both database and config and check if enforcer successfully connects

2011-03-28 11:29:42.346 01662 Comment: MySQL port is 3307 instead of 3306. Changed in config.xml and my.cnf

2011-03-28 11:29:42.346 Requirement: ODSCC40

2011-03-28 11:29:42.346 01663 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:29:42.346 Requirement: ODSCC40

2011-03-28 11:29:42.346 01665 Stop()
2011-03-28 11:29:42.346 Requirement: ODSCC40
2011-03-28 11:29:42.346 RunCommand(ods-control stop)
2011-03-28 11:29:42.350 - runCommand: Process started, PID: 10167
2011-03-28 11:29:42.350 OUTPUT:	Stopping enforcer...
2011-03-28 11:29:42.350 OUTPUT:	Cannot find PID file
2011-03-28 11:29:42.350 OUTPUT:	Stopping signer engine..
2011-03-28 11:29:42.350 OUTPUT:	Engine shut down.
2011-03-28 11:29:42.350 RunCommand(ps -e | grep enforcer)
2011-03-28 11:29:42.360 - runCommand: Process started, PID: 10171
2011-03-28 11:29:42.360 ERROR:	return code = 1
2011-03-28 11:29:42.360 RunCommand(ps -e | grep signer)
2011-03-28 11:29:42.371 - runCommand: Process started, PID: 10174
2011-03-28 11:29:42.371 ERROR:	return code = 1

2011-03-28 11:29:42.371 01667 Wait(10)

2011-03-28 11:29:42.371 Requirement: ODSCC40

2011-03-28 11:29:52.371 01669 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:29:52.372 Requirement: ODSCC40

2011-03-28 11:29:52.372 01675 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:29:52.372 Requirement: ODSCC40

2011-03-28 11:29:52.372 01678 PurgeHSM()
2011-03-28 11:29:52.372 Requirement: ODSCC40
2011-03-28 11:29:52.372 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:29:52.386 - runCommand: Process started, PID: 10177
2011-03-28 11:29:52.386 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:29:52.387 OUTPUT:	0 keys found.
2011-03-28 11:29:52.387 ERROR:	return code = 255

2011-03-28 11:29:52.387 01680 Wait(10)

2011-03-28 11:29:52.387 Requirement: ODSCC40

2011-03-28 11:30:02.387 01682 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-28 11:30:02.387 Requirement: ODSCC40

2011-03-28 11:30:02.388 01688 Wait(60)

2011-03-28 11:30:02.388 Requirement: ODSCC40

2011-03-28 11:31:02.388 01692 Wait(60)

2011-03-28 11:31:02.388 Requirement: ODSCC40

2011-03-28 11:32:02.389 01696 Wait(60)

2011-03-28 11:32:02.389 Requirement: ODSCC40

2011-03-28 11:33:02.389 01698 Comment: After installation replace the original mysql config file with the adjusted one. Port is 3307 instead of the standard 3306 port.

2011-03-28 11:33:02.389 Requirement: ODSCC40

2011-03-28 11:33:02.390 01702 Comment: Update the mySQL configuration

2011-03-28 11:33:02.390 Requirement: ODSCC40

2011-03-28 11:33:02.390 01706 Wait(10)

2011-03-28 11:33:02.390 Requirement: ODSCC40

2011-03-28 11:33:12.391 01709 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:33:12.391 Requirement: ODSCC40

2011-03-28 11:33:12.391 01712 LoadConfig()
2011-03-28 11:33:12.391 Requirement: ODSCC40
2011-03-28 11:33:12.391 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T30_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:33:12.395 - runCommand: Process started, PID: 10183

2011-03-28 11:33:12.396 01715 LoadConfig()
2011-03-28 11:33:12.396 Requirement: ODSCC40
2011-03-28 11:33:12.396 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:33:12.399 - runCommand: Process started, PID: 10184

2011-03-28 11:33:12.400 01717 Comment: Run setup for rebuild of database

2011-03-28 11:33:12.400 Requirement: ODSCC40

2011-03-28 11:33:12.400 01721 Wait(20)

2011-03-28 11:33:12.400 Requirement: ODSCC40

2011-03-28 11:33:32.401 01723 Comment: Update all the configs.

2011-03-28 11:33:32.401 Requirement: ODSCC40

2011-03-28 11:33:32.401 01725 ODSSetup()
2011-03-28 11:33:32.401 Requirement: ODSCC40
2011-03-28 11:33:32.401 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:33:32.407 - runCommand: Process started, PID: 10185
2011-03-28 11:33:32.407 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-28 11:33:32.407 ERROR:	MySQL database host set to: dnssec-db
2011-03-28 11:33:32.407 ERROR:	MySQL database port set to: 3307
2011-03-28 11:33:32.407 ERROR:	MySQL database schema set to: KASP
2011-03-28 11:33:32.407 ERROR:	MySQL database user set to: kaspuser
2011-03-28 11:33:32.407 ERROR:	MySQL database password set
2011-03-28 11:33:32.407 ERROR:	return code = 255

2011-03-28 11:33:32.408 01727 Wait(10)

2011-03-28 11:33:32.408 Requirement: ODSCC40

2011-03-28 11:33:42.408 01729 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:33:42.408 Requirement: ODSCC40

2011-03-28 11:33:42.409 01731 Start()
2011-03-28 11:33:42.409 Requirement: ODSCC40
2011-03-28 11:33:42.409 RunCommand(ods-control start)
2011-03-28 11:33:42.410 - runCommand: Background process started, PID: 10188
2011-03-28 11:33:47.439 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:33:47.450 - runCommand: Process started, PID: 10211
2011-03-28 11:33:47.450 ERROR:	return code = 1
2011-03-28 11:33:47.450 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:33:47.470 - runCommand: Process started, PID: 10216
2011-03-28 11:33:47.470 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:33:47.470 01733 Wait(10)

2011-03-28 11:33:47.470 Requirement: ODSCC40

2011-03-28 11:33:57.471 01736 CheckLog()
2011-03-28 11:33:57.471 Requirement: ODSCC40
2011-03-28 11:33:57.501 PASSED:	(Check for Like) - Expected: signer engine started Found: Mar 28 11:33:47 DEVELOPER15 ods-signerd: signer engine started

2011-03-28 11:33:57.501 01739 Comment: Log should be checked

2011-03-28 11:33:57.501 Requirement: ODSCC40

2011-03-28 11:33:57.501 01742 Comment: Restore old config file mySQL

2011-03-28 11:33:57.501 Requirement: ODSCC40

2011-03-28 11:33:57.502 01746 Comment: Update the mySQL configuration

2011-03-28 11:33:57.502 Requirement: ODSCC40

-------------------------------------------------------------------------------
Testcase - ODSCC40T40: Use a different Hostname for database and check if enforcer fails to connect

2011-03-28 11:33:57.502 01754 Comment: Hostname is changed in conf.xml to "ods-db", port is the standard 3306 port.

2011-03-28 11:33:57.502 Requirement: ODSCC40

2011-03-28 11:33:57.502 01756 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:33:57.502 Requirement: ODSCC40

2011-03-28 11:33:57.503 01758 Stop()
2011-03-28 11:33:57.503 Requirement: ODSCC40
2011-03-28 11:33:57.503 RunCommand(ods-control stop)
2011-03-28 11:33:57.506 - runCommand: Process started, PID: 10229
2011-03-28 11:33:57.506 OUTPUT:	Stopping enforcer...
2011-03-28 11:33:57.506 OUTPUT:	Cannot find PID file
2011-03-28 11:33:57.506 OUTPUT:	Stopping signer engine..
2011-03-28 11:33:57.506 OUTPUT:	Engine shut down.
2011-03-28 11:33:57.506 RunCommand(ps -e | grep enforcer)
2011-03-28 11:33:57.516 - runCommand: Process started, PID: 10233
2011-03-28 11:33:57.516 ERROR:	return code = 1
2011-03-28 11:33:57.516 RunCommand(ps -e | grep signer)
2011-03-28 11:33:57.525 - runCommand: Process started, PID: 10236
2011-03-28 11:33:57.525 ERROR:	return code = 1

2011-03-28 11:33:57.525 01760 Wait(10)

2011-03-28 11:33:57.525 Requirement: ODSCC40

2011-03-28 11:34:07.526 01762 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:34:07.526 Requirement: ODSCC40

2011-03-28 11:34:07.526 01768 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:34:07.526 Requirement: ODSCC40

2011-03-28 11:34:07.526 01771 PurgeHSM()
2011-03-28 11:34:07.526 Requirement: ODSCC40
2011-03-28 11:34:07.526 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:34:07.539 - runCommand: Process started, PID: 10239
2011-03-28 11:34:07.539 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:34:07.539 OUTPUT:	0 keys found.
2011-03-28 11:34:07.539 ERROR:	return code = 255

2011-03-28 11:34:07.540 01773 Wait(10)

2011-03-28 11:34:07.540 Requirement: ODSCC40

2011-03-28 11:34:17.540 01776 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-28 11:34:17.540 Requirement: ODSCC40

2011-03-28 11:34:17.540 01782 Wait(60)

2011-03-28 11:34:17.541 Requirement: ODSCC40

2011-03-28 11:35:17.541 01786 Wait(60)

2011-03-28 11:35:17.541 Requirement: ODSCC40

2011-03-28 11:36:17.542 01790 Wait(60)

2011-03-28 11:36:17.542 Requirement: ODSCC40

2011-03-28 11:37:17.542 01792 Comment: After installation replace the original mysql config file with the adjusted one. Port is standard: 3306 port.

2011-03-28 11:37:17.542 Requirement: ODSCC40

2011-03-28 11:37:17.542 01796 Comment: Update the mySQL configuration

2011-03-28 11:37:17.542 Requirement: ODSCC40

2011-03-28 11:37:17.543 01800 Wait(10)

2011-03-28 11:37:17.543 Requirement: ODSCC40

2011-03-28 11:37:27.543 01803 Comment: Change the configuration with predefined xml config files.

2011-03-28 11:37:27.543 Requirement: ODSCC40

2011-03-28 11:37:27.544 01806 LoadConfig()
2011-03-28 11:37:27.544 Requirement: ODSCC40
2011-03-28 11:37:27.544 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T40_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:37:27.548 - runCommand: Process started, PID: 10246

2011-03-28 11:37:27.548 01809 LoadConfig()
2011-03-28 11:37:27.548 Requirement: ODSCC40
2011-03-28 11:37:27.548 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:37:27.552 - runCommand: Process started, PID: 10247

2011-03-28 11:37:27.552 01811 Comment: Run setup for rebuild of database

2011-03-28 11:37:27.552 Requirement: ODSCC40

2011-03-28 11:37:27.553 01815 Wait(20)

2011-03-28 11:37:27.553 Requirement: ODSCC40

2011-03-28 11:37:47.553 01817 Comment: Update all the configs.

2011-03-28 11:37:47.553 Requirement: ODSCC40

2011-03-28 11:37:47.554 01819 ODSSetup()
2011-03-28 11:37:47.554 Requirement: ODSCC40
2011-03-28 11:37:47.554 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:37:47.560 - runCommand: Process started, PID: 10248
2011-03-28 11:37:47.560 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-28 11:37:47.560 ERROR:	MySQL database host set to: ods-db
2011-03-28 11:37:47.560 ERROR:	MySQL database port set to: 3306
2011-03-28 11:37:47.560 ERROR:	MySQL database schema set to: KASP
2011-03-28 11:37:47.560 ERROR:	MySQL database user set to: kaspuser
2011-03-28 11:37:47.560 ERROR:	MySQL database password set
2011-03-28 11:37:47.560 ERROR:	return code = 255

2011-03-28 11:37:47.560 01821 Wait(10)

2011-03-28 11:37:47.560 Requirement: ODSCC40

2011-03-28 11:37:57.561 01823 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:37:57.561 Requirement: ODSCC40

2011-03-28 11:37:57.561 01825 Start()
2011-03-28 11:37:57.561 Requirement: ODSCC40
2011-03-28 11:37:57.561 RunCommand(ods-control start)
2011-03-28 11:37:57.562 - runCommand: Background process started, PID: 10251
2011-03-28 11:38:02.594 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:38:02.605 - runCommand: Process started, PID: 10274
2011-03-28 11:38:02.606 ERROR:	return code = 1
2011-03-28 11:38:02.606 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:38:02.623 - runCommand: Process started, PID: 10279
2011-03-28 11:38:02.623 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:38:02.624 01827 Wait(10)

2011-03-28 11:38:02.624 Requirement: ODSCC40

2011-03-28 11:38:12.624 01830 CheckLog()
2011-03-28 11:38:12.624 Requirement: ODSCC40
2011-03-28 11:38:12.656 PASSED:	(Check for Like) - Expected:  Found: Mar 28 11:38:02 DEVELOPER15 ods-signerd: signer engine started

2011-03-28 11:38:12.656 01833 CheckLog()
2011-03-28 11:38:12.656 Requirement: ODSCC40
2011-03-28 11:38:12.682 PASSED:	(Check for Like) - Expected:  Found: Mar 28 11:38:02 DEVELOPER15 ods-signerd: signer engine started

2011-03-28 11:38:12.682 01836 CheckLog()
2011-03-28 11:38:12.682 Requirement: ODSCC40
2011-03-28 11:38:12.708 FAILED:	(Check for Like) - Expected: Could not start signer Found: 

2011-03-28 11:38:12.708 01838 Comment: Restore old config file mySQL

2011-03-28 11:38:12.708 Requirement: ODSCC40

2011-03-28 11:38:12.709 01842 Comment: Update the mySQL configuration

2011-03-28 11:38:12.709 Requirement: ODSCC40

-------------------------------------------------------------------------------
Testcase - ODSCC40T50: Use a different Hostname for both database and config and check if enforcer successfully connects

2011-03-28 11:38:12.709 01850 Comment: Hostname is changed in conf.xml to "mysqlhost". This host is also in the hosts file in Unix.

2011-03-28 11:38:12.709 Requirement: ODSCC40

2011-03-28 11:38:12.709 01852 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:38:12.709 Requirement: ODSCC40

2011-03-28 11:38:12.710 01854 Stop()
2011-03-28 11:38:12.710 Requirement: ODSCC40
2011-03-28 11:38:12.710 RunCommand(ods-control stop)
2011-03-28 11:38:12.713 - runCommand: Process started, PID: 10292
2011-03-28 11:38:12.713 OUTPUT:	Stopping enforcer...
2011-03-28 11:38:12.713 OUTPUT:	Cannot find PID file
2011-03-28 11:38:12.713 OUTPUT:	Stopping signer engine..
2011-03-28 11:38:12.713 OUTPUT:	Engine shut down.
2011-03-28 11:38:12.713 RunCommand(ps -e | grep enforcer)
2011-03-28 11:38:12.723 - runCommand: Process started, PID: 10296
2011-03-28 11:38:12.723 ERROR:	return code = 1
2011-03-28 11:38:12.723 RunCommand(ps -e | grep signer)
2011-03-28 11:38:12.732 - runCommand: Process started, PID: 10299
2011-03-28 11:38:12.732 ERROR:	return code = 1

2011-03-28 11:38:12.732 01856 Wait(10)

2011-03-28 11:38:12.732 Requirement: ODSCC40

2011-03-28 11:38:22.733 01858 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:38:22.733 Requirement: ODSCC40

2011-03-28 11:38:22.733 01864 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:38:22.733 Requirement: ODSCC40

2011-03-28 11:38:22.734 01867 PurgeHSM()
2011-03-28 11:38:22.734 Requirement: ODSCC40
2011-03-28 11:38:22.734 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:38:22.745 - runCommand: Process started, PID: 10302
2011-03-28 11:38:22.745 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:38:22.745 OUTPUT:	0 keys found.
2011-03-28 11:38:22.745 ERROR:	return code = 255

2011-03-28 11:38:22.746 01869 Wait(10)

2011-03-28 11:38:22.746 Requirement: ODSCC40

2011-03-28 11:38:32.746 01871 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-28 11:38:32.746 Requirement: ODSCC40

2011-03-28 11:38:32.746 01877 Wait(60)

2011-03-28 11:38:32.746 Requirement: ODSCC40

2011-03-28 11:39:32.747 01881 Wait(60)

2011-03-28 11:39:32.747 Requirement: ODSCC40

2011-03-28 11:40:32.747 01885 Wait(60)

2011-03-28 11:40:32.747 Requirement: ODSCC40

2011-03-28 11:41:32.748 01887 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-28 11:41:32.748 Requirement: ODSCC40

2011-03-28 11:41:32.748 01891 Wait(10)

2011-03-28 11:41:32.748 Requirement: ODSCC40

2011-03-28 11:41:42.749 01894 Comment: Change the configuration with predefined xml config files. Hostname is mysqlhost.

2011-03-28 11:41:42.749 Requirement: ODSCC40

2011-03-28 11:41:42.749 01897 LoadConfig()
2011-03-28 11:41:42.749 Requirement: ODSCC40
2011-03-28 11:41:42.749 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T50_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:41:42.753 - runCommand: Process started, PID: 10307

2011-03-28 11:41:42.754 01900 LoadConfig()
2011-03-28 11:41:42.754 Requirement: ODSCC40
2011-03-28 11:41:42.754 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:41:42.757 - runCommand: Process started, PID: 10308

2011-03-28 11:41:42.758 01902 Comment: Run setup for rebuild of database

2011-03-28 11:41:42.758 Requirement: ODSCC40

2011-03-28 11:41:42.758 01906 Wait(20)

2011-03-28 11:41:42.758 Requirement: ODSCC40

2011-03-28 11:42:02.759 01908 Comment: Update all the configs.

2011-03-28 11:42:02.759 Requirement: ODSCC40

2011-03-28 11:42:02.759 01910 ODSSetup()
2011-03-28 11:42:02.759 Requirement: ODSCC40
2011-03-28 11:42:02.759 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:42:02.765 - runCommand: Process started, PID: 10309
2011-03-28 11:42:02.765 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-28 11:42:02.765 ERROR:	MySQL database host set to: ods-db
2011-03-28 11:42:02.765 ERROR:	MySQL database port set to: 3306
2011-03-28 11:42:02.765 ERROR:	MySQL database schema set to: KASP
2011-03-28 11:42:02.765 ERROR:	MySQL database user set to: kaspuser
2011-03-28 11:42:02.765 ERROR:	MySQL database password set
2011-03-28 11:42:02.765 ERROR:	return code = 255

2011-03-28 11:42:02.766 01912 Wait(10)

2011-03-28 11:42:02.766 Requirement: ODSCC40

2011-03-28 11:42:12.766 01914 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:42:12.766 Requirement: ODSCC40

2011-03-28 11:42:12.767 01916 Start()
2011-03-28 11:42:12.767 Requirement: ODSCC40
2011-03-28 11:42:12.767 RunCommand(ods-control start)
2011-03-28 11:42:12.768 - runCommand: Background process started, PID: 10312
2011-03-28 11:42:17.798 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:42:17.810 - runCommand: Process started, PID: 10335
2011-03-28 11:42:17.810 ERROR:	return code = 1
2011-03-28 11:42:17.810 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:42:17.829 - runCommand: Process started, PID: 10340
2011-03-28 11:42:17.829 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:42:17.829 01918 Wait(10)

2011-03-28 11:42:17.829 Requirement: ODSCC40

2011-03-28 11:42:27.830 01921 CheckLog()
2011-03-28 11:42:27.830 Requirement: ODSCC40
2011-03-28 11:42:27.860 PASSED:	(Check for Like) - Expected:  Found: Mar 28 11:42:17 DEVELOPER15 ods-signerd: signer engine started

2011-03-28 11:42:27.861 01924 CheckLog()
2011-03-28 11:42:27.861 Requirement: ODSCC40
2011-03-28 11:42:27.887 FAILED:	(Check for Like) - Expected: Could not start signer Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC40T60: Use a different database name for database and check if enforcer fails to connect

2011-03-28 11:42:27.888 01930 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:42:27.888 Requirement: ODSCC40

2011-03-28 11:42:27.888 01932 Wait(10)

2011-03-28 11:42:27.888 Requirement: ODSCC40

2011-03-28 11:42:37.888 01934 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:42:37.888 Requirement: ODSCC40

2011-03-28 11:42:37.889 01940 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:42:37.889 Requirement: ODSCC40

2011-03-28 11:42:37.889 01943 PurgeHSM()
2011-03-28 11:42:37.889 Requirement: ODSCC40
2011-03-28 11:42:37.889 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:42:37.901 - runCommand: Process started, PID: 10353
2011-03-28 11:42:37.901 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:42:37.901 OUTPUT:	0 keys found.
2011-03-28 11:42:37.901 ERROR:	return code = 255

2011-03-28 11:42:37.901 01945 Wait(10)

2011-03-28 11:42:37.901 Requirement: ODSCC40

2011-03-28 11:42:47.901 01948 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-28 11:42:47.901 Requirement: ODSCC40

2011-03-28 11:42:47.902 01954 Wait(60)

2011-03-28 11:42:47.902 Requirement: ODSCC40

2011-03-28 11:43:47.902 01958 Wait(60)

2011-03-28 11:43:47.902 Requirement: ODSCC40

2011-03-28 11:44:47.903 01962 Wait(60)

2011-03-28 11:44:47.903 Requirement: ODSCC40

2011-03-28 11:45:47.903 01964 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-28 11:45:47.903 Requirement: ODSCC40

2011-03-28 11:45:47.904 01968 Wait(10)

2011-03-28 11:45:47.904 Requirement: ODSCC40

2011-03-28 11:45:57.904 01971 Comment: Change the configuration with predefined xml config files. Database name is KASPFOUT.

2011-03-28 11:45:57.904 Requirement: ODSCC40

2011-03-28 11:45:57.905 01974 LoadConfig()
2011-03-28 11:45:57.905 Requirement: ODSCC40
2011-03-28 11:45:57.905 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T60_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:45:57.909 - runCommand: Process started, PID: 10358

2011-03-28 11:45:57.909 01977 LoadConfig()
2011-03-28 11:45:57.909 Requirement: ODSCC40
2011-03-28 11:45:57.909 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:45:57.913 - runCommand: Process started, PID: 10359

2011-03-28 11:45:57.913 01979 Comment: Run setup for rebuild of database

2011-03-28 11:45:57.913 Requirement: ODSCC40

2011-03-28 11:45:57.914 01983 Wait(20)

2011-03-28 11:45:57.914 Requirement: ODSCC40

2011-03-28 11:46:17.914 01985 Comment: Update all the configs.

2011-03-28 11:46:17.914 Requirement: ODSCC40

2011-03-28 11:46:17.914 01987 ODSSetup()
2011-03-28 11:46:17.915 Requirement: ODSCC40
2011-03-28 11:46:17.915 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:46:17.921 - runCommand: Process started, PID: 10360
2011-03-28 11:46:17.921 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-28 11:46:17.921 ERROR:	MySQL database host set to: localhost
2011-03-28 11:46:17.921 ERROR:	MySQL database port set to: 3306
2011-03-28 11:46:17.921 ERROR:	MySQL database schema set to: FOUTTEST
2011-03-28 11:46:17.921 ERROR:	MySQL database user set to: kaspuser
2011-03-28 11:46:17.921 ERROR:	MySQL database password set
2011-03-28 11:46:17.921 ERROR:	return code = 255

2011-03-28 11:46:17.921 01989 Wait(10)

2011-03-28 11:46:17.921 Requirement: ODSCC40

2011-03-28 11:46:27.922 01991 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:46:27.922 Requirement: ODSCC40

2011-03-28 11:46:27.922 01993 Start()
2011-03-28 11:46:27.922 Requirement: ODSCC40
2011-03-28 11:46:27.922 RunCommand(ods-control start)
2011-03-28 11:46:27.923 - runCommand: Background process started, PID: 10363
2011-03-28 11:46:32.949 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:46:32.964 - runCommand: Process started, PID: 10382
2011-03-28 11:46:32.965 ERROR:	return code = 1
2011-03-28 11:46:32.965 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:46:32.980 - runCommand: Process started, PID: 10386
2011-03-28 11:46:32.980 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:46:32.980 01995 Wait(10)

2011-03-28 11:46:32.980 Requirement: ODSCC40

2011-03-28 11:46:42.981 01998 CheckLog()
2011-03-28 11:46:42.981 Requirement: ODSCC40

-------------------------------------------------------------------------------
Testcase - ODSCC40T70: Use a different Database name for both database and config and check if enforcer successfully connects

2011-03-28 11:46:43.154 02004 Comment: Databasename is changed in conf.xml to "KASPTEST"

2011-03-28 11:46:43.154 Requirement: ODSCC40

2011-03-28 11:46:43.156 02006 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:46:43.157 Requirement: ODSCC40

2011-03-28 11:46:43.159 02008 Stop()
2011-03-28 11:46:43.159 Requirement: ODSCC40
2011-03-28 11:46:43.159 RunCommand(ods-control stop)
2011-03-28 11:46:43.200 - runCommand: Process started, PID: 10391
2011-03-28 11:46:43.201 OUTPUT:	Stopping enforcer...
2011-03-28 11:46:43.201 OUTPUT:	Cannot find PID file
2011-03-28 11:46:43.201 OUTPUT:	Stopping signer engine..
2011-03-28 11:46:43.201 OUTPUT:	Engine shut down.
2011-03-28 11:46:43.202 RunCommand(ps -e | grep enforcer)
2011-03-28 11:46:43.299 - runCommand: Process started, PID: 10395
2011-03-28 11:46:43.300 ERROR:	return code = 1
2011-03-28 11:46:43.300 RunCommand(ps -e | grep signer)
2011-03-28 11:46:43.391 - runCommand: Process started, PID: 10398
2011-03-28 11:46:43.392 ERROR:	return code = 1

2011-03-28 11:46:43.394 02010 Wait(10)

2011-03-28 11:46:43.394 Requirement: ODSCC40

2011-03-28 11:46:53.399 02012 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:46:53.399 Requirement: ODSCC40

2011-03-28 11:46:53.403 02018 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:46:53.403 Requirement: ODSCC40

2011-03-28 11:46:53.406 02021 PurgeHSM()
2011-03-28 11:46:53.406 Requirement: ODSCC40
2011-03-28 11:46:53.407 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:46:53.548 - runCommand: Process started, PID: 10401
2011-03-28 11:46:53.548 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:46:53.549 OUTPUT:	0 keys found.
2011-03-28 11:46:53.549 ERROR:	return code = 255

2011-03-28 11:46:53.553 02023 Wait(10)

2011-03-28 11:46:53.553 Requirement: ODSCC40

2011-03-28 11:47:03.557 02025 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-28 11:47:03.558 Requirement: ODSCC40

2011-03-28 11:47:03.561 02031 Wait(60)

2011-03-28 11:47:03.562 Requirement: ODSCC40

2011-03-28 11:48:03.566 02035 Wait(60)

2011-03-28 11:48:03.567 Requirement: ODSCC40

2011-03-28 11:49:03.571 02039 Wait(60)

2011-03-28 11:49:03.572 Requirement: ODSCC40

2011-03-28 11:50:03.576 02041 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-28 11:50:03.577 Requirement: ODSCC40

2011-03-28 11:50:03.580 02045 Wait(10)

2011-03-28 11:50:03.580 Requirement: ODSCC40

2011-03-28 11:50:13.585 02048 Comment: Change the configuration with predefined xml config files. Database name is KASPTEST.

2011-03-28 11:50:13.585 Requirement: ODSCC40

2011-03-28 11:50:13.589 02051 LoadConfig()
2011-03-28 11:50:13.589 Requirement: ODSCC40
2011-03-28 11:50:13.589 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T70_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:50:13.629 - runCommand: Process started, PID: 10405

2011-03-28 11:50:13.634 02054 LoadConfig()
2011-03-28 11:50:13.634 Requirement: ODSCC40
2011-03-28 11:50:13.634 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:50:13.671 - runCommand: Process started, PID: 10406

2011-03-28 11:50:13.675 02056 Comment: Run setup for rebuild of database

2011-03-28 11:50:13.676 Requirement: ODSCC40

2011-03-28 11:50:13.679 02060 Wait(20)

2011-03-28 11:50:13.679 Requirement: ODSCC40

2011-03-28 11:50:33.684 02062 Comment: Update all the configs.

2011-03-28 11:50:33.684 Requirement: ODSCC40

2011-03-28 11:50:33.687 02064 ODSSetup()
2011-03-28 11:50:33.688 Requirement: ODSCC40
2011-03-28 11:50:33.688 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:50:33.748 - runCommand: Process started, PID: 10407
2011-03-28 11:50:33.749 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-28 11:50:33.749 ERROR:	MySQL database host set to: mysqlho
2011-03-28 11:50:33.749 ERROR:	MySQL database port set to: 3306
2011-03-28 11:50:33.749 ERROR:	MySQL database schema set to: KASPTEST
2011-03-28 11:50:33.749 ERROR:	MySQL database user set to: kaspuser
2011-03-28 11:50:33.750 ERROR:	MySQL database password set
2011-03-28 11:50:33.750 ERROR:	return code = 255

2011-03-28 11:50:33.753 02066 Wait(10)

2011-03-28 11:50:33.754 Requirement: ODSCC40

2011-03-28 11:50:43.758 02068 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:50:43.758 Requirement: ODSCC40

2011-03-28 11:50:43.762 02070 Start()
2011-03-28 11:50:43.762 Requirement: ODSCC40
2011-03-28 11:50:43.762 RunCommand(ods-control start)
2011-03-28 11:50:43.774 - runCommand: Background process started, PID: 10410
2011-03-28 11:50:48.108 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:50:48.127 - runCommand: Process started, PID: 10433
2011-03-28 11:50:48.127 ERROR:	return code = 1
2011-03-28 11:50:48.127 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:50:48.142 - runCommand: Process started, PID: 10438
2011-03-28 11:50:48.142 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:50:48.142 02072 Wait(10)

2011-03-28 11:50:48.142 Requirement: ODSCC40

2011-03-28 11:50:58.142 02075 CheckLog()
2011-03-28 11:50:58.142 Requirement: ODSCC40
2011-03-28 11:50:58.173 PASSED:	(Check for Like) - Expected: signer engine started Found: Mar 28 11:50:48 DEVELOPER15 ods-signerd: signer engine started

-------------------------------------------------------------------------------
Testcase - ODSCC40T80: Use a different Username for database and check if enforcer fails to connect

2011-03-28 11:50:58.174 02084 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:50:58.174 Requirement: ODSCC40

2011-03-28 11:50:58.174 02086 Stop()
2011-03-28 11:50:58.174 Requirement: ODSCC40
2011-03-28 11:50:58.174 RunCommand(ods-control stop)
2011-03-28 11:50:58.178 - runCommand: Process started, PID: 10451
2011-03-28 11:50:58.178 OUTPUT:	Stopping enforcer...
2011-03-28 11:50:58.178 OUTPUT:	Cannot find PID file
2011-03-28 11:50:58.178 OUTPUT:	Stopping signer engine..
2011-03-28 11:50:58.178 OUTPUT:	Engine shut down.
2011-03-28 11:50:58.178 RunCommand(ps -e | grep enforcer)
2011-03-28 11:50:58.187 - runCommand: Process started, PID: 10455
2011-03-28 11:50:58.187 ERROR:	return code = 1
2011-03-28 11:50:58.187 RunCommand(ps -e | grep signer)
2011-03-28 11:50:58.196 - runCommand: Process started, PID: 10458
2011-03-28 11:50:58.196 ERROR:	return code = 1

2011-03-28 11:50:58.197 02088 Wait(10)

2011-03-28 11:50:58.197 Requirement: ODSCC40

2011-03-28 11:51:08.197 02090 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:51:08.197 Requirement: ODSCC40

2011-03-28 11:51:08.197 02096 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:51:08.197 Requirement: ODSCC40

2011-03-28 11:51:08.198 02099 PurgeHSM()
2011-03-28 11:51:08.198 Requirement: ODSCC40
2011-03-28 11:51:08.198 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:51:08.211 - runCommand: Process started, PID: 10461
2011-03-28 11:51:08.211 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:51:08.211 OUTPUT:	0 keys found.
2011-03-28 11:51:08.211 ERROR:	return code = 255

2011-03-28 11:51:08.211 02101 Wait(10)

2011-03-28 11:51:08.211 Requirement: ODSCC40

2011-03-28 11:51:18.212 02103 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-28 11:51:18.212 Requirement: ODSCC40

2011-03-28 11:51:18.212 02109 Wait(60)

2011-03-28 11:51:18.212 Requirement: ODSCC40

2011-03-28 11:52:18.213 02113 Wait(60)

2011-03-28 11:52:18.213 Requirement: ODSCC40

2011-03-28 11:53:18.213 02117 Wait(60)

2011-03-28 11:53:18.213 Requirement: ODSCC40

2011-03-28 11:54:18.214 02119 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-28 11:54:18.214 Requirement: ODSCC40

2011-03-28 11:54:18.214 02123 Wait(10)

2011-03-28 11:54:18.214 Requirement: ODSCC40

2011-03-28 11:54:28.214 02126 Comment: Change the configuration with predefined xml config files. Username is "wronguser".

2011-03-28 11:54:28.214 Requirement: ODSCC40

2011-03-28 11:54:28.215 02129 LoadConfig()
2011-03-28 11:54:28.215 Requirement: ODSCC40
2011-03-28 11:54:28.215 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T80_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:54:28.219 - runCommand: Process started, PID: 10465

2011-03-28 11:54:28.219 02132 LoadConfig()
2011-03-28 11:54:28.219 Requirement: ODSCC40
2011-03-28 11:54:28.219 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:54:28.223 - runCommand: Process started, PID: 10466

2011-03-28 11:54:28.223 02134 Comment: Run setup for rebuild of database

2011-03-28 11:54:28.224 Requirement: ODSCC40

2011-03-28 11:54:28.224 02138 Wait(20)

2011-03-28 11:54:28.224 Requirement: ODSCC40

2011-03-28 11:54:48.224 02140 Comment: Update all the configs.

2011-03-28 11:54:48.224 Requirement: ODSCC40

2011-03-28 11:54:48.225 02142 ODSSetup()
2011-03-28 11:54:48.225 Requirement: ODSCC40
2011-03-28 11:54:48.225 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:54:48.231 - runCommand: Process started, PID: 10467
2011-03-28 11:54:48.231 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-28 11:54:48.231 ERROR:	MySQL database host set to: localhost
2011-03-28 11:54:48.231 ERROR:	MySQL database port set to: 3306
2011-03-28 11:54:48.231 ERROR:	MySQL database schema set to: KASP
2011-03-28 11:54:48.231 ERROR:	MySQL database user set to: wronguser
2011-03-28 11:54:48.231 ERROR:	MySQL database password set
2011-03-28 11:54:48.231 ERROR:	return code = 255

2011-03-28 11:54:48.231 02144 Wait(10)

2011-03-28 11:54:48.231 Requirement: ODSCC40

2011-03-28 11:54:58.232 02146 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:54:58.232 Requirement: ODSCC40

2011-03-28 11:54:58.232 02148 Start()
2011-03-28 11:54:58.232 Requirement: ODSCC40
2011-03-28 11:54:58.232 RunCommand(ods-control start)
2011-03-28 11:54:58.233 - runCommand: Background process started, PID: 10470
2011-03-28 11:55:03.263 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:55:03.284 - runCommand: Process started, PID: 10493
2011-03-28 11:55:03.284 ERROR:	return code = 1
2011-03-28 11:55:03.284 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:55:03.300 - runCommand: Process started, PID: 10498
2011-03-28 11:55:03.300 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:55:03.300 02150 Wait(10)

2011-03-28 11:55:03.300 Requirement: ODSCC40

2011-03-28 11:55:13.301 02153 CheckLog()
2011-03-28 11:55:13.301 Requirement: ODSCC40
2011-03-28 11:55:13.331 FAILED:	(Check for Like) - Expected: Could not start signer Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC40T90: Use a different Username for both database and config and check if enforcer successfully connects

2011-03-28 11:55:13.331 02160 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:55:13.331 Requirement: ODSCC40

2011-03-28 11:55:13.331 02162 Stop()
2011-03-28 11:55:13.331 Requirement: ODSCC40
2011-03-28 11:55:13.331 RunCommand(ods-control stop)
2011-03-28 11:55:13.335 - runCommand: Process started, PID: 10511
2011-03-28 11:55:13.335 OUTPUT:	Stopping enforcer...
2011-03-28 11:55:13.335 OUTPUT:	Cannot find PID file
2011-03-28 11:55:13.335 OUTPUT:	Stopping signer engine..
2011-03-28 11:55:13.335 OUTPUT:	Engine shut down.
2011-03-28 11:55:13.335 RunCommand(ps -e | grep enforcer)
2011-03-28 11:55:13.344 - runCommand: Process started, PID: 10515
2011-03-28 11:55:13.345 ERROR:	return code = 1
2011-03-28 11:55:13.345 RunCommand(ps -e | grep signer)
2011-03-28 11:55:13.354 - runCommand: Process started, PID: 10518
2011-03-28 11:55:13.354 ERROR:	return code = 1

2011-03-28 11:55:13.354 02164 Wait(10)

2011-03-28 11:55:13.354 Requirement: ODSCC40

2011-03-28 11:55:23.354 02166 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:55:23.354 Requirement: ODSCC40

2011-03-28 11:55:23.355 02172 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:55:23.355 Requirement: ODSCC40

2011-03-28 11:55:23.355 02175 PurgeHSM()
2011-03-28 11:55:23.355 Requirement: ODSCC40
2011-03-28 11:55:23.355 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:55:23.369 - runCommand: Process started, PID: 10521
2011-03-28 11:55:23.369 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:55:23.369 OUTPUT:	0 keys found.
2011-03-28 11:55:23.369 ERROR:	return code = 255

2011-03-28 11:55:23.370 02177 Wait(10)

2011-03-28 11:55:23.370 Requirement: ODSCC40

2011-03-28 11:55:33.370 02179 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-28 11:55:33.370 Requirement: ODSCC40

2011-03-28 11:55:33.371 02185 Wait(60)

2011-03-28 11:55:33.371 Requirement: ODSCC40

2011-03-28 11:56:33.371 02189 Wait(60)

2011-03-28 11:56:33.371 Requirement: ODSCC40

2011-03-28 11:57:33.372 02193 Wait(60)

2011-03-28 11:57:33.372 Requirement: ODSCC40

2011-03-28 11:58:33.372 02195 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-28 11:58:33.372 Requirement: ODSCC40

2011-03-28 11:58:33.373 02199 Wait(10)

2011-03-28 11:58:33.373 Requirement: ODSCC40

2011-03-28 11:58:43.373 02202 Comment: Change the configuration with predefined xml config files. Username is "gooduser".

2011-03-28 11:58:43.373 Requirement: ODSCC40

2011-03-28 11:58:43.373 02205 LoadConfig()
2011-03-28 11:58:43.373 Requirement: ODSCC40
2011-03-28 11:58:43.373 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T90_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 11:58:43.377 - runCommand: Process started, PID: 10525

2011-03-28 11:58:43.378 02208 LoadConfig()
2011-03-28 11:58:43.378 Requirement: ODSCC40
2011-03-28 11:58:43.378 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 11:58:43.382 - runCommand: Process started, PID: 10526

2011-03-28 11:58:43.382 02210 Comment: Run setup for rebuild of database

2011-03-28 11:58:43.382 Requirement: ODSCC40

2011-03-28 11:58:43.382 02214 Wait(20)

2011-03-28 11:58:43.382 Requirement: ODSCC40

2011-03-28 11:59:03.383 02216 Comment: Update all the configs.

2011-03-28 11:59:03.383 Requirement: ODSCC40

2011-03-28 11:59:03.383 02218 ODSSetup()
2011-03-28 11:59:03.383 Requirement: ODSCC40
2011-03-28 11:59:03.383 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 11:59:03.389 - runCommand: Process started, PID: 10530
2011-03-28 11:59:03.390 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-28 11:59:03.390 ERROR:	MySQL database host set to: localhost
2011-03-28 11:59:03.390 ERROR:	MySQL database port set to: 3306
2011-03-28 11:59:03.390 ERROR:	MySQL database schema set to: KASPTEST2
2011-03-28 11:59:03.390 ERROR:	MySQL database user set to: gooduser
2011-03-28 11:59:03.390 ERROR:	MySQL database password set
2011-03-28 11:59:03.390 ERROR:	return code = 255

2011-03-28 11:59:03.390 02220 Wait(10)

2011-03-28 11:59:03.390 Requirement: ODSCC40

2011-03-28 11:59:13.390 02222 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 11:59:13.391 Requirement: ODSCC40

2011-03-28 11:59:13.391 02224 Start()
2011-03-28 11:59:13.391 Requirement: ODSCC40
2011-03-28 11:59:13.391 RunCommand(ods-control start)
2011-03-28 11:59:13.392 - runCommand: Background process started, PID: 10533
2011-03-28 11:59:18.424 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 11:59:18.443 - runCommand: Process started, PID: 10555
2011-03-28 11:59:18.443 ERROR:	return code = 1
2011-03-28 11:59:18.443 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 11:59:18.460 - runCommand: Process started, PID: 10560
2011-03-28 11:59:18.460 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 11:59:18.460 02226 Wait(10)

2011-03-28 11:59:18.460 Requirement: ODSCC40

2011-03-28 11:59:28.461 02229 CheckLog()
2011-03-28 11:59:28.461 Requirement: ODSCC40
2011-03-28 11:59:28.494 PASSED:	(Check for Like) - Expected: signer engine started Found: Mar 28 11:59:18 DEVELOPER15 ods-signerd: signer engine started

-------------------------------------------------------------------------------
Testcase - ODSCC40T100: Use a different Password for database and check if enforcer fails to connect

2011-03-28 11:59:28.494 02238 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 11:59:28.494 Requirement: ODSCC40

2011-03-28 11:59:28.495 02240 Stop()
2011-03-28 11:59:28.495 Requirement: ODSCC40
2011-03-28 11:59:28.495 RunCommand(ods-control stop)
2011-03-28 11:59:28.498 - runCommand: Process started, PID: 10573
2011-03-28 11:59:28.498 OUTPUT:	Stopping enforcer...
2011-03-28 11:59:28.498 OUTPUT:	Cannot find PID file
2011-03-28 11:59:28.498 OUTPUT:	Stopping signer engine..
2011-03-28 11:59:28.498 OUTPUT:	Engine shut down.
2011-03-28 11:59:28.498 RunCommand(ps -e | grep enforcer)
2011-03-28 11:59:28.508 - runCommand: Process started, PID: 10577
2011-03-28 11:59:28.508 ERROR:	return code = 1
2011-03-28 11:59:28.508 RunCommand(ps -e | grep signer)
2011-03-28 11:59:28.517 - runCommand: Process started, PID: 10580
2011-03-28 11:59:28.517 ERROR:	return code = 1

2011-03-28 11:59:28.517 02242 Wait(10)

2011-03-28 11:59:28.517 Requirement: ODSCC40

2011-03-28 11:59:38.518 02244 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 11:59:38.518 Requirement: ODSCC40

2011-03-28 11:59:38.518 02250 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 11:59:38.518 Requirement: ODSCC40

2011-03-28 11:59:38.519 02253 PurgeHSM()
2011-03-28 11:59:38.519 Requirement: ODSCC40
2011-03-28 11:59:38.519 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 11:59:38.533 - runCommand: Process started, PID: 10583
2011-03-28 11:59:38.533 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 11:59:38.533 OUTPUT:	0 keys found.
2011-03-28 11:59:38.533 ERROR:	return code = 255

2011-03-28 11:59:38.533 02255 Wait(10)

2011-03-28 11:59:38.533 Requirement: ODSCC40

2011-03-28 11:59:48.533 02257 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-28 11:59:48.534 Requirement: ODSCC40

2011-03-28 11:59:48.534 02263 Wait(60)

2011-03-28 11:59:48.534 Requirement: ODSCC40

2011-03-28 12:00:48.534 02267 Wait(60)

2011-03-28 12:00:48.534 Requirement: ODSCC40

2011-03-28 12:01:48.535 02271 Wait(60)

2011-03-28 12:01:48.535 Requirement: ODSCC40

2011-03-28 12:02:48.535 02273 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-28 12:02:48.535 Requirement: ODSCC40

2011-03-28 12:02:48.536 02277 Wait(10)

2011-03-28 12:02:48.536 Requirement: ODSCC40

2011-03-28 12:02:58.536 02280 Comment: Change the configuration with predefined xml config files. Password changed to "456abc".

2011-03-28 12:02:58.536 Requirement: ODSCC40

2011-03-28 12:02:58.537 02283 LoadConfig()
2011-03-28 12:02:58.537 Requirement: ODSCC40
2011-03-28 12:02:58.537 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T100_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:02:58.541 - runCommand: Process started, PID: 10593

2011-03-28 12:02:58.541 02286 LoadConfig()
2011-03-28 12:02:58.541 Requirement: ODSCC40
2011-03-28 12:02:58.541 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 12:02:58.545 - runCommand: Process started, PID: 10594

2011-03-28 12:02:58.545 02288 Comment: Run setup for rebuild of database

2011-03-28 12:02:58.545 Requirement: ODSCC40

2011-03-28 12:02:58.546 02292 Wait(20)

2011-03-28 12:02:58.546 Requirement: ODSCC40

2011-03-28 12:03:18.546 02294 Comment: Update all the configs.

2011-03-28 12:03:18.546 Requirement: ODSCC40

2011-03-28 12:03:18.547 02296 ODSSetup()
2011-03-28 12:03:18.547 Requirement: ODSCC40
2011-03-28 12:03:18.547 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:03:18.553 - runCommand: Process started, PID: 10595
2011-03-28 12:03:18.553 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-28 12:03:18.553 ERROR:	MySQL database host set to: localhost
2011-03-28 12:03:18.553 ERROR:	MySQL database port set to: 3306
2011-03-28 12:03:18.553 ERROR:	MySQL database schema set to: KASPTEST2
2011-03-28 12:03:18.553 ERROR:	MySQL database user set to: gooduser
2011-03-28 12:03:18.553 ERROR:	MySQL database password set
2011-03-28 12:03:18.553 ERROR:	return code = 255

2011-03-28 12:03:18.553 02298 Wait(10)

2011-03-28 12:03:18.553 Requirement: ODSCC40

2011-03-28 12:03:28.554 02300 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 12:03:28.554 Requirement: ODSCC40

2011-03-28 12:03:28.554 02302 Start()
2011-03-28 12:03:28.554 Requirement: ODSCC40
2011-03-28 12:03:28.554 RunCommand(ods-control start)
2011-03-28 12:03:28.555 - runCommand: Background process started, PID: 10598
2011-03-28 12:03:33.585 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 12:03:33.604 - runCommand: Process started, PID: 10621
2011-03-28 12:03:33.604 ERROR:	return code = 1
2011-03-28 12:03:33.604 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 12:03:33.625 - runCommand: Process started, PID: 10626
2011-03-28 12:03:33.625 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 12:03:33.625 02304 Wait(10)

2011-03-28 12:03:33.625 Requirement: ODSCC40

2011-03-28 12:03:43.626 02307 CheckLog()
2011-03-28 12:03:43.626 Requirement: ODSCC40
2011-03-28 12:03:43.656 FAILED:	(Check for Like) - Expected: Could not start signer Found: 

-------------------------------------------------------------------------------
Testcase - ODSCC40T110: Use a different Password name for both database and config and check if enforcer successfully connects

2011-03-28 12:03:43.656 02317 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 12:03:43.656 Requirement: ODSCC40

2011-03-28 12:03:43.657 02319 Stop()
2011-03-28 12:03:43.657 Requirement: ODSCC40
2011-03-28 12:03:43.657 RunCommand(ods-control stop)
2011-03-28 12:03:43.661 - runCommand: Process started, PID: 10639
2011-03-28 12:03:43.661 OUTPUT:	Stopping enforcer...
2011-03-28 12:03:43.661 OUTPUT:	Cannot find PID file
2011-03-28 12:03:43.661 OUTPUT:	Stopping signer engine..
2011-03-28 12:03:43.661 RunCommand(ps -e | grep enforcer)
2011-03-28 12:03:43.670 - runCommand: Process started, PID: 10643
2011-03-28 12:03:43.670 ERROR:	return code = 1
2011-03-28 12:03:43.670 RunCommand(ps -e | grep signer)
2011-03-28 12:03:43.680 - runCommand: Process started, PID: 10646
2011-03-28 12:03:43.680 ERROR:	return code = 1

2011-03-28 12:03:43.680 02321 Wait(10)

2011-03-28 12:03:43.680 Requirement: ODSCC40

2011-03-28 12:03:53.680 02323 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 12:03:53.680 Requirement: ODSCC40

2011-03-28 12:03:53.681 02329 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 12:03:53.681 Requirement: ODSCC40

2011-03-28 12:03:53.681 02332 PurgeHSM()
2011-03-28 12:03:53.681 Requirement: ODSCC40
2011-03-28 12:03:53.681 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 12:03:53.693 - runCommand: Process started, PID: 10649
2011-03-28 12:03:53.693 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 12:03:53.693 OUTPUT:	0 keys found.
2011-03-28 12:03:53.693 ERROR:	return code = 255

2011-03-28 12:03:53.693 02334 Wait(10)

2011-03-28 12:03:53.693 Requirement: ODSCC40

2011-03-28 12:04:03.694 02336 Comment: Rebuild ODS with MySQL database instead of SQLlite

2011-03-28 12:04:03.694 Requirement: ODSCC40

2011-03-28 12:04:03.694 02342 Wait(60)

2011-03-28 12:04:03.694 Requirement: ODSCC40

2011-03-28 12:05:03.695 02346 Wait(60)

2011-03-28 12:05:03.695 Requirement: ODSCC40

2011-03-28 12:06:03.695 02350 Wait(60)

2011-03-28 12:06:03.695 Requirement: ODSCC40

2011-03-28 12:07:03.696 02352 Comment: After installation, no update of the  the original mysql config file is needed. Port is standard: 3306 port. Start mySQL.

2011-03-28 12:07:03.696 Requirement: ODSCC40

2011-03-28 12:07:03.696 02356 Wait(10)

2011-03-28 12:07:03.696 Requirement: ODSCC40

2011-03-28 12:07:13.697 02359 Comment: Change the configuration with predefined xml config files. Password changed to "123abc".

2011-03-28 12:07:13.697 Requirement: ODSCC40

2011-03-28 12:07:13.697 02362 LoadConfig()
2011-03-28 12:07:13.697 Requirement: ODSCC40
2011-03-28 12:07:13.697 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC40T110_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:07:13.701 - runCommand: Process started, PID: 10653

2011-03-28 12:07:13.702 02365 LoadConfig()
2011-03-28 12:07:13.702 Requirement: ODSCC40
2011-03-28 12:07:13.702 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 12:07:13.705 - runCommand: Process started, PID: 10654

2011-03-28 12:07:13.706 02367 Comment: Run setup for rebuild of database

2011-03-28 12:07:13.706 Requirement: ODSCC40

2011-03-28 12:07:13.706 02371 Wait(20)

2011-03-28 12:07:13.706 Requirement: ODSCC40

2011-03-28 12:07:33.707 02373 Comment: Update all the configs.

2011-03-28 12:07:33.707 Requirement: ODSCC40

2011-03-28 12:07:33.707 02375 ODSSetup()
2011-03-28 12:07:33.707 Requirement: ODSCC40
2011-03-28 12:07:33.707 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:07:33.713 - runCommand: Process started, PID: 10655
2011-03-28 12:07:33.713 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] Error: database in config file does not match libksm
2011-03-28 12:07:33.713 ERROR:	MySQL database host set to: localhost
2011-03-28 12:07:33.713 ERROR:	MySQL database port set to: 3306
2011-03-28 12:07:33.713 ERROR:	MySQL database schema set to: KASP
2011-03-28 12:07:33.713 ERROR:	MySQL database user set to: 
2011-03-28 12:07:33.713 ERROR:	MySQL database password set
2011-03-28 12:07:33.713 ERROR:	return code = 255

2011-03-28 12:07:33.714 02377 Wait(10)

2011-03-28 12:07:33.714 Requirement: ODSCC40

2011-03-28 12:07:43.714 02379 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 12:07:43.714 Requirement: ODSCC40

2011-03-28 12:07:43.714 02381 Start()
2011-03-28 12:07:43.714 Requirement: ODSCC40
2011-03-28 12:07:43.714 RunCommand(ods-control start)
2011-03-28 12:07:43.716 - runCommand: Background process started, PID: 10658
2011-03-28 12:07:48.747 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 12:07:48.759 - runCommand: Process started, PID: 10681
2011-03-28 12:07:48.759 ERROR:	return code = 1
2011-03-28 12:07:48.759 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 12:07:48.777 - runCommand: Process started, PID: 10686
2011-03-28 12:07:48.778 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 12:07:48.778 02383 Wait(10)

2011-03-28 12:07:48.778 Requirement: ODSCC40

2011-03-28 12:07:58.778 02386 CheckLog()
2011-03-28 12:07:58.778 Requirement: ODSCC40
2011-03-28 12:07:58.810 PASSED:	(Check for Like) - Expected: signer engine started Found: Mar 28 12:07:48 DEVELOPER15 ods-signerd: signer engine started
Testcondition - ODSCC50: The configuration of signer settings located in conf.xml should operate according to requirements and intentions
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSCC50T10: Use privileges test:test for signer in config only and check if signer fails to run

2011-03-28 12:07:58.810 02393 Comment: Privileges have been adjusted for the signer in the conf.xml. User = opendnssec; Group = opendnssec. This user and group do not have acces to the correct folder.

2011-03-28 12:07:58.810 Requirement: ODSCC50

2011-03-28 12:07:58.811 02395 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 12:07:58.811 Requirement: ODSCC50

2011-03-28 12:07:58.811 02397 Stop()
2011-03-28 12:07:58.811 Requirement: ODSCC50
2011-03-28 12:07:58.811 RunCommand(ods-control stop)
2011-03-28 12:07:58.815 - runCommand: Process started, PID: 10699
2011-03-28 12:07:58.815 OUTPUT:	Stopping enforcer...
2011-03-28 12:07:58.815 OUTPUT:	Cannot find PID file
2011-03-28 12:07:58.815 OUTPUT:	Stopping signer engine..
2011-03-28 12:07:58.815 OUTPUT:	Engine shut down.
2011-03-28 12:07:58.815 RunCommand(ps -e | grep enforcer)
2011-03-28 12:07:58.825 - runCommand: Process started, PID: 10703
2011-03-28 12:07:58.825 ERROR:	return code = 1
2011-03-28 12:07:58.825 RunCommand(ps -e | grep signer)
2011-03-28 12:07:58.834 - runCommand: Process started, PID: 10706
2011-03-28 12:07:58.834 ERROR:	return code = 1

2011-03-28 12:07:58.834 02399 Wait(10)

2011-03-28 12:07:58.834 Requirement: ODSCC50

2011-03-28 12:08:08.834 02401 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 12:08:08.834 Requirement: ODSCC50

2011-03-28 12:08:08.835 02407 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 12:08:08.835 Requirement: ODSCC50

2011-03-28 12:08:08.835 02410 PurgeHSM()
2011-03-28 12:08:08.835 Requirement: ODSCC50
2011-03-28 12:08:08.835 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 12:08:08.848 - runCommand: Process started, PID: 10709
2011-03-28 12:08:08.848 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 12:08:08.848 OUTPUT:	0 keys found.
2011-03-28 12:08:08.848 ERROR:	return code = 255

2011-03-28 12:08:08.848 02412 Wait(10)

2011-03-28 12:08:08.848 Requirement: ODSCC50

2011-03-28 12:08:18.849 02414 Comment: Rebuild ODS with SQLlite database.

2011-03-28 12:08:18.849 Requirement: ODSCC50

2011-03-28 12:08:18.849 02420 Wait(60)

2011-03-28 12:08:18.849 Requirement: ODSCC50

2011-03-28 12:09:18.849 02424 Wait(60)

2011-03-28 12:09:18.849 Requirement: ODSCC50

2011-03-28 12:10:18.850 02428 Wait(60)

2011-03-28 12:10:18.850 Requirement: ODSCC50

2011-03-28 12:11:18.850 02431 Comment: Change the configuration with predefined xml config files.

2011-03-28 12:11:18.850 Requirement: ODSCC50

2011-03-28 12:11:18.851 02434 LoadConfig()
2011-03-28 12:11:18.851 Requirement: ODSCC50
2011-03-28 12:11:18.851 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:11:18.855 - runCommand: Process started, PID: 10713

2011-03-28 12:11:18.855 02437 LoadConfig()
2011-03-28 12:11:18.855 Requirement: ODSCC50
2011-03-28 12:11:18.855 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 12:11:18.859 - runCommand: Process started, PID: 10714

2011-03-28 12:11:18.860 02439 Comment: Run setup for rebuild of database

2011-03-28 12:11:18.860 Requirement: ODSCC50

2011-03-28 12:11:18.860 02443 Wait(20)

2011-03-28 12:11:18.860 Requirement: ODSCC50

2011-03-28 12:11:38.860 02445 Comment: Update all the configs.

2011-03-28 12:11:38.860 Requirement: ODSCC50

2011-03-28 12:11:38.861 02447 ODSSetup()
2011-03-28 12:11:38.861 Requirement: ODSCC50
2011-03-28 12:11:38.861 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:11:49.175 - runCommand: Process started, PID: 10716
2011-03-28 12:11:49.175 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 12:11:49.175 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 12:11:49.175 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 12:11:49.175 OUTPUT:	Repository SoftHSM found
2011-03-28 12:11:49.175 OUTPUT:	No Maximum Capacity set.
2011-03-28 12:11:49.175 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 12:11:49.175 OUTPUT:	Policy default2 found
2011-03-28 12:11:49.175 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 12:11:49.175 OUTPUT:	Policy default found
2011-03-28 12:11:49.175 OUTPUT:	Zone ods found
2011-03-28 12:11:49.175 OUTPUT:	Policy set to default.
2011-03-28 12:11:49.175 OUTPUT:	Added zone ods to database
2011-03-28 12:11:49.175 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 12:11:49.175 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 12:11:49.175 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 12:11:49.176 02449 Wait(10)

2011-03-28 12:11:49.176 Requirement: ODSCC50

2011-03-28 12:11:59.176 02451 Comment: Change the configuration with predefined xml config files for this testcase.

2011-03-28 12:11:59.176 Requirement: ODSCC50

2011-03-28 12:11:59.177 02454 LoadConfig()
2011-03-28 12:11:59.177 Requirement: ODSCC50
2011-03-28 12:11:59.177 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:11:59.181 - runCommand: Process started, PID: 10729

2011-03-28 12:11:59.181 02457 LoadConfig()
2011-03-28 12:11:59.181 Requirement: ODSCC50
2011-03-28 12:11:59.181 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 12:11:59.185 - runCommand: Process started, PID: 10730

2011-03-28 12:11:59.185 02459 Comment: Update all the configs.

2011-03-28 12:11:59.185 Requirement: ODSCC50

2011-03-28 12:11:59.186 02461 ODSSetup()
2011-03-28 12:11:59.186 Requirement: ODSCC50
2011-03-28 12:11:59.186 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:12:09.798 - runCommand: Process started, PID: 10731
2011-03-28 12:12:09.798 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 12:12:09.798 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 12:12:09.798 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 12:12:09.798 OUTPUT:	Repository SoftHSM found
2011-03-28 12:12:09.798 OUTPUT:	No Maximum Capacity set.
2011-03-28 12:12:09.798 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 12:12:09.798 OUTPUT:	Policy default2 found
2011-03-28 12:12:09.798 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 12:12:09.798 OUTPUT:	Policy default found
2011-03-28 12:12:09.798 OUTPUT:	Zone ods found
2011-03-28 12:12:09.798 OUTPUT:	Policy set to default.
2011-03-28 12:12:09.798 OUTPUT:	Added zone ods to database
2011-03-28 12:12:09.798 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 12:12:09.798 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 12:12:09.798 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 12:12:09.798 02463 Wait(10)

2011-03-28 12:12:09.798 Requirement: ODSCC50

2011-03-28 12:12:19.799 02466 CheckLog()
2011-03-28 12:12:19.799 Requirement: ODSCC50

2011-03-28 12:12:19.832 02468 Comment: Change the configuration with predefined original conf.xml file.

2011-03-28 12:12:19.832 Requirement: ODSCC50

2011-03-28 12:12:19.832 02471 LoadConfig()
2011-03-28 12:12:19.832 Requirement: ODSCC50
2011-03-28 12:12:19.832 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:12:19.835 - runCommand: Process started, PID: 10744

2011-03-28 12:12:19.835 02473 Comment: Update all the configs.

2011-03-28 12:12:19.835 Requirement: ODSCC50

2011-03-28 12:12:19.836 02475 ODSSetup()
2011-03-28 12:12:19.836 Requirement: ODSCC50
2011-03-28 12:12:19.836 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:12:30.279 - runCommand: Process started, PID: 10745
2011-03-28 12:12:30.279 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 12:12:30.279 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 12:12:30.279 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 12:12:30.279 OUTPUT:	Repository SoftHSM found
2011-03-28 12:12:30.279 OUTPUT:	No Maximum Capacity set.
2011-03-28 12:12:30.279 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 12:12:30.279 OUTPUT:	Policy default2 found
2011-03-28 12:12:30.279 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 12:12:30.279 OUTPUT:	Policy default found
2011-03-28 12:12:30.279 OUTPUT:	Zone ods found
2011-03-28 12:12:30.279 OUTPUT:	Policy set to default.
2011-03-28 12:12:30.279 OUTPUT:	Added zone ods to database
2011-03-28 12:12:30.279 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 12:12:30.279 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 12:12:30.279 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSCC50T20: Use privileges test:test for signer and /tmp and check if signer runs without errors

2011-03-28 12:12:30.280 02480 Comment: Privileges have been adjusted for the signer in the conf.xml. User = ods; Group = ods. This user and group do not have acces to the correct folder.

2011-03-28 12:12:30.280 Requirement: ODSCC50

2011-03-28 12:12:30.280 02482 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 12:12:30.281 Requirement: ODSCC50

2011-03-28 12:12:30.281 02484 Stop()
2011-03-28 12:12:30.281 Requirement: ODSCC50
2011-03-28 12:12:30.281 RunCommand(ods-control stop)
2011-03-28 12:12:30.286 - runCommand: Process started, PID: 10758
2011-03-28 12:12:30.286 OUTPUT:	Stopping enforcer...
2011-03-28 12:12:30.286 OUTPUT:	Cannot find PID file
2011-03-28 12:12:30.286 OUTPUT:	Stopping signer engine..
2011-03-28 12:12:30.286 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 12:12:30.286 ERROR:	return code = 1
2011-03-28 12:12:30.286 RunCommand(ps -e | grep enforcer)
2011-03-28 12:12:30.301 - runCommand: Process started, PID: 10761
2011-03-28 12:12:30.301 ERROR:	return code = 1
2011-03-28 12:12:30.301 RunCommand(ps -e | grep signer)
2011-03-28 12:12:30.311 - runCommand: Process started, PID: 10764
2011-03-28 12:12:30.311 ERROR:	return code = 1

2011-03-28 12:12:30.311 02486 Wait(10)

2011-03-28 12:12:30.311 Requirement: ODSCC50

2011-03-28 12:12:40.312 02488 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 12:12:40.312 Requirement: ODSCC50

2011-03-28 12:12:40.312 02494 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 12:12:40.312 Requirement: ODSCC50

2011-03-28 12:12:40.312 02497 PurgeHSM()
2011-03-28 12:12:40.312 Requirement: ODSCC50
2011-03-28 12:12:40.312 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 12:12:40.326 - runCommand: Process started, PID: 10767
2011-03-28 12:12:40.326 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 12:12:40.326 OUTPUT:	0 keys found.
2011-03-28 12:12:40.326 ERROR:	return code = 255

2011-03-28 12:12:40.326 02499 Wait(10)

2011-03-28 12:12:40.326 Requirement: ODSCC50

2011-03-28 12:12:50.327 02501 Comment: Change the rights for the kasp.db file to user ods.

2011-03-28 12:12:50.327 Requirement: ODSCC50

2011-03-28 12:12:50.327 02507 Comment: Change the configuration with predefined xml config files.

2011-03-28 12:12:50.327 Requirement: ODSCC50

2011-03-28 12:12:50.327 02510 LoadConfig()
2011-03-28 12:12:50.327 Requirement: ODSCC50
2011-03-28 12:12:50.327 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T20_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:12:50.331 - runCommand: Process started, PID: 10771

2011-03-28 12:12:50.332 02513 LoadConfig()
2011-03-28 12:12:50.332 Requirement: ODSCC50
2011-03-28 12:12:50.332 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 12:12:50.336 - runCommand: Process started, PID: 10772

2011-03-28 12:12:50.336 02515 Comment: Update all the configs.

2011-03-28 12:12:50.336 Requirement: ODSCC50

2011-03-28 12:12:50.336 02517 ODSSetup()
2011-03-28 12:12:50.336 Requirement: ODSCC50
2011-03-28 12:12:50.336 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:13:00.638 - runCommand: Process started, PID: 10773
2011-03-28 12:13:00.638 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 12:13:00.638 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 12:13:00.638 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 12:13:00.638 OUTPUT:	Repository SoftHSM found
2011-03-28 12:13:00.638 OUTPUT:	No Maximum Capacity set.
2011-03-28 12:13:00.639 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 12:13:00.639 OUTPUT:	Policy default2 found
2011-03-28 12:13:00.639 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 12:13:00.639 OUTPUT:	Policy default found
2011-03-28 12:13:00.639 OUTPUT:	Zone ods found
2011-03-28 12:13:00.639 OUTPUT:	Policy set to default.
2011-03-28 12:13:00.639 OUTPUT:	Added zone ods to database
2011-03-28 12:13:00.639 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 12:13:00.639 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 12:13:00.639 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 12:13:00.639 02519 Wait(10)

2011-03-28 12:13:00.639 Requirement: ODSCC50

2011-03-28 12:13:10.640 02521 Comment: Start enforcer

2011-03-28 12:13:10.640 Requirement: ODSCC50

2011-03-28 12:13:10.640 02523 Wait(10)

2011-03-28 12:13:10.640 Requirement: ODSCC50

2011-03-28 12:13:20.640 02528 Wait(15)

2011-03-28 12:13:20.640 Requirement: ODSCC50

2011-03-28 12:13:35.641 02531 CheckLog()
2011-03-28 12:13:35.641 Requirement: ODSCC50

2011-03-28 12:13:35.673 02535 Stop()
2011-03-28 12:13:35.673 Requirement: ODSCC50
2011-03-28 12:13:35.673 RunCommand(ods-control stop)
2011-03-28 12:13:35.677 - runCommand: Process started, PID: 10786
2011-03-28 12:13:35.677 OUTPUT:	Stopping enforcer...
2011-03-28 12:13:35.677 OUTPUT:	Cannot find PID file
2011-03-28 12:13:35.677 OUTPUT:	Stopping signer engine..
2011-03-28 12:13:35.677 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 12:13:35.677 ERROR:	return code = 1
2011-03-28 12:13:35.677 RunCommand(ps -e | grep enforcer)
2011-03-28 12:13:35.686 - runCommand: Process started, PID: 10789
2011-03-28 12:13:35.686 ERROR:	return code = 1
2011-03-28 12:13:35.686 RunCommand(ps -e | grep signer)
2011-03-28 12:13:35.695 - runCommand: Process started, PID: 10792
2011-03-28 12:13:35.695 ERROR:	return code = 1

2011-03-28 12:13:35.696 02537 Comment: Change the configuration with predefined original conf.xml file and the original rights for the kasp.db file.

2011-03-28 12:13:35.696 Requirement: ODSCC50

2011-03-28 12:13:35.696 02544 LoadConfig()
2011-03-28 12:13:35.696 Requirement: ODSCC50
2011-03-28 12:13:35.696 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:13:35.698 - runCommand: Process started, PID: 10795

2011-03-28 12:13:35.699 02546 Comment: Update all the configs.

2011-03-28 12:13:35.699 Requirement: ODSCC50

2011-03-28 12:13:35.699 02548 ODSSetup()
2011-03-28 12:13:35.699 Requirement: ODSCC50
2011-03-28 12:13:35.699 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:13:46.140 - runCommand: Process started, PID: 10796
2011-03-28 12:13:46.140 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 12:13:46.140 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 12:13:46.140 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 12:13:46.140 OUTPUT:	Repository SoftHSM found
2011-03-28 12:13:46.140 OUTPUT:	No Maximum Capacity set.
2011-03-28 12:13:46.140 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 12:13:46.140 OUTPUT:	Policy default2 found
2011-03-28 12:13:46.140 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 12:13:46.140 OUTPUT:	Policy default found
2011-03-28 12:13:46.140 OUTPUT:	Zone ods found
2011-03-28 12:13:46.140 OUTPUT:	Policy set to default.
2011-03-28 12:13:46.140 OUTPUT:	Added zone ods to database
2011-03-28 12:13:46.140 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 12:13:46.140 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 12:13:46.140 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSCC50T30: Change the /tmp location and change WorkingDirectory in conf.xml accordingly

2011-03-28 12:13:46.141 02553 Comment: Working directory has been adjusted in the conf.xml. Working directory now is: var/opendnssec/temporary. Make sure that directory exists before running this testcase, if not it will be created in this testcase.

2011-03-28 12:13:46.141 Requirement: ODSCC50

2011-03-28 12:13:46.142 02555 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 12:13:46.142 Requirement: ODSCC50

2011-03-28 12:13:46.142 02557 Stop()
2011-03-28 12:13:46.142 Requirement: ODSCC50
2011-03-28 12:13:46.142 RunCommand(ods-control stop)
2011-03-28 12:13:46.147 - runCommand: Process started, PID: 10809
2011-03-28 12:13:46.147 OUTPUT:	Stopping enforcer...
2011-03-28 12:13:46.147 OUTPUT:	Cannot find PID file
2011-03-28 12:13:46.147 OUTPUT:	Stopping signer engine..
2011-03-28 12:13:46.147 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 12:13:46.147 ERROR:	return code = 1
2011-03-28 12:13:46.147 RunCommand(ps -e | grep enforcer)
2011-03-28 12:13:46.163 - runCommand: Process started, PID: 10812
2011-03-28 12:13:46.163 ERROR:	return code = 1
2011-03-28 12:13:46.163 RunCommand(ps -e | grep signer)
2011-03-28 12:13:46.177 - runCommand: Process started, PID: 10815
2011-03-28 12:13:46.178 ERROR:	return code = 1

2011-03-28 12:13:46.178 02559 Wait(10)

2011-03-28 12:13:46.178 Requirement: ODSCC50

2011-03-28 12:13:56.178 02561 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 12:13:56.178 Requirement: ODSCC50

2011-03-28 12:13:56.179 02567 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 12:13:56.179 Requirement: ODSCC50

2011-03-28 12:13:56.179 02570 PurgeHSM()
2011-03-28 12:13:56.179 Requirement: ODSCC50
2011-03-28 12:13:56.179 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 12:13:56.193 - runCommand: Process started, PID: 10818
2011-03-28 12:13:56.193 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 12:13:56.193 OUTPUT:	0 keys found.
2011-03-28 12:13:56.193 ERROR:	return code = 255

2011-03-28 12:13:56.194 02572 Wait(10)

2011-03-28 12:13:56.194 Requirement: ODSCC50

2011-03-28 12:14:06.194 02578 Comment: Change the configuration with predefined xml config files.

2011-03-28 12:14:06.194 Requirement: ODSCC50

2011-03-28 12:14:06.195 02581 LoadConfig()
2011-03-28 12:14:06.195 Requirement: ODSCC50
2011-03-28 12:14:06.195 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T30_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:14:06.199 - runCommand: Process started, PID: 10822

2011-03-28 12:14:06.199 02584 LoadConfig()
2011-03-28 12:14:06.199 Requirement: ODSCC50
2011-03-28 12:14:06.199 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 12:14:06.203 - runCommand: Process started, PID: 10823

2011-03-28 12:14:06.203 02586 Comment: Update all the configs.

2011-03-28 12:14:06.203 Requirement: ODSCC50

2011-03-28 12:14:06.204 02588 ODSSetup()
2011-03-28 12:14:06.204 Requirement: ODSCC50
2011-03-28 12:14:06.204 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:14:16.858 - runCommand: Process started, PID: 10824
2011-03-28 12:14:16.858 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 12:14:16.858 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 12:14:16.858 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 12:14:16.858 OUTPUT:	Repository SoftHSM found
2011-03-28 12:14:16.858 OUTPUT:	No Maximum Capacity set.
2011-03-28 12:14:16.858 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 12:14:16.858 OUTPUT:	Policy default2 found
2011-03-28 12:14:16.858 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 12:14:16.858 OUTPUT:	Policy default found
2011-03-28 12:14:16.858 OUTPUT:	Zone ods found
2011-03-28 12:14:16.858 OUTPUT:	Policy set to default.
2011-03-28 12:14:16.858 OUTPUT:	Added zone ods to database
2011-03-28 12:14:16.858 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 12:14:16.858 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 12:14:16.858 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 12:14:16.858 02590 Wait(10)

2011-03-28 12:14:16.858 Requirement: ODSCC50

2011-03-28 12:14:26.859 02592 Comment: Start enforcer

2011-03-28 12:14:26.859 Requirement: ODSCC50

2011-03-28 12:14:26.859 02594 Start()
2011-03-28 12:14:26.859 Requirement: ODSCC50
2011-03-28 12:14:26.859 RunCommand(ods-control start)
2011-03-28 12:14:26.861 - runCommand: Background process started, PID: 10837
2011-03-28 12:14:27.873 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 12:14:27.892 - runCommand: Process started, PID: 10853
2011-03-28 12:14:27.892 OUTPUT:	ods-enforcerd
2011-03-28 12:14:27.892 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 12:14:27.905 - runCommand: Process started, PID: 10866
2011-03-28 12:14:27.905 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 12:14:27.905 02596 Wait(10)

2011-03-28 12:14:27.905 Requirement: ODSCC50

2011-03-28 12:14:37.905 02601 Wait(15)

2011-03-28 12:14:37.906 Requirement: ODSCC50

2011-03-28 12:14:52.906 02605 Stop()
2011-03-28 12:14:52.906 Requirement: ODSCC50
2011-03-28 12:14:52.906 RunCommand(ods-control stop)
2011-03-28 12:14:53.916 - runCommand: Process started, PID: 10880
2011-03-28 12:14:53.916 OUTPUT:	Stopping enforcer...
2011-03-28 12:14:53.916 OUTPUT:	Stopping signer engine..
2011-03-28 12:14:53.916 OUTPUT:	Engine shut down.
2011-03-28 12:14:53.916 RunCommand(ps -e | grep enforcer)
2011-03-28 12:14:53.931 - runCommand: Process started, PID: 10886
2011-03-28 12:14:53.931 ERROR:	return code = 1
2011-03-28 12:14:53.931 RunCommand(ps -e | grep signer)
2011-03-28 12:14:53.947 - runCommand: Process started, PID: 10889
2011-03-28 12:14:53.947 ERROR:	return code = 1

2011-03-28 12:14:53.947 02608 CheckLog()
2011-03-28 12:14:53.947 Requirement: ODSCC50
2011-03-28 12:14:53.978 PASSED:	(Check for Like) - Expected: all done! Found: Mar 28 12:14:52 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

2011-03-28 12:14:53.978 02610 Comment: Check if the ods files are present in the new temporay folder.

2011-03-28 12:14:53.978 Requirement: ODSCC50

2011-03-28 12:14:53.978 02614 CheckFilePresent(ods.denial)
2011-03-28 12:14:53.978 Requirement: ODSCC50
2011-03-28 12:14:53.978 FAILED:	(Check for Equal) - Expected: ods.denial Found: 

2011-03-28 12:14:53.978 02616 CheckFilePresent(ods.dnskeys)
2011-03-28 12:14:53.978 Requirement: ODSCC50
2011-03-28 12:14:53.978 FAILED:	(Check for Equal) - Expected: ods.dnskeys Found: 

2011-03-28 12:14:53.979 02618 CheckFilePresent(ods.finalized)
2011-03-28 12:14:53.979 Requirement: ODSCC50
2011-03-28 12:14:53.979 FAILED:	(Check for Equal) - Expected: ods.finalized Found: 

2011-03-28 12:14:53.979 02620 CheckFilePresent(ods.rrsigs)
2011-03-28 12:14:53.979 Requirement: ODSCC50
2011-03-28 12:14:53.979 FAILED:	(Check for Equal) - Expected: ods.rrsigs Found: 

2011-03-28 12:14:53.979 02622 CheckFilePresent(ods.state)
2011-03-28 12:14:53.979 Requirement: ODSCC50
2011-03-28 12:14:53.979 FAILED:	(Check for Equal) - Expected: ods.state Found: 

2011-03-28 12:14:53.979 02624 CheckFilePresent(ods.sc)
2011-03-28 12:14:53.979 Requirement: ODSCC50
2011-03-28 12:14:53.979 FAILED:	(Check for Equal) - Expected: ods.sc Found: 

2011-03-28 12:14:53.980 02626 CheckFilePresent(ods.unsorted)
2011-03-28 12:14:53.980 Requirement: ODSCC50
2011-03-28 12:14:53.980 FAILED:	(Check for Equal) - Expected: ods.unsorted Found: 

2011-03-28 12:14:53.980 02628 CheckFilePresent(ods.task)
2011-03-28 12:14:53.980 Requirement: ODSCC50
2011-03-28 12:14:53.980 FAILED:	(Check for Equal) - Expected: ods.task Found: 

2011-03-28 12:14:53.980 02631 Comment: Change the configuration with predefined original conf.xml file.

2011-03-28 12:14:53.980 Requirement: ODSCC50

2011-03-28 12:14:53.980 02635 LoadConfig()
2011-03-28 12:14:53.980 Requirement: ODSCC50
2011-03-28 12:14:53.980 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:14:53.983 - runCommand: Process started, PID: 10892

2011-03-28 12:14:53.983 02637 Comment: Update all the configs.

2011-03-28 12:14:53.983 Requirement: ODSCC50

2011-03-28 12:14:53.983 02639 ODSSetup()
2011-03-28 12:14:53.983 Requirement: ODSCC50
2011-03-28 12:14:53.983 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:15:04.408 - runCommand: Process started, PID: 10893
2011-03-28 12:15:04.408 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 12:15:04.408 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 12:15:04.408 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 12:15:04.408 OUTPUT:	Repository SoftHSM found
2011-03-28 12:15:04.408 OUTPUT:	No Maximum Capacity set.
2011-03-28 12:15:04.408 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 12:15:04.409 OUTPUT:	Policy default2 found
2011-03-28 12:15:04.409 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 12:15:04.409 OUTPUT:	Policy default found
2011-03-28 12:15:04.409 OUTPUT:	Zone ods found
2011-03-28 12:15:04.409 OUTPUT:	Policy set to default.
2011-03-28 12:15:04.409 OUTPUT:	Added zone ods to database
2011-03-28 12:15:04.409 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 12:15:04.409 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 12:15:04.409 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSCC50T40: Change WorkerThreads to 1 and check if only 1 thread is used while signing

2011-03-28 12:15:04.410 02644 Comment: Number of working threads has been adjusted to 1 in the conf.xml.

2011-03-28 12:15:04.410 Requirement: ODSCC50

2011-03-28 12:15:04.410 02646 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 12:15:04.410 Requirement: ODSCC50

2011-03-28 12:15:04.410 02648 Stop()
2011-03-28 12:15:04.410 Requirement: ODSCC50
2011-03-28 12:15:04.410 RunCommand(ods-control stop)
2011-03-28 12:15:04.415 - runCommand: Process started, PID: 10906
2011-03-28 12:15:04.416 OUTPUT:	Stopping enforcer...
2011-03-28 12:15:04.416 OUTPUT:	Cannot find PID file
2011-03-28 12:15:04.416 OUTPUT:	Stopping signer engine..
2011-03-28 12:15:04.416 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 12:15:04.416 ERROR:	return code = 1
2011-03-28 12:15:04.416 RunCommand(ps -e | grep enforcer)
2011-03-28 12:15:04.431 - runCommand: Process started, PID: 10909
2011-03-28 12:15:04.431 ERROR:	return code = 1
2011-03-28 12:15:04.431 RunCommand(ps -e | grep signer)
2011-03-28 12:15:04.446 - runCommand: Process started, PID: 10912
2011-03-28 12:15:04.446 ERROR:	return code = 1

2011-03-28 12:15:04.447 02650 Wait(10)

2011-03-28 12:15:04.447 Requirement: ODSCC50

2011-03-28 12:15:14.447 02652 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 12:15:14.447 Requirement: ODSCC50

2011-03-28 12:15:14.447 02658 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 12:15:14.447 Requirement: ODSCC50

2011-03-28 12:15:14.448 02661 PurgeHSM()
2011-03-28 12:15:14.448 Requirement: ODSCC50
2011-03-28 12:15:14.448 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 12:15:14.877 - runCommand: Process started, PID: 10915
2011-03-28 12:15:14.877 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 12:15:14.877 OUTPUT:	2 keys found.
2011-03-28 12:15:14.877 OUTPUT:	
2011-03-28 12:15:14.877 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-28 12:15:14.877 OUTPUT:	Starting purge...
2011-03-28 12:15:14.877 OUTPUT:	Key remove successful: 94beac6a942d993921cbbc1d814bc739
2011-03-28 12:15:14.877 OUTPUT:	Key remove successful: 117b0c9eda761b1af005935b3e62f490
2011-03-28 12:15:14.877 OUTPUT:	Purge done.

2011-03-28 12:15:14.877 02663 Wait(10)

2011-03-28 12:15:14.878 Requirement: ODSCC50

2011-03-28 12:15:24.878 02665 Comment: Change the configuration with predefined xml config files.

2011-03-28 12:15:24.878 Requirement: ODSCC50

2011-03-28 12:15:24.878 02668 LoadConfig()
2011-03-28 12:15:24.878 Requirement: ODSCC50
2011-03-28 12:15:24.878 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T40_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:15:24.882 - runCommand: Process started, PID: 10919

2011-03-28 12:15:24.883 02671 LoadConfig()
2011-03-28 12:15:24.883 Requirement: ODSCC50
2011-03-28 12:15:24.883 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 12:15:24.887 - runCommand: Process started, PID: 10920

2011-03-28 12:15:24.887 02673 Comment: Update all the configs.

2011-03-28 12:15:24.887 Requirement: ODSCC50

2011-03-28 12:15:24.887 02675 ODSSetup()
2011-03-28 12:15:24.887 Requirement: ODSCC50
2011-03-28 12:15:24.887 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:15:35.201 - runCommand: Process started, PID: 10921
2011-03-28 12:15:35.201 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 12:15:35.201 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 12:15:35.201 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 12:15:35.201 OUTPUT:	Repository SoftHSM found
2011-03-28 12:15:35.201 OUTPUT:	No Maximum Capacity set.
2011-03-28 12:15:35.201 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 12:15:35.201 OUTPUT:	Policy default2 found
2011-03-28 12:15:35.201 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 12:15:35.201 OUTPUT:	Policy default found
2011-03-28 12:15:35.201 OUTPUT:	Zone ods found
2011-03-28 12:15:35.201 OUTPUT:	Policy set to default.
2011-03-28 12:15:35.201 OUTPUT:	Added zone ods to database
2011-03-28 12:15:35.201 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 12:15:35.201 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 12:15:35.201 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 12:15:35.202 02677 Wait(10)

2011-03-28 12:15:35.202 Requirement: ODSCC50

2011-03-28 12:15:45.202 02679 Comment: Start enforcer

2011-03-28 12:15:45.202 Requirement: ODSCC50

2011-03-28 12:15:45.202 02681 Start()
2011-03-28 12:15:45.202 Requirement: ODSCC50
2011-03-28 12:15:45.203 RunCommand(ods-control start)
2011-03-28 12:15:45.204 - runCommand: Background process started, PID: 10934
2011-03-28 12:15:46.222 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 12:15:46.236 - runCommand: Process started, PID: 10950
2011-03-28 12:15:46.236 OUTPUT:	ods-enforcerd
2011-03-28 12:15:46.236 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 12:15:46.254 - runCommand: Process started, PID: 10954
2011-03-28 12:15:46.254 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 12:15:46.254 02683 Wait(10)

2011-03-28 12:15:46.254 Requirement: ODSCC50

2011-03-28 12:15:56.255 02688 Comment: Check if the number of threads is according to the conf.xml, in this case 1 thread for the proces ods-signerd.

2011-03-28 12:15:56.255 Requirement: ODSCC50

2011-03-28 12:15:56.255 02692 Wait(2)

2011-03-28 12:15:56.255 Requirement: ODSCC50

2011-03-28 12:15:58.256 02696 Wait(2)

2011-03-28 12:15:58.256 Requirement: ODSCC50

2011-03-28 12:16:00.256 02700 Wait(2)

2011-03-28 12:16:00.256 Requirement: ODSCC50

2011-03-28 12:16:02.257 02704 Wait(2)

2011-03-28 12:16:02.257 Requirement: ODSCC50

2011-03-28 12:16:04.257 02708 Wait(2)

2011-03-28 12:16:04.257 Requirement: ODSCC50

2011-03-28 12:16:06.257 02713 Wait(30)

2011-03-28 12:16:06.258 Requirement: ODSCC50

2011-03-28 12:16:36.258 02716 CheckLog()
2011-03-28 12:16:36.258 Requirement: ODSCC50
2011-03-28 12:16:36.293 FAILED:	(Check for Like) - Expected: ods-signerd: cmdhandler: zone ods scheduled for immediate re-sign Found: 

2011-03-28 12:16:36.293 02718 Comment: Change the configuration with predefined original conf.xml file.

2011-03-28 12:16:36.294 Requirement: ODSCC50

2011-03-28 12:16:36.294 02721 LoadConfig()
2011-03-28 12:16:36.294 Requirement: ODSCC50
2011-03-28 12:16:36.294 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:16:36.296 - runCommand: Process started, PID: 10969

2011-03-28 12:16:36.297 02723 Comment: Update all the configs.

2011-03-28 12:16:36.297 Requirement: ODSCC50

2011-03-28 12:16:36.297 02725 ODSSetup()
2011-03-28 12:16:36.297 Requirement: ODSCC50
2011-03-28 12:16:36.297 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:16:46.756 - runCommand: Process started, PID: 10970
2011-03-28 12:16:46.756 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 12:16:46.756 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 12:16:46.756 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 12:16:46.756 OUTPUT:	Repository SoftHSM found
2011-03-28 12:16:46.756 OUTPUT:	No Maximum Capacity set.
2011-03-28 12:16:46.756 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 12:16:46.756 OUTPUT:	Policy default2 found
2011-03-28 12:16:46.756 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 12:16:46.756 OUTPUT:	Policy default found
2011-03-28 12:16:46.756 OUTPUT:	Zone ods found
2011-03-28 12:16:46.756 OUTPUT:	Policy set to default.
2011-03-28 12:16:46.756 OUTPUT:	Added zone ods to database
2011-03-28 12:16:46.756 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 12:16:46.756 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 12:16:46.756 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSCC50T50: Change WorkerThreads to 100 and check if 100 threads are used while signing

2011-03-28 12:16:46.757 02729 Comment: Number of working threads has been adjusted to 100 in the conf.xml.

2011-03-28 12:16:46.757 Requirement: ODSCC50

2011-03-28 12:16:46.758 02731 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 12:16:46.758 Requirement: ODSCC50

2011-03-28 12:16:46.758 02733 Stop()
2011-03-28 12:16:46.758 Requirement: ODSCC50
2011-03-28 12:16:46.758 RunCommand(ods-control stop)
2011-03-28 12:16:47.767 - runCommand: Process started, PID: 10983
2011-03-28 12:16:47.767 OUTPUT:	Stopping enforcer...
2011-03-28 12:16:47.767 OUTPUT:	Stopping signer engine..
2011-03-28 12:16:47.767 OUTPUT:	Engine shut down.
2011-03-28 12:16:47.767 RunCommand(ps -e | grep enforcer)
2011-03-28 12:16:47.782 - runCommand: Process started, PID: 10989
2011-03-28 12:16:47.783 ERROR:	return code = 1
2011-03-28 12:16:47.783 RunCommand(ps -e | grep signer)
2011-03-28 12:16:47.793 - runCommand: Process started, PID: 10992
2011-03-28 12:16:47.793 ERROR:	return code = 1

2011-03-28 12:16:47.793 02735 Wait(10)

2011-03-28 12:16:47.793 Requirement: ODSCC50

2011-03-28 12:16:57.794 02737 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 12:16:57.794 Requirement: ODSCC50

2011-03-28 12:16:57.794 02743 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 12:16:57.794 Requirement: ODSCC50

2011-03-28 12:16:57.794 02746 PurgeHSM()
2011-03-28 12:16:57.794 Requirement: ODSCC50
2011-03-28 12:16:57.794 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 12:16:58.191 - runCommand: Process started, PID: 10995
2011-03-28 12:16:58.191 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 12:16:58.191 OUTPUT:	2 keys found.
2011-03-28 12:16:58.191 OUTPUT:	
2011-03-28 12:16:58.191 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-28 12:16:58.191 OUTPUT:	Starting purge...
2011-03-28 12:16:58.191 OUTPUT:	Key remove successful: 2e7dc29ffa300d15f68053d3d5784016
2011-03-28 12:16:58.191 OUTPUT:	Key remove successful: 88dbea35f2d64d5afa04e6c4ea2522fa
2011-03-28 12:16:58.191 OUTPUT:	Purge done.

2011-03-28 12:16:58.191 02748 Wait(10)

2011-03-28 12:16:58.191 Requirement: ODSCC50

2011-03-28 12:17:08.192 02750 Comment: Change the configuration with predefined xml config files.

2011-03-28 12:17:08.192 Requirement: ODSCC50

2011-03-28 12:17:08.192 02753 LoadConfig()
2011-03-28 12:17:08.192 Requirement: ODSCC50
2011-03-28 12:17:08.192 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T50_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:17:08.196 - runCommand: Process started, PID: 11002

2011-03-28 12:17:08.197 02756 LoadConfig()
2011-03-28 12:17:08.197 Requirement: ODSCC50
2011-03-28 12:17:08.197 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 12:17:08.200 - runCommand: Process started, PID: 11003

2011-03-28 12:17:08.201 02758 Comment: Update all the configs.

2011-03-28 12:17:08.201 Requirement: ODSCC50

2011-03-28 12:17:08.201 02760 ODSSetup()
2011-03-28 12:17:08.201 Requirement: ODSCC50
2011-03-28 12:17:08.201 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:17:18.831 - runCommand: Process started, PID: 11004
2011-03-28 12:17:18.831 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 12:17:18.831 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 12:17:18.831 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 12:17:18.831 OUTPUT:	Repository SoftHSM found
2011-03-28 12:17:18.831 OUTPUT:	No Maximum Capacity set.
2011-03-28 12:17:18.831 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 12:17:18.831 OUTPUT:	Policy default2 found
2011-03-28 12:17:18.831 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 12:17:18.831 OUTPUT:	Policy default found
2011-03-28 12:17:18.831 OUTPUT:	Zone ods found
2011-03-28 12:17:18.831 OUTPUT:	Policy set to default.
2011-03-28 12:17:18.831 OUTPUT:	Added zone ods to database
2011-03-28 12:17:18.831 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 12:17:18.831 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 12:17:18.831 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 12:17:18.832 02762 Wait(10)

2011-03-28 12:17:18.832 Requirement: ODSCC50

2011-03-28 12:17:28.832 02764 Comment: Start enforcer

2011-03-28 12:17:28.832 Requirement: ODSCC50

2011-03-28 12:17:28.833 02766 Start()
2011-03-28 12:17:28.833 Requirement: ODSCC50
2011-03-28 12:17:28.833 RunCommand(ods-control start)
2011-03-28 12:17:28.834 - runCommand: Background process started, PID: 11017
2011-03-28 12:17:29.851 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 12:17:29.871 - runCommand: Process started, PID: 11032
2011-03-28 12:17:29.871 OUTPUT:	ods-enforcerd
2011-03-28 12:17:29.871 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 12:17:29.886 - runCommand: Process started, PID: 11037
2011-03-28 12:17:29.886 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 12:17:29.887 02768 Wait(10)

2011-03-28 12:17:29.887 Requirement: ODSCC50

2011-03-28 12:17:39.887 02774 Comment: Check if the number of threads is according to the conf.xml, in this case 100 thread for the proces ods-signerd.

2011-03-28 12:17:39.887 Requirement: ODSCC50

2011-03-28 12:17:39.888 02778 Wait(2)

2011-03-28 12:17:39.888 Requirement: ODSCC50

2011-03-28 12:17:41.888 02782 Wait(2)

2011-03-28 12:17:41.888 Requirement: ODSCC50

2011-03-28 12:17:43.889 02786 Wait(2)

2011-03-28 12:17:43.889 Requirement: ODSCC50

2011-03-28 12:17:45.889 02790 Wait(2)

2011-03-28 12:17:45.889 Requirement: ODSCC50

2011-03-28 12:17:47.890 02794 Wait(2)

2011-03-28 12:17:47.890 Requirement: ODSCC50

2011-03-28 12:17:49.890 02798 Wait(15)

2011-03-28 12:17:49.890 Requirement: ODSCC50

2011-03-28 12:18:04.891 02801 CheckLog()
2011-03-28 12:18:04.891 Requirement: ODSCC50
2011-03-28 12:18:04.927 FAILED:	(Check for Like) - Expected: ods-signerd: cmdhandler: zone ods scheduled for immediate re-sign Found: 

2011-03-28 12:18:04.927 02803 Comment: Change the configuration with predefined original conf.xml file.

2011-03-28 12:18:04.927 Requirement: ODSCC50

2011-03-28 12:18:04.928 02806 LoadConfig()
2011-03-28 12:18:04.928 Requirement: ODSCC50
2011-03-28 12:18:04.928 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:18:04.930 - runCommand: Process started, PID: 11151

2011-03-28 12:18:04.931 02808 Comment: Update all the configs.

2011-03-28 12:18:04.931 Requirement: ODSCC50

-------------------------------------------------------------------------------
Testcase - ODSCC50T60: Use a simple script as NotifyCommand and check if it is executed after signing

2011-03-28 12:18:04.931 02814 Comment: Notify script will be started, to check the notify functionality in the conf.xml configuration.

2011-03-28 12:18:04.931 Requirement: ODSCC50

2011-03-28 12:18:04.931 02816 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 12:18:04.931 Requirement: ODSCC50

2011-03-28 12:18:04.932 02818 Stop()
2011-03-28 12:18:04.932 Requirement: ODSCC50
2011-03-28 12:18:04.932 RunCommand(ods-control stop)
2011-03-28 12:18:05.939 - runCommand: Process started, PID: 11152
2011-03-28 12:18:05.940 OUTPUT:	Stopping enforcer...
2011-03-28 12:18:05.940 OUTPUT:	Stopping signer engine..
2011-03-28 12:18:05.940 OUTPUT:	Engine shut down.
2011-03-28 12:18:05.940 RunCommand(ps -e | grep enforcer)
2011-03-28 12:18:05.955 - runCommand: Process started, PID: 11158
2011-03-28 12:18:05.955 ERROR:	return code = 1
2011-03-28 12:18:05.955 RunCommand(ps -e | grep signer)
2011-03-28 12:18:05.970 - runCommand: Process started, PID: 11161
2011-03-28 12:18:05.970 ERROR:	return code = 1

2011-03-28 12:18:05.970 02820 Wait(10)

2011-03-28 12:18:05.970 Requirement: ODSCC50

2011-03-28 12:18:15.971 02822 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 12:18:15.971 Requirement: ODSCC50

2011-03-28 12:18:15.971 02828 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 12:18:15.971 Requirement: ODSCC50

2011-03-28 12:18:15.972 02831 PurgeHSM()
2011-03-28 12:18:15.972 Requirement: ODSCC50
2011-03-28 12:18:15.972 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 12:18:16.326 - runCommand: Process started, PID: 11165
2011-03-28 12:18:16.326 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 12:18:16.326 OUTPUT:	2 keys found.
2011-03-28 12:18:16.326 OUTPUT:	
2011-03-28 12:18:16.326 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-28 12:18:16.326 OUTPUT:	Starting purge...
2011-03-28 12:18:16.326 OUTPUT:	Key remove successful: a9e554b017be8a818716ba61283afa33
2011-03-28 12:18:16.326 OUTPUT:	Key remove successful: d1ed02d7fc38e73e74f4705cf50e1eca
2011-03-28 12:18:16.326 OUTPUT:	Purge done.

2011-03-28 12:18:16.326 02833 Wait(10)

2011-03-28 12:18:16.326 Requirement: ODSCC50

2011-03-28 12:18:26.327 02835 Comment: Change the configuration with predefined xml config files.

2011-03-28 12:18:26.327 Requirement: ODSCC50

2011-03-28 12:18:26.327 02838 LoadConfig()
2011-03-28 12:18:26.327 Requirement: ODSCC50
2011-03-28 12:18:26.327 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC50T60_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:18:26.331 - runCommand: Process started, PID: 11169

2011-03-28 12:18:26.332 02841 LoadConfig()
2011-03-28 12:18:26.332 Requirement: ODSCC50
2011-03-28 12:18:26.332 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 12:18:26.335 - runCommand: Process started, PID: 11170

2011-03-28 12:18:26.336 02843 Comment: Update all the configs.

2011-03-28 12:18:26.336 Requirement: ODSCC50

2011-03-28 12:18:26.336 02845 ODSSetup()
2011-03-28 12:18:26.336 Requirement: ODSCC50
2011-03-28 12:18:26.336 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:18:36.750 - runCommand: Process started, PID: 11171
2011-03-28 12:18:36.750 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 12:18:36.750 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 12:18:36.750 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 12:18:36.750 OUTPUT:	Repository SoftHSM found
2011-03-28 12:18:36.750 OUTPUT:	No Maximum Capacity set.
2011-03-28 12:18:36.750 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 12:18:36.750 OUTPUT:	Policy default2 found
2011-03-28 12:18:36.750 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 12:18:36.750 OUTPUT:	Policy default found
2011-03-28 12:18:36.750 OUTPUT:	Zone ods found
2011-03-28 12:18:36.750 OUTPUT:	Policy set to default.
2011-03-28 12:18:36.750 OUTPUT:	Added zone ods to database
2011-03-28 12:18:36.750 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 12:18:36.750 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 12:18:36.750 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 12:18:36.750 02847 Wait(10)

2011-03-28 12:18:36.750 Requirement: ODSCC50

2011-03-28 12:18:46.751 02849 Comment: Start enforcer

2011-03-28 12:18:46.751 Requirement: ODSCC50

2011-03-28 12:18:46.751 02851 Start()
2011-03-28 12:18:46.751 Requirement: ODSCC50
2011-03-28 12:18:46.751 RunCommand(ods-control start)
2011-03-28 12:18:46.752 - runCommand: Background process started, PID: 11184
2011-03-28 12:18:47.777 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 12:18:47.791 - runCommand: Process started, PID: 11200
2011-03-28 12:18:47.791 OUTPUT:	ods-enforcerd
2011-03-28 12:18:47.791 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 12:18:47.806 - runCommand: Process started, PID: 11212
2011-03-28 12:18:47.806 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 12:18:47.806 02853 Wait(10)

2011-03-28 12:18:47.806 Requirement: ODSCC50

2011-03-28 12:18:57.807 02858 Wait(15)

2011-03-28 12:18:57.807 Requirement: ODSCC50

2011-03-28 12:19:12.807 02861 CheckLog()
2011-03-28 12:19:12.807 Requirement: ODSCC50
2011-03-28 12:19:12.847 FAILED:	(Check for Like) - Expected: ods-signerd: cmdhandler: zone ods scheduled for immediate re-sign Found: 

2011-03-28 12:19:12.847 02863 Comment: Check if new file has been created in folder /tmp

2011-03-28 12:19:12.847 Requirement: ODSCC50

2011-03-28 12:19:12.848 02867 CheckFilePresent(ods-notify-230311)
2011-03-28 12:19:12.848 Requirement: ODSCC50
2011-03-28 12:19:12.848 FAILED:	(Check for Equal) - Expected: ods-notify-230311 Found: 

2011-03-28 12:19:12.848 02869 Comment: Change the configuration with predefined original conf.xml file.

2011-03-28 12:19:12.848 Requirement: ODSCC50

2011-03-28 12:19:12.848 02872 LoadConfig()
2011-03-28 12:19:12.848 Requirement: ODSCC50
2011-03-28 12:19:12.848 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:19:12.851 - runCommand: Process started, PID: 11227

2011-03-28 12:19:12.851 02874 Comment: Update all the configs.

2011-03-28 12:19:12.851 Requirement: ODSCC50
Testcondition - ODSCC60: Auditor should run during every resign and if configured in partial mode
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSCC60T10: Use privileges test:test for auditor in config only and check if auditor fails to run

2011-03-28 12:19:12.852 02881 Comment: Privileges have been adjusted for the auditor in the conf.xml. User = opendnssec; Group = opendnssec. This user and group do not have acces to the correct folder.

2011-03-28 12:19:12.852 Requirement: ODSCC60

2011-03-28 12:19:12.852 02883 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 12:19:12.852 Requirement: ODSCC60

2011-03-28 12:19:12.852 02885 Stop()
2011-03-28 12:19:12.852 Requirement: ODSCC60
2011-03-28 12:19:12.852 RunCommand(ods-control stop)
2011-03-28 12:19:13.859 - runCommand: Process started, PID: 11228
2011-03-28 12:19:13.859 OUTPUT:	Stopping enforcer...
2011-03-28 12:19:13.859 OUTPUT:	Stopping signer engine..
2011-03-28 12:19:13.859 OUTPUT:	Engine shut down.
2011-03-28 12:19:13.859 RunCommand(ps -e | grep enforcer)
2011-03-28 12:19:13.874 - runCommand: Process started, PID: 11234
2011-03-28 12:19:13.874 ERROR:	return code = 1
2011-03-28 12:19:13.874 RunCommand(ps -e | grep signer)
2011-03-28 12:19:13.883 - runCommand: Process started, PID: 11237
2011-03-28 12:19:13.883 ERROR:	return code = 1

2011-03-28 12:19:13.883 02887 Wait(10)

2011-03-28 12:19:13.883 Requirement: ODSCC60

2011-03-28 12:19:23.884 02889 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 12:19:23.884 Requirement: ODSCC60

2011-03-28 12:19:23.884 02895 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 12:19:23.884 Requirement: ODSCC60

2011-03-28 12:19:23.884 02898 PurgeHSM()
2011-03-28 12:19:23.884 Requirement: ODSCC60
2011-03-28 12:19:23.884 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 12:19:24.307 - runCommand: Process started, PID: 11240
2011-03-28 12:19:24.308 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 12:19:24.308 OUTPUT:	2 keys found.
2011-03-28 12:19:24.308 OUTPUT:	
2011-03-28 12:19:24.308 OUTPUT:	Are you sure you want to remove ALL keys from repository SoftHSM ? (YES/NO) 
2011-03-28 12:19:24.308 OUTPUT:	Starting purge...
2011-03-28 12:19:24.308 OUTPUT:	Key remove successful: a5a4f04d4d87c97e8ba4d9cc7d7af593
2011-03-28 12:19:24.308 OUTPUT:	Key remove successful: 280b7bb8fb29c302f311c91e3066a5ab
2011-03-28 12:19:24.308 OUTPUT:	Purge done.

2011-03-28 12:19:24.308 02900 Wait(10)

2011-03-28 12:19:24.308 Requirement: ODSCC60

2011-03-28 12:19:34.309 02902 Comment: Rebuild ODS with SQLlite database.

2011-03-28 12:19:34.309 Requirement: ODSCC60

2011-03-28 12:19:34.309 02908 Wait(60)

2011-03-28 12:19:34.309 Requirement: ODSCC60

2011-03-28 12:20:34.309 02912 Wait(60)

2011-03-28 12:20:34.309 Requirement: ODSCC60

2011-03-28 12:21:34.310 02916 Wait(60)

2011-03-28 12:21:34.310 Requirement: ODSCC60

2011-03-28 12:22:34.310 02919 Comment: Change the configuration with predefined xml config files.

2011-03-28 12:22:34.311 Requirement: ODSCC60

2011-03-28 12:22:34.311 02922 LoadConfig()
2011-03-28 12:22:34.311 Requirement: ODSCC60
2011-03-28 12:22:34.311 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:22:34.315 - runCommand: Process started, PID: 11250

2011-03-28 12:22:34.315 02925 LoadConfig()
2011-03-28 12:22:34.315 Requirement: ODSCC60
2011-03-28 12:22:34.315 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 12:22:34.319 - runCommand: Process started, PID: 11251

2011-03-28 12:22:34.320 02927 Comment: Run setup for rebuild of database

2011-03-28 12:22:34.320 Requirement: ODSCC60

2011-03-28 12:22:34.320 02931 Wait(20)

2011-03-28 12:22:34.320 Requirement: ODSCC60

2011-03-28 12:22:54.320 02933 Comment: Update all the configs.

2011-03-28 12:22:54.321 Requirement: ODSCC60

2011-03-28 12:22:54.321 02935 ODSSetup()
2011-03-28 12:22:54.321 Requirement: ODSCC60
2011-03-28 12:22:54.321 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:23:07.228 - runCommand: Process started, PID: 11252
2011-03-28 12:23:07.228 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 12:23:07.228 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 12:23:07.228 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 12:23:07.228 OUTPUT:	Repository SoftHSM found
2011-03-28 12:23:07.228 OUTPUT:	No Maximum Capacity set.
2011-03-28 12:23:07.228 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 12:23:07.228 OUTPUT:	Policy default2 found
2011-03-28 12:23:07.228 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 12:23:07.228 OUTPUT:	Policy default found
2011-03-28 12:23:07.228 OUTPUT:	Zone ods found
2011-03-28 12:23:07.228 OUTPUT:	Policy set to default.
2011-03-28 12:23:07.228 OUTPUT:	Added zone ods to database
2011-03-28 12:23:07.228 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 12:23:07.228 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 12:23:07.228 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 12:23:07.229 02937 Wait(10)

2011-03-28 12:23:07.229 Requirement: ODSCC60

2011-03-28 12:23:17.229 02939 Comment: Change the configuration with predefined xml config files for this testcase.

2011-03-28 12:23:17.229 Requirement: ODSCC60

2011-03-28 12:23:17.229 02942 LoadConfig()
2011-03-28 12:23:17.229 Requirement: ODSCC60
2011-03-28 12:23:17.229 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC60T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:23:17.234 - runCommand: Process started, PID: 11268
2011-03-28 12:23:17.234 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC60T10_conf.xml': No such file or directory
2011-03-28 12:23:17.234 ERROR:	return code = 1

2011-03-28 12:23:17.234 02945 LoadConfig()
2011-03-28 12:23:17.234 Requirement: ODSCC60
2011-03-28 12:23:17.234 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 12:23:17.238 - runCommand: Process started, PID: 11269

2011-03-28 12:23:17.238 02947 Comment: Update all the configs.

2011-03-28 12:23:17.238 Requirement: ODSCC60

2011-03-28 12:23:17.239 02949 ODSSetup()
2011-03-28 12:23:17.239 Requirement: ODSCC60
2011-03-28 12:23:17.239 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:23:28.792 - runCommand: Process started, PID: 11270
2011-03-28 12:23:28.792 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 12:23:28.792 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 12:23:28.792 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 12:23:28.792 OUTPUT:	Repository SoftHSM found
2011-03-28 12:23:28.792 OUTPUT:	No Maximum Capacity set.
2011-03-28 12:23:28.792 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 12:23:28.792 OUTPUT:	Policy default2 found
2011-03-28 12:23:28.792 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 12:23:28.792 OUTPUT:	Policy default found
2011-03-28 12:23:28.792 OUTPUT:	Zone ods found
2011-03-28 12:23:28.792 OUTPUT:	Policy set to default.
2011-03-28 12:23:28.792 OUTPUT:	Added zone ods to database
2011-03-28 12:23:28.792 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 12:23:28.792 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 12:23:28.792 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 12:23:28.792 02951 Wait(10)

2011-03-28 12:23:28.793 Requirement: ODSCC60

2011-03-28 12:23:38.793 02954 CheckLog()
2011-03-28 12:23:38.793 Requirement: ODSCC60

2011-03-28 12:23:38.834 02956 Comment: Change the configuration with predefined original conf.xml file.

2011-03-28 12:23:38.834 Requirement: ODSCC60

2011-03-28 12:23:38.834 02959 LoadConfig()
2011-03-28 12:23:38.834 Requirement: ODSCC60
2011-03-28 12:23:38.834 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:23:38.837 - runCommand: Process started, PID: 11283

2011-03-28 12:23:38.837 02961 Comment: Update all the configs.

2011-03-28 12:23:38.837 Requirement: ODSCC60

2011-03-28 12:23:38.837 02963 ODSSetup()
2011-03-28 12:23:38.837 Requirement: ODSCC60
2011-03-28 12:23:38.837 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:23:49.256 - runCommand: Process started, PID: 11284
2011-03-28 12:23:49.256 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 12:23:49.256 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 12:23:49.256 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 12:23:49.256 OUTPUT:	Repository SoftHSM found
2011-03-28 12:23:49.256 OUTPUT:	No Maximum Capacity set.
2011-03-28 12:23:49.256 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 12:23:49.257 OUTPUT:	Policy default2 found
2011-03-28 12:23:49.257 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 12:23:49.257 OUTPUT:	Policy default found
2011-03-28 12:23:49.257 OUTPUT:	Zone ods found
2011-03-28 12:23:49.257 OUTPUT:	Policy set to default.
2011-03-28 12:23:49.257 OUTPUT:	Added zone ods to database
2011-03-28 12:23:49.257 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 12:23:49.257 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 12:23:49.257 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSCC60T20: Use privileges kasptest:kasptest for ods-auditor and at auditor in config and check if auditor runs without errors

2011-03-28 12:23:49.258 02970 Comment: Privileges have been adjusted for the auditor in the conf.xml. User = kasptest; Group = kasptest. This user and group do have acces to the correct folders: 
- /var/opendnssec/tmp/
- /etc/opendnssec/

2011-03-28 12:23:49.258 Requirement: ODSCC60

2011-03-28 12:23:49.258 02971 Comment: Change permissions of the folders mentioned above. 

2011-03-28 12:23:49.258 Requirement: ODSCC60

2011-03-28 12:23:49.258 02981 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 12:23:49.258 Requirement: ODSCC60

2011-03-28 12:23:49.259 02983 Stop()
2011-03-28 12:23:49.259 Requirement: ODSCC60
2011-03-28 12:23:49.259 RunCommand(ods-control stop)
2011-03-28 12:23:49.264 - runCommand: Process started, PID: 11297
2011-03-28 12:23:49.264 OUTPUT:	Stopping enforcer...
2011-03-28 12:23:49.264 OUTPUT:	Cannot find PID file
2011-03-28 12:23:49.264 OUTPUT:	Stopping signer engine..
2011-03-28 12:23:49.264 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 12:23:49.264 ERROR:	return code = 1
2011-03-28 12:23:49.264 RunCommand(ps -e | grep enforcer)
2011-03-28 12:23:49.279 - runCommand: Process started, PID: 11300
2011-03-28 12:23:49.279 ERROR:	return code = 1
2011-03-28 12:23:49.279 RunCommand(ps -e | grep signer)
2011-03-28 12:23:49.294 - runCommand: Process started, PID: 11303
2011-03-28 12:23:49.294 ERROR:	return code = 1

2011-03-28 12:23:49.295 02985 Wait(10)

2011-03-28 12:23:49.295 Requirement: ODSCC60

2011-03-28 12:23:59.295 02987 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 12:23:59.295 Requirement: ODSCC60

2011-03-28 12:23:59.296 02993 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 12:23:59.296 Requirement: ODSCC60

2011-03-28 12:23:59.296 02996 PurgeHSM()
2011-03-28 12:23:59.296 Requirement: ODSCC60
2011-03-28 12:23:59.296 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 12:23:59.310 - runCommand: Process started, PID: 11306
2011-03-28 12:23:59.310 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 12:23:59.310 OUTPUT:	0 keys found.
2011-03-28 12:23:59.310 ERROR:	return code = 255

2011-03-28 12:23:59.311 02998 Wait(10)

2011-03-28 12:23:59.311 Requirement: ODSCC60

2011-03-28 12:24:09.311 03000 Comment: Change the configuration with predefined xml config files for this testcase.

2011-03-28 12:24:09.311 Requirement: ODSCC60

2011-03-28 12:24:09.312 03003 LoadConfig()
2011-03-28 12:24:09.312 Requirement: ODSCC60
2011-03-28 12:24:09.312 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC60T20_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:24:09.316 - runCommand: Process started, PID: 11310
2011-03-28 12:24:09.316 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC60T20_conf.xml': No such file or directory
2011-03-28 12:24:09.316 ERROR:	return code = 1

2011-03-28 12:24:09.316 03006 LoadConfig()
2011-03-28 12:24:09.317 Requirement: ODSCC60
2011-03-28 12:24:09.317 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 12:24:09.320 - runCommand: Process started, PID: 11311

2011-03-28 12:24:09.321 03008 Comment: Update all the configs.

2011-03-28 12:24:09.321 Requirement: ODSCC60

2011-03-28 12:24:09.321 03010 ODSSetup()
2011-03-28 12:24:09.321 Requirement: ODSCC60
2011-03-28 12:24:09.321 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:24:19.641 - runCommand: Process started, PID: 11312
2011-03-28 12:24:19.641 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 12:24:19.641 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 12:24:19.641 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 12:24:19.641 OUTPUT:	Repository SoftHSM found
2011-03-28 12:24:19.641 OUTPUT:	No Maximum Capacity set.
2011-03-28 12:24:19.641 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 12:24:19.641 OUTPUT:	Policy default2 found
2011-03-28 12:24:19.641 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 12:24:19.641 OUTPUT:	Policy default found
2011-03-28 12:24:19.641 OUTPUT:	Zone ods found
2011-03-28 12:24:19.641 OUTPUT:	Policy set to default.
2011-03-28 12:24:19.641 OUTPUT:	Added zone ods to database
2011-03-28 12:24:19.641 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 12:24:19.641 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 12:24:19.641 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 12:24:19.641 03012 Wait(10)

2011-03-28 12:24:19.641 Requirement: ODSCC60

2011-03-28 12:24:29.642 03016 Stop()
2011-03-28 12:24:29.642 Requirement: ODSCC60
2011-03-28 12:24:29.642 RunCommand(ods-control stop)
2011-03-28 12:24:29.647 - runCommand: Process started, PID: 11325
2011-03-28 12:24:29.647 OUTPUT:	Stopping enforcer...
2011-03-28 12:24:29.647 OUTPUT:	Cannot find PID file
2011-03-28 12:24:29.647 OUTPUT:	Stopping signer engine..
2011-03-28 12:24:29.647 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 12:24:29.647 ERROR:	return code = 1
2011-03-28 12:24:29.647 RunCommand(ps -e | grep enforcer)
2011-03-28 12:24:29.666 - runCommand: Process started, PID: 11328
2011-03-28 12:24:29.666 ERROR:	return code = 1
2011-03-28 12:24:29.666 RunCommand(ps -e | grep signer)
2011-03-28 12:24:29.683 - runCommand: Process started, PID: 11331
2011-03-28 12:24:29.684 ERROR:	return code = 1

2011-03-28 12:24:29.684 03018 Comment: If the change is ok, the signing of the zone will be succesfull. 

2011-03-28 12:24:29.684 Requirement: ODSCC60

2011-03-28 12:24:29.684 03021 CheckLog()
2011-03-28 12:24:29.684 Requirement: ODSCC60

2011-03-28 12:24:29.719 03023 Comment: Restore the situation/configuration as it was before running the testcase.

2011-03-28 12:24:29.719 Requirement: ODSCC60

2011-03-28 12:24:29.719 03025 Comment: Change permissions of the folders mentioned above. 

2011-03-28 12:24:29.719 Requirement: ODSCC60

2011-03-28 12:24:29.719 03035 Comment: Change the configuration with predefined original conf.xml file.

2011-03-28 12:24:29.719 Requirement: ODSCC60

2011-03-28 12:24:29.719 03038 LoadConfig()
2011-03-28 12:24:29.719 Requirement: ODSCC60
2011-03-28 12:24:29.719 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:24:29.722 - runCommand: Process started, PID: 11334

2011-03-28 12:24:29.722 03040 Comment: Update all the configs.

2011-03-28 12:24:29.722 Requirement: ODSCC60

2011-03-28 12:24:29.723 03042 ODSSetup()
2011-03-28 12:24:29.723 Requirement: ODSCC60
2011-03-28 12:24:29.723 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:24:40.505 - runCommand: Process started, PID: 11335
2011-03-28 12:24:40.505 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 12:24:40.505 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 12:24:40.505 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 12:24:40.505 OUTPUT:	Repository SoftHSM found
2011-03-28 12:24:40.505 OUTPUT:	No Maximum Capacity set.
2011-03-28 12:24:40.505 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 12:24:40.505 OUTPUT:	Policy default2 found
2011-03-28 12:24:40.505 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 12:24:40.505 OUTPUT:	Policy default found
2011-03-28 12:24:40.505 OUTPUT:	Zone ods found
2011-03-28 12:24:40.505 OUTPUT:	Policy set to default.
2011-03-28 12:24:40.505 OUTPUT:	Added zone ods to database
2011-03-28 12:24:40.505 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 12:24:40.505 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 12:24:40.505 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSCC60T30: Change the /tmp location and change WorkingDirectory in conf.xml accordingly

2011-03-28 12:24:40.506 03047 Comment: Working directory has been adjusted in the conf.xml. Working directory now is: var/opendnssec/temporary_auditor. Make sure that directory exists before running this testcase, if not it will be created in this testcase.

2011-03-28 12:24:40.506 Requirement: ODSCC60

2011-03-28 12:24:40.507 03049 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 12:24:40.507 Requirement: ODSCC60

2011-03-28 12:24:40.507 03051 Stop()
2011-03-28 12:24:40.507 Requirement: ODSCC60
2011-03-28 12:24:40.507 RunCommand(ods-control stop)
2011-03-28 12:24:40.512 - runCommand: Process started, PID: 11348
2011-03-28 12:24:40.512 OUTPUT:	Stopping enforcer...
2011-03-28 12:24:40.512 OUTPUT:	Cannot find PID file
2011-03-28 12:24:40.512 OUTPUT:	Stopping signer engine..
2011-03-28 12:24:40.512 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 12:24:40.512 ERROR:	return code = 1
2011-03-28 12:24:40.512 RunCommand(ps -e | grep enforcer)
2011-03-28 12:24:40.528 - runCommand: Process started, PID: 11351
2011-03-28 12:24:40.528 ERROR:	return code = 1
2011-03-28 12:24:40.528 RunCommand(ps -e | grep signer)
2011-03-28 12:24:40.543 - runCommand: Process started, PID: 11354
2011-03-28 12:24:40.543 ERROR:	return code = 1

2011-03-28 12:24:40.543 03053 Wait(10)

2011-03-28 12:24:40.543 Requirement: ODSCC60

2011-03-28 12:24:50.544 03055 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 12:24:50.544 Requirement: ODSCC60

2011-03-28 12:24:50.544 03061 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 12:24:50.544 Requirement: ODSCC60

2011-03-28 12:24:50.545 03064 PurgeHSM()
2011-03-28 12:24:50.545 Requirement: ODSCC60
2011-03-28 12:24:50.545 RunCommand(echo 'YES' | ods-hsmutil purge SoftHSM)
2011-03-28 12:24:50.558 - runCommand: Process started, PID: 11357
2011-03-28 12:24:50.558 OUTPUT:	Purging all keys from repository: SoftHSM
2011-03-28 12:24:50.558 OUTPUT:	0 keys found.
2011-03-28 12:24:50.558 ERROR:	return code = 255

2011-03-28 12:24:50.558 03066 Wait(10)

2011-03-28 12:24:50.558 Requirement: ODSCC60

2011-03-28 12:25:00.559 03072 Comment: Change the configuration with predefined xml config files.

2011-03-28 12:25:00.559 Requirement: ODSCC60

2011-03-28 12:25:00.559 03075 LoadConfig()
2011-03-28 12:25:00.559 Requirement: ODSCC60
2011-03-28 12:25:00.559 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC60T30_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:25:00.564 - runCommand: Process started, PID: 11361
2011-03-28 12:25:00.564 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_conf/conf/ODSCC60T30_conf.xml': No such file or directory
2011-03-28 12:25:00.564 ERROR:	return code = 1

2011-03-28 12:25:00.564 03078 LoadConfig()
2011-03-28 12:25:00.564 Requirement: ODSCC60
2011-03-28 12:25:00.564 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 12:25:00.568 - runCommand: Process started, PID: 11362

2011-03-28 12:25:00.568 03080 Comment: Update all the configs.

2011-03-28 12:25:00.568 Requirement: ODSCC60

2011-03-28 12:25:00.569 03082 ODSSetup()
2011-03-28 12:25:00.569 Requirement: ODSCC60
2011-03-28 12:25:00.569 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:25:11.565 - runCommand: Process started, PID: 11363
2011-03-28 12:25:11.566 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 12:25:11.567 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 12:25:11.567 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 12:25:11.567 OUTPUT:	Repository SoftHSM found
2011-03-28 12:25:11.567 OUTPUT:	No Maximum Capacity set.
2011-03-28 12:25:11.567 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 12:25:11.568 OUTPUT:	Policy default2 found
2011-03-28 12:25:11.568 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 12:25:11.568 OUTPUT:	Policy default found
2011-03-28 12:25:11.568 OUTPUT:	Zone ods found
2011-03-28 12:25:11.568 OUTPUT:	Policy set to default.
2011-03-28 12:25:11.568 OUTPUT:	Added zone ods to database
2011-03-28 12:25:11.568 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 12:25:11.569 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 12:25:11.569 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 12:25:11.573 03084 Wait(10)

2011-03-28 12:25:11.573 Requirement: ODSCC60

2011-03-28 12:25:21.578 03086 Comment: Start enforcer

2011-03-28 12:25:21.578 Requirement: ODSCC60

2011-03-28 12:25:21.581 03088 Start()
2011-03-28 12:25:21.581 Requirement: ODSCC60
2011-03-28 12:25:21.582 RunCommand(ods-control start)
2011-03-28 12:25:21.594 - runCommand: Background process started, PID: 11376
2011-03-28 12:25:22.752 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 12:25:22.915 - runCommand: Process started, PID: 11392
2011-03-28 12:25:22.916 OUTPUT:	ods-enforcerd
2011-03-28 12:25:22.916 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 12:25:22.108 - runCommand: Process started, PID: 11397
2011-03-28 12:25:22.108 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 12:25:22.108 03090 Wait(10)

2011-03-28 12:25:22.108 Requirement: ODSCC60

2011-03-28 12:25:32.108 03095 Wait(15)

2011-03-28 12:25:32.108 Requirement: ODSCC60

2011-03-28 12:25:47.109 03099 Stop()
2011-03-28 12:25:47.109 Requirement: ODSCC60
2011-03-28 12:25:47.109 RunCommand(ods-control stop)
2011-03-28 12:25:48.118 - runCommand: Process started, PID: 11427
2011-03-28 12:25:48.118 OUTPUT:	Stopping enforcer...
2011-03-28 12:25:48.118 OUTPUT:	Stopping signer engine..
2011-03-28 12:25:48.118 OUTPUT:	Engine shut down.
2011-03-28 12:25:48.118 RunCommand(ps -e | grep enforcer)
2011-03-28 12:25:48.133 - runCommand: Process started, PID: 11433
2011-03-28 12:25:48.133 ERROR:	return code = 1
2011-03-28 12:25:48.133 RunCommand(ps -e | grep signer)
2011-03-28 12:25:48.144 - runCommand: Process started, PID: 11436
2011-03-28 12:25:48.144 ERROR:	return code = 1

2011-03-28 12:25:48.144 03102 CheckLog()
2011-03-28 12:25:48.144 Requirement: ODSCC60
2011-03-28 12:25:48.182 PASSED:	(Check for Like) - Expected: all done! Found: Mar 28 12:25:47 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

2011-03-28 12:25:48.183 03104 Comment: Check if the ods files are present in the new temporary folder.

2011-03-28 12:25:48.183 Requirement: ODSCC60

2011-03-28 12:25:48.183 03108 CheckFilePresent(ods.denial)
2011-03-28 12:25:48.183 Requirement: ODSCC60
2011-03-28 12:25:48.183 FAILED:	(Check for Equal) - Expected: ods.denial Found: 

2011-03-28 12:25:48.183 03110 CheckFilePresent(ods.dnskeys)
2011-03-28 12:25:48.183 Requirement: ODSCC60
2011-03-28 12:25:48.183 FAILED:	(Check for Equal) - Expected: ods.dnskeys Found: 

2011-03-28 12:25:48.183 03112 CheckFilePresent(ods.finalized)
2011-03-28 12:25:48.183 Requirement: ODSCC60
2011-03-28 12:25:48.183 FAILED:	(Check for Equal) - Expected: ods.finalized Found: 

2011-03-28 12:25:48.184 03114 CheckFilePresent(ods.rrsigs)
2011-03-28 12:25:48.184 Requirement: ODSCC60
2011-03-28 12:25:48.184 FAILED:	(Check for Equal) - Expected: ods.rrsigs Found: 

2011-03-28 12:25:48.184 03116 CheckFilePresent(ods.state)
2011-03-28 12:25:48.184 Requirement: ODSCC60
2011-03-28 12:25:48.184 FAILED:	(Check for Equal) - Expected: ods.state Found: 

2011-03-28 12:25:48.184 03118 CheckFilePresent(ods.sc)
2011-03-28 12:25:48.184 Requirement: ODSCC60
2011-03-28 12:25:48.184 FAILED:	(Check for Equal) - Expected: ods.sc Found: 

2011-03-28 12:25:48.184 03120 CheckFilePresent(ods.unsorted)
2011-03-28 12:25:48.184 Requirement: ODSCC60
2011-03-28 12:25:48.184 FAILED:	(Check for Equal) - Expected: ods.unsorted Found: 

2011-03-28 12:25:48.184 03122 CheckFilePresent(ods.task)
2011-03-28 12:25:48.184 Requirement: ODSCC60
2011-03-28 12:25:48.184 FAILED:	(Check for Equal) - Expected: ods.task Found: 

2011-03-28 12:25:48.185 03124 Comment: Change the configuration with predefined original conf.xml file.

2011-03-28 12:25:48.185 Requirement: ODSCC60

2011-03-28 12:25:48.185 03127 LoadConfig()
2011-03-28 12:25:48.185 Requirement: ODSCC60
2011-03-28 12:25:48.185 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 12:25:48.187 - runCommand: Process started, PID: 11439

2011-03-28 12:25:48.188 03129 Comment: Update all the configs.

2011-03-28 12:25:48.188 Requirement: ODSCC60

2011-03-28 12:25:48.188 03131 ODSSetup()
2011-03-28 12:25:48.188 Requirement: ODSCC60
2011-03-28 12:25:48.188 RunCommand(echo 'y' | ods-ksmutil setup)
2011-03-28 12:25:58.582 - runCommand: Process started, PID: 11440
2011-03-28 12:25:58.582 OUTPUT:	*WARNING* This will erase all data in the database; are you sure? [y/N] fixing permissions on file /var/opendnssec/kasp.db
2011-03-28 12:25:58.582 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 12:25:58.582 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 12:25:58.582 OUTPUT:	Repository SoftHSM found
2011-03-28 12:25:58.582 OUTPUT:	No Maximum Capacity set.
2011-03-28 12:25:58.582 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 12:25:58.582 OUTPUT:	Policy default2 found
2011-03-28 12:25:58.582 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 12:25:58.582 OUTPUT:	Policy default found
2011-03-28 12:25:58.582 OUTPUT:	Zone ods found
2011-03-28 12:25:58.582 OUTPUT:	Policy set to default.
2011-03-28 12:25:58.582 OUTPUT:	Added zone ods to database
2011-03-28 12:25:58.582 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 12:25:58.582 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 12:25:58.582 ERROR:	/etc/opendnssec/kasp.xml validates
Testcondition - ODSCCLOG: Backup logfiles and testresults
-------------------------------------------------------------------------------

2011-03-28 12:25:58.583 03140 Comment: Create folders for logfile backup of syslog and messages logfiles.

2011-03-28 12:25:58.583 Requirement: ODSCCLOG

2011-03-28 12:25:58.583 03148 Comment: Copy the syslog and messages logfiles to the specific folders.

2011-03-28 12:25:58.583 Requirement: ODSCCLOG

