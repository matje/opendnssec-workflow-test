root@DEVELOPER15:/home/elmo/opendnssec_test_engine# sh autotestODS.sh
FILE  : /home/elmo/Downloads/ODS_Test_folder/Run2_28032011/ODS1.2_SIT_KASP.xls
COUNT : 11
AUTHOR: Calc
- Argument: /home/elmo/Downloads/ODS_Test_folder/Run2_28032011/ODS1.2_SIT_KASP.xls
- Argument: ODSK
SHEET: ODSK
---------

2011-03-28 16:36:56.590 00014 Comment: Fill in date of test execution in the field below (format ddmmyy)


2011-03-28 16:36:56.590 00015 Comment: 280311


2011-03-28 16:36:56.590 00017 Comment: Fill in date of test execution (version 2) in the field below (format yyyymmdd)


2011-03-28 16:36:56.590 00018 Comment: 20110328


2011-03-28 16:36:56.590 00020 Comment: Users & ODS versions


2011-03-28 16:36:56.590 00021 Comment: Check if user opendnssec exists on unix. (part of group opendnssec)


2011-03-28 16:36:56.590 00022 Comment: Check if user kaspuser (with password abc123) exists on unix. 


2011-03-28 16:36:56.590 00023 Comment: Check if user gooduser (with password 123abc) exists on unix. 


2011-03-28 16:36:56.590 00024 Comment: Check if the correct ODS version is installed.


2011-03-28 16:36:56.590 00025 Comment: If user is not avaliable you can add them via the command (as root):
- useradd <user>
and then add the correct password via the command.
- passwd <user>


2011-03-28 16:36:56.590 00027 Comment: Copy all the files needed for this script to the directories below


2011-03-28 16:36:56.590 00028 Comment: BEWARE: For all files created in WinOS, use the fromdos application (apt-get install tofromdos) to remove symbols from the xml files (like conf and kasp) to prevent errors.


2011-03-28 16:36:56.590 00029 Comment: Standard folder for all the conf.xml files is /home/ods/ods_testautomation/ods_sit_kasp/conf


2011-03-28 16:36:56.590 00030 Comment: Standard folder for all the kasp.xml files is /home/ods/ods_testautomation/ods_sit_kasp/kasp


2011-03-28 16:36:56.590 00031 Comment: Standard folder for all the zonelist.xml files is /home/ods/ods_testautomation/ods_sit_kasp/zonelist


2011-03-28 16:36:56.590 00032 Comment: Standard folder for all the MySQL files is /home/ods/ods_testautomation/ods_sit_kasp/mysql


2011-03-28 16:36:56.591 00033 Comment: Standard folder for all the script files is /home/ods/ods_testautomation/ods_sit_kasp/script


2011-03-28 16:36:56.591 00034 Comment: Standard folder for the softhsm.conf file is /etc/


2011-03-28 16:36:56.591 00036 Comment: Logfiles


2011-03-28 16:36:56.591 00037 Comment: Make sure that the following folder exists: /home/ods/ods_testautomation/ods_sit_kasp/logging


2011-03-28 16:36:56.591 00039 Comment: Specify Download folder for ODS


2011-03-28 16:36:56.591 00040 Comment: /home/ods/Downloads/opendnssec-1.2.0.0


2011-03-28 16:36:56.591 00042 Comment: Specific folders


2011-03-28 16:36:56.591 00043 Comment: Make sure that the next folder exists: "var/opendnssec/temporary"


2011-03-28 16:36:56.591 00045 Comment: MySQL settings


2011-03-28 16:36:56.591 00046 Comment: Standard MySQL database name = KASP


2011-03-28 16:36:56.591 00047 Comment: Standard MySQL username = kaspuser


2011-03-28 16:36:56.591 00048 Comment: Standard MySQL password = abc123


2011-03-28 16:36:56.591 00049 Comment: Second MySQL database = KASPTEST


2011-03-28 16:36:56.591 00050 Comment: Second MySQL username = kaspuser


2011-03-28 16:36:56.591 00051 Comment: Second MySQL password = abc123


2011-03-28 16:36:56.591 00052 Comment: Thirth MySQL database = KASPTEST2


2011-03-28 16:36:56.591 00053 Comment: Thirth MySQL username = gooduser


2011-03-28 16:36:56.591 00054 Comment: Thirth MySQL password = 123abc


2011-03-28 16:36:56.591 00055 Comment: If the databases above are not available they can be created via the command:
- mysql -p
- create database <databasename>


2011-03-28 16:36:56.591 00056 Comment: After this the users should be granted for using the database using the following 2 commands:
- grant usage on <databasename>.* to <user>@localhost identified by '<password of user>'
- grant all privileges on <databasename>.* to <user>@localhost identified by '<password of user>'


2011-03-28 16:36:56.591 00058 Comment: Zone files


2011-03-28 16:36:56.591 00059 Comment: Make sure that the zone with name "ods" and "tes" is available in the test environment in folder /var/opendnssec/unsigned


2011-03-28 16:36:56.591 00061 Comment: Host file


2011-03-28 16:36:56.592 00062 Comment: Make sure that the following line is in the host file in the "/etc" folder:
127.0.0.1 mysqltest


2011-03-28 16:36:56.592 00064 Comment: Logger


2011-03-28 16:36:56.592 00065 Comment: Check if the application "logger" is available on the test environment (location: /usr/bin/). The logger will put the result of a command, for example "ods-kaspcheck", in the messages logfile (location: /var/log/messages). Example of usage: "ods-kaspcheck | /usr/bin/logger"


2011-03-28 16:36:56.592 00067 Comment: SoftHSM


2011-03-28 16:36:56.592 00068 Comment: Make sure that 2 repositories exist: SoftHSM and SoftHSM2


2011-03-28 16:36:56.592 00069 Comment: PIN of SoftHSM is 1234


2011-03-28 16:36:56.592 00070 Comment: PIN of SoftHSM2 is 1232


2011-03-28 16:36:56.592 00071 Comment: If the repository is not available, you can initialize them with the following command: 
- 'softhsm --init-token --slot 2 --SoftHSM2 "SoftHSM2" '
- The application will ask for two PIN codes. Use the ones as mentioned above.

Wide character in print at ActionWords.pm line 844.
Testcondition - ODSKC10: One or more policies are possible but one policy named “default” is mandatory

-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Wide character in print at ActionWords.pm line 830.
Testcase - ODSKC10T10: Configure one policy named “test” and confirm ods-kaspcheck fails

2011-03-28 16:36:56.600 00081 Comment: The path of the kasp file in the conf.xml is the wrong path to the kasp.xml file. The ods-kaspcheck will fail.

2011-03-28 16:36:56.600 Requirement: ODSKC10

2011-03-28 16:36:56.600 00083 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:36:56.600 Requirement: ODSKC10

2011-03-28 16:36:56.600 00085 Stop()
2011-03-28 16:36:56.600 Requirement: ODSKC10
2011-03-28 16:36:56.600 RunCommand(ods-control stop)
2011-03-28 16:36:57.609 - runCommand: Process started, PID: 18073
2011-03-28 16:36:57.609 OUTPUT:	Stopping enforcer...
2011-03-28 16:36:57.609 OUTPUT:	Stopping signer engine..
2011-03-28 16:36:57.609 OUTPUT:	Engine shut down.
2011-03-28 16:36:57.609 RunCommand(ps -e | grep enforcer)
2011-03-28 16:36:57.627 - runCommand: Process started, PID: 18079
2011-03-28 16:36:57.627 ERROR:	return code = 1
2011-03-28 16:36:57.627 RunCommand(ps -e | grep signer)
2011-03-28 16:36:57.646 - runCommand: Process started, PID: 18082
2011-03-28 16:36:57.646 ERROR:	return code = 1

2011-03-28 16:36:57.646 00087 Wait(10)

2011-03-28 16:36:57.646 Requirement: ODSKC10

2011-03-28 16:37:07.646 00089 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:37:07.646 Requirement: ODSKC10

2011-03-28 16:37:07.647 00092 LoadConfig()
2011-03-28 16:37:07.647 Requirement: ODSKC10
2011-03-28 16:37:07.647 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/ODSKC10T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:37:07.653 - runCommand: Process started, PID: 18085

2011-03-28 16:37:07.653 00095 LoadConfig()
2011-03-28 16:37:07.653 Requirement: ODSKC10
2011-03-28 16:37:07.653 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC10T10_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:37:07.659 - runCommand: Process started, PID: 18086

2011-03-28 16:37:07.659 00097 Comment: Update all the configs.

2011-03-28 16:37:07.659 Requirement: ODSKC10

2011-03-28 16:37:07.659 00099 UpdateAll()
2011-03-28 16:37:07.659 Requirement: ODSKC10
2011-03-28 16:37:07.659 RunCommand(ods-ksmutil update all)
2011-03-28 16:37:07.858 - runCommand: Process started, PID: 18087
2011-03-28 16:37:07.858 OUTPUT:	ERROR: Can't find KASP config file : /etc/wrongfolder/kasp.xml
2011-03-28 16:37:07.858 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:37:07.858 OUTPUT:	kasp filename set to /etc/wrongfolder/kasp.xml.
2011-03-28 16:37:07.858 OUTPUT:	Repository SoftHSM found
2011-03-28 16:37:07.858 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:37:07.858 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:37:07.858 OUTPUT:	Error: unable to parse file "/etc/wrongfolder/kasp.xml"
2011-03-28 16:37:07.858 OUTPUT:	Failed to update policies
2011-03-28 16:37:07.858 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:37:07.858 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:37:07.858 ERROR:	warning: failed to load external entity "/etc/wrongfolder/kasp.xml"
2011-03-28 16:37:07.858 ERROR:	I/O warning : failed to load external entity "/etc/wrongfolder/kasp.xml"
2011-03-28 16:37:07.858 ERROR:	return code = 1

2011-03-28 16:37:07.858 00101 Wait(20)

2011-03-28 16:37:07.858 Requirement: ODSKC10

2011-03-28 16:37:27.859 00103 Comment: Check if the conf and kasp.xml files validate. For this testcase they should not validate.

2011-03-28 16:37:27.859 Requirement: ODSKC10

2011-03-28 16:37:27.859 00107 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:37:27.859 Requirement: ODSKC10

2011-03-28 16:37:27.859 00109 Stop()
2011-03-28 16:37:27.859 Requirement: ODSKC10
2011-03-28 16:37:27.859 RunCommand(ods-control stop)
2011-03-28 16:37:27.866 - runCommand: Process started, PID: 18095
2011-03-28 16:37:27.866 OUTPUT:	Stopping enforcer...
2011-03-28 16:37:27.866 OUTPUT:	Cannot find PID file
2011-03-28 16:37:27.866 OUTPUT:	Stopping signer engine..
2011-03-28 16:37:27.866 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:37:27.866 ERROR:	return code = 1
2011-03-28 16:37:27.866 RunCommand(ps -e | grep enforcer)
2011-03-28 16:37:27.879 - runCommand: Process started, PID: 18098
2011-03-28 16:37:27.879 ERROR:	return code = 1
2011-03-28 16:37:27.879 RunCommand(ps -e | grep signer)
2011-03-28 16:37:27.890 - runCommand: Process started, PID: 18101
2011-03-28 16:37:27.890 ERROR:	return code = 1

2011-03-28 16:37:27.890 00112 CheckLog()
2011-03-28 16:37:27.890 Requirement: ODSKC10
2011-03-28 16:37:28.525 FAILED:	(Check for Like) - Expected: ERROR: Can't find KASP config file : /etc/wrongfolder/kasp.xml Found: 

2011-03-28 16:37:28.527 00114 Comment: Reset the config files to the original ones.

2011-03-28 16:37:28.527 Requirement: ODSKC10

2011-03-28 16:37:28.528 00117 Wait(10)

2011-03-28 16:37:28.528 Requirement: ODSKC10

2011-03-28 16:37:38.531 00120 LoadConfig()
2011-03-28 16:37:38.531 Requirement: ODSKC10
2011-03-28 16:37:38.532 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:37:38.594 - runCommand: Process started, PID: 18104

2011-03-28 16:37:38.597 00123 LoadConfig()
2011-03-28 16:37:38.598 Requirement: ODSKC10
2011-03-28 16:37:38.598 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:37:38.653 - runCommand: Process started, PID: 18105

2011-03-28 16:37:38.656 00125 Comment: Update all the configs.

2011-03-28 16:37:38.656 Requirement: ODSKC10

2011-03-28 16:37:38.658 00127 UpdateAll()
2011-03-28 16:37:38.658 Requirement: ODSKC10
2011-03-28 16:37:38.658 RunCommand(ods-ksmutil update all)
2011-03-28 16:37:39.426 - runCommand: Process started, PID: 18106
2011-03-28 16:37:39.426 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:37:39.426 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:37:39.426 OUTPUT:	Repository SoftHSM found
2011-03-28 16:37:39.426 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:37:39.426 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:37:39.426 OUTPUT:	Policy default found
2011-03-28 16:37:39.426 OUTPUT:	Policy default2 found
2011-03-28 16:37:39.426 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:37:39.426 OUTPUT:	Zone ods found
2011-03-28 16:37:39.426 OUTPUT:	Policy set to default.
2011-03-28 16:37:39.426 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:37:39.426 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:37:39.426 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Wide character in print at ActionWords.pm line 830, <ERROR> line 9.
Testcase - ODSKC10T20: Configure one policy named “default” and one additional policy and confirm ods-kaspcheck runs successfully

2011-03-28 16:37:39.427 00134 Comment: In the kasp.xml for this testcase, the policy "default" exists. This is the policy which is also in the zonelist.xml for the zone "ods". One additional policy (default2) is also added to the kasp.xml.

2011-03-28 16:37:39.427 Requirement: ODSKC10

2011-03-28 16:37:39.427 00136 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:37:39.427 Requirement: ODSKC10

2011-03-28 16:37:39.427 00138 Stop()
2011-03-28 16:37:39.427 Requirement: ODSKC10
2011-03-28 16:37:39.427 RunCommand(ods-control stop)
2011-03-28 16:37:39.435 - runCommand: Process started, PID: 18114
2011-03-28 16:37:39.435 OUTPUT:	Stopping enforcer...
2011-03-28 16:37:39.435 OUTPUT:	Cannot find PID file
2011-03-28 16:37:39.435 OUTPUT:	Stopping signer engine..
2011-03-28 16:37:39.435 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:37:39.435 ERROR:	return code = 1
2011-03-28 16:37:39.435 RunCommand(ps -e | grep enforcer)
2011-03-28 16:37:39.451 - runCommand: Process started, PID: 18117
2011-03-28 16:37:39.451 ERROR:	return code = 1
2011-03-28 16:37:39.451 RunCommand(ps -e | grep signer)
2011-03-28 16:37:39.465 - runCommand: Process started, PID: 18120
2011-03-28 16:37:39.465 ERROR:	return code = 1

2011-03-28 16:37:39.466 00140 Wait(10)

2011-03-28 16:37:39.466 Requirement: ODSKC10

2011-03-28 16:37:49.466 00142 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:37:49.466 Requirement: ODSKC10

2011-03-28 16:37:49.466 00145 LoadConfig()
2011-03-28 16:37:49.466 Requirement: ODSKC10
2011-03-28 16:37:49.466 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/ODSKC10T20_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:37:49.472 - runCommand: Process started, PID: 18123

2011-03-28 16:37:49.473 00148 LoadConfig()
2011-03-28 16:37:49.473 Requirement: ODSKC10
2011-03-28 16:37:49.473 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC10T20_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:37:49.478 - runCommand: Process started, PID: 18124

2011-03-28 16:37:49.479 00150 Comment: Update all the configs.

2011-03-28 16:37:49.479 Requirement: ODSKC10

2011-03-28 16:37:49.479 00152 UpdateAll()
2011-03-28 16:37:49.479 Requirement: ODSKC10
2011-03-28 16:37:49.479 RunCommand(ods-ksmutil update all)
2011-03-28 16:37:50.787 - runCommand: Process started, PID: 18125
2011-03-28 16:37:50.787 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:37:50.787 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:37:50.787 OUTPUT:	Repository SoftHSM found
2011-03-28 16:37:50.787 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:37:50.787 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:37:50.787 OUTPUT:	Policy default found
2011-03-28 16:37:50.787 OUTPUT:	Policy default2 found
2011-03-28 16:37:50.787 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:37:50.787 OUTPUT:	Zone ods found
2011-03-28 16:37:50.787 OUTPUT:	Policy set to default.
2011-03-28 16:37:50.787 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:37:50.787 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:37:50.787 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:37:50.788 00154 Wait(20)

2011-03-28 16:37:50.788 Requirement: ODSKC10

2011-03-28 16:38:10.788 00156 Comment: Check if the conf and kasp.xml files validate. For this testcase they should all validate.

2011-03-28 16:38:10.788 Requirement: ODSKC10

2011-03-28 16:38:10.788 00160 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:38:10.788 Requirement: ODSKC10

2011-03-28 16:38:10.788 00162 Stop()
2011-03-28 16:38:10.788 Requirement: ODSKC10
2011-03-28 16:38:10.788 RunCommand(ods-control stop)
2011-03-28 16:38:10.796 - runCommand: Process started, PID: 18133
2011-03-28 16:38:10.796 OUTPUT:	Stopping enforcer...
2011-03-28 16:38:10.796 OUTPUT:	Cannot find PID file
2011-03-28 16:38:10.796 OUTPUT:	Stopping signer engine..
2011-03-28 16:38:10.796 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:38:10.796 ERROR:	return code = 1
2011-03-28 16:38:10.796 RunCommand(ps -e | grep enforcer)
2011-03-28 16:38:10.815 - runCommand: Process started, PID: 18136
2011-03-28 16:38:10.815 ERROR:	return code = 1
2011-03-28 16:38:10.815 RunCommand(ps -e | grep signer)
2011-03-28 16:38:10.830 - runCommand: Process started, PID: 18139
2011-03-28 16:38:10.830 ERROR:	return code = 1

2011-03-28 16:38:10.830 00165 CheckLog()
2011-03-28 16:38:10.830 Requirement: ODSKC10

2011-03-28 16:38:10.994 00168 CheckLog()
2011-03-28 16:38:10.994 Requirement: ODSKC10

2011-03-28 16:38:11.157 00170 Comment: Reset the config files to the original ones.

2011-03-28 16:38:11.157 Requirement: ODSKC10

2011-03-28 16:38:11.157 00172 Wait(10)

2011-03-28 16:38:11.157 Requirement: ODSKC10

2011-03-28 16:38:21.157 00175 LoadConfig()
2011-03-28 16:38:21.157 Requirement: ODSKC10
2011-03-28 16:38:21.157 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:38:21.164 - runCommand: Process started, PID: 18142

2011-03-28 16:38:21.164 00178 LoadConfig()
2011-03-28 16:38:21.164 Requirement: ODSKC10
2011-03-28 16:38:21.164 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:38:21.169 - runCommand: Process started, PID: 18143

2011-03-28 16:38:21.170 00180 Comment: Update all the configs.

2011-03-28 16:38:21.170 Requirement: ODSKC10

2011-03-28 16:38:21.170 00182 UpdateAll()
2011-03-28 16:38:21.170 Requirement: ODSKC10
2011-03-28 16:38:21.170 RunCommand(ods-ksmutil update all)
2011-03-28 16:38:22.587 - runCommand: Process started, PID: 18144
2011-03-28 16:38:22.588 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:38:22.588 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:38:22.588 OUTPUT:	Repository SoftHSM found
2011-03-28 16:38:22.588 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:38:22.588 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:38:22.588 OUTPUT:	Policy default found
2011-03-28 16:38:22.588 OUTPUT:	Policy default2 found
2011-03-28 16:38:22.588 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:38:22.588 OUTPUT:	Zone ods found
2011-03-28 16:38:22.588 OUTPUT:	Policy set to default.
2011-03-28 16:38:22.588 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:38:22.588 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:38:22.588 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Wide character in print at ActionWords.pm line 830, <ERROR> line 17.
Testcase - ODSKC10T30: Configure one policy named “default” and 10 additional policies and confirm ods-kaspcheck runs successfully

2011-03-28 16:38:22.588 00186 Comment: In the adjusted kasp.xml, 1 default policy exists (needed for signing the "ods" zone). Besides, 10 other policies are in the kasp.xml: "default2" till "default11". The signing with policy "default" should be succesfull.

2011-03-28 16:38:22.588 Requirement: ODSKC10

2011-03-28 16:38:22.589 00188 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:38:22.589 Requirement: ODSKC10

2011-03-28 16:38:22.589 00190 Stop()
2011-03-28 16:38:22.589 Requirement: ODSKC10
2011-03-28 16:38:22.589 RunCommand(ods-control stop)
2011-03-28 16:38:22.596 - runCommand: Process started, PID: 18152
2011-03-28 16:38:22.596 OUTPUT:	Stopping enforcer...
2011-03-28 16:38:22.596 OUTPUT:	Cannot find PID file
2011-03-28 16:38:22.596 OUTPUT:	Stopping signer engine..
2011-03-28 16:38:22.596 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:38:22.596 ERROR:	return code = 1
2011-03-28 16:38:22.596 RunCommand(ps -e | grep enforcer)
2011-03-28 16:38:22.613 - runCommand: Process started, PID: 18155
2011-03-28 16:38:22.614 ERROR:	return code = 1
2011-03-28 16:38:22.614 RunCommand(ps -e | grep signer)
2011-03-28 16:38:22.629 - runCommand: Process started, PID: 18158
2011-03-28 16:38:22.629 ERROR:	return code = 1

2011-03-28 16:38:22.629 00192 Wait(10)

2011-03-28 16:38:22.629 Requirement: ODSKC10

2011-03-28 16:38:32.629 00194 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:38:32.629 Requirement: ODSKC10

2011-03-28 16:38:32.629 00197 LoadConfig()
2011-03-28 16:38:32.629 Requirement: ODSKC10
2011-03-28 16:38:32.629 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/ODSCC10T30_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:38:32.636 - runCommand: Process started, PID: 18161
2011-03-28 16:38:32.636 ERROR:	cp: cannot stat `/home/ods/ods_testautomation/ods_sit_kasp/conf/ODSCC10T30_conf.xml': No such file or directory
2011-03-28 16:38:32.636 ERROR:	return code = 1

2011-03-28 16:38:32.636 00200 LoadConfig()
2011-03-28 16:38:32.636 Requirement: ODSKC10
2011-03-28 16:38:32.636 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC10T30_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:38:32.642 - runCommand: Process started, PID: 18162

2011-03-28 16:38:32.642 00202 Comment: Update all the configs.

2011-03-28 16:38:32.642 Requirement: ODSKC10

2011-03-28 16:38:32.642 00204 UpdateAll()
2011-03-28 16:38:32.642 Requirement: ODSKC10
2011-03-28 16:38:32.642 RunCommand(ods-ksmutil update all)
2011-03-28 16:38:39.545 - runCommand: Process started, PID: 18163
2011-03-28 16:38:39.546 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:38:39.546 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:38:39.546 OUTPUT:	Repository SoftHSM found
2011-03-28 16:38:39.547 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:38:39.547 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:38:39.547 OUTPUT:	Policy default found
2011-03-28 16:38:39.547 OUTPUT:	Policy default2 found
2011-03-28 16:38:39.547 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:38:39.547 OUTPUT:	Policy default3 found
2011-03-28 16:38:39.548 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:38:39.548 OUTPUT:	Policy default4 found
2011-03-28 16:38:39.548 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:38:39.548 OUTPUT:	Policy default5 found
2011-03-28 16:38:39.548 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:38:39.548 OUTPUT:	Policy default6 found
2011-03-28 16:38:39.548 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:38:39.549 OUTPUT:	Policy default7 found
2011-03-28 16:38:39.549 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:38:39.549 OUTPUT:	Policy default8 found
2011-03-28 16:38:39.549 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:38:39.549 OUTPUT:	Policy default9 found
2011-03-28 16:38:39.549 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:38:39.550 OUTPUT:	Policy default10 found
2011-03-28 16:38:39.550 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:38:39.550 OUTPUT:	Policy default11 found
2011-03-28 16:38:39.550 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:38:39.550 OUTPUT:	Zone ods found
2011-03-28 16:38:39.550 OUTPUT:	Policy set to default.
2011-03-28 16:38:39.551 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:38:39.551 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:38:39.551 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:38:39.553 00206 Wait(20)

2011-03-28 16:38:39.553 Requirement: ODSKC10

2011-03-28 16:38:59.555 00208 Comment: Check if the conf and kasp.xml files validate. For this testcase they should all validate.

2011-03-28 16:38:59.556 Requirement: ODSKC10

2011-03-28 16:38:59.557 00212 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:38:59.557 Requirement: ODSKC10

2011-03-28 16:38:59.558 00214 Stop()
2011-03-28 16:38:59.558 Requirement: ODSKC10
2011-03-28 16:38:59.558 RunCommand(ods-control stop)
2011-03-28 16:38:59.746 - runCommand: Process started, PID: 18204
2011-03-28 16:38:59.747 OUTPUT:	Stopping enforcer...
2011-03-28 16:38:59.747 OUTPUT:	Cannot find PID file
2011-03-28 16:38:59.747 OUTPUT:	Stopping signer engine..
2011-03-28 16:38:59.747 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:38:59.747 ERROR:	return code = 1
2011-03-28 16:38:59.747 RunCommand(ps -e | grep enforcer)
2011-03-28 16:38:59.913 - runCommand: Process started, PID: 18207
2011-03-28 16:38:59.914 ERROR:	return code = 1
2011-03-28 16:38:59.914 RunCommand(ps -e | grep signer)
2011-03-28 16:38:59.104 - runCommand: Process started, PID: 18210
2011-03-28 16:38:59.104 ERROR:	return code = 1

2011-03-28 16:38:59.104 00217 CheckLog()
2011-03-28 16:38:59.104 Requirement: ODSKC10

2011-03-28 16:38:59.280 00220 CheckLog()
2011-03-28 16:38:59.280 Requirement: ODSKC10

2011-03-28 16:38:59.463 00222 Comment: Reset the config files to the original ones.

2011-03-28 16:38:59.463 Requirement: ODSKC10

2011-03-28 16:38:59.463 00224 Wait(10)

2011-03-28 16:38:59.463 Requirement: ODSKC10

2011-03-28 16:39:09.464 00227 LoadConfig()
2011-03-28 16:39:09.464 Requirement: ODSKC10
2011-03-28 16:39:09.464 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:39:09.470 - runCommand: Process started, PID: 18214

2011-03-28 16:39:09.470 00230 LoadConfig()
2011-03-28 16:39:09.470 Requirement: ODSKC10
2011-03-28 16:39:09.471 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:39:09.476 - runCommand: Process started, PID: 18215

2011-03-28 16:39:09.477 00232 Comment: Update all the configs.

2011-03-28 16:39:09.477 Requirement: ODSKC10

2011-03-28 16:39:09.477 00234 UpdateAll()
2011-03-28 16:39:09.477 Requirement: ODSKC10
2011-03-28 16:39:09.477 RunCommand(ods-ksmutil update all)
2011-03-28 16:39:10.846 - runCommand: Process started, PID: 18216
2011-03-28 16:39:10.846 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:39:10.846 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:39:10.846 OUTPUT:	Repository SoftHSM found
2011-03-28 16:39:10.846 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:39:10.846 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:39:10.846 OUTPUT:	Policy default found
2011-03-28 16:39:10.846 OUTPUT:	Policy default2 found
2011-03-28 16:39:10.846 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:39:10.846 OUTPUT:	Zone ods found
2011-03-28 16:39:10.846 OUTPUT:	Policy set to default.
2011-03-28 16:39:10.846 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:39:10.846 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:39:10.846 ERROR:	/etc/opendnssec/kasp.xml validates
Testcondition - ODSKC20: The Signatures part located in kasp.xml should conform to several constraints and requirements

-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSKC20T10: Use a value with an incorrect format for Resign (P10S) and confirm ods-kaspcheck fails

2011-03-28 16:39:10.847 00241 Comment: Change the Resign time to a incorrect format. Ods-kaspcheck should fail.

2011-03-28 16:39:10.847 Requirement: ODSKC20

2011-03-28 16:39:10.847 00243 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:39:10.847 Requirement: ODSKC20

2011-03-28 16:39:10.848 00245 Stop()
2011-03-28 16:39:10.848 Requirement: ODSKC20
2011-03-28 16:39:10.848 RunCommand(ods-control stop)
2011-03-28 16:39:10.855 - runCommand: Process started, PID: 18224
2011-03-28 16:39:10.855 OUTPUT:	Stopping enforcer...
2011-03-28 16:39:10.855 OUTPUT:	Cannot find PID file
2011-03-28 16:39:10.855 OUTPUT:	Stopping signer engine..
2011-03-28 16:39:10.855 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:39:10.855 ERROR:	return code = 1
2011-03-28 16:39:10.855 RunCommand(ps -e | grep enforcer)
2011-03-28 16:39:10.870 - runCommand: Process started, PID: 18227
2011-03-28 16:39:10.870 ERROR:	return code = 1
2011-03-28 16:39:10.870 RunCommand(ps -e | grep signer)
2011-03-28 16:39:10.883 - runCommand: Process started, PID: 18230
2011-03-28 16:39:10.883 ERROR:	return code = 1

2011-03-28 16:39:10.884 00247 Wait(10)

2011-03-28 16:39:10.884 Requirement: ODSKC20

2011-03-28 16:39:20.884 00249 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:39:20.884 Requirement: ODSKC20

2011-03-28 16:39:20.884 00252 LoadConfig()
2011-03-28 16:39:20.884 Requirement: ODSKC20
2011-03-28 16:39:20.884 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/ODSKC20T10_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:39:20.891 - runCommand: Process started, PID: 18233

2011-03-28 16:39:20.891 00255 LoadConfig()
2011-03-28 16:39:20.891 Requirement: ODSKC20
2011-03-28 16:39:20.891 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC20T10_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:39:20.897 - runCommand: Process started, PID: 18234

2011-03-28 16:39:20.897 00257 Comment: Update all the configs.

2011-03-28 16:39:20.897 Requirement: ODSKC20

2011-03-28 16:39:20.897 00259 UpdateAll()
2011-03-28 16:39:20.897 Requirement: ODSKC20
2011-03-28 16:39:20.897 RunCommand(ods-ksmutil update all)
2011-03-28 16:39:21.227 - runCommand: Process started, PID: 18235
2011-03-28 16:39:21.227 OUTPUT:	ERROR: Can't find Signatures/Resign in default in /etc/opendnssec/kasp.xml
2011-03-28 16:39:21.227 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:39:21.227 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:39:21.227 OUTPUT:	Repository SoftHSM found
2011-03-28 16:39:21.227 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:39:21.227 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:39:21.227 OUTPUT:	Error validating file "/etc/opendnssec/kasp.xml"
2011-03-28 16:39:21.227 OUTPUT:	Failed to update policies
2011-03-28 16:39:21.227 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:39:21.227 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:39:21.227 ERROR:	/etc/opendnssec/kasp.xml:11: element Resign: Relax-NG validity error : Type duration doesn't allow value 'P10S'
2011-03-28 16:39:21.227 ERROR:	/etc/opendnssec/kasp.xml:11: element Resign: Relax-NG validity error : Error validating datatype duration
2011-03-28 16:39:21.227 ERROR:	/etc/opendnssec/kasp.xml:11: element Resign: Relax-NG validity error : Element Resign failed to validate content
2011-03-28 16:39:21.227 ERROR:	/etc/opendnssec/kasp.xml fails to validate
2011-03-28 16:39:21.227 ERROR:	/usr/local/lib/opendnssec/kasp_checker.rb:447:in `/': divided by 0 (ZeroDivisionError)
2011-03-28 16:39:21.227 ERROR:		from /usr/local/lib/opendnssec/kasp_checker.rb:447:in `check_kasp_file'
2011-03-28 16:39:21.227 ERROR:		from /usr/lib/ruby/1.8/rexml/element.rb:892:in `each'
2011-03-28 16:39:21.227 ERROR:		from /usr/lib/ruby/1.8/rexml/xpath.rb:53:in `each'
2011-03-28 16:39:21.227 ERROR:		from /usr/lib/ruby/1.8/rexml/element.rb:892:in `each'
2011-03-28 16:39:21.227 ERROR:		from /usr/local/lib/opendnssec/kasp_checker.rb:343:in `check_kasp_file'
2011-03-28 16:39:21.227 ERROR:		from /usr/local/lib/opendnssec/kasp_checker.rb:333:in `open'
2011-03-28 16:39:21.227 ERROR:		from /usr/local/lib/opendnssec/kasp_checker.rb:333:in `check_kasp_file'
2011-03-28 16:39:21.227 ERROR:		from /usr/local/lib/opendnssec/kasp_checker.rb:66:in `check'
2011-03-28 16:39:21.227 ERROR:		from /usr/local/bin/ods-kaspcheck:110
2011-03-28 16:39:21.227 ERROR:	Couldn't run kaspcheck, will carry on
2011-03-28 16:39:21.227 ERROR:	/etc/opendnssec/kasp.xml:11: element Resign: Relax-NG validity error : Type duration doesn't allow value 'P10S'
2011-03-28 16:39:21.227 ERROR:	/etc/opendnssec/kasp.xml:11: element Resign: Relax-NG validity error : Error validating datatype duration
2011-03-28 16:39:21.227 ERROR:	/etc/opendnssec/kasp.xml:11: element Resign: Relax-NG validity error : Element Resign failed to validate content
2011-03-28 16:39:21.227 ERROR:	return code = 1

2011-03-28 16:39:21.227 00261 Wait(20)

2011-03-28 16:39:21.227 Requirement: ODSKC20

2011-03-28 16:39:41.228 00263 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate. 

2011-03-28 16:39:41.228 Requirement: ODSKC20

2011-03-28 16:39:41.228 00267 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:39:41.228 Requirement: ODSKC20

2011-03-28 16:39:41.228 00269 Stop()
2011-03-28 16:39:41.228 Requirement: ODSKC20
2011-03-28 16:39:41.228 RunCommand(ods-control stop)
2011-03-28 16:39:41.236 - runCommand: Process started, PID: 18244
2011-03-28 16:39:41.236 OUTPUT:	Stopping enforcer...
2011-03-28 16:39:41.236 OUTPUT:	Cannot find PID file
2011-03-28 16:39:41.236 OUTPUT:	Stopping signer engine..
2011-03-28 16:39:41.236 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:39:41.236 ERROR:	return code = 1
2011-03-28 16:39:41.236 RunCommand(ps -e | grep enforcer)
2011-03-28 16:39:41.254 - runCommand: Process started, PID: 18247
2011-03-28 16:39:41.254 ERROR:	return code = 1
2011-03-28 16:39:41.254 RunCommand(ps -e | grep signer)
2011-03-28 16:39:41.272 - runCommand: Process started, PID: 18250
2011-03-28 16:39:41.272 ERROR:	return code = 1

2011-03-28 16:39:41.272 00272 CheckLog()
2011-03-28 16:39:41.272 Requirement: ODSKC20

2011-03-28 16:39:41.442 00275 CheckLog()
2011-03-28 16:39:41.442 Requirement: ODSKC20

2011-03-28 16:39:41.604 00278 CheckLog()
2011-03-28 16:39:41.604 Requirement: ODSKC20

2011-03-28 16:39:41.765 00280 Comment: Reset the config files to the original ones.

2011-03-28 16:39:41.765 Requirement: ODSKC20

2011-03-28 16:39:41.765 00283 Wait(10)

2011-03-28 16:39:41.765 Requirement: ODSKC20

2011-03-28 16:39:51.766 00286 LoadConfig()
2011-03-28 16:39:51.766 Requirement: ODSKC20
2011-03-28 16:39:51.766 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:39:51.773 - runCommand: Process started, PID: 18253

2011-03-28 16:39:51.773 00289 LoadConfig()
2011-03-28 16:39:51.773 Requirement: ODSKC20
2011-03-28 16:39:51.773 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:39:51.778 - runCommand: Process started, PID: 18254

2011-03-28 16:39:51.779 00291 Comment: Update all the configs.

2011-03-28 16:39:51.779 Requirement: ODSKC20

2011-03-28 16:39:51.779 00293 UpdateAll()
2011-03-28 16:39:51.779 Requirement: ODSKC20
2011-03-28 16:39:51.779 RunCommand(ods-ksmutil update all)
2011-03-28 16:39:53.158 - runCommand: Process started, PID: 18255
2011-03-28 16:39:53.158 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:39:53.158 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:39:53.158 OUTPUT:	Repository SoftHSM found
2011-03-28 16:39:53.158 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:39:53.158 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:39:53.158 OUTPUT:	Policy default found
2011-03-28 16:39:53.158 OUTPUT:	Policy default2 found
2011-03-28 16:39:53.158 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:39:53.158 OUTPUT:	Zone ods found
2011-03-28 16:39:53.158 OUTPUT:	Policy set to default.
2011-03-28 16:39:53.158 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:39:53.158 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:39:53.158 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC20T20: Use a very high value for Resign (P10Y) and confirm ods-kaspcheck runs successfully

2011-03-28 16:39:53.159 00298 Comment: Change the Resign time to a high value format. Ods-kaspcheck should validate for conf.xml and kasp.xml.

2011-03-28 16:39:53.159 Requirement: ODSKC20

2011-03-28 16:39:53.159 00300 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:39:53.159 Requirement: ODSKC20

2011-03-28 16:39:53.159 00302 Stop()
2011-03-28 16:39:53.159 Requirement: ODSKC20
2011-03-28 16:39:53.159 RunCommand(ods-control stop)
2011-03-28 16:39:53.166 - runCommand: Process started, PID: 18263
2011-03-28 16:39:53.167 OUTPUT:	Stopping enforcer...
2011-03-28 16:39:53.167 OUTPUT:	Cannot find PID file
2011-03-28 16:39:53.167 OUTPUT:	Stopping signer engine..
2011-03-28 16:39:53.167 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:39:53.167 ERROR:	return code = 1
2011-03-28 16:39:53.167 RunCommand(ps -e | grep enforcer)
2011-03-28 16:39:53.185 - runCommand: Process started, PID: 18266
2011-03-28 16:39:53.185 ERROR:	return code = 1
2011-03-28 16:39:53.185 RunCommand(ps -e | grep signer)
2011-03-28 16:39:53.202 - runCommand: Process started, PID: 18269
2011-03-28 16:39:53.202 ERROR:	return code = 1

2011-03-28 16:39:53.202 00304 Wait(10)

2011-03-28 16:39:53.202 Requirement: ODSKC20

2011-03-28 16:40:03.203 00306 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:40:03.203 Requirement: ODSKC20

2011-03-28 16:40:03.203 00309 LoadConfig()
2011-03-28 16:40:03.203 Requirement: ODSKC20
2011-03-28 16:40:03.203 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:40:03.209 - runCommand: Process started, PID: 18272

2011-03-28 16:40:03.210 00312 LoadConfig()
2011-03-28 16:40:03.210 Requirement: ODSKC20
2011-03-28 16:40:03.210 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC20T20_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:40:03.215 - runCommand: Process started, PID: 18273

2011-03-28 16:40:03.216 00314 Comment: Update all the configs.

2011-03-28 16:40:03.216 Requirement: ODSKC20

2011-03-28 16:40:03.216 00316 UpdateAll()
2011-03-28 16:40:03.216 Requirement: ODSKC20
2011-03-28 16:40:03.216 RunCommand(ods-ksmutil update all)
2011-03-28 16:40:09.666 - runCommand: Process started, PID: 18274
2011-03-28 16:40:09.666 OUTPUT:	ERROR: The Refresh interval (900 seconds) for default Policy in /etc/opendnssec/kasp.xml is less than or equal to the Resign interval (315360000 seconds)
2011-03-28 16:40:09.666 OUTPUT:	WARNING: In policy default,  Y used in duration field for Signatures/Resign (P10Y) in /etc/opendnssec/kasp.xml - this will be interpreted as 365 days
2011-03-28 16:40:09.666 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:40:09.666 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:40:09.666 OUTPUT:	Repository SoftHSM found
2011-03-28 16:40:09.666 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:40:09.666 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:40:09.666 OUTPUT:	Policy default found
2011-03-28 16:40:09.666 OUTPUT:	Info: converting P10Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:09.666 OUTPUT:	Policy default2 found
2011-03-28 16:40:09.666 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:09.666 OUTPUT:	Policy default3 found
2011-03-28 16:40:09.666 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:09.666 OUTPUT:	Policy default4 found
2011-03-28 16:40:09.666 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:09.666 OUTPUT:	Policy default5 found
2011-03-28 16:40:09.666 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:09.666 OUTPUT:	Policy default6 found
2011-03-28 16:40:09.666 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:09.666 OUTPUT:	Policy default7 found
2011-03-28 16:40:09.666 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:09.666 OUTPUT:	Policy default8 found
2011-03-28 16:40:09.666 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:40:09.666 OUTPUT:	Policy default9 found
2011-03-28 16:40:09.666 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:09.667 OUTPUT:	Policy default10 found
2011-03-28 16:40:09.667 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:09.667 OUTPUT:	Policy default11 found
2011-03-28 16:40:09.667 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:09.667 OUTPUT:	Zone ods found
2011-03-28 16:40:09.667 OUTPUT:	Policy set to default.
2011-03-28 16:40:09.667 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:40:09.667 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:40:09.667 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:40:09.667 00318 Wait(20)

2011-03-28 16:40:09.667 Requirement: ODSKC20

2011-03-28 16:40:29.667 00320 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should validate for the kasp.xml and conf.xml. 

2011-03-28 16:40:29.667 Requirement: ODSKC20

2011-03-28 16:40:29.667 00324 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:40:29.667 Requirement: ODSKC20

2011-03-28 16:40:29.668 00326 Stop()
2011-03-28 16:40:29.668 Requirement: ODSKC20
2011-03-28 16:40:29.668 RunCommand(ods-control stop)
2011-03-28 16:40:29.675 - runCommand: Process started, PID: 18282
2011-03-28 16:40:29.675 OUTPUT:	Stopping enforcer...
2011-03-28 16:40:29.675 OUTPUT:	Cannot find PID file
2011-03-28 16:40:29.675 OUTPUT:	Stopping signer engine..
2011-03-28 16:40:29.675 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:40:29.675 ERROR:	return code = 1
2011-03-28 16:40:29.675 RunCommand(ps -e | grep enforcer)
2011-03-28 16:40:29.692 - runCommand: Process started, PID: 18285
2011-03-28 16:40:29.692 ERROR:	return code = 1
2011-03-28 16:40:29.692 RunCommand(ps -e | grep signer)
2011-03-28 16:40:29.703 - runCommand: Process started, PID: 18288
2011-03-28 16:40:29.703 ERROR:	return code = 1

2011-03-28 16:40:29.703 00329 CheckLog()
2011-03-28 16:40:29.703 Requirement: ODSKC20
2011-03-28 16:40:29.865 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 16:40:29.866 00332 CheckLog()
2011-03-28 16:40:29.866 Requirement: ODSKC20
2011-03-28 16:40:30.276 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml validates Found: 

2011-03-28 16:40:30.277 00334 Comment: Reset the config files to the original ones.

2011-03-28 16:40:30.277 Requirement: ODSKC20

2011-03-28 16:40:30.278 00337 Wait(10)

2011-03-28 16:40:30.278 Requirement: ODSKC20

2011-03-28 16:40:40.281 00340 LoadConfig()
2011-03-28 16:40:40.281 Requirement: ODSKC20
2011-03-28 16:40:40.282 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:40:40.345 - runCommand: Process started, PID: 18291

2011-03-28 16:40:40.348 00343 LoadConfig()
2011-03-28 16:40:40.349 Requirement: ODSKC20
2011-03-28 16:40:40.349 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:40:40.404 - runCommand: Process started, PID: 18292

2011-03-28 16:40:40.407 00345 Comment: Update all the configs.

2011-03-28 16:40:40.408 Requirement: ODSKC20

2011-03-28 16:40:40.409 00347 UpdateAll()
2011-03-28 16:40:40.409 Requirement: ODSKC20
2011-03-28 16:40:40.410 RunCommand(ods-ksmutil update all)
2011-03-28 16:40:41.416 - runCommand: Process started, PID: 18293
2011-03-28 16:40:41.416 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:40:41.417 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:40:41.417 OUTPUT:	Repository SoftHSM found
2011-03-28 16:40:41.417 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:40:41.417 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:40:41.417 OUTPUT:	Policy default found
2011-03-28 16:40:41.417 OUTPUT:	Policy default2 found
2011-03-28 16:40:41.417 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:41.417 OUTPUT:	Zone ods found
2011-03-28 16:40:41.417 OUTPUT:	Policy set to default.
2011-03-28 16:40:41.417 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:40:41.417 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:40:41.417 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC20T30: Use a very low value for Resign (PT1S) and confirm ods-kaspcheck fails

2011-03-28 16:40:41.417 00353 Comment: Change the Resign time to a very low value. Logically spoken: the Ods-kaspcheck should validate for conf.xml and not for kasp.xml. (note: this is not well documented). According to the developpers the kasp.xml should be validated correctly.

2011-03-28 16:40:41.417 Requirement: ODSKC20

2011-03-28 16:40:41.417 00355 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:40:41.417 Requirement: ODSKC20

2011-03-28 16:40:41.418 00357 Stop()
2011-03-28 16:40:41.418 Requirement: ODSKC20
2011-03-28 16:40:41.418 RunCommand(ods-control stop)
2011-03-28 16:40:41.425 - runCommand: Process started, PID: 18301
2011-03-28 16:40:41.425 OUTPUT:	Stopping enforcer...
2011-03-28 16:40:41.425 OUTPUT:	Cannot find PID file
2011-03-28 16:40:41.425 OUTPUT:	Stopping signer engine..
2011-03-28 16:40:41.425 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:40:41.425 ERROR:	return code = 1
2011-03-28 16:40:41.425 RunCommand(ps -e | grep enforcer)
2011-03-28 16:40:41.442 - runCommand: Process started, PID: 18304
2011-03-28 16:40:41.442 ERROR:	return code = 1
2011-03-28 16:40:41.442 RunCommand(ps -e | grep signer)
2011-03-28 16:40:41.453 - runCommand: Process started, PID: 18307
2011-03-28 16:40:41.453 ERROR:	return code = 1

2011-03-28 16:40:41.453 00359 Wait(10)

2011-03-28 16:40:41.453 Requirement: ODSKC20

2011-03-28 16:40:51.453 00361 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:40:51.453 Requirement: ODSKC20

2011-03-28 16:40:51.454 00364 LoadConfig()
2011-03-28 16:40:51.454 Requirement: ODSKC20
2011-03-28 16:40:51.454 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:40:51.460 - runCommand: Process started, PID: 18310

2011-03-28 16:40:51.460 00367 LoadConfig()
2011-03-28 16:40:51.460 Requirement: ODSKC20
2011-03-28 16:40:51.460 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC20T30_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:40:51.466 - runCommand: Process started, PID: 18311

2011-03-28 16:40:51.466 00369 Comment: Update all the configs.

2011-03-28 16:40:51.466 Requirement: ODSKC20

2011-03-28 16:40:51.466 00371 UpdateAll()
2011-03-28 16:40:51.466 Requirement: ODSKC20
2011-03-28 16:40:51.466 RunCommand(ods-ksmutil update all)
2011-03-28 16:40:57.550 - runCommand: Process started, PID: 18312
2011-03-28 16:40:57.550 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:40:57.550 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:40:57.550 OUTPUT:	Repository SoftHSM found
2011-03-28 16:40:57.550 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:40:57.550 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:40:57.550 OUTPUT:	Policy default found
2011-03-28 16:40:57.550 OUTPUT:	Policy default2 found
2011-03-28 16:40:57.550 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:57.550 OUTPUT:	Policy default3 found
2011-03-28 16:40:57.550 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:57.550 OUTPUT:	Policy default4 found
2011-03-28 16:40:57.550 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:57.550 OUTPUT:	Policy default5 found
2011-03-28 16:40:57.550 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:57.550 OUTPUT:	Policy default6 found
2011-03-28 16:40:57.550 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:57.550 OUTPUT:	Policy default7 found
2011-03-28 16:40:57.550 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:57.550 OUTPUT:	Policy default8 found
2011-03-28 16:40:57.550 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:40:57.550 OUTPUT:	Policy default9 found
2011-03-28 16:40:57.550 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:57.550 OUTPUT:	Policy default10 found
2011-03-28 16:40:57.550 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:57.550 OUTPUT:	Policy default11 found
2011-03-28 16:40:57.550 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:40:57.550 OUTPUT:	Zone ods found
2011-03-28 16:40:57.550 OUTPUT:	Policy set to default.
2011-03-28 16:40:57.550 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:40:57.550 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:40:57.550 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:40:57.551 00373 Wait(20)

2011-03-28 16:40:57.551 Requirement: ODSKC20

2011-03-28 16:41:17.551 00375 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should validate for the conf.xml and not for the kasp.xml. 

2011-03-28 16:41:17.551 Requirement: ODSKC20

2011-03-28 16:41:17.551 00379 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:41:17.551 Requirement: ODSKC20

2011-03-28 16:41:17.551 00381 Stop()
2011-03-28 16:41:17.551 Requirement: ODSKC20
2011-03-28 16:41:17.551 RunCommand(ods-control stop)
2011-03-28 16:41:17.559 - runCommand: Process started, PID: 18320
2011-03-28 16:41:17.559 OUTPUT:	Stopping enforcer...
2011-03-28 16:41:17.559 OUTPUT:	Cannot find PID file
2011-03-28 16:41:17.559 OUTPUT:	Stopping signer engine..
2011-03-28 16:41:17.559 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:41:17.559 ERROR:	return code = 1
2011-03-28 16:41:17.559 RunCommand(ps -e | grep enforcer)
2011-03-28 16:41:17.575 - runCommand: Process started, PID: 18323
2011-03-28 16:41:17.575 ERROR:	return code = 1
2011-03-28 16:41:17.575 RunCommand(ps -e | grep signer)
2011-03-28 16:41:17.587 - runCommand: Process started, PID: 18326
2011-03-28 16:41:17.587 ERROR:	return code = 1

2011-03-28 16:41:17.587 00384 CheckLog()
2011-03-28 16:41:17.587 Requirement: ODSKC20

2011-03-28 16:41:17.754 00387 CheckLog()
2011-03-28 16:41:17.754 Requirement: ODSKC20

2011-03-28 16:41:17.916 00389 Comment: Reset the config files to the original ones.

2011-03-28 16:41:17.916 Requirement: ODSKC20

2011-03-28 16:41:17.916 00392 Wait(10)

2011-03-28 16:41:17.916 Requirement: ODSKC20

2011-03-28 16:41:27.916 00395 LoadConfig()
2011-03-28 16:41:27.916 Requirement: ODSKC20
2011-03-28 16:41:27.916 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:41:27.923 - runCommand: Process started, PID: 18329

2011-03-28 16:41:27.923 00398 LoadConfig()
2011-03-28 16:41:27.923 Requirement: ODSKC20
2011-03-28 16:41:27.923 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:41:27.928 - runCommand: Process started, PID: 18330

2011-03-28 16:41:27.929 00400 Comment: Update all the configs.

2011-03-28 16:41:27.929 Requirement: ODSKC20

2011-03-28 16:41:27.929 00402 UpdateAll()
2011-03-28 16:41:27.929 Requirement: ODSKC20
2011-03-28 16:41:27.929 RunCommand(ods-ksmutil update all)
2011-03-28 16:41:29.392 - runCommand: Process started, PID: 18331
2011-03-28 16:41:29.392 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:41:29.392 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:41:29.392 OUTPUT:	Repository SoftHSM found
2011-03-28 16:41:29.392 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:41:29.392 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:41:29.392 OUTPUT:	Policy default found
2011-03-28 16:41:29.392 OUTPUT:	Policy default2 found
2011-03-28 16:41:29.392 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:41:29.392 OUTPUT:	Zone ods found
2011-03-28 16:41:29.392 OUTPUT:	Policy set to default.
2011-03-28 16:41:29.392 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:41:29.392 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:41:29.392 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC20T40: Use a value with an incorrect format for Refresh (PT1Y) and confirm ods-kaspcheck fails

2011-03-28 16:41:29.393 00407 Comment: Change the Refresh time to a incorrect format. Ods-kaspcheck should fail.

2011-03-28 16:41:29.393 Requirement: ODSKC20

2011-03-28 16:41:29.393 00409 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:41:29.393 Requirement: ODSKC20

2011-03-28 16:41:29.393 00411 Stop()
2011-03-28 16:41:29.393 Requirement: ODSKC20
2011-03-28 16:41:29.393 RunCommand(ods-control stop)
2011-03-28 16:41:29.400 - runCommand: Process started, PID: 18339
2011-03-28 16:41:29.400 OUTPUT:	Stopping enforcer...
2011-03-28 16:41:29.400 OUTPUT:	Cannot find PID file
2011-03-28 16:41:29.400 OUTPUT:	Stopping signer engine..
2011-03-28 16:41:29.401 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:41:29.401 ERROR:	return code = 1
2011-03-28 16:41:29.401 RunCommand(ps -e | grep enforcer)
2011-03-28 16:41:29.418 - runCommand: Process started, PID: 18342
2011-03-28 16:41:29.418 ERROR:	return code = 1
2011-03-28 16:41:29.418 RunCommand(ps -e | grep signer)
2011-03-28 16:41:29.429 - runCommand: Process started, PID: 18345
2011-03-28 16:41:29.429 ERROR:	return code = 1

2011-03-28 16:41:29.429 00413 Wait(10)

2011-03-28 16:41:29.429 Requirement: ODSKC20

2011-03-28 16:41:39.430 00415 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:41:39.430 Requirement: ODSKC20

2011-03-28 16:41:39.430 00418 LoadConfig()
2011-03-28 16:41:39.430 Requirement: ODSKC20
2011-03-28 16:41:39.430 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:41:39.436 - runCommand: Process started, PID: 18349

2011-03-28 16:41:39.437 00421 LoadConfig()
2011-03-28 16:41:39.437 Requirement: ODSKC20
2011-03-28 16:41:39.437 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC20T40_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:41:39.442 - runCommand: Process started, PID: 18350

2011-03-28 16:41:39.442 00423 Comment: Update all the configs.

2011-03-28 16:41:39.442 Requirement: ODSKC20

2011-03-28 16:41:39.443 00425 UpdateAll()
2011-03-28 16:41:39.443 Requirement: ODSKC20
2011-03-28 16:41:39.443 RunCommand(ods-ksmutil update all)
2011-03-28 16:41:40.312 - runCommand: Process started, PID: 18351
2011-03-28 16:41:40.312 OUTPUT:	ERROR: Can't find Signatures/Refresh in default in /etc/opendnssec/kasp.xml
2011-03-28 16:41:40.312 OUTPUT:	ERROR: The Refresh interval (0 seconds) for default Policy in /etc/opendnssec/kasp.xml is less than or equal to the Resign interval (180 seconds)
2011-03-28 16:41:40.312 OUTPUT:	WARNING: In policy default,  Y used in duration field for Signatures/Refresh (PT1Y) in /etc/opendnssec/kasp.xml - this will be interpreted as 365 days
2011-03-28 16:41:40.312 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:41:40.312 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:41:40.312 OUTPUT:	Repository SoftHSM found
2011-03-28 16:41:40.312 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:41:40.312 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:41:40.312 OUTPUT:	Error validating file "/etc/opendnssec/kasp.xml"
2011-03-28 16:41:40.312 OUTPUT:	Failed to update policies
2011-03-28 16:41:40.312 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:41:40.312 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:41:40.312 ERROR:	/etc/opendnssec/kasp.xml:12: element Refresh: Relax-NG validity error : Type duration doesn't allow value 'PT1Y'
2011-03-28 16:41:40.312 ERROR:	/etc/opendnssec/kasp.xml:12: element Refresh: Relax-NG validity error : Error validating datatype duration
2011-03-28 16:41:40.312 ERROR:	/etc/opendnssec/kasp.xml:12: element Refresh: Relax-NG validity error : Element Refresh failed to validate content
2011-03-28 16:41:40.312 ERROR:	/etc/opendnssec/kasp.xml fails to validate
2011-03-28 16:41:40.312 ERROR:	/etc/opendnssec/kasp.xml:12: element Refresh: Relax-NG validity error : Type duration doesn't allow value 'PT1Y'
2011-03-28 16:41:40.312 ERROR:	/etc/opendnssec/kasp.xml:12: element Refresh: Relax-NG validity error : Error validating datatype duration
2011-03-28 16:41:40.312 ERROR:	/etc/opendnssec/kasp.xml:12: element Refresh: Relax-NG validity error : Element Refresh failed to validate content
2011-03-28 16:41:40.312 ERROR:	return code = 1

2011-03-28 16:41:40.312 00427 Wait(20)

2011-03-28 16:41:40.313 Requirement: ODSKC20

2011-03-28 16:42:00.313 00429 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 16:42:00.313 Requirement: ODSKC20

2011-03-28 16:42:00.313 00433 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:42:00.313 Requirement: ODSKC20

2011-03-28 16:42:00.313 00435 Stop()
2011-03-28 16:42:00.313 Requirement: ODSKC20
2011-03-28 16:42:00.313 RunCommand(ods-control stop)
2011-03-28 16:42:00.321 - runCommand: Process started, PID: 18360
2011-03-28 16:42:00.321 OUTPUT:	Stopping enforcer...
2011-03-28 16:42:00.321 OUTPUT:	Cannot find PID file
2011-03-28 16:42:00.321 OUTPUT:	Stopping signer engine..
2011-03-28 16:42:00.321 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:42:00.321 ERROR:	return code = 1
2011-03-28 16:42:00.321 RunCommand(ps -e | grep enforcer)
2011-03-28 16:42:00.334 - runCommand: Process started, PID: 18363
2011-03-28 16:42:00.334 ERROR:	return code = 1
2011-03-28 16:42:00.334 RunCommand(ps -e | grep signer)
2011-03-28 16:42:00.346 - runCommand: Process started, PID: 18366
2011-03-28 16:42:00.346 ERROR:	return code = 1

2011-03-28 16:42:00.346 00438 CheckLog()
2011-03-28 16:42:00.346 Requirement: ODSKC20
2011-03-28 16:42:00.510 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 16:42:00.510 00441 CheckLog()
2011-03-28 16:42:00.510 Requirement: ODSKC20
2011-03-28 16:42:00.672 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml:11: element Refresh: Relax-NG validity error : Type duration doesn't allow value 'PT1Y' Found: 

2011-03-28 16:42:00.672 00444 CheckLog()
2011-03-28 16:42:00.672 Requirement: ODSKC20
2011-03-28 16:42:00.834 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml fails to validate Found: 

2011-03-28 16:42:00.834 00446 Comment: Reset the config files to the original ones.

2011-03-28 16:42:00.834 Requirement: ODSKC20

2011-03-28 16:42:00.834 00449 Wait(10)

2011-03-28 16:42:00.834 Requirement: ODSKC20

2011-03-28 16:42:10.835 00452 LoadConfig()
2011-03-28 16:42:10.835 Requirement: ODSKC20
2011-03-28 16:42:10.835 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:42:10.841 - runCommand: Process started, PID: 18369

2011-03-28 16:42:10.841 00455 LoadConfig()
2011-03-28 16:42:10.841 Requirement: ODSKC20
2011-03-28 16:42:10.841 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:42:10.847 - runCommand: Process started, PID: 18370

2011-03-28 16:42:10.847 00457 Comment: Update all the configs.

2011-03-28 16:42:10.847 Requirement: ODSKC20

2011-03-28 16:42:10.847 00459 UpdateAll()
2011-03-28 16:42:10.847 Requirement: ODSKC20
2011-03-28 16:42:10.847 RunCommand(ods-ksmutil update all)
2011-03-28 16:42:12.211 - runCommand: Process started, PID: 18371
2011-03-28 16:42:12.212 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:42:12.212 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:42:12.212 OUTPUT:	Repository SoftHSM found
2011-03-28 16:42:12.212 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:42:12.212 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:42:12.212 OUTPUT:	Policy default found
2011-03-28 16:42:12.212 OUTPUT:	Policy default2 found
2011-03-28 16:42:12.212 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:42:12.212 OUTPUT:	Zone ods found
2011-03-28 16:42:12.212 OUTPUT:	Policy set to default.
2011-03-28 16:42:12.212 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:42:12.212 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:42:12.212 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC20T50: Use a very high value for Refresh (P10Y) and confirm ods-kaspcheck runs successfully

2011-03-28 16:42:12.212 00464 Comment: Change the Refresh time to a high value and correct format. Ods-kaspcheck should validate for conf.xml and kasp.xml.

2011-03-28 16:42:12.212 Requirement: ODSKC20

2011-03-28 16:42:12.213 00466 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:42:12.213 Requirement: ODSKC20

2011-03-28 16:42:12.213 00468 Stop()
2011-03-28 16:42:12.213 Requirement: ODSKC20
2011-03-28 16:42:12.213 RunCommand(ods-control stop)
2011-03-28 16:42:12.220 - runCommand: Process started, PID: 18379
2011-03-28 16:42:12.220 OUTPUT:	Stopping enforcer...
2011-03-28 16:42:12.220 OUTPUT:	Cannot find PID file
2011-03-28 16:42:12.220 OUTPUT:	Stopping signer engine..
2011-03-28 16:42:12.220 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:42:12.220 ERROR:	return code = 1
2011-03-28 16:42:12.220 RunCommand(ps -e | grep enforcer)
2011-03-28 16:42:12.240 - runCommand: Process started, PID: 18382
2011-03-28 16:42:12.240 ERROR:	return code = 1
2011-03-28 16:42:12.240 RunCommand(ps -e | grep signer)
2011-03-28 16:42:12.258 - runCommand: Process started, PID: 18385
2011-03-28 16:42:12.258 ERROR:	return code = 1

2011-03-28 16:42:12.259 00470 Wait(10)

2011-03-28 16:42:12.259 Requirement: ODSKC20

2011-03-28 16:42:22.259 00472 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:42:22.259 Requirement: ODSKC20

2011-03-28 16:42:22.259 00475 LoadConfig()
2011-03-28 16:42:22.259 Requirement: ODSKC20
2011-03-28 16:42:22.259 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:42:22.266 - runCommand: Process started, PID: 18388

2011-03-28 16:42:22.266 00478 LoadConfig()
2011-03-28 16:42:22.266 Requirement: ODSKC20
2011-03-28 16:42:22.266 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC20T50_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:42:22.272 - runCommand: Process started, PID: 18389

2011-03-28 16:42:22.272 00480 Comment: Update all the configs.

2011-03-28 16:42:22.272 Requirement: ODSKC20

2011-03-28 16:42:22.272 00482 UpdateAll()
2011-03-28 16:42:22.272 Requirement: ODSKC20
2011-03-28 16:42:22.272 RunCommand(ods-ksmutil update all)
2011-03-28 16:42:28.786 - runCommand: Process started, PID: 18390
2011-03-28 16:42:28.787 OUTPUT:	ERROR: Validity/Default (3600 seconds) for default policy in /etc/opendnssec/kasp.xml is less than the Refresh interval (315360000 seconds)
2011-03-28 16:42:28.787 OUTPUT:	ERROR: Validity/Denial (3600 seconds) for default policy in /etc/opendnssec/kasp.xml is less than or equal to the Refresh interval (315360000 seconds)
2011-03-28 16:42:28.787 OUTPUT:	WARNING: In policy default,  Y used in duration field for Signatures/Refresh (P10Y) in /etc/opendnssec/kasp.xml - this will be interpreted as 365 days
2011-03-28 16:42:28.787 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:42:28.787 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:42:28.787 OUTPUT:	Repository SoftHSM found
2011-03-28 16:42:28.787 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:42:28.787 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:42:28.787 OUTPUT:	Policy default found
2011-03-28 16:42:28.787 OUTPUT:	Info: converting P10Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:42:28.787 OUTPUT:	Policy default2 found
2011-03-28 16:42:28.787 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:42:28.787 OUTPUT:	Policy default3 found
2011-03-28 16:42:28.787 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:42:28.787 OUTPUT:	Policy default4 found
2011-03-28 16:42:28.787 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:42:28.787 OUTPUT:	Policy default5 found
2011-03-28 16:42:28.787 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:42:28.787 OUTPUT:	Policy default6 found
2011-03-28 16:42:28.787 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:42:28.787 OUTPUT:	Policy default7 found
2011-03-28 16:42:28.787 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:42:28.787 OUTPUT:	Policy default8 found
2011-03-28 16:42:28.787 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:42:28.787 OUTPUT:	Policy default9 found
2011-03-28 16:42:28.787 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:42:28.787 OUTPUT:	Policy default10 found
2011-03-28 16:42:28.787 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:42:28.787 OUTPUT:	Policy default11 found
2011-03-28 16:42:28.787 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:42:28.787 OUTPUT:	Zone ods found
2011-03-28 16:42:28.787 OUTPUT:	Policy set to default.
2011-03-28 16:42:28.787 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:42:28.787 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:42:28.787 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:42:28.787 00484 Wait(20)

2011-03-28 16:42:28.787 Requirement: ODSKC20

2011-03-28 16:42:48.788 00486 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should validate for the kasp.xml and conf.xml. 

2011-03-28 16:42:48.788 Requirement: ODSKC20

2011-03-28 16:42:48.788 00490 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:42:48.788 Requirement: ODSKC20

2011-03-28 16:42:48.788 00492 Stop()
2011-03-28 16:42:48.788 Requirement: ODSKC20
2011-03-28 16:42:48.788 RunCommand(ods-control stop)
2011-03-28 16:42:48.796 - runCommand: Process started, PID: 18398
2011-03-28 16:42:48.796 OUTPUT:	Stopping enforcer...
2011-03-28 16:42:48.796 OUTPUT:	Cannot find PID file
2011-03-28 16:42:48.796 OUTPUT:	Stopping signer engine..
2011-03-28 16:42:48.796 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:42:48.796 ERROR:	return code = 1
2011-03-28 16:42:48.796 RunCommand(ps -e | grep enforcer)
2011-03-28 16:42:48.814 - runCommand: Process started, PID: 18401
2011-03-28 16:42:48.814 ERROR:	return code = 1
2011-03-28 16:42:48.814 RunCommand(ps -e | grep signer)
2011-03-28 16:42:48.831 - runCommand: Process started, PID: 18404
2011-03-28 16:42:48.832 ERROR:	return code = 1

2011-03-28 16:42:48.832 00495 CheckLog()
2011-03-28 16:42:48.832 Requirement: ODSKC20
2011-03-28 16:42:49.281 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 16:42:49.292 00498 CheckLog()
2011-03-28 16:42:49.293 Requirement: ODSKC20
2011-03-28 16:42:49.165 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml validates Found: 

2011-03-28 16:42:49.166 00500 Comment: Reset the config files to the original ones.

2011-03-28 16:42:49.166 Requirement: ODSKC20

2011-03-28 16:42:49.166 00503 Wait(10)

2011-03-28 16:42:49.166 Requirement: ODSKC20

2011-03-28 16:42:59.166 00506 LoadConfig()
2011-03-28 16:42:59.166 Requirement: ODSKC20
2011-03-28 16:42:59.166 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:42:59.172 - runCommand: Process started, PID: 18407

2011-03-28 16:42:59.173 00509 LoadConfig()
2011-03-28 16:42:59.173 Requirement: ODSKC20
2011-03-28 16:42:59.173 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:42:59.178 - runCommand: Process started, PID: 18408

2011-03-28 16:42:59.179 00511 Comment: Update all the configs.

2011-03-28 16:42:59.179 Requirement: ODSKC20

2011-03-28 16:42:59.179 00513 UpdateAll()
2011-03-28 16:42:59.179 Requirement: ODSKC20
2011-03-28 16:42:59.179 RunCommand(ods-ksmutil update all)
2011-03-28 16:43:00.587 - runCommand: Process started, PID: 18409
2011-03-28 16:43:00.587 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:43:00.587 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:43:00.587 OUTPUT:	Repository SoftHSM found
2011-03-28 16:43:00.587 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:43:00.587 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:43:00.587 OUTPUT:	Policy default found
2011-03-28 16:43:00.587 OUTPUT:	Policy default2 found
2011-03-28 16:43:00.587 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:43:00.587 OUTPUT:	Zone ods found
2011-03-28 16:43:00.587 OUTPUT:	Policy set to default.
2011-03-28 16:43:00.587 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:43:00.587 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:43:00.587 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC20T60: Use a very low value for Refresh (PT1S) and confirm ods-kaspcheck fails

2011-03-28 16:43:00.588 00521 Comment: Change the Refresh time to a very low value. Logically spoken: the Ods-kaspcheck should validate for conf.xml and not for kasp.xml. (note: this is not well documented). According to the developpers the kasp.xml should be validated correctly.

2011-03-28 16:43:00.588 Requirement: ODSKC20

2011-03-28 16:43:00.588 00523 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:43:00.588 Requirement: ODSKC20

2011-03-28 16:43:00.588 00525 Stop()
2011-03-28 16:43:00.588 Requirement: ODSKC20
2011-03-28 16:43:00.588 RunCommand(ods-control stop)
2011-03-28 16:43:00.595 - runCommand: Process started, PID: 18417
2011-03-28 16:43:00.595 OUTPUT:	Stopping enforcer...
2011-03-28 16:43:00.596 OUTPUT:	Cannot find PID file
2011-03-28 16:43:00.596 OUTPUT:	Stopping signer engine..
2011-03-28 16:43:00.596 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:43:00.596 ERROR:	return code = 1
2011-03-28 16:43:00.596 RunCommand(ps -e | grep enforcer)
2011-03-28 16:43:00.613 - runCommand: Process started, PID: 18420
2011-03-28 16:43:00.613 ERROR:	return code = 1
2011-03-28 16:43:00.614 RunCommand(ps -e | grep signer)
2011-03-28 16:43:00.625 - runCommand: Process started, PID: 18423
2011-03-28 16:43:00.625 ERROR:	return code = 1

2011-03-28 16:43:00.625 00527 Wait(10)

2011-03-28 16:43:00.625 Requirement: ODSKC20

2011-03-28 16:43:10.625 00529 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:43:10.625 Requirement: ODSKC20

2011-03-28 16:43:10.625 00532 LoadConfig()
2011-03-28 16:43:10.625 Requirement: ODSKC20
2011-03-28 16:43:10.625 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:43:10.632 - runCommand: Process started, PID: 18426

2011-03-28 16:43:10.632 00535 LoadConfig()
2011-03-28 16:43:10.632 Requirement: ODSKC20
2011-03-28 16:43:10.632 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC20T60_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:43:10.638 - runCommand: Process started, PID: 18427

2011-03-28 16:43:10.638 00537 Comment: Update all the configs.

2011-03-28 16:43:10.638 Requirement: ODSKC20

2011-03-28 16:43:10.638 00539 UpdateAll()
2011-03-28 16:43:10.638 Requirement: ODSKC20
2011-03-28 16:43:10.638 RunCommand(ods-ksmutil update all)
2011-03-28 16:43:16.778 - runCommand: Process started, PID: 18428
2011-03-28 16:43:16.779 OUTPUT:	ERROR: The Refresh interval (1 seconds) for default Policy in /etc/opendnssec/kasp.xml is less than or equal to the Resign interval (180 seconds)
2011-03-28 16:43:16.779 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:43:16.779 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:43:16.779 OUTPUT:	Repository SoftHSM found
2011-03-28 16:43:16.779 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:43:16.779 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:43:16.779 OUTPUT:	Policy default found
2011-03-28 16:43:16.779 OUTPUT:	Policy default2 found
2011-03-28 16:43:16.779 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:43:16.779 OUTPUT:	Policy default3 found
2011-03-28 16:43:16.779 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:43:16.779 OUTPUT:	Policy default4 found
2011-03-28 16:43:16.779 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:43:16.779 OUTPUT:	Policy default5 found
2011-03-28 16:43:16.779 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:43:16.779 OUTPUT:	Policy default6 found
2011-03-28 16:43:16.779 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:43:16.779 OUTPUT:	Policy default7 found
2011-03-28 16:43:16.779 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:43:16.779 OUTPUT:	Policy default8 found
2011-03-28 16:43:16.779 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:43:16.779 OUTPUT:	Policy default9 found
2011-03-28 16:43:16.779 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:43:16.779 OUTPUT:	Policy default10 found
2011-03-28 16:43:16.779 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:43:16.779 OUTPUT:	Policy default11 found
2011-03-28 16:43:16.779 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:43:16.779 OUTPUT:	Zone ods found
2011-03-28 16:43:16.779 OUTPUT:	Policy set to default.
2011-03-28 16:43:16.779 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:43:16.779 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:43:16.779 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:43:16.779 00541 Wait(20)

2011-03-28 16:43:16.779 Requirement: ODSKC20

2011-03-28 16:43:36.780 00543 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should validate for the conf.xml and not for the kasp.xml. 

2011-03-28 16:43:36.780 Requirement: ODSKC20

2011-03-28 16:43:36.780 00547 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:43:36.780 Requirement: ODSKC20

2011-03-28 16:43:36.780 00549 Stop()
2011-03-28 16:43:36.780 Requirement: ODSKC20
2011-03-28 16:43:36.780 RunCommand(ods-control stop)
2011-03-28 16:43:36.791 - runCommand: Process started, PID: 18436
2011-03-28 16:43:36.791 OUTPUT:	Stopping enforcer...
2011-03-28 16:43:36.791 OUTPUT:	Cannot find PID file
2011-03-28 16:43:36.791 OUTPUT:	Stopping signer engine..
2011-03-28 16:43:36.791 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:43:36.791 ERROR:	return code = 1
2011-03-28 16:43:36.791 RunCommand(ps -e | grep enforcer)
2011-03-28 16:43:36.809 - runCommand: Process started, PID: 18439
2011-03-28 16:43:36.809 ERROR:	return code = 1
2011-03-28 16:43:36.809 RunCommand(ps -e | grep signer)
2011-03-28 16:43:36.820 - runCommand: Process started, PID: 18442
2011-03-28 16:43:36.820 ERROR:	return code = 1

2011-03-28 16:43:36.820 00553 CheckLog()
2011-03-28 16:43:36.820 Requirement: ODSKC20

2011-03-28 16:43:36.983 00556 CheckLog()
2011-03-28 16:43:36.983 Requirement: ODSKC20

2011-03-28 16:43:37.146 00558 Comment: Reset the config files to the original ones.

2011-03-28 16:43:37.146 Requirement: ODSKC20

2011-03-28 16:43:37.146 00561 Wait(10)

2011-03-28 16:43:37.146 Requirement: ODSKC20

2011-03-28 16:43:47.146 00564 LoadConfig()
2011-03-28 16:43:47.146 Requirement: ODSKC20
2011-03-28 16:43:47.146 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:43:47.153 - runCommand: Process started, PID: 18445

2011-03-28 16:43:47.153 00567 LoadConfig()
2011-03-28 16:43:47.153 Requirement: ODSKC20
2011-03-28 16:43:47.153 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:43:47.159 - runCommand: Process started, PID: 18446

2011-03-28 16:43:47.159 00569 Comment: Update all the configs.

2011-03-28 16:43:47.159 Requirement: ODSKC20

2011-03-28 16:43:47.159 00571 UpdateAll()
2011-03-28 16:43:47.159 Requirement: ODSKC20
2011-03-28 16:43:47.159 RunCommand(ods-ksmutil update all)
2011-03-28 16:43:48.720 - runCommand: Process started, PID: 18447
2011-03-28 16:43:48.721 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:43:48.721 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:43:48.721 OUTPUT:	Repository SoftHSM found
2011-03-28 16:43:48.721 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:43:48.721 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:43:48.721 OUTPUT:	Policy default found
2011-03-28 16:43:48.721 OUTPUT:	Policy default2 found
2011-03-28 16:43:48.721 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:43:48.721 OUTPUT:	Zone ods found
2011-03-28 16:43:48.721 OUTPUT:	Policy set to default.
2011-03-28 16:43:48.721 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:43:48.721 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:43:48.721 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC20T70: Use a value with an incorrect format for Validity Default (5) and confirm ods-kaspcheck fails

2011-03-28 16:43:48.721 00580 Comment: Change the Validity default time to a incorrect format. Ods-kaspcheck should fail.

2011-03-28 16:43:48.721 Requirement: ODSKC20

2011-03-28 16:43:48.721 00582 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:43:48.722 Requirement: ODSKC20

2011-03-28 16:43:48.722 00584 Stop()
2011-03-28 16:43:48.722 Requirement: ODSKC20
2011-03-28 16:43:48.722 RunCommand(ods-control stop)
2011-03-28 16:43:48.729 - runCommand: Process started, PID: 18455
2011-03-28 16:43:48.729 OUTPUT:	Stopping enforcer...
2011-03-28 16:43:48.729 OUTPUT:	Cannot find PID file
2011-03-28 16:43:48.730 OUTPUT:	Stopping signer engine..
2011-03-28 16:43:48.730 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:43:48.730 ERROR:	return code = 1
2011-03-28 16:43:48.730 RunCommand(ps -e | grep enforcer)
2011-03-28 16:43:48.746 - runCommand: Process started, PID: 18458
2011-03-28 16:43:48.747 ERROR:	return code = 1
2011-03-28 16:43:48.747 RunCommand(ps -e | grep signer)
2011-03-28 16:43:48.758 - runCommand: Process started, PID: 18461
2011-03-28 16:43:48.758 ERROR:	return code = 1

2011-03-28 16:43:48.758 00586 Wait(10)

2011-03-28 16:43:48.758 Requirement: ODSKC20

2011-03-28 16:43:58.758 00588 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:43:58.758 Requirement: ODSKC20

2011-03-28 16:43:58.758 00591 LoadConfig()
2011-03-28 16:43:58.758 Requirement: ODSKC20
2011-03-28 16:43:58.759 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:43:58.765 - runCommand: Process started, PID: 18464

2011-03-28 16:43:58.765 00594 LoadConfig()
2011-03-28 16:43:58.765 Requirement: ODSKC20
2011-03-28 16:43:58.765 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC20T70_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:43:58.771 - runCommand: Process started, PID: 18465

2011-03-28 16:43:58.771 00596 Comment: Update all the configs.

2011-03-28 16:43:58.771 Requirement: ODSKC20

2011-03-28 16:43:58.771 00598 UpdateAll()
2011-03-28 16:43:58.771 Requirement: ODSKC20
2011-03-28 16:43:58.771 RunCommand(ods-ksmutil update all)
2011-03-28 16:43:59.650 - runCommand: Process started, PID: 18466
2011-03-28 16:43:59.650 OUTPUT:	ERROR: Can't find Signatures/Validity/Default in default in /etc/opendnssec/kasp.xml
2011-03-28 16:43:59.650 OUTPUT:	ERROR: Validity/Default (0 seconds) for default policy in /etc/opendnssec/kasp.xml is less than the Refresh interval (900 seconds)
2011-03-28 16:43:59.650 OUTPUT:	ERROR: Jitter time (60) is greater than the Default Validity (0) for default policy in /etc/opendnssec/kasp.xml
2011-03-28 16:43:59.650 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:43:59.650 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:43:59.650 OUTPUT:	Repository SoftHSM found
2011-03-28 16:43:59.650 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:43:59.650 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:43:59.650 OUTPUT:	Error validating file "/etc/opendnssec/kasp.xml"
2011-03-28 16:43:59.651 OUTPUT:	Failed to update policies
2011-03-28 16:43:59.651 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:43:59.651 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:43:59.651 ERROR:	/etc/opendnssec/kasp.xml:14: element Default: Relax-NG validity error : Type duration doesn't allow value '5'
2011-03-28 16:43:59.651 ERROR:	/etc/opendnssec/kasp.xml:14: element Default: Relax-NG validity error : Error validating datatype duration
2011-03-28 16:43:59.651 ERROR:	/etc/opendnssec/kasp.xml:14: element Default: Relax-NG validity error : Element Default failed to validate content
2011-03-28 16:43:59.651 ERROR:	/etc/opendnssec/kasp.xml fails to validate
2011-03-28 16:43:59.651 ERROR:	/etc/opendnssec/kasp.xml:14: element Default: Relax-NG validity error : Type duration doesn't allow value '5'
2011-03-28 16:43:59.651 ERROR:	/etc/opendnssec/kasp.xml:14: element Default: Relax-NG validity error : Error validating datatype duration
2011-03-28 16:43:59.651 ERROR:	/etc/opendnssec/kasp.xml:14: element Default: Relax-NG validity error : Element Default failed to validate content
2011-03-28 16:43:59.651 ERROR:	return code = 1

2011-03-28 16:43:59.651 00600 Wait(10)

2011-03-28 16:43:59.651 Requirement: ODSKC20

2011-03-28 16:44:09.651 00602 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 16:44:09.651 Requirement: ODSKC20

2011-03-28 16:44:09.651 00606 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:44:09.651 Requirement: ODSKC20

2011-03-28 16:44:09.651 00608 Stop()
2011-03-28 16:44:09.651 Requirement: ODSKC20
2011-03-28 16:44:09.651 RunCommand(ods-control stop)
2011-03-28 16:44:09.659 - runCommand: Process started, PID: 18474
2011-03-28 16:44:09.659 OUTPUT:	Stopping enforcer...
2011-03-28 16:44:09.659 OUTPUT:	Cannot find PID file
2011-03-28 16:44:09.659 OUTPUT:	Stopping signer engine..
2011-03-28 16:44:09.659 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:44:09.659 ERROR:	return code = 1
2011-03-28 16:44:09.659 RunCommand(ps -e | grep enforcer)
2011-03-28 16:44:09.676 - runCommand: Process started, PID: 18477
2011-03-28 16:44:09.676 ERROR:	return code = 1
2011-03-28 16:44:09.676 RunCommand(ps -e | grep signer)
2011-03-28 16:44:09.688 - runCommand: Process started, PID: 18480
2011-03-28 16:44:09.688 ERROR:	return code = 1

2011-03-28 16:44:09.688 00612 CheckLog()
2011-03-28 16:44:09.688 Requirement: ODSKC20

2011-03-28 16:44:09.850 00615 CheckLog()
2011-03-28 16:44:09.850 Requirement: ODSKC20

2011-03-28 16:44:10.127 00618 CheckLog()
2011-03-28 16:44:10.127 Requirement: ODSKC20

2011-03-28 16:44:10.174 00620 Comment: Reset the config files to the original ones.

2011-03-28 16:44:10.174 Requirement: ODSKC20

2011-03-28 16:44:10.175 00623 Wait(10)

2011-03-28 16:44:10.175 Requirement: ODSKC20

2011-03-28 16:44:20.175 00626 LoadConfig()
2011-03-28 16:44:20.175 Requirement: ODSKC20
2011-03-28 16:44:20.175 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:44:20.181 - runCommand: Process started, PID: 18483

2011-03-28 16:44:20.181 00629 LoadConfig()
2011-03-28 16:44:20.181 Requirement: ODSKC20
2011-03-28 16:44:20.182 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:44:20.187 - runCommand: Process started, PID: 18484

2011-03-28 16:44:20.187 00631 Comment: Update all the configs.

2011-03-28 16:44:20.187 Requirement: ODSKC20

2011-03-28 16:44:20.188 00633 UpdateAll()
2011-03-28 16:44:20.188 Requirement: ODSKC20
2011-03-28 16:44:20.188 RunCommand(ods-ksmutil update all)
2011-03-28 16:44:21.645 - runCommand: Process started, PID: 18485
2011-03-28 16:44:21.645 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:44:21.645 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:44:21.645 OUTPUT:	Repository SoftHSM found
2011-03-28 16:44:21.645 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:44:21.645 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:44:21.646 OUTPUT:	Policy default found
2011-03-28 16:44:21.646 OUTPUT:	Policy default2 found
2011-03-28 16:44:21.646 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:44:21.646 OUTPUT:	Zone ods found
2011-03-28 16:44:21.646 OUTPUT:	Policy set to default.
2011-03-28 16:44:21.646 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:44:21.646 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:44:21.646 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC20T80: Use a very high value for Validity Default (P100Y) and confirm ods-kaspcheck runs successfully

2011-03-28 16:44:21.646 00638 Comment: Change the Validity Default  time to a high value and correct format. Ods-kaspcheck should validate for conf.xml and kasp.xml.

2011-03-28 16:44:21.646 Requirement: ODSKC20

2011-03-28 16:44:21.646 00640 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:44:21.646 Requirement: ODSKC20

2011-03-28 16:44:21.646 00642 Stop()
2011-03-28 16:44:21.646 Requirement: ODSKC20
2011-03-28 16:44:21.647 RunCommand(ods-control stop)
2011-03-28 16:44:21.654 - runCommand: Process started, PID: 18493
2011-03-28 16:44:21.654 OUTPUT:	Stopping enforcer...
2011-03-28 16:44:21.654 OUTPUT:	Cannot find PID file
2011-03-28 16:44:21.654 OUTPUT:	Stopping signer engine..
2011-03-28 16:44:21.654 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:44:21.654 ERROR:	return code = 1
2011-03-28 16:44:21.654 RunCommand(ps -e | grep enforcer)
2011-03-28 16:44:21.672 - runCommand: Process started, PID: 18496
2011-03-28 16:44:21.672 ERROR:	return code = 1
2011-03-28 16:44:21.672 RunCommand(ps -e | grep signer)
2011-03-28 16:44:21.691 - runCommand: Process started, PID: 18499
2011-03-28 16:44:21.691 ERROR:	return code = 1

2011-03-28 16:44:21.691 00644 Wait(10)

2011-03-28 16:44:21.691 Requirement: ODSKC20

2011-03-28 16:44:31.691 00646 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:44:31.691 Requirement: ODSKC20

2011-03-28 16:44:31.691 00649 LoadConfig()
2011-03-28 16:44:31.691 Requirement: ODSKC20
2011-03-28 16:44:31.691 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:44:31.698 - runCommand: Process started, PID: 18502

2011-03-28 16:44:31.698 00652 LoadConfig()
2011-03-28 16:44:31.698 Requirement: ODSKC20
2011-03-28 16:44:31.698 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC20T80_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:44:31.704 - runCommand: Process started, PID: 18503

2011-03-28 16:44:31.704 00654 Comment: Update all the configs.

2011-03-28 16:44:31.704 Requirement: ODSKC20

2011-03-28 16:44:31.704 00656 UpdateAll()
2011-03-28 16:44:31.704 Requirement: ODSKC20
2011-03-28 16:44:31.704 RunCommand(ods-ksmutil update all)
2011-03-28 16:44:38.104 - runCommand: Process started, PID: 18504
2011-03-28 16:44:38.104 OUTPUT:	WARNING: In policy default,  Y used in duration field for Signatures/Validity/Default (P100Y) in /etc/opendnssec/kasp.xml - this will be interpreted as 365 days
2011-03-28 16:44:38.104 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:44:38.104 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:44:38.104 OUTPUT:	Repository SoftHSM found
2011-03-28 16:44:38.104 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:44:38.104 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:44:38.104 OUTPUT:	Policy default found
2011-03-28 16:44:38.104 OUTPUT:	Info: converting P100Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:44:38.104 OUTPUT:	Policy default2 found
2011-03-28 16:44:38.104 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:44:38.104 OUTPUT:	Policy default3 found
2011-03-28 16:44:38.104 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:44:38.104 OUTPUT:	Policy default4 found
2011-03-28 16:44:38.104 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:44:38.104 OUTPUT:	Policy default5 found
2011-03-28 16:44:38.104 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:44:38.104 OUTPUT:	Policy default6 found
2011-03-28 16:44:38.104 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:44:38.104 OUTPUT:	Policy default7 found
2011-03-28 16:44:38.104 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:44:38.104 OUTPUT:	Policy default8 found
2011-03-28 16:44:38.104 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:44:38.104 OUTPUT:	Policy default9 found
2011-03-28 16:44:38.104 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:44:38.104 OUTPUT:	Policy default10 found
2011-03-28 16:44:38.104 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:44:38.104 OUTPUT:	Policy default11 found
2011-03-28 16:44:38.104 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:44:38.104 OUTPUT:	Zone ods found
2011-03-28 16:44:38.104 OUTPUT:	Policy set to default.
2011-03-28 16:44:38.104 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:44:38.104 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:44:38.104 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:44:38.104 00658 Wait(10)

2011-03-28 16:44:38.104 Requirement: ODSKC20

2011-03-28 16:44:48.105 00660 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should validate for the kasp.xml and conf.xml. 

2011-03-28 16:44:48.105 Requirement: ODSKC20

2011-03-28 16:44:48.105 00664 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:44:48.105 Requirement: ODSKC20

2011-03-28 16:44:48.105 00666 Stop()
2011-03-28 16:44:48.105 Requirement: ODSKC20
2011-03-28 16:44:48.105 RunCommand(ods-control stop)
2011-03-28 16:44:48.113 - runCommand: Process started, PID: 18512
2011-03-28 16:44:48.113 OUTPUT:	Stopping enforcer...
2011-03-28 16:44:48.113 OUTPUT:	Cannot find PID file
2011-03-28 16:44:48.113 OUTPUT:	Stopping signer engine..
2011-03-28 16:44:48.113 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:44:48.113 ERROR:	return code = 1
2011-03-28 16:44:48.113 RunCommand(ps -e | grep enforcer)
2011-03-28 16:44:48.131 - runCommand: Process started, PID: 18515
2011-03-28 16:44:48.131 ERROR:	return code = 1
2011-03-28 16:44:48.131 RunCommand(ps -e | grep signer)
2011-03-28 16:44:48.149 - runCommand: Process started, PID: 18518
2011-03-28 16:44:48.149 ERROR:	return code = 1

2011-03-28 16:44:48.149 00670 CheckLog()
2011-03-28 16:44:48.149 Requirement: ODSKC20
2011-03-28 16:44:48.312 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 16:44:48.312 00673 CheckLog()
2011-03-28 16:44:48.312 Requirement: ODSKC20
2011-03-28 16:44:48.474 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml validates Found: 

2011-03-28 16:44:48.474 00675 Comment: Reset the config files to the original ones.

2011-03-28 16:44:48.474 Requirement: ODSKC20

2011-03-28 16:44:48.474 00678 Wait(10)

2011-03-28 16:44:48.474 Requirement: ODSKC20

2011-03-28 16:44:58.474 00681 LoadConfig()
2011-03-28 16:44:58.474 Requirement: ODSKC20
2011-03-28 16:44:58.474 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:44:58.481 - runCommand: Process started, PID: 18521

2011-03-28 16:44:58.481 00684 LoadConfig()
2011-03-28 16:44:58.481 Requirement: ODSKC20
2011-03-28 16:44:58.481 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:44:58.486 - runCommand: Process started, PID: 18522

2011-03-28 16:44:58.487 00686 Comment: Update all the configs.

2011-03-28 16:44:58.487 Requirement: ODSKC20

2011-03-28 16:44:58.487 00688 UpdateAll()
2011-03-28 16:44:58.487 Requirement: ODSKC20
2011-03-28 16:44:58.487 RunCommand(ods-ksmutil update all)
2011-03-28 16:44:59.851 - runCommand: Process started, PID: 18523
2011-03-28 16:44:59.851 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:44:59.851 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:44:59.851 OUTPUT:	Repository SoftHSM found
2011-03-28 16:44:59.851 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:44:59.851 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:44:59.851 OUTPUT:	Policy default found
2011-03-28 16:44:59.851 OUTPUT:	Policy default2 found
2011-03-28 16:44:59.851 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:44:59.851 OUTPUT:	Zone ods found
2011-03-28 16:44:59.851 OUTPUT:	Policy set to default.
2011-03-28 16:44:59.851 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:44:59.851 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:44:59.851 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC20T90: Use a very low value for Validity Default (PT1S) and confirm ods-kaspcheck fails

2011-03-28 16:44:59.852 00693 Comment: Change the Validity Default time to a very low value. Logically spoken: the Ods-kaspcheck should validate for conf.xml and not for kasp.xml. (note: this is not well documented). According to the developpers the kasp.xml should be validated correctly.

2011-03-28 16:44:59.852 Requirement: ODSKC20

2011-03-28 16:44:59.852 00695 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:44:59.852 Requirement: ODSKC20

2011-03-28 16:44:59.852 00697 Stop()
2011-03-28 16:44:59.852 Requirement: ODSKC20
2011-03-28 16:44:59.852 RunCommand(ods-control stop)
2011-03-28 16:44:59.859 - runCommand: Process started, PID: 18531
2011-03-28 16:44:59.859 OUTPUT:	Stopping enforcer...
2011-03-28 16:44:59.860 OUTPUT:	Cannot find PID file
2011-03-28 16:44:59.860 OUTPUT:	Stopping signer engine..
2011-03-28 16:44:59.860 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:44:59.860 ERROR:	return code = 1
2011-03-28 16:44:59.860 RunCommand(ps -e | grep enforcer)
2011-03-28 16:44:59.879 - runCommand: Process started, PID: 18534
2011-03-28 16:44:59.880 ERROR:	return code = 1
2011-03-28 16:44:59.880 RunCommand(ps -e | grep signer)
2011-03-28 16:44:59.898 - runCommand: Process started, PID: 18537
2011-03-28 16:44:59.898 ERROR:	return code = 1

2011-03-28 16:44:59.898 00699 Wait(10)

2011-03-28 16:44:59.898 Requirement: ODSKC20

2011-03-28 16:45:09.898 00701 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:45:09.898 Requirement: ODSKC20

2011-03-28 16:45:09.898 00704 LoadConfig()
2011-03-28 16:45:09.898 Requirement: ODSKC20
2011-03-28 16:45:09.898 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:45:09.905 - runCommand: Process started, PID: 18540

2011-03-28 16:45:09.905 00707 LoadConfig()
2011-03-28 16:45:09.905 Requirement: ODSKC20
2011-03-28 16:45:09.905 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC20T90_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:45:09.911 - runCommand: Process started, PID: 18541

2011-03-28 16:45:09.911 00709 Comment: Update all the configs.

2011-03-28 16:45:09.911 Requirement: ODSKC20

2011-03-28 16:45:09.911 00711 UpdateAll()
2011-03-28 16:45:09.911 Requirement: ODSKC20
2011-03-28 16:45:09.911 RunCommand(ods-ksmutil update all)
2011-03-28 16:45:16.429 - runCommand: Process started, PID: 18542
2011-03-28 16:45:16.430 OUTPUT:	ERROR: Validity/Default (1 seconds) for default policy in /etc/opendnssec/kasp.xml is less than the Refresh interval (900 seconds)
2011-03-28 16:45:16.431 OUTPUT:	ERROR: Jitter time (60) is greater than the Default Validity (1) for default policy in /etc/opendnssec/kasp.xml
2011-03-28 16:45:16.431 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:45:16.431 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:45:16.431 OUTPUT:	Repository SoftHSM found
2011-03-28 16:45:16.431 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:45:16.432 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:45:16.432 OUTPUT:	Policy default found
2011-03-28 16:45:16.432 OUTPUT:	Policy default2 found
2011-03-28 16:45:16.432 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:45:16.432 OUTPUT:	Policy default3 found
2011-03-28 16:45:16.432 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:45:16.432 OUTPUT:	Policy default4 found
2011-03-28 16:45:16.433 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:45:16.433 OUTPUT:	Policy default5 found
2011-03-28 16:45:16.433 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:45:16.433 OUTPUT:	Policy default6 found
2011-03-28 16:45:16.433 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:45:16.433 OUTPUT:	Policy default7 found
2011-03-28 16:45:16.434 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:45:16.434 OUTPUT:	Policy default8 found
2011-03-28 16:45:16.434 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:45:16.434 OUTPUT:	Policy default9 found
2011-03-28 16:45:16.434 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:45:16.434 OUTPUT:	Policy default10 found
2011-03-28 16:45:16.435 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:45:16.435 OUTPUT:	Policy default11 found
2011-03-28 16:45:16.435 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:45:16.435 OUTPUT:	Zone ods found
2011-03-28 16:45:16.435 OUTPUT:	Policy set to default.
2011-03-28 16:45:16.435 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:45:16.436 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:45:16.436 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:45:16.438 00713 Wait(20)

2011-03-28 16:45:16.438 Requirement: ODSKC20

2011-03-28 16:45:36.441 00715 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should validate for the conf.xml and not for the kasp.xml. 

2011-03-28 16:45:36.441 Requirement: ODSKC20

2011-03-28 16:45:36.443 00719 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:45:36.443 Requirement: ODSKC20

2011-03-28 16:45:36.444 00721 Stop()
2011-03-28 16:45:36.445 Requirement: ODSKC20
2011-03-28 16:45:36.445 RunCommand(ods-control stop)
2011-03-28 16:45:36.520 - runCommand: Process started, PID: 18550
2011-03-28 16:45:36.521 OUTPUT:	Stopping enforcer...
2011-03-28 16:45:36.521 OUTPUT:	Cannot find PID file
2011-03-28 16:45:36.521 OUTPUT:	Stopping signer engine..
2011-03-28 16:45:36.521 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:45:36.521 ERROR:	return code = 1
2011-03-28 16:45:36.522 RunCommand(ps -e | grep enforcer)
2011-03-28 16:45:36.699 - runCommand: Process started, PID: 18553
2011-03-28 16:45:36.700 ERROR:	return code = 1
2011-03-28 16:45:36.700 RunCommand(ps -e | grep signer)
2011-03-28 16:45:36.880 - runCommand: Process started, PID: 18556
2011-03-28 16:45:36.881 ERROR:	return code = 1

2011-03-28 16:45:36.883 00724 CheckLog()
2011-03-28 16:45:36.883 Requirement: ODSKC20

2011-03-28 16:45:36.259 00727 CheckLog()
2011-03-28 16:45:36.259 Requirement: ODSKC20

2011-03-28 16:45:36.421 00729 Comment: Reset the config files to the original ones.

2011-03-28 16:45:36.421 Requirement: ODSKC20

2011-03-28 16:45:36.421 00731 Wait(10)

2011-03-28 16:45:36.421 Requirement: ODSKC20

2011-03-28 16:45:46.421 00734 LoadConfig()
2011-03-28 16:45:46.421 Requirement: ODSKC20
2011-03-28 16:45:46.421 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:45:46.427 - runCommand: Process started, PID: 18559

2011-03-28 16:45:46.428 00737 LoadConfig()
2011-03-28 16:45:46.428 Requirement: ODSKC20
2011-03-28 16:45:46.428 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:45:46.433 - runCommand: Process started, PID: 18560

2011-03-28 16:45:46.434 00739 Comment: Update all the configs.

2011-03-28 16:45:46.434 Requirement: ODSKC20

2011-03-28 16:45:46.434 00741 UpdateAll()
2011-03-28 16:45:46.434 Requirement: ODSKC20
2011-03-28 16:45:46.434 RunCommand(ods-ksmutil update all)
2011-03-28 16:45:47.835 - runCommand: Process started, PID: 18561
2011-03-28 16:45:47.835 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:45:47.835 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:45:47.835 OUTPUT:	Repository SoftHSM found
2011-03-28 16:45:47.835 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:45:47.835 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:45:47.835 OUTPUT:	Policy default found
2011-03-28 16:45:47.835 OUTPUT:	Policy default2 found
2011-03-28 16:45:47.835 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:45:47.835 OUTPUT:	Zone ods found
2011-03-28 16:45:47.835 OUTPUT:	Policy set to default.
2011-03-28 16:45:47.835 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:45:47.835 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:45:47.835 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC20T100: Use a value with an incorrect format for Validity Denial (PT1D) and confirm ods-kaspcheck fails

2011-03-28 16:45:47.835 00746 Comment: Change the Validity Denial time to a incorrect format. Ods-kaspcheck should fail.

2011-03-28 16:45:47.835 Requirement: ODSKC20

2011-03-28 16:45:47.836 00748 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:45:47.836 Requirement: ODSKC20

2011-03-28 16:45:47.836 00750 Stop()
2011-03-28 16:45:47.836 Requirement: ODSKC20
2011-03-28 16:45:47.836 RunCommand(ods-control stop)
2011-03-28 16:45:47.843 - runCommand: Process started, PID: 18569
2011-03-28 16:45:47.843 OUTPUT:	Stopping enforcer...
2011-03-28 16:45:47.843 OUTPUT:	Cannot find PID file
2011-03-28 16:45:47.843 OUTPUT:	Stopping signer engine..
2011-03-28 16:45:47.843 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:45:47.843 ERROR:	return code = 1
2011-03-28 16:45:47.843 RunCommand(ps -e | grep enforcer)
2011-03-28 16:45:47.863 - runCommand: Process started, PID: 18572
2011-03-28 16:45:47.863 ERROR:	return code = 1
2011-03-28 16:45:47.863 RunCommand(ps -e | grep signer)
2011-03-28 16:45:47.881 - runCommand: Process started, PID: 18575
2011-03-28 16:45:47.881 ERROR:	return code = 1

2011-03-28 16:45:47.881 00752 Wait(10)

2011-03-28 16:45:47.881 Requirement: ODSKC20

2011-03-28 16:45:57.881 00754 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:45:57.881 Requirement: ODSKC20

2011-03-28 16:45:57.882 00757 LoadConfig()
2011-03-28 16:45:57.882 Requirement: ODSKC20
2011-03-28 16:45:57.882 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:45:57.888 - runCommand: Process started, PID: 18578

2011-03-28 16:45:57.888 00760 LoadConfig()
2011-03-28 16:45:57.888 Requirement: ODSKC20
2011-03-28 16:45:57.888 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC20T100_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:45:57.894 - runCommand: Process started, PID: 18579

2011-03-28 16:45:57.894 00762 Comment: Update all the configs.

2011-03-28 16:45:57.894 Requirement: ODSKC20

2011-03-28 16:45:57.894 00764 UpdateAll()
2011-03-28 16:45:57.894 Requirement: ODSKC20
2011-03-28 16:45:57.894 RunCommand(ods-ksmutil update all)
2011-03-28 16:45:58.774 - runCommand: Process started, PID: 18580
2011-03-28 16:45:58.774 OUTPUT:	ERROR: Can't find Signatures/Validity/Denial in default in /etc/opendnssec/kasp.xml
2011-03-28 16:45:58.774 OUTPUT:	ERROR: Validity/Denial (0 seconds) for default policy in /etc/opendnssec/kasp.xml is less than or equal to the Refresh interval (900 seconds)
2011-03-28 16:45:58.774 OUTPUT:	ERROR: Jitter time (60) is greater than the Denial Validity (0) for default policy in /etc/opendnssec/kasp.xml
2011-03-28 16:45:58.774 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:45:58.774 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:45:58.774 OUTPUT:	Repository SoftHSM found
2011-03-28 16:45:58.774 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:45:58.774 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:45:58.774 OUTPUT:	Error validating file "/etc/opendnssec/kasp.xml"
2011-03-28 16:45:58.774 OUTPUT:	Failed to update policies
2011-03-28 16:45:58.774 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:45:58.774 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:45:58.774 ERROR:	/etc/opendnssec/kasp.xml:15: element Denial: Relax-NG validity error : Type duration doesn't allow value 'PT1D'
2011-03-28 16:45:58.774 ERROR:	/etc/opendnssec/kasp.xml:15: element Denial: Relax-NG validity error : Error validating datatype duration
2011-03-28 16:45:58.774 ERROR:	/etc/opendnssec/kasp.xml:15: element Denial: Relax-NG validity error : Element Denial failed to validate content
2011-03-28 16:45:58.774 ERROR:	/etc/opendnssec/kasp.xml fails to validate
2011-03-28 16:45:58.774 ERROR:	/etc/opendnssec/kasp.xml:15: element Denial: Relax-NG validity error : Type duration doesn't allow value 'PT1D'
2011-03-28 16:45:58.774 ERROR:	/etc/opendnssec/kasp.xml:15: element Denial: Relax-NG validity error : Error validating datatype duration
2011-03-28 16:45:58.774 ERROR:	/etc/opendnssec/kasp.xml:15: element Denial: Relax-NG validity error : Element Denial failed to validate content
2011-03-28 16:45:58.774 ERROR:	return code = 1

2011-03-28 16:45:58.774 00766 Wait(10)

2011-03-28 16:45:58.774 Requirement: ODSKC20

2011-03-28 16:46:08.774 00768 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 16:46:08.774 Requirement: ODSKC20

2011-03-28 16:46:08.775 00772 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:46:08.775 Requirement: ODSKC20

2011-03-28 16:46:08.775 00774 Stop()
2011-03-28 16:46:08.775 Requirement: ODSKC20
2011-03-28 16:46:08.775 RunCommand(ods-control stop)
2011-03-28 16:46:08.782 - runCommand: Process started, PID: 18588
2011-03-28 16:46:08.782 OUTPUT:	Stopping enforcer...
2011-03-28 16:46:08.782 OUTPUT:	Cannot find PID file
2011-03-28 16:46:08.782 OUTPUT:	Stopping signer engine..
2011-03-28 16:46:08.782 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:46:08.782 ERROR:	return code = 1
2011-03-28 16:46:08.782 RunCommand(ps -e | grep enforcer)
2011-03-28 16:46:08.802 - runCommand: Process started, PID: 18591
2011-03-28 16:46:08.802 ERROR:	return code = 1
2011-03-28 16:46:08.802 RunCommand(ps -e | grep signer)
2011-03-28 16:46:08.820 - runCommand: Process started, PID: 18594
2011-03-28 16:46:08.820 ERROR:	return code = 1

2011-03-28 16:46:08.821 00777 CheckLog()
2011-03-28 16:46:08.821 Requirement: ODSKC20

2011-03-28 16:46:08.983 00780 CheckLog()
2011-03-28 16:46:08.983 Requirement: ODSKC20

2011-03-28 16:46:09.145 00782 CheckLog()
2011-03-28 16:46:09.145 Requirement: ODSKC20

2011-03-28 16:46:09.307 00784 Comment: Reset the config files to the original ones.

2011-03-28 16:46:09.307 Requirement: ODSKC20

2011-03-28 16:46:09.307 00786 Wait(10)

2011-03-28 16:46:09.307 Requirement: ODSKC20

2011-03-28 16:46:19.307 00789 LoadConfig()
2011-03-28 16:46:19.307 Requirement: ODSKC20
2011-03-28 16:46:19.307 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:46:19.314 - runCommand: Process started, PID: 18597

2011-03-28 16:46:19.314 00792 LoadConfig()
2011-03-28 16:46:19.314 Requirement: ODSKC20
2011-03-28 16:46:19.314 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:46:19.319 - runCommand: Process started, PID: 18598

2011-03-28 16:46:19.320 00794 Comment: Update all the configs.

2011-03-28 16:46:19.320 Requirement: ODSKC20

2011-03-28 16:46:19.320 00796 UpdateAll()
2011-03-28 16:46:19.320 Requirement: ODSKC20
2011-03-28 16:46:19.320 RunCommand(ods-ksmutil update all)
2011-03-28 16:46:20.843 - runCommand: Process started, PID: 18599
2011-03-28 16:46:20.843 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:46:20.843 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:46:20.843 OUTPUT:	Repository SoftHSM found
2011-03-28 16:46:20.843 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:46:20.843 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:46:20.843 OUTPUT:	Policy default found
2011-03-28 16:46:20.843 OUTPUT:	Policy default2 found
2011-03-28 16:46:20.843 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:46:20.843 OUTPUT:	Zone ods found
2011-03-28 16:46:20.843 OUTPUT:	Policy set to default.
2011-03-28 16:46:20.843 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:46:20.843 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:46:20.843 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC20T110: Use a very high value for Validity Denial (P999Y) and confirm ods-kaspcheck runs successfully

2011-03-28 16:46:20.843 00804 Comment: Change the Validity Denial time to a high value and correct format. Ods-kaspcheck should validate for conf.xml and kasp.xml.

2011-03-28 16:46:20.843 Requirement: ODSKC20

2011-03-28 16:46:20.844 00806 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:46:20.844 Requirement: ODSKC20

2011-03-28 16:46:20.844 00808 Stop()
2011-03-28 16:46:20.844 Requirement: ODSKC20
2011-03-28 16:46:20.844 RunCommand(ods-control stop)
2011-03-28 16:46:20.851 - runCommand: Process started, PID: 18607
2011-03-28 16:46:20.851 OUTPUT:	Stopping enforcer...
2011-03-28 16:46:20.851 OUTPUT:	Cannot find PID file
2011-03-28 16:46:20.851 OUTPUT:	Stopping signer engine..
2011-03-28 16:46:20.851 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:46:20.851 ERROR:	return code = 1
2011-03-28 16:46:20.851 RunCommand(ps -e | grep enforcer)
2011-03-28 16:46:20.869 - runCommand: Process started, PID: 18610
2011-03-28 16:46:20.869 ERROR:	return code = 1
2011-03-28 16:46:20.869 RunCommand(ps -e | grep signer)
2011-03-28 16:46:20.881 - runCommand: Process started, PID: 18613
2011-03-28 16:46:20.881 ERROR:	return code = 1

2011-03-28 16:46:20.881 00810 Wait(10)

2011-03-28 16:46:20.881 Requirement: ODSKC20

2011-03-28 16:46:30.881 00812 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:46:30.881 Requirement: ODSKC20

2011-03-28 16:46:30.881 00815 LoadConfig()
2011-03-28 16:46:30.881 Requirement: ODSKC20
2011-03-28 16:46:30.881 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:46:30.888 - runCommand: Process started, PID: 18616

2011-03-28 16:46:30.888 00818 LoadConfig()
2011-03-28 16:46:30.888 Requirement: ODSKC20
2011-03-28 16:46:30.888 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC20T110_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:46:30.894 - runCommand: Process started, PID: 18617

2011-03-28 16:46:30.894 00820 Comment: Update all the configs.

2011-03-28 16:46:30.894 Requirement: ODSKC20

2011-03-28 16:46:30.894 00822 UpdateAll()
2011-03-28 16:46:30.894 Requirement: ODSKC20
2011-03-28 16:46:30.894 RunCommand(ods-ksmutil update all)
2011-03-28 16:46:37.193 - runCommand: Process started, PID: 18618
2011-03-28 16:46:37.193 OUTPUT:	WARNING: In policy default,  Y used in duration field for Signatures/Validity/Denial (P999Y) in /etc/opendnssec/kasp.xml - this will be interpreted as 365 days
2011-03-28 16:46:37.193 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:46:37.193 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:46:37.193 OUTPUT:	Repository SoftHSM found
2011-03-28 16:46:37.193 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:46:37.193 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:46:37.193 OUTPUT:	Policy default found
2011-03-28 16:46:37.193 OUTPUT:	Info: converting P999Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:46:37.193 OUTPUT:	Policy default2 found
2011-03-28 16:46:37.193 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:46:37.193 OUTPUT:	Policy default3 found
2011-03-28 16:46:37.193 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:46:37.193 OUTPUT:	Policy default4 found
2011-03-28 16:46:37.193 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:46:37.193 OUTPUT:	Policy default5 found
2011-03-28 16:46:37.193 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:46:37.193 OUTPUT:	Policy default6 found
2011-03-28 16:46:37.193 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:46:37.193 OUTPUT:	Policy default7 found
2011-03-28 16:46:37.193 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:46:37.193 OUTPUT:	Policy default8 found
2011-03-28 16:46:37.193 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:46:37.193 OUTPUT:	Policy default9 found
2011-03-28 16:46:37.193 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:46:37.193 OUTPUT:	Policy default10 found
2011-03-28 16:46:37.193 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:46:37.193 OUTPUT:	Policy default11 found
2011-03-28 16:46:37.193 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:46:37.193 OUTPUT:	Zone ods found
2011-03-28 16:46:37.193 OUTPUT:	Policy set to default.
2011-03-28 16:46:37.193 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:46:37.193 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:46:37.193 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:46:37.193 00824 Wait(10)

2011-03-28 16:46:37.193 Requirement: ODSKC20

2011-03-28 16:46:47.194 00826 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should validate for the kasp.xml and conf.xml. 

2011-03-28 16:46:47.194 Requirement: ODSKC20

2011-03-28 16:46:47.194 00830 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:46:47.194 Requirement: ODSKC20

2011-03-28 16:46:47.194 00832 Stop()
2011-03-28 16:46:47.194 Requirement: ODSKC20
2011-03-28 16:46:47.194 RunCommand(ods-control stop)
2011-03-28 16:46:47.202 - runCommand: Process started, PID: 18626
2011-03-28 16:46:47.202 OUTPUT:	Stopping enforcer...
2011-03-28 16:46:47.202 OUTPUT:	Cannot find PID file
2011-03-28 16:46:47.202 OUTPUT:	Stopping signer engine..
2011-03-28 16:46:47.202 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:46:47.202 ERROR:	return code = 1
2011-03-28 16:46:47.202 RunCommand(ps -e | grep enforcer)
2011-03-28 16:46:47.220 - runCommand: Process started, PID: 18629
2011-03-28 16:46:47.220 ERROR:	return code = 1
2011-03-28 16:46:47.220 RunCommand(ps -e | grep signer)
2011-03-28 16:46:47.238 - runCommand: Process started, PID: 18632
2011-03-28 16:46:47.238 ERROR:	return code = 1

2011-03-28 16:46:47.238 00835 CheckLog()
2011-03-28 16:46:47.238 Requirement: ODSKC20
2011-03-28 16:46:47.408 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 16:46:47.408 00838 CheckLog()
2011-03-28 16:46:47.408 Requirement: ODSKC20
2011-03-28 16:46:47.570 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml validates Found: 

2011-03-28 16:46:47.570 00840 Comment: Reset the config files to the original ones.

2011-03-28 16:46:47.570 Requirement: ODSKC20

2011-03-28 16:46:47.570 00842 Wait(10)

2011-03-28 16:46:47.570 Requirement: ODSKC20

2011-03-28 16:46:57.570 00845 LoadConfig()
2011-03-28 16:46:57.570 Requirement: ODSKC20
2011-03-28 16:46:57.570 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:46:57.577 - runCommand: Process started, PID: 18635

2011-03-28 16:46:57.577 00848 LoadConfig()
2011-03-28 16:46:57.577 Requirement: ODSKC20
2011-03-28 16:46:57.577 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:46:57.580 - runCommand: Process started, PID: 18636

2011-03-28 16:46:57.580 00850 Comment: Update all the configs.

2011-03-28 16:46:57.580 Requirement: ODSKC20

2011-03-28 16:46:57.580 00852 UpdateAll()
2011-03-28 16:46:57.580 Requirement: ODSKC20
2011-03-28 16:46:57.580 RunCommand(ods-ksmutil update all)
2011-03-28 16:46:58.898 - runCommand: Process started, PID: 18637
2011-03-28 16:46:58.898 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:46:58.898 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:46:58.898 OUTPUT:	Repository SoftHSM found
2011-03-28 16:46:58.898 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:46:58.898 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:46:58.898 OUTPUT:	Policy default found
2011-03-28 16:46:58.898 OUTPUT:	Policy default2 found
2011-03-28 16:46:58.898 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:46:58.898 OUTPUT:	Zone ods found
2011-03-28 16:46:58.898 OUTPUT:	Policy set to default.
2011-03-28 16:46:58.898 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:46:58.898 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:46:58.898 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC20T120: Use a very low value for Validity Denial (PT1S) and confirm ods-kaspcheck fails

2011-03-28 16:46:58.899 00857 Comment: Change the Validity Denial time to a very low value. Logically spoken: the Ods-kaspcheck should validate for conf.xml and not for kasp.xml. (note: this is not well documented). According to the developpers the kasp.xml should be validated correctly.

2011-03-28 16:46:58.899 Requirement: ODSKC20

2011-03-28 16:46:58.899 00859 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:46:58.899 Requirement: ODSKC20

2011-03-28 16:46:58.899 00861 Stop()
2011-03-28 16:46:58.899 Requirement: ODSKC20
2011-03-28 16:46:58.899 RunCommand(ods-control stop)
2011-03-28 16:46:58.907 - runCommand: Process started, PID: 18645
2011-03-28 16:46:58.907 OUTPUT:	Stopping enforcer...
2011-03-28 16:46:58.907 OUTPUT:	Cannot find PID file
2011-03-28 16:46:58.907 OUTPUT:	Stopping signer engine..
2011-03-28 16:46:58.907 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:46:58.907 ERROR:	return code = 1
2011-03-28 16:46:58.907 RunCommand(ps -e | grep enforcer)
2011-03-28 16:46:58.923 - runCommand: Process started, PID: 18648
2011-03-28 16:46:58.924 ERROR:	return code = 1
2011-03-28 16:46:58.924 RunCommand(ps -e | grep signer)
2011-03-28 16:46:58.935 - runCommand: Process started, PID: 18651
2011-03-28 16:46:58.935 ERROR:	return code = 1

2011-03-28 16:46:58.935 00863 Wait(10)

2011-03-28 16:46:58.935 Requirement: ODSKC20

2011-03-28 16:47:08.935 00865 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:47:08.935 Requirement: ODSKC20

2011-03-28 16:47:08.936 00868 LoadConfig()
2011-03-28 16:47:08.936 Requirement: ODSKC20
2011-03-28 16:47:08.936 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:47:08.942 - runCommand: Process started, PID: 18654

2011-03-28 16:47:08.942 00871 LoadConfig()
2011-03-28 16:47:08.942 Requirement: ODSKC20
2011-03-28 16:47:08.942 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC20T120_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:47:08.948 - runCommand: Process started, PID: 18655

2011-03-28 16:47:08.948 00873 Comment: Update all the configs.

2011-03-28 16:47:08.948 Requirement: ODSKC20

2011-03-28 16:47:08.948 00875 UpdateAll()
2011-03-28 16:47:08.948 Requirement: ODSKC20
2011-03-28 16:47:08.948 RunCommand(ods-ksmutil update all)
2011-03-28 16:47:15.231 - runCommand: Process started, PID: 18656
2011-03-28 16:47:15.232 OUTPUT:	ERROR: Validity/Denial (1 seconds) for default policy in /etc/opendnssec/kasp.xml is less than or equal to the Refresh interval (900 seconds)
2011-03-28 16:47:15.232 OUTPUT:	ERROR: Jitter time (60) is greater than the Denial Validity (1) for default policy in /etc/opendnssec/kasp.xml
2011-03-28 16:47:15.232 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:47:15.232 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:47:15.232 OUTPUT:	Repository SoftHSM found
2011-03-28 16:47:15.232 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:47:15.232 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:47:15.232 OUTPUT:	Policy default found
2011-03-28 16:47:15.232 OUTPUT:	Policy default2 found
2011-03-28 16:47:15.232 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:47:15.232 OUTPUT:	Policy default3 found
2011-03-28 16:47:15.232 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:47:15.232 OUTPUT:	Policy default4 found
2011-03-28 16:47:15.232 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:47:15.232 OUTPUT:	Policy default5 found
2011-03-28 16:47:15.232 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:47:15.232 OUTPUT:	Policy default6 found
2011-03-28 16:47:15.232 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:47:15.232 OUTPUT:	Policy default7 found
2011-03-28 16:47:15.232 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:47:15.232 OUTPUT:	Policy default8 found
2011-03-28 16:47:15.232 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:47:15.232 OUTPUT:	Policy default9 found
2011-03-28 16:47:15.232 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:47:15.232 OUTPUT:	Policy default10 found
2011-03-28 16:47:15.232 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:47:15.232 OUTPUT:	Policy default11 found
2011-03-28 16:47:15.232 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:47:15.232 OUTPUT:	Zone ods found
2011-03-28 16:47:15.232 OUTPUT:	Policy set to default.
2011-03-28 16:47:15.232 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:47:15.232 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:47:15.232 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:47:15.232 00877 Wait(20)

2011-03-28 16:47:15.232 Requirement: ODSKC20

2011-03-28 16:47:35.233 00879 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should validate for the conf.xml and not for the kasp.xml. 

2011-03-28 16:47:35.233 Requirement: ODSKC20

2011-03-28 16:47:35.233 00883 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:47:35.233 Requirement: ODSKC20

2011-03-28 16:47:35.233 00885 Stop()
2011-03-28 16:47:35.233 Requirement: ODSKC20
2011-03-28 16:47:35.233 RunCommand(ods-control stop)
2011-03-28 16:47:35.241 - runCommand: Process started, PID: 18666
2011-03-28 16:47:35.241 OUTPUT:	Stopping enforcer...
2011-03-28 16:47:35.241 OUTPUT:	Cannot find PID file
2011-03-28 16:47:35.241 OUTPUT:	Stopping signer engine..
2011-03-28 16:47:35.241 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:47:35.241 ERROR:	return code = 1
2011-03-28 16:47:35.241 RunCommand(ps -e | grep enforcer)
2011-03-28 16:47:35.259 - runCommand: Process started, PID: 18669
2011-03-28 16:47:35.259 ERROR:	return code = 1
2011-03-28 16:47:35.259 RunCommand(ps -e | grep signer)
2011-03-28 16:47:35.270 - runCommand: Process started, PID: 18672
2011-03-28 16:47:35.270 ERROR:	return code = 1

2011-03-28 16:47:35.270 00888 CheckLog()
2011-03-28 16:47:35.270 Requirement: ODSKC20

2011-03-28 16:47:35.433 00891 CheckLog()
2011-03-28 16:47:35.433 Requirement: ODSKC20

2011-03-28 16:47:35.594 00893 Comment: Reset the config files to the original ones.

2011-03-28 16:47:35.594 Requirement: ODSKC20

2011-03-28 16:47:35.594 00896 Wait(10)

2011-03-28 16:47:35.594 Requirement: ODSKC20

2011-03-28 16:47:45.595 00899 LoadConfig()
2011-03-28 16:47:45.595 Requirement: ODSKC20
2011-03-28 16:47:45.595 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:47:45.601 - runCommand: Process started, PID: 18675

2011-03-28 16:47:45.601 00902 LoadConfig()
2011-03-28 16:47:45.601 Requirement: ODSKC20
2011-03-28 16:47:45.601 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:47:45.605 - runCommand: Process started, PID: 18676

2011-03-28 16:47:45.605 00904 Comment: Update all the configs.

2011-03-28 16:47:45.605 Requirement: ODSKC20

2011-03-28 16:47:45.605 00906 UpdateAll()
2011-03-28 16:47:45.605 Requirement: ODSKC20
2011-03-28 16:47:45.605 RunCommand(ods-ksmutil update all)
2011-03-28 16:47:47.572 - runCommand: Process started, PID: 18677
2011-03-28 16:47:47.574 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:47:47.574 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:47:47.574 OUTPUT:	Repository SoftHSM found
2011-03-28 16:47:47.574 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:47:47.574 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:47:47.574 OUTPUT:	Policy default found
2011-03-28 16:47:47.575 OUTPUT:	Policy default2 found
2011-03-28 16:47:47.575 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:47:47.575 OUTPUT:	Zone ods found
2011-03-28 16:47:47.575 OUTPUT:	Policy set to default.
2011-03-28 16:47:47.575 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:47:47.575 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:47:47.576 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC20T130: Use a value with an incorrect format for Jitter (T1D) and confirm ods-kaspcheck fails

2011-03-28 16:47:47.581 00911 Comment: Change the Jitter time to a incorrect format. Ods-kaspcheck should fail.

2011-03-28 16:47:47.581 Requirement: ODSKC20

2011-03-28 16:47:47.582 00913 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:47:47.583 Requirement: ODSKC20

2011-03-28 16:47:47.584 00915 Stop()
2011-03-28 16:47:47.584 Requirement: ODSKC20
2011-03-28 16:47:47.584 RunCommand(ods-control stop)
2011-03-28 16:47:47.658 - runCommand: Process started, PID: 18685
2011-03-28 16:47:47.659 OUTPUT:	Stopping enforcer...
2011-03-28 16:47:47.659 OUTPUT:	Cannot find PID file
2011-03-28 16:47:47.659 OUTPUT:	Stopping signer engine..
2011-03-28 16:47:47.660 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:47:47.660 ERROR:	return code = 1
2011-03-28 16:47:47.660 RunCommand(ps -e | grep enforcer)
2011-03-28 16:47:47.839 - runCommand: Process started, PID: 18688
2011-03-28 16:47:47.840 ERROR:	return code = 1
2011-03-28 16:47:47.840 RunCommand(ps -e | grep signer)
2011-03-28 16:47:47.102 - runCommand: Process started, PID: 18691
2011-03-28 16:47:47.102 ERROR:	return code = 1

2011-03-28 16:47:47.102 00917 Wait(10)

2011-03-28 16:47:47.102 Requirement: ODSKC20

2011-03-28 16:47:57.102 00919 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:47:57.102 Requirement: ODSKC20

2011-03-28 16:47:57.102 00922 LoadConfig()
2011-03-28 16:47:57.102 Requirement: ODSKC20
2011-03-28 16:47:57.102 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:47:57.109 - runCommand: Process started, PID: 18694

2011-03-28 16:47:57.109 00925 LoadConfig()
2011-03-28 16:47:57.109 Requirement: ODSKC20
2011-03-28 16:47:57.109 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC20T130_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:47:57.115 - runCommand: Process started, PID: 18695

2011-03-28 16:47:57.115 00927 Comment: Update all the configs.

2011-03-28 16:47:57.115 Requirement: ODSKC20

2011-03-28 16:47:57.115 00929 UpdateAll()
2011-03-28 16:47:57.115 Requirement: ODSKC20
2011-03-28 16:47:57.115 RunCommand(ods-ksmutil update all)
2011-03-28 16:47:58.345 - runCommand: Process started, PID: 18696
2011-03-28 16:47:58.355 OUTPUT:	ERROR: Can't find Signatures/Jitter in default in /etc/opendnssec/kasp.xml
2011-03-28 16:47:58.356 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:47:58.357 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:47:58.358 OUTPUT:	Repository SoftHSM found
2011-03-28 16:47:58.359 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:47:58.360 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:47:58.361 OUTPUT:	Error validating file "/etc/opendnssec/kasp.xml"
2011-03-28 16:47:58.362 OUTPUT:	Failed to update policies
2011-03-28 16:47:58.363 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:47:58.364 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:47:58.365 ERROR:	/etc/opendnssec/kasp.xml:17: element Jitter: Relax-NG validity error : Type duration doesn't allow value 'T1D'
2011-03-28 16:47:58.366 ERROR:	/etc/opendnssec/kasp.xml:17: element Jitter: Relax-NG validity error : Error validating datatype duration
2011-03-28 16:47:58.367 ERROR:	/etc/opendnssec/kasp.xml:17: element Jitter: Relax-NG validity error : Element Jitter failed to validate content
2011-03-28 16:47:58.368 ERROR:	/etc/opendnssec/kasp.xml fails to validate
2011-03-28 16:47:58.369 ERROR:	/etc/opendnssec/kasp.xml:17: element Jitter: Relax-NG validity error : Type duration doesn't allow value 'T1D'
2011-03-28 16:47:58.370 ERROR:	/etc/opendnssec/kasp.xml:17: element Jitter: Relax-NG validity error : Error validating datatype duration
2011-03-28 16:47:58.371 ERROR:	/etc/opendnssec/kasp.xml:17: element Jitter: Relax-NG validity error : Element Jitter failed to validate content
2011-03-28 16:47:58.374 ERROR:	return code = 1

2011-03-28 16:47:58.386 00931 Wait(10)

2011-03-28 16:47:58.388 Requirement: ODSKC20

2011-03-28 16:48:08.414 00933 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 16:48:08.419 Requirement: ODSKC20

2011-03-28 16:48:08.435 00937 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:48:08.437 Requirement: ODSKC20

2011-03-28 16:48:08.452 00939 Stop()
2011-03-28 16:48:08.454 Requirement: ODSKC20
2011-03-28 16:48:08.456 RunCommand(ods-control stop)
2011-03-28 16:48:08.121 - runCommand: Process started, PID: 18704
2011-03-28 16:48:08.122 OUTPUT:	Stopping enforcer...
2011-03-28 16:48:08.122 OUTPUT:	Cannot find PID file
2011-03-28 16:48:08.122 OUTPUT:	Stopping signer engine..
2011-03-28 16:48:08.122 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:48:08.122 ERROR:	return code = 1
2011-03-28 16:48:08.123 RunCommand(ps -e | grep enforcer)
2011-03-28 16:48:08.299 - runCommand: Process started, PID: 18707
2011-03-28 16:48:08.300 ERROR:	return code = 1
2011-03-28 16:48:08.300 RunCommand(ps -e | grep signer)
2011-03-28 16:48:08.410 - runCommand: Process started, PID: 18710
2011-03-28 16:48:08.411 ERROR:	return code = 1

2011-03-28 16:48:08.412 00942 CheckLog()
2011-03-28 16:48:08.412 Requirement: ODSKC20

2011-03-28 16:48:08.203 00945 CheckLog()
2011-03-28 16:48:08.203 Requirement: ODSKC20

2011-03-28 16:48:08.365 00948 CheckLog()
2011-03-28 16:48:08.365 Requirement: ODSKC20

2011-03-28 16:48:08.527 00950 Comment: Reset the config files to the original ones.

2011-03-28 16:48:08.527 Requirement: ODSKC20

2011-03-28 16:48:08.527 00953 Wait(10)

2011-03-28 16:48:08.527 Requirement: ODSKC20

2011-03-28 16:48:18.527 00956 LoadConfig()
2011-03-28 16:48:18.527 Requirement: ODSKC20
2011-03-28 16:48:18.527 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:48:18.533 - runCommand: Process started, PID: 18713

2011-03-28 16:48:18.534 00959 LoadConfig()
2011-03-28 16:48:18.534 Requirement: ODSKC20
2011-03-28 16:48:18.534 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:48:18.539 - runCommand: Process started, PID: 18714

2011-03-28 16:48:18.539 00961 Comment: Update all the configs.

2011-03-28 16:48:18.539 Requirement: ODSKC20

2011-03-28 16:48:18.540 00963 UpdateAll()
2011-03-28 16:48:18.540 Requirement: ODSKC20
2011-03-28 16:48:18.540 RunCommand(ods-ksmutil update all)
2011-03-28 16:48:19.873 - runCommand: Process started, PID: 18715
2011-03-28 16:48:19.873 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:48:19.873 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:48:19.873 OUTPUT:	Repository SoftHSM found
2011-03-28 16:48:19.873 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:48:19.873 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:48:19.874 OUTPUT:	Policy default found
2011-03-28 16:48:19.874 OUTPUT:	Policy default2 found
2011-03-28 16:48:19.874 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:48:19.874 OUTPUT:	Zone ods found
2011-03-28 16:48:19.874 OUTPUT:	Policy set to default.
2011-03-28 16:48:19.874 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:48:19.874 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:48:19.874 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC20T140: Use a very high value for Jitter (P999Y) and confirm ods-kaspcheck runs successfully

2011-03-28 16:48:19.874 00968 Comment: Change the Jitter time to a high value and correct format. Ods-kaspcheck should validate for conf.xml and kasp.xml.

2011-03-28 16:48:19.874 Requirement: ODSKC20

2011-03-28 16:48:19.874 00970 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:48:19.874 Requirement: ODSKC20

2011-03-28 16:48:19.874 00972 Stop()
2011-03-28 16:48:19.875 Requirement: ODSKC20
2011-03-28 16:48:19.875 RunCommand(ods-control stop)
2011-03-28 16:48:19.882 - runCommand: Process started, PID: 18723
2011-03-28 16:48:19.882 OUTPUT:	Stopping enforcer...
2011-03-28 16:48:19.882 OUTPUT:	Cannot find PID file
2011-03-28 16:48:19.882 OUTPUT:	Stopping signer engine..
2011-03-28 16:48:19.882 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:48:19.882 ERROR:	return code = 1
2011-03-28 16:48:19.882 RunCommand(ps -e | grep enforcer)
2011-03-28 16:48:19.900 - runCommand: Process started, PID: 18726
2011-03-28 16:48:19.900 ERROR:	return code = 1
2011-03-28 16:48:19.900 RunCommand(ps -e | grep signer)
2011-03-28 16:48:19.918 - runCommand: Process started, PID: 18729
2011-03-28 16:48:19.918 ERROR:	return code = 1

2011-03-28 16:48:19.918 00974 Wait(10)

2011-03-28 16:48:19.918 Requirement: ODSKC20

2011-03-28 16:48:29.919 00976 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:48:29.919 Requirement: ODSKC20

2011-03-28 16:48:29.919 00979 LoadConfig()
2011-03-28 16:48:29.919 Requirement: ODSKC20
2011-03-28 16:48:29.919 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:48:29.925 - runCommand: Process started, PID: 18732

2011-03-28 16:48:29.926 00982 LoadConfig()
2011-03-28 16:48:29.926 Requirement: ODSKC20
2011-03-28 16:48:29.926 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC20T140_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:48:29.931 - runCommand: Process started, PID: 18733

2011-03-28 16:48:29.932 00984 Comment: Update all the configs.

2011-03-28 16:48:29.932 Requirement: ODSKC20

2011-03-28 16:48:29.932 00986 UpdateAll()
2011-03-28 16:48:29.932 Requirement: ODSKC20
2011-03-28 16:48:29.932 RunCommand(ods-ksmutil update all)
2011-03-28 16:48:36.988 - runCommand: Process started, PID: 18734
2011-03-28 16:48:36.990 OUTPUT:	WARNING: Jitter time (31504464000 seconds) is large compared to Validity/Default (3600 seconds) for default policy in /etc/opendnssec/kasp.xml
2011-03-28 16:48:36.990 OUTPUT:	ERROR: Jitter time (31504464000) is greater than the Default Validity (3600) for default policy in /etc/opendnssec/kasp.xml
2011-03-28 16:48:36.990 OUTPUT:	ERROR: Jitter time (31504464000) is greater than the Denial Validity (3600) for default policy in /etc/opendnssec/kasp.xml
2011-03-28 16:48:36.990 OUTPUT:	WARNING: In policy default,  Y used in duration field for Signatures/Jitter (P999Y) in /etc/opendnssec/kasp.xml - this will be interpreted as 365 days
2011-03-28 16:48:36.991 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:48:36.991 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:48:36.991 OUTPUT:	Repository SoftHSM found
2011-03-28 16:48:36.991 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:48:36.991 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:48:36.991 OUTPUT:	Policy default found
2011-03-28 16:48:36.991 OUTPUT:	Info: converting P999Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:48:36.992 OUTPUT:	Policy default2 found
2011-03-28 16:48:36.992 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:48:36.992 OUTPUT:	Policy default3 found
2011-03-28 16:48:36.992 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:48:36.992 OUTPUT:	Policy default4 found
2011-03-28 16:48:36.992 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:48:36.993 OUTPUT:	Policy default5 found
2011-03-28 16:48:36.993 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:48:36.993 OUTPUT:	Policy default6 found
2011-03-28 16:48:36.993 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:48:36.993 OUTPUT:	Policy default7 found
2011-03-28 16:48:36.993 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:48:36.994 OUTPUT:	Policy default8 found
2011-03-28 16:48:36.994 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:48:36.994 OUTPUT:	Policy default9 found
2011-03-28 16:48:36.994 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:48:36.994 OUTPUT:	Policy default10 found
2011-03-28 16:48:36.994 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:48:36.994 OUTPUT:	Policy default11 found
2011-03-28 16:48:36.995 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:48:36.995 OUTPUT:	Zone ods found
2011-03-28 16:48:36.995 OUTPUT:	Policy set to default.
2011-03-28 16:48:36.995 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:48:36.995 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:48:36.995 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:48:36.998 00988 Wait(10)

2011-03-28 16:48:36.998 Requirement: ODSKC20

2011-03-28 16:48:46.100 00990 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should validate for the kasp.xml and conf.xml. 

2011-03-28 16:48:46.100 Requirement: ODSKC20

2011-03-28 16:48:46.100 00994 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:48:46.100 Requirement: ODSKC20

2011-03-28 16:48:46.100 00996 Stop()
2011-03-28 16:48:46.100 Requirement: ODSKC20
2011-03-28 16:48:46.100 RunCommand(ods-control stop)
2011-03-28 16:48:46.107 - runCommand: Process started, PID: 18742
2011-03-28 16:48:46.108 OUTPUT:	Stopping enforcer...
2011-03-28 16:48:46.108 OUTPUT:	Cannot find PID file
2011-03-28 16:48:46.108 OUTPUT:	Stopping signer engine..
2011-03-28 16:48:46.108 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:48:46.108 ERROR:	return code = 1
2011-03-28 16:48:46.108 RunCommand(ps -e | grep enforcer)
2011-03-28 16:48:46.126 - runCommand: Process started, PID: 18745
2011-03-28 16:48:46.126 ERROR:	return code = 1
2011-03-28 16:48:46.126 RunCommand(ps -e | grep signer)
2011-03-28 16:48:46.144 - runCommand: Process started, PID: 18748
2011-03-28 16:48:46.144 ERROR:	return code = 1

2011-03-28 16:48:46.144 00999 CheckLog()
2011-03-28 16:48:46.144 Requirement: ODSKC20
2011-03-28 16:48:46.307 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 16:48:46.307 01002 CheckLog()
2011-03-28 16:48:46.307 Requirement: ODSKC20
2011-03-28 16:48:46.468 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml validates Found: 

2011-03-28 16:48:46.469 01004 Comment: Reset the config files to the original ones.

2011-03-28 16:48:46.469 Requirement: ODSKC20

2011-03-28 16:48:46.469 01006 Wait(10)

2011-03-28 16:48:46.469 Requirement: ODSKC20

2011-03-28 16:48:56.469 01009 LoadConfig()
2011-03-28 16:48:56.469 Requirement: ODSKC20
2011-03-28 16:48:56.469 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:48:56.475 - runCommand: Process started, PID: 18751

2011-03-28 16:48:56.475 01012 LoadConfig()
2011-03-28 16:48:56.475 Requirement: ODSKC20
2011-03-28 16:48:56.475 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:48:56.478 - runCommand: Process started, PID: 18752

2011-03-28 16:48:56.478 01014 Comment: Update all the configs.

2011-03-28 16:48:56.478 Requirement: ODSKC20

2011-03-28 16:48:56.478 01016 UpdateAll()
2011-03-28 16:48:56.478 Requirement: ODSKC20
2011-03-28 16:48:56.478 RunCommand(ods-ksmutil update all)
2011-03-28 16:48:58.126 - runCommand: Process started, PID: 18753
2011-03-28 16:48:58.127 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:48:58.127 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:48:58.127 OUTPUT:	Repository SoftHSM found
2011-03-28 16:48:58.128 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:48:58.128 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:48:58.128 OUTPUT:	Policy default found
2011-03-28 16:48:58.128 OUTPUT:	Policy default2 found
2011-03-28 16:48:58.128 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:48:58.128 OUTPUT:	Zone ods found
2011-03-28 16:48:58.129 OUTPUT:	Policy set to default.
2011-03-28 16:48:58.129 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:48:58.129 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:48:58.129 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC20T150: Deactivate the Jitter (PT0S) and confirm ods-kaspcheck runs succesfully

2011-03-28 16:48:58.135 01022 Comment: Deactivate the Jitter by setting the time to zero (PT0S). Ods-kaspcheck should validate for conf.xml and kasp.xml.

2011-03-28 16:48:58.135 Requirement: ODSKC20

2011-03-28 16:48:58.136 01024 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:48:58.136 Requirement: ODSKC20

2011-03-28 16:48:58.138 01026 Stop()
2011-03-28 16:48:58.138 Requirement: ODSKC20
2011-03-28 16:48:58.138 RunCommand(ods-control stop)
2011-03-28 16:48:58.213 - runCommand: Process started, PID: 18761
2011-03-28 16:48:58.214 OUTPUT:	Stopping enforcer...
2011-03-28 16:48:58.214 OUTPUT:	Cannot find PID file
2011-03-28 16:48:58.214 OUTPUT:	Stopping signer engine..
2011-03-28 16:48:58.214 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:48:58.215 ERROR:	return code = 1
2011-03-28 16:48:58.215 RunCommand(ps -e | grep enforcer)
2011-03-28 16:48:58.379 - runCommand: Process started, PID: 18764
2011-03-28 16:48:58.379 ERROR:	return code = 1
2011-03-28 16:48:58.380 RunCommand(ps -e | grep signer)
2011-03-28 16:48:58.492 - runCommand: Process started, PID: 18767
2011-03-28 16:48:58.493 ERROR:	return code = 1

2011-03-28 16:48:58.494 01028 Wait(10)

2011-03-28 16:48:58.494 Requirement: ODSKC20

2011-03-28 16:49:08.497 01030 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:49:08.498 Requirement: ODSKC20

2011-03-28 16:49:08.499 01033 LoadConfig()
2011-03-28 16:49:08.499 Requirement: ODSKC20
2011-03-28 16:49:08.500 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:49:08.563 - runCommand: Process started, PID: 18770

2011-03-28 16:49:08.566 01036 LoadConfig()
2011-03-28 16:49:08.566 Requirement: ODSKC20
2011-03-28 16:49:08.566 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC20T150_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:49:08.623 - runCommand: Process started, PID: 18771

2011-03-28 16:49:08.625 01038 Comment: Update all the configs.

2011-03-28 16:49:08.625 Requirement: ODSKC20

2011-03-28 16:49:08.627 01040 UpdateAll()
2011-03-28 16:49:08.627 Requirement: ODSKC20
2011-03-28 16:49:08.627 RunCommand(ods-ksmutil update all)
2011-03-28 16:49:14.462 - runCommand: Process started, PID: 18772
2011-03-28 16:49:14.462 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:49:14.462 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:49:14.462 OUTPUT:	Repository SoftHSM found
2011-03-28 16:49:14.462 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:49:14.462 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:49:14.462 OUTPUT:	Policy default found
2011-03-28 16:49:14.462 OUTPUT:	Policy default2 found
2011-03-28 16:49:14.462 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:49:14.462 OUTPUT:	Policy default3 found
2011-03-28 16:49:14.462 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:49:14.462 OUTPUT:	Policy default4 found
2011-03-28 16:49:14.462 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:49:14.462 OUTPUT:	Policy default5 found
2011-03-28 16:49:14.462 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:49:14.462 OUTPUT:	Policy default6 found
2011-03-28 16:49:14.462 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:49:14.462 OUTPUT:	Policy default7 found
2011-03-28 16:49:14.463 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:49:14.463 OUTPUT:	Policy default8 found
2011-03-28 16:49:14.463 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:49:14.463 OUTPUT:	Policy default9 found
2011-03-28 16:49:14.463 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:49:14.463 OUTPUT:	Policy default10 found
2011-03-28 16:49:14.463 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:49:14.463 OUTPUT:	Policy default11 found
2011-03-28 16:49:14.463 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:49:14.463 OUTPUT:	Zone ods found
2011-03-28 16:49:14.463 OUTPUT:	Policy set to default.
2011-03-28 16:49:14.463 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:49:14.463 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:49:14.463 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:49:14.463 01042 Wait(10)

2011-03-28 16:49:14.463 Requirement: ODSKC20

2011-03-28 16:49:24.463 01044 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should validate for the kasp.xml and conf.xml. 

2011-03-28 16:49:24.463 Requirement: ODSKC20

2011-03-28 16:49:24.463 01048 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:49:24.463 Requirement: ODSKC20

2011-03-28 16:49:24.464 01050 Stop()
2011-03-28 16:49:24.464 Requirement: ODSKC20
2011-03-28 16:49:24.464 RunCommand(ods-control stop)
2011-03-28 16:49:24.471 - runCommand: Process started, PID: 18780
2011-03-28 16:49:24.471 OUTPUT:	Stopping enforcer...
2011-03-28 16:49:24.471 OUTPUT:	Cannot find PID file
2011-03-28 16:49:24.471 OUTPUT:	Stopping signer engine..
2011-03-28 16:49:24.471 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:49:24.471 ERROR:	return code = 1
2011-03-28 16:49:24.471 RunCommand(ps -e | grep enforcer)
2011-03-28 16:49:24.489 - runCommand: Process started, PID: 18783
2011-03-28 16:49:24.489 ERROR:	return code = 1
2011-03-28 16:49:24.489 RunCommand(ps -e | grep signer)
2011-03-28 16:49:24.508 - runCommand: Process started, PID: 18786
2011-03-28 16:49:24.508 ERROR:	return code = 1

2011-03-28 16:49:24.508 01053 CheckLog()
2011-03-28 16:49:24.508 Requirement: ODSKC20
2011-03-28 16:49:24.671 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 16:49:24.671 01056 CheckLog()
2011-03-28 16:49:24.671 Requirement: ODSKC20
2011-03-28 16:49:24.833 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml validates Found: 

2011-03-28 16:49:24.833 01058 Comment: Reset the config files to the original ones.

2011-03-28 16:49:24.833 Requirement: ODSKC20

2011-03-28 16:49:24.834 01061 Wait(10)

2011-03-28 16:49:24.834 Requirement: ODSKC20

2011-03-28 16:49:34.834 01064 LoadConfig()
2011-03-28 16:49:34.834 Requirement: ODSKC20
2011-03-28 16:49:34.834 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:49:34.840 - runCommand: Process started, PID: 18789

2011-03-28 16:49:34.840 01067 LoadConfig()
2011-03-28 16:49:34.841 Requirement: ODSKC20
2011-03-28 16:49:34.841 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:49:34.846 - runCommand: Process started, PID: 18790

2011-03-28 16:49:34.846 01069 Comment: Update all the configs.

2011-03-28 16:49:34.846 Requirement: ODSKC20

2011-03-28 16:49:34.847 01071 UpdateAll()
2011-03-28 16:49:34.847 Requirement: ODSKC20
2011-03-28 16:49:34.847 RunCommand(ods-ksmutil update all)
2011-03-28 16:49:36.509 - runCommand: Process started, PID: 18791
2011-03-28 16:49:36.509 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:49:36.509 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:49:36.509 OUTPUT:	Repository SoftHSM found
2011-03-28 16:49:36.509 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:49:36.509 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:49:36.509 OUTPUT:	Policy default found
2011-03-28 16:49:36.509 OUTPUT:	Policy default2 found
2011-03-28 16:49:36.509 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:49:36.509 OUTPUT:	Zone ods found
2011-03-28 16:49:36.509 OUTPUT:	Policy set to default.
2011-03-28 16:49:36.509 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:49:36.509 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:49:36.509 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC20T160: Use a value with an incorrect format for InceptionOffset (T1D) and confirm ods-kaspcheck fails

2011-03-28 16:49:36.510 01076 Comment: Change the InceptionOffset time to a incorrect format. Ods-kaspcheck should fail.

2011-03-28 16:49:36.510 Requirement: ODSKC20

2011-03-28 16:49:36.510 01078 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:49:36.510 Requirement: ODSKC20

2011-03-28 16:49:36.510 01080 Stop()
2011-03-28 16:49:36.510 Requirement: ODSKC20
2011-03-28 16:49:36.510 RunCommand(ods-control stop)
2011-03-28 16:49:36.518 - runCommand: Process started, PID: 18799
2011-03-28 16:49:36.518 OUTPUT:	Stopping enforcer...
2011-03-28 16:49:36.518 OUTPUT:	Cannot find PID file
2011-03-28 16:49:36.518 OUTPUT:	Stopping signer engine..
2011-03-28 16:49:36.518 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:49:36.518 ERROR:	return code = 1
2011-03-28 16:49:36.518 RunCommand(ps -e | grep enforcer)
2011-03-28 16:49:36.536 - runCommand: Process started, PID: 18802
2011-03-28 16:49:36.536 ERROR:	return code = 1
2011-03-28 16:49:36.536 RunCommand(ps -e | grep signer)
2011-03-28 16:49:36.554 - runCommand: Process started, PID: 18805
2011-03-28 16:49:36.554 ERROR:	return code = 1

2011-03-28 16:49:36.554 01082 Wait(10)

2011-03-28 16:49:36.554 Requirement: ODSKC20

2011-03-28 16:49:46.554 01084 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:49:46.554 Requirement: ODSKC20

2011-03-28 16:49:46.554 01087 LoadConfig()
2011-03-28 16:49:46.554 Requirement: ODSKC20
2011-03-28 16:49:46.554 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:49:46.561 - runCommand: Process started, PID: 18808

2011-03-28 16:49:46.561 01090 LoadConfig()
2011-03-28 16:49:46.561 Requirement: ODSKC20
2011-03-28 16:49:46.561 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC20T160_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:49:46.567 - runCommand: Process started, PID: 18809

2011-03-28 16:49:46.567 01092 Comment: Update all the configs.

2011-03-28 16:49:46.567 Requirement: ODSKC20

2011-03-28 16:49:46.567 01094 UpdateAll()
2011-03-28 16:49:46.567 Requirement: ODSKC20
2011-03-28 16:49:46.567 RunCommand(ods-ksmutil update all)
2011-03-28 16:49:47.452 - runCommand: Process started, PID: 18810
2011-03-28 16:49:47.452 OUTPUT:	ERROR: Can't find Signatures/InceptionOffset in default in /etc/opendnssec/kasp.xml
2011-03-28 16:49:47.452 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:49:47.452 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:49:47.452 OUTPUT:	Repository SoftHSM found
2011-03-28 16:49:47.452 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:49:47.452 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:49:47.452 OUTPUT:	Error validating file "/etc/opendnssec/kasp.xml"
2011-03-28 16:49:47.452 OUTPUT:	Failed to update policies
2011-03-28 16:49:47.452 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:49:47.452 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:49:47.452 ERROR:	/etc/opendnssec/kasp.xml:18: element InceptionOffset: Relax-NG validity error : Type duration doesn't allow value 'T1D'
2011-03-28 16:49:47.452 ERROR:	/etc/opendnssec/kasp.xml:18: element InceptionOffset: Relax-NG validity error : Error validating datatype duration
2011-03-28 16:49:47.452 ERROR:	/etc/opendnssec/kasp.xml:18: element InceptionOffset: Relax-NG validity error : Element InceptionOffset failed to validate content
2011-03-28 16:49:47.452 ERROR:	/etc/opendnssec/kasp.xml fails to validate
2011-03-28 16:49:47.452 ERROR:	/etc/opendnssec/kasp.xml:18: element InceptionOffset: Relax-NG validity error : Type duration doesn't allow value 'T1D'
2011-03-28 16:49:47.452 ERROR:	/etc/opendnssec/kasp.xml:18: element InceptionOffset: Relax-NG validity error : Error validating datatype duration
2011-03-28 16:49:47.452 ERROR:	/etc/opendnssec/kasp.xml:18: element InceptionOffset: Relax-NG validity error : Element InceptionOffset failed to validate content
2011-03-28 16:49:47.452 ERROR:	return code = 1

2011-03-28 16:49:47.452 01096 Wait(10)

2011-03-28 16:49:47.452 Requirement: ODSKC20

2011-03-28 16:49:57.452 01098 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 16:49:57.452 Requirement: ODSKC20

2011-03-28 16:49:57.453 01102 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:49:57.453 Requirement: ODSKC20

2011-03-28 16:49:57.453 01104 Stop()
2011-03-28 16:49:57.453 Requirement: ODSKC20
2011-03-28 16:49:57.453 RunCommand(ods-control stop)
2011-03-28 16:49:57.460 - runCommand: Process started, PID: 18819
2011-03-28 16:49:57.460 OUTPUT:	Stopping enforcer...
2011-03-28 16:49:57.460 OUTPUT:	Cannot find PID file
2011-03-28 16:49:57.460 OUTPUT:	Stopping signer engine..
2011-03-28 16:49:57.460 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:49:57.460 ERROR:	return code = 1
2011-03-28 16:49:57.461 RunCommand(ps -e | grep enforcer)
2011-03-28 16:49:57.478 - runCommand: Process started, PID: 18822
2011-03-28 16:49:57.479 ERROR:	return code = 1
2011-03-28 16:49:57.479 RunCommand(ps -e | grep signer)
2011-03-28 16:49:57.496 - runCommand: Process started, PID: 18825
2011-03-28 16:49:57.497 ERROR:	return code = 1

2011-03-28 16:49:57.497 01107 CheckLog()
2011-03-28 16:49:57.497 Requirement: ODSKC20

2011-03-28 16:49:57.667 01110 CheckLog()
2011-03-28 16:49:57.667 Requirement: ODSKC20

2011-03-28 16:49:57.829 01113 CheckLog()
2011-03-28 16:49:57.829 Requirement: ODSKC20

2011-03-28 16:49:57.991 01115 Comment: Reset the config files to the original ones.

2011-03-28 16:49:57.991 Requirement: ODSKC20

2011-03-28 16:49:57.991 01117 Wait(10)

2011-03-28 16:49:57.991 Requirement: ODSKC20

2011-03-28 16:50:07.992 01120 LoadConfig()
2011-03-28 16:50:07.992 Requirement: ODSKC20
2011-03-28 16:50:07.992 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:50:07.998 - runCommand: Process started, PID: 18828

2011-03-28 16:50:07.998 01123 LoadConfig()
2011-03-28 16:50:07.998 Requirement: ODSKC20
2011-03-28 16:50:07.998 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:50:08.443 - runCommand: Process started, PID: 18829

2011-03-28 16:50:08.470 01125 Comment: Update all the configs.

2011-03-28 16:50:08.472 Requirement: ODSKC20

2011-03-28 16:50:08.487 01127 UpdateAll()
2011-03-28 16:50:08.489 Requirement: ODSKC20
2011-03-28 16:50:08.491 RunCommand(ods-ksmutil update all)
2011-03-28 16:50:09.601 - runCommand: Process started, PID: 18830
2011-03-28 16:50:09.601 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:50:09.601 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:50:09.601 OUTPUT:	Repository SoftHSM found
2011-03-28 16:50:09.601 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:50:09.601 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:50:09.601 OUTPUT:	Policy default found
2011-03-28 16:50:09.601 OUTPUT:	Policy default2 found
2011-03-28 16:50:09.601 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:50:09.601 OUTPUT:	Zone ods found
2011-03-28 16:50:09.601 OUTPUT:	Policy set to default.
2011-03-28 16:50:09.601 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:50:09.601 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:50:09.601 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC20T170: Use a very high value for InceptionOffset (P999Y) and confirm ods-kaspcheck runs successfully

2011-03-28 16:50:09.601 01133 Comment: Change the InceptionOffset time to a high value and correct format. Ods-kaspcheck should validate for conf.xml and kasp.xml.

2011-03-28 16:50:09.601 Requirement: ODSKC20

2011-03-28 16:50:09.602 01135 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:50:09.602 Requirement: ODSKC20

2011-03-28 16:50:09.602 01137 Stop()
2011-03-28 16:50:09.602 Requirement: ODSKC20
2011-03-28 16:50:09.602 RunCommand(ods-control stop)
2011-03-28 16:50:09.609 - runCommand: Process started, PID: 18838
2011-03-28 16:50:09.609 OUTPUT:	Stopping enforcer...
2011-03-28 16:50:09.609 OUTPUT:	Cannot find PID file
2011-03-28 16:50:09.609 OUTPUT:	Stopping signer engine..
2011-03-28 16:50:09.609 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:50:09.609 ERROR:	return code = 1
2011-03-28 16:50:09.609 RunCommand(ps -e | grep enforcer)
2011-03-28 16:50:09.627 - runCommand: Process started, PID: 18841
2011-03-28 16:50:09.627 ERROR:	return code = 1
2011-03-28 16:50:09.627 RunCommand(ps -e | grep signer)
2011-03-28 16:50:09.645 - runCommand: Process started, PID: 18844
2011-03-28 16:50:09.646 ERROR:	return code = 1

2011-03-28 16:50:09.646 01139 Wait(10)

2011-03-28 16:50:09.646 Requirement: ODSKC20

2011-03-28 16:50:19.646 01141 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:50:19.646 Requirement: ODSKC20

2011-03-28 16:50:19.646 01144 LoadConfig()
2011-03-28 16:50:19.646 Requirement: ODSKC20
2011-03-28 16:50:19.646 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:50:19.653 - runCommand: Process started, PID: 18847

2011-03-28 16:50:19.653 01147 LoadConfig()
2011-03-28 16:50:19.653 Requirement: ODSKC20
2011-03-28 16:50:19.653 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC20T170_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:50:19.659 - runCommand: Process started, PID: 18848

2011-03-28 16:50:19.659 01149 Comment: Update all the configs.

2011-03-28 16:50:19.659 Requirement: ODSKC20

2011-03-28 16:50:19.659 01151 UpdateAll()
2011-03-28 16:50:19.659 Requirement: ODSKC20
2011-03-28 16:50:19.659 RunCommand(ods-ksmutil update all)
2011-03-28 16:50:26.683 - runCommand: Process started, PID: 18849
2011-03-28 16:50:26.684 OUTPUT:	WARNING: InceptionOffset is higher than expected (31504464000 seconds) for default policy in /etc/opendnssec/kasp.xml
2011-03-28 16:50:26.684 OUTPUT:	WARNING: In policy default,  Y used in duration field for Signatures/InceptionOffset (P999Y) in /etc/opendnssec/kasp.xml - this will be interpreted as 365 days
2011-03-28 16:50:26.684 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:50:26.684 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:50:26.684 OUTPUT:	Repository SoftHSM found
2011-03-28 16:50:26.684 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:50:26.684 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:50:26.684 OUTPUT:	Policy default found
2011-03-28 16:50:26.684 OUTPUT:	Info: converting P999Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:50:26.684 OUTPUT:	Policy default2 found
2011-03-28 16:50:26.684 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:50:26.684 OUTPUT:	Policy default3 found
2011-03-28 16:50:26.684 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:50:26.684 OUTPUT:	Policy default4 found
2011-03-28 16:50:26.684 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:50:26.684 OUTPUT:	Policy default5 found
2011-03-28 16:50:26.684 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:50:26.684 OUTPUT:	Policy default6 found
2011-03-28 16:50:26.684 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:50:26.684 OUTPUT:	Policy default7 found
2011-03-28 16:50:26.684 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:50:26.684 OUTPUT:	Policy default8 found
2011-03-28 16:50:26.684 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:50:26.684 OUTPUT:	Policy default9 found
2011-03-28 16:50:26.684 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:50:26.684 OUTPUT:	Policy default10 found
2011-03-28 16:50:26.684 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:50:26.684 OUTPUT:	Policy default11 found
2011-03-28 16:50:26.684 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:50:26.684 OUTPUT:	Zone ods found
2011-03-28 16:50:26.684 OUTPUT:	Policy set to default.
2011-03-28 16:50:26.684 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:50:26.684 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:50:26.684 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:50:26.684 01153 Wait(10)

2011-03-28 16:50:26.684 Requirement: ODSKC20

2011-03-28 16:50:36.685 01155 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should validate for the kasp.xml and conf.xml. 

2011-03-28 16:50:36.685 Requirement: ODSKC20

2011-03-28 16:50:36.685 01159 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:50:36.685 Requirement: ODSKC20

2011-03-28 16:50:36.685 01161 Stop()
2011-03-28 16:50:36.685 Requirement: ODSKC20
2011-03-28 16:50:36.685 RunCommand(ods-control stop)
2011-03-28 16:50:36.693 - runCommand: Process started, PID: 18857
2011-03-28 16:50:36.693 OUTPUT:	Stopping enforcer...
2011-03-28 16:50:36.693 OUTPUT:	Cannot find PID file
2011-03-28 16:50:36.693 OUTPUT:	Stopping signer engine..
2011-03-28 16:50:36.693 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:50:36.693 ERROR:	return code = 1
2011-03-28 16:50:36.693 RunCommand(ps -e | grep enforcer)
2011-03-28 16:50:36.710 - runCommand: Process started, PID: 18860
2011-03-28 16:50:36.710 ERROR:	return code = 1
2011-03-28 16:50:36.710 RunCommand(ps -e | grep signer)
2011-03-28 16:50:36.721 - runCommand: Process started, PID: 18863
2011-03-28 16:50:36.722 ERROR:	return code = 1

2011-03-28 16:50:36.722 01165 CheckLog()
2011-03-28 16:50:36.722 Requirement: ODSKC20
2011-03-28 16:50:36.884 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 16:50:36.885 01168 CheckLog()
2011-03-28 16:50:36.885 Requirement: ODSKC20
2011-03-28 16:50:37.474 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml validates Found: 

2011-03-28 16:50:37.476 01170 Comment: Reset the config files to the original ones.

2011-03-28 16:50:37.476 Requirement: ODSKC20

2011-03-28 16:50:37.477 01172 Wait(10)

2011-03-28 16:50:37.477 Requirement: ODSKC20

2011-03-28 16:50:47.480 01175 LoadConfig()
2011-03-28 16:50:47.480 Requirement: ODSKC20
2011-03-28 16:50:47.481 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:50:47.545 - runCommand: Process started, PID: 18866

2011-03-28 16:50:47.548 01178 LoadConfig()
2011-03-28 16:50:47.548 Requirement: ODSKC20
2011-03-28 16:50:47.548 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:50:47.604 - runCommand: Process started, PID: 18867

2011-03-28 16:50:47.607 01180 Comment: Update all the configs.

2011-03-28 16:50:47.607 Requirement: ODSKC20

2011-03-28 16:50:47.608 01182 UpdateAll()
2011-03-28 16:50:47.608 Requirement: ODSKC20
2011-03-28 16:50:47.609 RunCommand(ods-ksmutil update all)
2011-03-28 16:50:48.681 - runCommand: Process started, PID: 18868
2011-03-28 16:50:48.681 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:50:48.681 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:50:48.681 OUTPUT:	Repository SoftHSM found
2011-03-28 16:50:48.681 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:50:48.681 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:50:48.681 OUTPUT:	Policy default found
2011-03-28 16:50:48.681 OUTPUT:	Policy default2 found
2011-03-28 16:50:48.681 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:50:48.681 OUTPUT:	Zone ods found
2011-03-28 16:50:48.681 OUTPUT:	Policy set to default.
2011-03-28 16:50:48.681 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:50:48.681 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:50:48.681 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC20T180: Deactivate the InceptionOffset (PT0S) and confirm ods-kaspcheck runs succesfully

2011-03-28 16:50:48.681 01187 Comment: Deactivate the InceptionOffset by setting the time to zero (PT0S). Ods-kaspcheck should validate for conf.xml and kasp.xml.

2011-03-28 16:50:48.681 Requirement: ODSKC20

2011-03-28 16:50:48.682 01189 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:50:48.682 Requirement: ODSKC20

2011-03-28 16:50:48.682 01191 Stop()
2011-03-28 16:50:48.682 Requirement: ODSKC20
2011-03-28 16:50:48.682 RunCommand(ods-control stop)
2011-03-28 16:50:48.689 - runCommand: Process started, PID: 18876
2011-03-28 16:50:48.689 OUTPUT:	Stopping enforcer...
2011-03-28 16:50:48.689 OUTPUT:	Cannot find PID file
2011-03-28 16:50:48.689 OUTPUT:	Stopping signer engine..
2011-03-28 16:50:48.689 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:50:48.689 ERROR:	return code = 1
2011-03-28 16:50:48.689 RunCommand(ps -e | grep enforcer)
2011-03-28 16:50:48.707 - runCommand: Process started, PID: 18879
2011-03-28 16:50:48.707 ERROR:	return code = 1
2011-03-28 16:50:48.707 RunCommand(ps -e | grep signer)
2011-03-28 16:50:48.724 - runCommand: Process started, PID: 18882
2011-03-28 16:50:48.724 ERROR:	return code = 1

2011-03-28 16:50:48.724 01193 Wait(10)

2011-03-28 16:50:48.724 Requirement: ODSKC20

2011-03-28 16:50:58.725 01195 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:50:58.725 Requirement: ODSKC20

2011-03-28 16:50:58.725 01198 LoadConfig()
2011-03-28 16:50:58.725 Requirement: ODSKC20
2011-03-28 16:50:58.725 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:50:58.731 - runCommand: Process started, PID: 18885

2011-03-28 16:50:58.731 01201 LoadConfig()
2011-03-28 16:50:58.731 Requirement: ODSKC20
2011-03-28 16:50:58.731 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC20T180_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:50:58.737 - runCommand: Process started, PID: 18886

2011-03-28 16:50:58.737 01203 Comment: Update all the configs.

2011-03-28 16:50:58.737 Requirement: ODSKC20

2011-03-28 16:50:58.737 01205 UpdateAll()
2011-03-28 16:50:58.737 Requirement: ODSKC20
2011-03-28 16:50:58.738 RunCommand(ods-ksmutil update all)
2011-03-28 16:51:05.738 - runCommand: Process started, PID: 18887
2011-03-28 16:51:05.739 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:51:05.739 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:51:05.739 OUTPUT:	Repository SoftHSM found
2011-03-28 16:51:05.739 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:51:05.739 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:51:05.739 OUTPUT:	Policy default found
2011-03-28 16:51:05.739 OUTPUT:	Policy default2 found
2011-03-28 16:51:05.739 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:51:05.739 OUTPUT:	Policy default3 found
2011-03-28 16:51:05.739 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:51:05.739 OUTPUT:	Policy default4 found
2011-03-28 16:51:05.739 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:51:05.739 OUTPUT:	Policy default5 found
2011-03-28 16:51:05.739 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:51:05.739 OUTPUT:	Policy default6 found
2011-03-28 16:51:05.739 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:51:05.739 OUTPUT:	Policy default7 found
2011-03-28 16:51:05.739 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:51:05.739 OUTPUT:	Policy default8 found
2011-03-28 16:51:05.739 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:51:05.739 OUTPUT:	Policy default9 found
2011-03-28 16:51:05.739 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:51:05.739 OUTPUT:	Policy default10 found
2011-03-28 16:51:05.739 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:51:05.739 OUTPUT:	Policy default11 found
2011-03-28 16:51:05.739 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:51:05.739 OUTPUT:	Zone ods found
2011-03-28 16:51:05.739 OUTPUT:	Policy set to default.
2011-03-28 16:51:05.739 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:51:05.739 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:51:05.739 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:51:05.739 01207 Wait(10)

2011-03-28 16:51:05.739 Requirement: ODSKC20

2011-03-28 16:51:15.740 01209 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should validate for the kasp.xml and conf.xml. 

2011-03-28 16:51:15.740 Requirement: ODSKC20

2011-03-28 16:51:15.740 01213 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:51:15.740 Requirement: ODSKC20

2011-03-28 16:51:15.740 01215 Stop()
2011-03-28 16:51:15.740 Requirement: ODSKC20
2011-03-28 16:51:15.740 RunCommand(ods-control stop)
2011-03-28 16:51:15.748 - runCommand: Process started, PID: 18895
2011-03-28 16:51:15.748 OUTPUT:	Stopping enforcer...
2011-03-28 16:51:15.748 OUTPUT:	Cannot find PID file
2011-03-28 16:51:15.748 OUTPUT:	Stopping signer engine..
2011-03-28 16:51:15.748 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:51:15.748 ERROR:	return code = 1
2011-03-28 16:51:15.748 RunCommand(ps -e | grep enforcer)
2011-03-28 16:51:15.766 - runCommand: Process started, PID: 18898
2011-03-28 16:51:15.766 ERROR:	return code = 1
2011-03-28 16:51:15.766 RunCommand(ps -e | grep signer)
2011-03-28 16:51:15.784 - runCommand: Process started, PID: 18901
2011-03-28 16:51:15.784 ERROR:	return code = 1

2011-03-28 16:51:15.784 01218 CheckLog()
2011-03-28 16:51:15.784 Requirement: ODSKC20
2011-03-28 16:51:15.954 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 16:51:15.955 01221 CheckLog()
2011-03-28 16:51:15.955 Requirement: ODSKC20
2011-03-28 16:51:16.117 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml validates Found: 

2011-03-28 16:51:16.117 01223 Comment: Reset the config files to the original ones.

2011-03-28 16:51:16.117 Requirement: ODSKC20

2011-03-28 16:51:16.117 01226 Wait(10)

2011-03-28 16:51:16.117 Requirement: ODSKC20

2011-03-28 16:51:26.118 01229 LoadConfig()
2011-03-28 16:51:26.118 Requirement: ODSKC20
2011-03-28 16:51:26.118 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:51:26.124 - runCommand: Process started, PID: 18904

2011-03-28 16:51:26.124 01232 LoadConfig()
2011-03-28 16:51:26.124 Requirement: ODSKC20
2011-03-28 16:51:26.124 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:51:26.130 - runCommand: Process started, PID: 18905

2011-03-28 16:51:26.130 01234 Comment: Update all the configs.

2011-03-28 16:51:26.130 Requirement: ODSKC20

2011-03-28 16:51:26.130 01236 UpdateAll()
2011-03-28 16:51:26.130 Requirement: ODSKC20
2011-03-28 16:51:26.130 RunCommand(ods-ksmutil update all)
2011-03-28 16:51:27.744 - runCommand: Process started, PID: 18906
2011-03-28 16:51:27.744 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:51:27.744 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:51:27.744 OUTPUT:	Repository SoftHSM found
2011-03-28 16:51:27.744 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:51:27.744 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:51:27.744 OUTPUT:	Policy default found
2011-03-28 16:51:27.744 OUTPUT:	Policy default2 found
2011-03-28 16:51:27.744 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:51:27.744 OUTPUT:	Zone ods found
2011-03-28 16:51:27.744 OUTPUT:	Policy set to default.
2011-03-28 16:51:27.744 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:51:27.744 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:51:27.744 ERROR:	/etc/opendnssec/kasp.xml validates
Testcondition - ODSKC30: The Denial part located in kasp.xml should conform to several constraints and requirements

-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSKC30T10: Add the NSEC tag next to the existing NSEC3 tag and confirm ods-kaspcheck fails

2011-03-28 16:51:27.745 01243 Comment: NSEC tag added to a kasp.xml where also the NSEC3 tag is configured. This combination is not possible. Ods-kaspcheck should fail.

2011-03-28 16:51:27.745 Requirement: ODSKC30

2011-03-28 16:51:27.745 01245 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:51:27.745 Requirement: ODSKC30

2011-03-28 16:51:27.745 01247 Stop()
2011-03-28 16:51:27.745 Requirement: ODSKC30
2011-03-28 16:51:27.745 RunCommand(ods-control stop)
2011-03-28 16:51:27.753 - runCommand: Process started, PID: 18914
2011-03-28 16:51:27.753 OUTPUT:	Stopping enforcer...
2011-03-28 16:51:27.753 OUTPUT:	Cannot find PID file
2011-03-28 16:51:27.753 OUTPUT:	Stopping signer engine..
2011-03-28 16:51:27.753 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:51:27.753 ERROR:	return code = 1
2011-03-28 16:51:27.753 RunCommand(ps -e | grep enforcer)
2011-03-28 16:51:27.771 - runCommand: Process started, PID: 18917
2011-03-28 16:51:27.771 ERROR:	return code = 1
2011-03-28 16:51:27.771 RunCommand(ps -e | grep signer)
2011-03-28 16:51:27.789 - runCommand: Process started, PID: 18920
2011-03-28 16:51:27.789 ERROR:	return code = 1

2011-03-28 16:51:27.789 01249 Wait(10)

2011-03-28 16:51:27.789 Requirement: ODSKC30

2011-03-28 16:51:37.789 01251 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:51:37.789 Requirement: ODSKC30

2011-03-28 16:51:37.790 01254 LoadConfig()
2011-03-28 16:51:37.790 Requirement: ODSKC30
2011-03-28 16:51:37.790 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:51:37.796 - runCommand: Process started, PID: 18923

2011-03-28 16:51:37.796 01257 LoadConfig()
2011-03-28 16:51:37.796 Requirement: ODSKC30
2011-03-28 16:51:37.796 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC30T10_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:51:37.802 - runCommand: Process started, PID: 18924

2011-03-28 16:51:37.802 01259 Comment: Update all the configs.

2011-03-28 16:51:37.802 Requirement: ODSKC30

2011-03-28 16:51:37.802 01261 UpdateAll()
2011-03-28 16:51:37.802 Requirement: ODSKC30
2011-03-28 16:51:37.802 RunCommand(ods-ksmutil update all)
2011-03-28 16:51:38.669 - runCommand: Process started, PID: 18925
2011-03-28 16:51:38.669 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:51:38.669 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:51:38.669 OUTPUT:	Repository SoftHSM found
2011-03-28 16:51:38.669 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:51:38.669 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:51:38.669 OUTPUT:	Error validating file "/etc/opendnssec/kasp.xml"
2011-03-28 16:51:38.669 OUTPUT:	Failed to update policies
2011-03-28 16:51:38.669 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:51:38.669 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:51:38.669 ERROR:	/etc/opendnssec/kasp.xml:31: element NSEC: Relax-NG validity error : Did not expect element NSEC there
2011-03-28 16:51:38.670 ERROR:	/etc/opendnssec/kasp.xml fails to validate
2011-03-28 16:51:38.670 ERROR:	/etc/opendnssec/kasp.xml:31: element NSEC: Relax-NG validity error : Did not expect element NSEC there
2011-03-28 16:51:38.670 ERROR:	return code = 1

2011-03-28 16:51:38.670 01263 Wait(10)

2011-03-28 16:51:38.670 Requirement: ODSKC30

2011-03-28 16:51:48.670 01265 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 16:51:48.670 Requirement: ODSKC30

2011-03-28 16:51:48.670 01269 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:51:48.670 Requirement: ODSKC30

2011-03-28 16:51:48.670 01271 Stop()
2011-03-28 16:51:48.670 Requirement: ODSKC30
2011-03-28 16:51:48.670 RunCommand(ods-control stop)
2011-03-28 16:51:48.678 - runCommand: Process started, PID: 18933
2011-03-28 16:51:48.678 OUTPUT:	Stopping enforcer...
2011-03-28 16:51:48.678 OUTPUT:	Cannot find PID file
2011-03-28 16:51:48.678 OUTPUT:	Stopping signer engine..
2011-03-28 16:51:48.678 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:51:48.678 ERROR:	return code = 1
2011-03-28 16:51:48.678 RunCommand(ps -e | grep enforcer)
2011-03-28 16:51:48.696 - runCommand: Process started, PID: 18936
2011-03-28 16:51:48.696 ERROR:	return code = 1
2011-03-28 16:51:48.696 RunCommand(ps -e | grep signer)
2011-03-28 16:51:48.714 - runCommand: Process started, PID: 18939
2011-03-28 16:51:48.714 ERROR:	return code = 1

2011-03-28 16:51:48.714 01274 CheckLog()
2011-03-28 16:51:48.714 Requirement: ODSKC30

2011-03-28 16:51:48.884 01277 CheckLog()
2011-03-28 16:51:48.884 Requirement: ODSKC30

2011-03-28 16:51:49.478 01280 CheckLog()
2011-03-28 16:51:49.478 Requirement: ODSKC30

2011-03-28 16:51:49.209 01282 Comment: Reset the config files to the original ones.

2011-03-28 16:51:49.209 Requirement: ODSKC30

2011-03-28 16:51:49.209 01285 Wait(10)

2011-03-28 16:51:49.209 Requirement: ODSKC30

2011-03-28 16:51:59.210 01288 LoadConfig()
2011-03-28 16:51:59.210 Requirement: ODSKC30
2011-03-28 16:51:59.210 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:51:59.216 - runCommand: Process started, PID: 18942

2011-03-28 16:51:59.216 01291 LoadConfig()
2011-03-28 16:51:59.216 Requirement: ODSKC30
2011-03-28 16:51:59.216 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:51:59.222 - runCommand: Process started, PID: 18943

2011-03-28 16:51:59.222 01293 Comment: Update all the configs.

2011-03-28 16:51:59.222 Requirement: ODSKC30

2011-03-28 16:51:59.222 01295 UpdateAll()
2011-03-28 16:51:59.222 Requirement: ODSKC30
2011-03-28 16:51:59.222 RunCommand(ods-ksmutil update all)
2011-03-28 16:52:00.660 - runCommand: Process started, PID: 18944
2011-03-28 16:52:00.661 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:52:00.661 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:52:00.661 OUTPUT:	Repository SoftHSM found
2011-03-28 16:52:00.661 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:52:00.661 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:52:00.661 OUTPUT:	Policy default found
2011-03-28 16:52:00.661 OUTPUT:	Policy default2 found
2011-03-28 16:52:00.661 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:00.661 OUTPUT:	Zone ods found
2011-03-28 16:52:00.661 OUTPUT:	Policy set to default.
2011-03-28 16:52:00.661 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:52:00.661 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:52:00.661 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC30T20: Remove the NSEC3 tag and it's contents and add the NSEC tag and confirm ods-kaspcheck runs successfully

2011-03-28 16:52:00.661 01300 Comment: NSEC tag added to a kasp.xml where no NSEC3 tag is configured. Ods-kaspcheck shouldvalidate for conf.xml and kasp.xml.

2011-03-28 16:52:00.661 Requirement: ODSKC30

2011-03-28 16:52:00.661 01302 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:52:00.661 Requirement: ODSKC30

2011-03-28 16:52:00.662 01304 Stop()
2011-03-28 16:52:00.662 Requirement: ODSKC30
2011-03-28 16:52:00.662 RunCommand(ods-control stop)
2011-03-28 16:52:00.669 - runCommand: Process started, PID: 18952
2011-03-28 16:52:00.669 OUTPUT:	Stopping enforcer...
2011-03-28 16:52:00.669 OUTPUT:	Cannot find PID file
2011-03-28 16:52:00.669 OUTPUT:	Stopping signer engine..
2011-03-28 16:52:00.669 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:52:00.669 ERROR:	return code = 1
2011-03-28 16:52:00.669 RunCommand(ps -e | grep enforcer)
2011-03-28 16:52:00.688 - runCommand: Process started, PID: 18955
2011-03-28 16:52:00.688 ERROR:	return code = 1
2011-03-28 16:52:00.688 RunCommand(ps -e | grep signer)
2011-03-28 16:52:00.706 - runCommand: Process started, PID: 18958
2011-03-28 16:52:00.706 ERROR:	return code = 1

2011-03-28 16:52:00.706 01306 Wait(10)

2011-03-28 16:52:00.706 Requirement: ODSKC30

2011-03-28 16:52:10.707 01308 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:52:10.707 Requirement: ODSKC30

2011-03-28 16:52:10.707 01311 LoadConfig()
2011-03-28 16:52:10.707 Requirement: ODSKC30
2011-03-28 16:52:10.707 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:52:10.713 - runCommand: Process started, PID: 18961

2011-03-28 16:52:10.713 01314 LoadConfig()
2011-03-28 16:52:10.713 Requirement: ODSKC30
2011-03-28 16:52:10.713 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC30T30_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:52:10.719 - runCommand: Process started, PID: 18962

2011-03-28 16:52:10.719 01316 Comment: Update all the configs.

2011-03-28 16:52:10.719 Requirement: ODSKC30

2011-03-28 16:52:10.720 01318 UpdateAll()
2011-03-28 16:52:10.720 Requirement: ODSKC30
2011-03-28 16:52:10.720 RunCommand(ods-ksmutil update all)
2011-03-28 16:52:17.793 - runCommand: Process started, PID: 18963
2011-03-28 16:52:17.793 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:52:17.793 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:52:17.793 OUTPUT:	Repository SoftHSM found
2011-03-28 16:52:17.793 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:52:17.793 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:52:17.794 OUTPUT:	Policy default found
2011-03-28 16:52:17.794 OUTPUT:	Policy default2 found
2011-03-28 16:52:17.794 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:17.794 OUTPUT:	Policy default3 found
2011-03-28 16:52:17.794 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:17.794 OUTPUT:	Policy default4 found
2011-03-28 16:52:17.794 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:17.794 OUTPUT:	Policy default5 found
2011-03-28 16:52:17.794 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:17.794 OUTPUT:	Policy default6 found
2011-03-28 16:52:17.794 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:17.794 OUTPUT:	Policy default7 found
2011-03-28 16:52:17.794 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:17.794 OUTPUT:	Policy default8 found
2011-03-28 16:52:17.794 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:52:17.794 OUTPUT:	Policy default9 found
2011-03-28 16:52:17.794 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:17.794 OUTPUT:	Policy default10 found
2011-03-28 16:52:17.794 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:17.794 OUTPUT:	Policy default11 found
2011-03-28 16:52:17.794 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:17.794 OUTPUT:	Zone ods found
2011-03-28 16:52:17.794 OUTPUT:	Policy set to default.
2011-03-28 16:52:17.794 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:52:17.794 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:52:17.794 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:52:17.794 01320 Wait(10)

2011-03-28 16:52:17.794 Requirement: ODSKC30

2011-03-28 16:52:27.794 01322 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should validate for the conf.xml and kasp.xml files.

2011-03-28 16:52:27.794 Requirement: ODSKC30

2011-03-28 16:52:27.795 01326 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:52:27.795 Requirement: ODSKC30

2011-03-28 16:52:27.795 01328 Stop()
2011-03-28 16:52:27.795 Requirement: ODSKC30
2011-03-28 16:52:27.795 RunCommand(ods-control stop)
2011-03-28 16:52:27.802 - runCommand: Process started, PID: 18977
2011-03-28 16:52:27.802 OUTPUT:	Stopping enforcer...
2011-03-28 16:52:27.802 OUTPUT:	Cannot find PID file
2011-03-28 16:52:27.802 OUTPUT:	Stopping signer engine..
2011-03-28 16:52:27.802 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:52:27.803 ERROR:	return code = 1
2011-03-28 16:52:27.803 RunCommand(ps -e | grep enforcer)
2011-03-28 16:52:27.819 - runCommand: Process started, PID: 18980
2011-03-28 16:52:27.819 ERROR:	return code = 1
2011-03-28 16:52:27.819 RunCommand(ps -e | grep signer)
2011-03-28 16:52:27.831 - runCommand: Process started, PID: 18983
2011-03-28 16:52:27.831 ERROR:	return code = 1

2011-03-28 16:52:27.831 01331 CheckLog()
2011-03-28 16:52:27.831 Requirement: ODSKC30

2011-03-28 16:52:27.993 01334 CheckLog()
2011-03-28 16:52:27.993 Requirement: ODSKC30

2011-03-28 16:52:28.155 01336 Comment: Reset the config files to the original ones.

2011-03-28 16:52:28.155 Requirement: ODSKC30

2011-03-28 16:52:28.156 01339 Wait(10)

2011-03-28 16:52:28.156 Requirement: ODSKC30

2011-03-28 16:52:38.156 01342 LoadConfig()
2011-03-28 16:52:38.156 Requirement: ODSKC30
2011-03-28 16:52:38.156 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:52:38.162 - runCommand: Process started, PID: 19018

2011-03-28 16:52:38.162 01345 LoadConfig()
2011-03-28 16:52:38.163 Requirement: ODSKC30
2011-03-28 16:52:38.163 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:52:38.168 - runCommand: Process started, PID: 19019

2011-03-28 16:52:38.169 01347 Comment: Update all the configs.

2011-03-28 16:52:38.169 Requirement: ODSKC30

2011-03-28 16:52:38.169 01349 UpdateAll()
2011-03-28 16:52:38.169 Requirement: ODSKC30
2011-03-28 16:52:38.169 RunCommand(ods-ksmutil update all)
2011-03-28 16:52:39.807 - runCommand: Process started, PID: 19020
2011-03-28 16:52:39.807 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:52:39.807 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:52:39.807 OUTPUT:	Repository SoftHSM found
2011-03-28 16:52:39.807 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:52:39.807 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:52:39.807 OUTPUT:	Policy default found
2011-03-28 16:52:39.807 OUTPUT:	Policy default2 found
2011-03-28 16:52:39.807 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:39.807 OUTPUT:	Zone ods found
2011-03-28 16:52:39.807 OUTPUT:	Policy set to default.
2011-03-28 16:52:39.807 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:52:39.807 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:52:39.807 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC30T30: Remove Optout tag and confirm a signed zone (without DS records) has all domains signed

2011-03-28 16:52:39.808 01355 Comment: OptOut tag removed from NSEC3 element. Ods-kaspcheck should validate for conf.xml and kasp.xml.

2011-03-28 16:52:39.808 Requirement: ODSKC30

2011-03-28 16:52:39.808 01357 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:52:39.808 Requirement: ODSKC30

2011-03-28 16:52:39.808 01359 Stop()
2011-03-28 16:52:39.808 Requirement: ODSKC30
2011-03-28 16:52:39.808 RunCommand(ods-control stop)
2011-03-28 16:52:39.816 - runCommand: Process started, PID: 19028
2011-03-28 16:52:39.816 OUTPUT:	Stopping enforcer...
2011-03-28 16:52:39.816 OUTPUT:	Cannot find PID file
2011-03-28 16:52:39.816 OUTPUT:	Stopping signer engine..
2011-03-28 16:52:39.816 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:52:39.816 ERROR:	return code = 1
2011-03-28 16:52:39.816 RunCommand(ps -e | grep enforcer)
2011-03-28 16:52:39.836 - runCommand: Process started, PID: 19031
2011-03-28 16:52:39.836 ERROR:	return code = 1
2011-03-28 16:52:39.836 RunCommand(ps -e | grep signer)
2011-03-28 16:52:39.853 - runCommand: Process started, PID: 19034
2011-03-28 16:52:39.853 ERROR:	return code = 1

2011-03-28 16:52:39.854 01361 Wait(10)

2011-03-28 16:52:39.854 Requirement: ODSKC30

2011-03-28 16:52:49.854 01363 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:52:49.854 Requirement: ODSKC30

2011-03-28 16:52:49.854 01366 LoadConfig()
2011-03-28 16:52:49.854 Requirement: ODSKC30
2011-03-28 16:52:49.854 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:52:49.860 - runCommand: Process started, PID: 19037

2011-03-28 16:52:49.861 01369 LoadConfig()
2011-03-28 16:52:49.861 Requirement: ODSKC30
2011-03-28 16:52:49.861 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC30T30_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:52:49.866 - runCommand: Process started, PID: 19038

2011-03-28 16:52:49.866 01371 Comment: Update all the configs.

2011-03-28 16:52:49.866 Requirement: ODSKC30

2011-03-28 16:52:49.866 01373 UpdateAll()
2011-03-28 16:52:49.866 Requirement: ODSKC30
2011-03-28 16:52:49.866 RunCommand(ods-ksmutil update all)
2011-03-28 16:52:56.590 - runCommand: Process started, PID: 19039
2011-03-28 16:52:56.590 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:52:56.590 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:52:56.590 OUTPUT:	Repository SoftHSM found
2011-03-28 16:52:56.590 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:52:56.590 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:52:56.590 OUTPUT:	Policy default found
2011-03-28 16:52:56.590 OUTPUT:	Policy default2 found
2011-03-28 16:52:56.590 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:56.590 OUTPUT:	Policy default3 found
2011-03-28 16:52:56.590 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:56.590 OUTPUT:	Policy default4 found
2011-03-28 16:52:56.590 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:56.590 OUTPUT:	Policy default5 found
2011-03-28 16:52:56.590 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:56.590 OUTPUT:	Policy default6 found
2011-03-28 16:52:56.590 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:56.590 OUTPUT:	Policy default7 found
2011-03-28 16:52:56.590 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:56.590 OUTPUT:	Policy default8 found
2011-03-28 16:52:56.590 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:52:56.591 OUTPUT:	Policy default9 found
2011-03-28 16:52:56.591 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:56.591 OUTPUT:	Policy default10 found
2011-03-28 16:52:56.591 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:56.591 OUTPUT:	Policy default11 found
2011-03-28 16:52:56.591 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:52:56.591 OUTPUT:	Zone ods found
2011-03-28 16:52:56.591 OUTPUT:	Policy set to default.
2011-03-28 16:52:56.591 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:52:56.591 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:52:56.591 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:52:56.591 01375 Wait(10)

2011-03-28 16:52:56.591 Requirement: ODSKC30

2011-03-28 16:53:06.591 01377 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should validate for the conf.xml and kasp.xml files.

2011-03-28 16:53:06.591 Requirement: ODSKC30

2011-03-28 16:53:06.591 01383 CheckLog()
2011-03-28 16:53:06.591 Requirement: ODSKC30

2011-03-28 16:53:06.758 01386 CheckLog()
2011-03-28 16:53:06.758 Requirement: ODSKC30

2011-03-28 16:53:06.920 01388 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 16:53:06.920 Requirement: ODSKC30

2011-03-28 16:53:06.920 01390 Start()
2011-03-28 16:53:06.920 Requirement: ODSKC30
2011-03-28 16:53:06.920 RunCommand(ods-control start)
2011-03-28 16:53:06.922 - runCommand: Background process started, PID: 19047
2011-03-28 16:53:07.935 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 16:53:07.950 - runCommand: Process started, PID: 19065
2011-03-28 16:53:07.950 OUTPUT:	ods-enforcerd
2011-03-28 16:53:07.950 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 16:53:07.966 - runCommand: Process started, PID: 19070
2011-03-28 16:53:07.967 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 16:53:07.967 01392 Wait(10)

2011-03-28 16:53:07.967 Requirement: ODSKC30

2011-03-28 16:53:17.967 01394 Comment: Sign the ods zone with the new configs.

2011-03-28 16:53:17.967 Requirement: ODSKC30

2011-03-28 16:53:17.967 01398 Wait(15)

2011-03-28 16:53:17.967 Requirement: ODSKC30

2011-03-28 16:53:32.967 01400 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:53:32.967 Requirement: ODSKC30

2011-03-28 16:53:32.968 01402 Stop()
2011-03-28 16:53:32.968 Requirement: ODSKC30
2011-03-28 16:53:32.968 RunCommand(ods-control stop)
2011-03-28 16:53:33.979 - runCommand: Process started, PID: 19099
2011-03-28 16:53:33.979 OUTPUT:	Stopping enforcer...
2011-03-28 16:53:33.979 OUTPUT:	Stopping signer engine..
2011-03-28 16:53:33.979 OUTPUT:	Engine shut down.
2011-03-28 16:53:33.979 RunCommand(ps -e | grep enforcer)
2011-03-28 16:53:33.993 - runCommand: Process started, PID: 19105
2011-03-28 16:53:33.993 ERROR:	return code = 1
2011-03-28 16:53:33.993 RunCommand(ps -e | grep signer)
2011-03-28 16:53:34.454 - runCommand: Process started, PID: 19108
2011-03-28 16:53:34.460 ERROR:	return code = 1

2011-03-28 16:53:34.473 01404 Comment: Check if the signing was succesfull. If the "all done!" text is in the  message logfile, the signing was succesfull.

2011-03-28 16:53:34.474 Requirement: ODSKC30

2011-03-28 16:53:34.485 01407 CheckLog()
2011-03-28 16:53:34.486 Requirement: ODSKC30
2011-03-28 16:53:34.175 PASSED:	(Check for Like) - Expected: all done! Found: Mar 28 16:53:32 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

2011-03-28 16:53:34.175 01409 Comment: Reset the config files to the original ones.

2011-03-28 16:53:34.175 Requirement: ODSKC30

2011-03-28 16:53:34.175 01412 Wait(10)

2011-03-28 16:53:34.175 Requirement: ODSKC30

2011-03-28 16:53:44.175 01415 LoadConfig()
2011-03-28 16:53:44.176 Requirement: ODSKC30
2011-03-28 16:53:44.176 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:53:44.182 - runCommand: Process started, PID: 19111

2011-03-28 16:53:44.182 01418 LoadConfig()
2011-03-28 16:53:44.182 Requirement: ODSKC30
2011-03-28 16:53:44.182 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:53:44.188 - runCommand: Process started, PID: 19112

2011-03-28 16:53:44.189 01420 Comment: Update all the configs.

2011-03-28 16:53:44.189 Requirement: ODSKC30

2011-03-28 16:53:44.189 01422 UpdateAll()
2011-03-28 16:53:44.189 Requirement: ODSKC30
2011-03-28 16:53:44.189 RunCommand(ods-ksmutil update all)
2011-03-28 16:53:45.565 - runCommand: Process started, PID: 19113
2011-03-28 16:53:45.565 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:53:45.565 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:53:45.565 OUTPUT:	Repository SoftHSM found
2011-03-28 16:53:45.565 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:53:45.565 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:53:45.565 OUTPUT:	Policy default found
2011-03-28 16:53:45.565 OUTPUT:	Policy default2 found
2011-03-28 16:53:45.565 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:53:45.565 OUTPUT:	Zone ods found
2011-03-28 16:53:45.565 OUTPUT:	Policy set to default.
2011-03-28 16:53:45.565 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:53:45.565 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:53:45.565 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC30T40: Set both Resalt and Resign to 1 minute (PT1M) and confirm new NSEC3 RR's and changed NSEC3PARAM (new salt) every resign

2011-03-28 16:53:45.566 01426 Comment: Resalt and Resign is set to 1 minute (PT1M) in the kasp.xml for this testcase. The NSEC3PARAM should change when a resign is done after 1 minute.

2011-03-28 16:53:45.566 Requirement: ODSKC30

2011-03-28 16:53:45.566 01428 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:53:45.566 Requirement: ODSKC30

2011-03-28 16:53:45.566 01430 Stop()
2011-03-28 16:53:45.566 Requirement: ODSKC30
2011-03-28 16:53:45.566 RunCommand(ods-control stop)
2011-03-28 16:53:45.574 - runCommand: Process started, PID: 19121
2011-03-28 16:53:45.574 OUTPUT:	Stopping enforcer...
2011-03-28 16:53:45.574 OUTPUT:	Cannot find PID file
2011-03-28 16:53:45.574 OUTPUT:	Stopping signer engine..
2011-03-28 16:53:45.574 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:53:45.574 ERROR:	return code = 1
2011-03-28 16:53:45.574 RunCommand(ps -e | grep enforcer)
2011-03-28 16:53:45.594 - runCommand: Process started, PID: 19124
2011-03-28 16:53:45.594 ERROR:	return code = 1
2011-03-28 16:53:45.594 RunCommand(ps -e | grep signer)
2011-03-28 16:53:45.617 - runCommand: Process started, PID: 19127
2011-03-28 16:53:45.617 ERROR:	return code = 1

2011-03-28 16:53:45.617 01432 Wait(10)

2011-03-28 16:53:45.617 Requirement: ODSKC30

2011-03-28 16:53:55.617 01434 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:53:55.617 Requirement: ODSKC30

2011-03-28 16:53:55.617 01437 LoadConfig()
2011-03-28 16:53:55.617 Requirement: ODSKC30
2011-03-28 16:53:55.617 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:53:55.624 - runCommand: Process started, PID: 19130

2011-03-28 16:53:55.624 01440 LoadConfig()
2011-03-28 16:53:55.624 Requirement: ODSKC30
2011-03-28 16:53:55.624 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC30T40_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:53:55.630 - runCommand: Process started, PID: 19131

2011-03-28 16:53:55.630 01442 Comment: Update all the configs.

2011-03-28 16:53:55.630 Requirement: ODSKC30

2011-03-28 16:53:55.630 01444 UpdateAll()
2011-03-28 16:53:55.630 Requirement: ODSKC30
2011-03-28 16:53:55.630 RunCommand(ods-ksmutil update all)
2011-03-28 16:54:02.123 - runCommand: Process started, PID: 19132
2011-03-28 16:54:02.123 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:54:02.123 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:54:02.123 OUTPUT:	Repository SoftHSM found
2011-03-28 16:54:02.123 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:54:02.123 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:54:02.123 OUTPUT:	Policy default found
2011-03-28 16:54:02.123 OUTPUT:	Policy default2 found
2011-03-28 16:54:02.123 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:54:02.123 OUTPUT:	Policy default3 found
2011-03-28 16:54:02.123 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:54:02.123 OUTPUT:	Policy default4 found
2011-03-28 16:54:02.123 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:54:02.124 OUTPUT:	Policy default5 found
2011-03-28 16:54:02.124 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:54:02.124 OUTPUT:	Policy default6 found
2011-03-28 16:54:02.124 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:54:02.124 OUTPUT:	Policy default7 found
2011-03-28 16:54:02.124 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:54:02.124 OUTPUT:	Policy default8 found
2011-03-28 16:54:02.124 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:54:02.124 OUTPUT:	Policy default9 found
2011-03-28 16:54:02.124 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:54:02.124 OUTPUT:	Policy default10 found
2011-03-28 16:54:02.124 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:54:02.124 OUTPUT:	Policy default11 found
2011-03-28 16:54:02.124 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:54:02.124 OUTPUT:	Zone ods found
2011-03-28 16:54:02.124 OUTPUT:	Policy set to default.
2011-03-28 16:54:02.124 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:54:02.124 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:54:02.124 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:54:02.124 01446 Wait(10)

2011-03-28 16:54:02.124 Requirement: ODSKC30

2011-03-28 16:54:12.124 01448 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should validate for the conf.xml and kasp.xml files.

2011-03-28 16:54:12.124 Requirement: ODSKC30

2011-03-28 16:54:12.125 01453 CheckLog()
2011-03-28 16:54:12.125 Requirement: ODSKC30
2011-03-28 16:54:12.293 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 16:54:12.293 01456 CheckLog()
2011-03-28 16:54:12.293 Requirement: ODSKC30
2011-03-28 16:54:12.458 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml validates Found: 

2011-03-28 16:54:12.458 01458 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 16:54:12.458 Requirement: ODSKC30

2011-03-28 16:54:12.458 01460 Start()
2011-03-28 16:54:12.458 Requirement: ODSKC30
2011-03-28 16:54:12.458 RunCommand(ods-control start)
2011-03-28 16:54:12.460 - runCommand: Background process started, PID: 19140
2011-03-28 16:54:13.475 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 16:54:13.495 - runCommand: Process started, PID: 19157
2011-03-28 16:54:13.495 OUTPUT:	ods-enforcerd
2011-03-28 16:54:13.495 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 16:54:13.512 - runCommand: Process started, PID: 19162
2011-03-28 16:54:13.512 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 16:54:13.512 01462 Wait(10)

2011-03-28 16:54:13.512 Requirement: ODSKC30

2011-03-28 16:54:23.513 01464 Comment: Sign the ods zone with the new configs.

2011-03-28 16:54:23.513 Requirement: ODSKC30

2011-03-28 16:54:23.513 01468 Wait(15)

2011-03-28 16:54:23.513 Requirement: ODSKC30

2011-03-28 16:54:38.513 01470 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:54:38.513 Requirement: ODSKC30

2011-03-28 16:54:38.513 01472 Stop()
2011-03-28 16:54:38.513 Requirement: ODSKC30
2011-03-28 16:54:38.513 RunCommand(ods-control stop)
2011-03-28 16:54:39.525 - runCommand: Process started, PID: 19189
2011-03-28 16:54:39.525 OUTPUT:	Stopping enforcer...
2011-03-28 16:54:39.525 OUTPUT:	Stopping signer engine..
2011-03-28 16:54:39.525 OUTPUT:	Engine shut down.
2011-03-28 16:54:39.525 RunCommand(ps -e | grep enforcer)
2011-03-28 16:54:39.544 - runCommand: Process started, PID: 19195
2011-03-28 16:54:39.544 ERROR:	return code = 1
2011-03-28 16:54:39.544 RunCommand(ps -e | grep signer)
2011-03-28 16:54:39.562 - runCommand: Process started, PID: 19198
2011-03-28 16:54:39.562 ERROR:	return code = 1

2011-03-28 16:54:39.562 01474 Comment: Check if the signing was succesfull. If the "all done!" text is in the  message logfile, the signing was succesfull.

2011-03-28 16:54:39.562 Requirement: ODSKC30

2011-03-28 16:54:39.562 01477 CheckLog()
2011-03-28 16:54:39.562 Requirement: ODSKC30
2011-03-28 16:54:39.743 PASSED:	(Check for Like) - Expected: all done! Found: Mar 28 16:54:38 DEVELOPER15 ods-enforcerd: all done! hsm_close result: 0

2011-03-28 16:54:39.743 01479 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 16:54:39.743 Requirement: ODSKC30

2011-03-28 16:54:39.743 01481 Start()
2011-03-28 16:54:39.743 Requirement: ODSKC30
2011-03-28 16:54:39.743 RunCommand(ods-control start)
2011-03-28 16:54:39.745 - runCommand: Background process started, PID: 19201
2011-03-28 16:54:40.759 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 16:54:40.773 - runCommand: Process started, PID: 19216
2011-03-28 16:54:40.773 OUTPUT:	ods-enforcerd
2011-03-28 16:54:40.773 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 16:54:40.789 - runCommand: Process started, PID: 19221
2011-03-28 16:54:40.789 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 16:54:40.789 01483 Comment: Check the salt in the ods zone file with the next command/script.

2011-03-28 16:54:40.789 Requirement: ODSKC30

2011-03-28 16:54:40.789 01488 CheckLog()
2011-03-28 16:54:40.789 Requirement: ODSKC30
2011-03-28 16:54:40.969 FAILED:	(Check for Like) - Expected: logger Found: 

2011-03-28 16:54:40.970 01490 Comment: Resign the zone after a minute and check whether the salt in the NSEC3PARAM has changed in the created zonefile. 

2011-03-28 16:54:40.970 Requirement: ODSKC30

2011-03-28 16:54:40.970 01492 Wait(60)

2011-03-28 16:54:40.970 Requirement: ODSKC30

2011-03-28 16:55:40.970 01494 Comment: Resign the ods zone

2011-03-28 16:55:40.970 Requirement: ODSKC30

2011-03-28 16:55:40.970 01498 Wait(15)

2011-03-28 16:55:40.970 Requirement: ODSKC30

2011-03-28 16:55:55.971 01500 Comment: Check if  the salt in the ods zone has changed compared to the salt before resigning. The salt from the 1st check and the 2nd check should not match and differ.

2011-03-28 16:55:55.971 Requirement: ODSKC30

2011-03-28 16:55:55.971 01504 CheckLog()
2011-03-28 16:55:55.971 Requirement: ODSKC30

2011-03-28 16:55:56.147 01506 Comment: The steps above should be automated in a later stage.

2011-03-28 16:55:56.147 Requirement: ODSKC30

2011-03-28 16:55:56.147 01508 Comment: Reset the config files to the original ones.

2011-03-28 16:55:56.147 Requirement: ODSKC30

2011-03-28 16:55:56.147 01510 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:55:56.147 Requirement: ODSKC30

2011-03-28 16:55:56.147 01512 Stop()
2011-03-28 16:55:56.147 Requirement: ODSKC30
2011-03-28 16:55:56.147 RunCommand(ods-control stop)
2011-03-28 16:55:57.156 - runCommand: Process started, PID: 19234
2011-03-28 16:55:57.156 OUTPUT:	Stopping enforcer...
2011-03-28 16:55:57.156 OUTPUT:	Stopping signer engine..
2011-03-28 16:55:57.156 OUTPUT:	Engine shut down.
2011-03-28 16:55:57.156 RunCommand(ps -e | grep enforcer)
2011-03-28 16:55:57.174 - runCommand: Process started, PID: 19241
2011-03-28 16:55:57.174 ERROR:	return code = 1
2011-03-28 16:55:57.174 RunCommand(ps -e | grep signer)
2011-03-28 16:55:57.192 - runCommand: Process started, PID: 19244
2011-03-28 16:55:57.192 ERROR:	return code = 1

2011-03-28 16:55:57.192 01514 Wait(10)

2011-03-28 16:55:57.192 Requirement: ODSKC30

2011-03-28 16:56:07.192 01517 LoadConfig()
2011-03-28 16:56:07.193 Requirement: ODSKC30
2011-03-28 16:56:07.193 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:56:07.199 - runCommand: Process started, PID: 19247

2011-03-28 16:56:07.199 01520 LoadConfig()
2011-03-28 16:56:07.199 Requirement: ODSKC30
2011-03-28 16:56:07.199 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:56:07.205 - runCommand: Process started, PID: 19248

2011-03-28 16:56:07.205 01522 Comment: Update all the configs.

2011-03-28 16:56:07.205 Requirement: ODSKC30

2011-03-28 16:56:07.205 01524 UpdateAll()
2011-03-28 16:56:07.205 Requirement: ODSKC30
2011-03-28 16:56:07.205 RunCommand(ods-ksmutil update all)
2011-03-28 16:56:08.792 - runCommand: Process started, PID: 19249
2011-03-28 16:56:08.792 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:56:08.792 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:56:08.792 OUTPUT:	Repository SoftHSM found
2011-03-28 16:56:08.792 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:56:08.792 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:56:08.792 OUTPUT:	Policy default found
2011-03-28 16:56:08.792 OUTPUT:	Policy default2 found
2011-03-28 16:56:08.792 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:56:08.792 OUTPUT:	Zone ods found
2011-03-28 16:56:08.792 OUTPUT:	Policy set to default.
2011-03-28 16:56:08.792 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:56:08.792 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:56:08.792 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC30T50: Set Resalt lower then Resign and confirm ods-kaspcheck fails

2011-03-28 16:56:08.793 01529 Comment: Resalt time is lower than the resign time. Kasp validation by ods-kaspcheck should fail.

2011-03-28 16:56:08.793 Requirement: ODSKC30

2011-03-28 16:56:08.793 01531 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:56:08.793 Requirement: ODSKC30

2011-03-28 16:56:08.793 01533 Stop()
2011-03-28 16:56:08.793 Requirement: ODSKC30
2011-03-28 16:56:08.793 RunCommand(ods-control stop)
2011-03-28 16:56:08.800 - runCommand: Process started, PID: 19257
2011-03-28 16:56:08.800 OUTPUT:	Stopping enforcer...
2011-03-28 16:56:08.800 OUTPUT:	Cannot find PID file
2011-03-28 16:56:08.800 OUTPUT:	Stopping signer engine..
2011-03-28 16:56:08.800 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:56:08.801 ERROR:	return code = 1
2011-03-28 16:56:08.801 RunCommand(ps -e | grep enforcer)
2011-03-28 16:56:08.818 - runCommand: Process started, PID: 19260
2011-03-28 16:56:08.818 ERROR:	return code = 1
2011-03-28 16:56:08.819 RunCommand(ps -e | grep signer)
2011-03-28 16:56:08.837 - runCommand: Process started, PID: 19263
2011-03-28 16:56:08.837 ERROR:	return code = 1

2011-03-28 16:56:08.837 01535 Wait(10)

2011-03-28 16:56:08.837 Requirement: ODSKC30

2011-03-28 16:56:18.837 01537 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:56:18.837 Requirement: ODSKC30

2011-03-28 16:56:18.837 01540 LoadConfig()
2011-03-28 16:56:18.837 Requirement: ODSKC30
2011-03-28 16:56:18.837 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:56:18.844 - runCommand: Process started, PID: 19266

2011-03-28 16:56:18.844 01543 LoadConfig()
2011-03-28 16:56:18.844 Requirement: ODSKC30
2011-03-28 16:56:18.844 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC30T50_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:56:18.850 - runCommand: Process started, PID: 19267

2011-03-28 16:56:18.850 01545 Comment: Update all the configs.

2011-03-28 16:56:18.850 Requirement: ODSKC30

2011-03-28 16:56:18.850 01547 UpdateAll()
2011-03-28 16:56:18.850 Requirement: ODSKC30
2011-03-28 16:56:18.850 RunCommand(ods-ksmutil update all)
2011-03-28 16:56:25.125 - runCommand: Process started, PID: 19268
2011-03-28 16:56:25.125 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:56:25.125 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:56:25.125 OUTPUT:	Repository SoftHSM found
2011-03-28 16:56:25.125 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:56:25.125 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:56:25.125 OUTPUT:	Policy default found
2011-03-28 16:56:25.125 OUTPUT:	Policy default2 found
2011-03-28 16:56:25.125 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:56:25.125 OUTPUT:	Policy default3 found
2011-03-28 16:56:25.125 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:56:25.125 OUTPUT:	Policy default4 found
2011-03-28 16:56:25.125 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:56:25.125 OUTPUT:	Policy default5 found
2011-03-28 16:56:25.125 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:56:25.125 OUTPUT:	Policy default6 found
2011-03-28 16:56:25.125 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:56:25.125 OUTPUT:	Policy default7 found
2011-03-28 16:56:25.125 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:56:25.125 OUTPUT:	Policy default8 found
2011-03-28 16:56:25.125 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:56:25.126 OUTPUT:	Policy default9 found
2011-03-28 16:56:25.126 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:56:25.126 OUTPUT:	Policy default10 found
2011-03-28 16:56:25.126 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:56:25.126 OUTPUT:	Policy default11 found
2011-03-28 16:56:25.126 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:56:25.126 OUTPUT:	Zone ods found
2011-03-28 16:56:25.126 OUTPUT:	Policy set to default.
2011-03-28 16:56:25.126 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:56:25.126 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:56:25.126 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:56:25.126 01549 Wait(10)

2011-03-28 16:56:25.126 Requirement: ODSKC30

2011-03-28 16:56:35.126 01551 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 16:56:35.126 Requirement: ODSKC30

2011-03-28 16:56:35.126 01556 CheckLog()
2011-03-28 16:56:35.126 Requirement: ODSKC30
2011-03-28 16:56:35.303 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 16:56:35.303 01559 CheckLog()
2011-03-28 16:56:35.303 Requirement: ODSKC30
2011-03-28 16:56:35.475 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml fails to validate Found: 

2011-03-28 16:56:35.476 01561 Comment: Reset the config files to the original ones.

2011-03-28 16:56:35.476 Requirement: ODSKC30

2011-03-28 16:56:35.476 01563 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:56:35.476 Requirement: ODSKC30

2011-03-28 16:56:35.476 01565 Stop()
2011-03-28 16:56:35.476 Requirement: ODSKC30
2011-03-28 16:56:35.476 RunCommand(ods-control stop)
2011-03-28 16:56:35.481 - runCommand: Process started, PID: 19276
2011-03-28 16:56:35.481 OUTPUT:	Stopping enforcer...
2011-03-28 16:56:35.481 OUTPUT:	Cannot find PID file
2011-03-28 16:56:35.481 OUTPUT:	Stopping signer engine..
2011-03-28 16:56:35.481 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:56:35.481 ERROR:	return code = 1
2011-03-28 16:56:35.481 RunCommand(ps -e | grep enforcer)
2011-03-28 16:56:35.494 - runCommand: Process started, PID: 19279
2011-03-28 16:56:35.494 ERROR:	return code = 1
2011-03-28 16:56:35.494 RunCommand(ps -e | grep signer)
2011-03-28 16:56:35.506 - runCommand: Process started, PID: 19282
2011-03-28 16:56:35.506 ERROR:	return code = 1

2011-03-28 16:56:35.506 01567 Wait(10)

2011-03-28 16:56:35.506 Requirement: ODSKC30

2011-03-28 16:56:45.506 01570 LoadConfig()
2011-03-28 16:56:45.506 Requirement: ODSKC30
2011-03-28 16:56:45.506 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:56:45.512 - runCommand: Process started, PID: 19285

2011-03-28 16:56:45.513 01573 LoadConfig()
2011-03-28 16:56:45.513 Requirement: ODSKC30
2011-03-28 16:56:45.513 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:56:45.518 - runCommand: Process started, PID: 19286

2011-03-28 16:56:45.519 01575 Comment: Update all the configs.

2011-03-28 16:56:45.519 Requirement: ODSKC30

2011-03-28 16:56:45.519 01577 UpdateAll()
2011-03-28 16:56:45.519 Requirement: ODSKC30
2011-03-28 16:56:45.519 RunCommand(ods-ksmutil update all)
2011-03-28 16:56:47.130 - runCommand: Process started, PID: 19287
2011-03-28 16:56:47.130 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:56:47.131 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:56:47.131 OUTPUT:	Repository SoftHSM found
2011-03-28 16:56:47.131 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:56:47.131 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:56:47.131 OUTPUT:	Policy default found
2011-03-28 16:56:47.131 OUTPUT:	Policy default2 found
2011-03-28 16:56:47.131 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:56:47.131 OUTPUT:	Zone ods found
2011-03-28 16:56:47.131 OUTPUT:	Policy set to default.
2011-03-28 16:56:47.131 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:56:47.131 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:56:47.131 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC30T60: Set Hash Algorithm to 0 and confirm ods-kaspcheck fails

2011-03-28 16:56:47.131 01585 Comment: Hash algorithm value has been adjusted to 0 (reserved number) in the kasp.xml for this testcase. Ods-kaspcheck should fail.

2011-03-28 16:56:47.131 Requirement: ODSKC30

2011-03-28 16:56:47.131 01587 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:56:47.131 Requirement: ODSKC30

2011-03-28 16:56:47.132 01589 Stop()
2011-03-28 16:56:47.132 Requirement: ODSKC30
2011-03-28 16:56:47.132 RunCommand(ods-control stop)
2011-03-28 16:56:47.138 - runCommand: Process started, PID: 19295
2011-03-28 16:56:47.138 OUTPUT:	Stopping enforcer...
2011-03-28 16:56:47.138 OUTPUT:	Cannot find PID file
2011-03-28 16:56:47.138 OUTPUT:	Stopping signer engine..
2011-03-28 16:56:47.138 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:56:47.138 ERROR:	return code = 1
2011-03-28 16:56:47.138 RunCommand(ps -e | grep enforcer)
2011-03-28 16:56:47.151 - runCommand: Process started, PID: 19298
2011-03-28 16:56:47.151 ERROR:	return code = 1
2011-03-28 16:56:47.151 RunCommand(ps -e | grep signer)
2011-03-28 16:56:47.162 - runCommand: Process started, PID: 19301
2011-03-28 16:56:47.162 ERROR:	return code = 1

2011-03-28 16:56:47.162 01591 Wait(10)

2011-03-28 16:56:47.163 Requirement: ODSKC30

2011-03-28 16:56:57.163 01593 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:56:57.163 Requirement: ODSKC30

2011-03-28 16:56:57.163 01596 LoadConfig()
2011-03-28 16:56:57.163 Requirement: ODSKC30
2011-03-28 16:56:57.163 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:56:57.169 - runCommand: Process started, PID: 19304

2011-03-28 16:56:57.170 01599 LoadConfig()
2011-03-28 16:56:57.170 Requirement: ODSKC30
2011-03-28 16:56:57.170 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC30T60_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:56:57.175 - runCommand: Process started, PID: 19305

2011-03-28 16:56:57.176 01601 Comment: Update all the configs.

2011-03-28 16:56:57.176 Requirement: ODSKC30

2011-03-28 16:56:57.176 01603 UpdateAll()
2011-03-28 16:56:57.176 Requirement: ODSKC30
2011-03-28 16:56:57.176 RunCommand(ods-ksmutil update all)
2011-03-28 16:57:03.564 - runCommand: Process started, PID: 19306
2011-03-28 16:57:03.564 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:57:03.564 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:57:03.564 OUTPUT:	Repository SoftHSM found
2011-03-28 16:57:03.564 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:57:03.564 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:57:03.564 OUTPUT:	Policy default found
2011-03-28 16:57:03.564 OUTPUT:	Policy default2 found
2011-03-28 16:57:03.564 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:57:03.564 OUTPUT:	Policy default3 found
2011-03-28 16:57:03.564 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:57:03.564 OUTPUT:	Policy default4 found
2011-03-28 16:57:03.564 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:57:03.564 OUTPUT:	Policy default5 found
2011-03-28 16:57:03.564 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:57:03.564 OUTPUT:	Policy default6 found
2011-03-28 16:57:03.564 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:57:03.564 OUTPUT:	Policy default7 found
2011-03-28 16:57:03.564 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:57:03.564 OUTPUT:	Policy default8 found
2011-03-28 16:57:03.564 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:57:03.564 OUTPUT:	Policy default9 found
2011-03-28 16:57:03.564 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:57:03.564 OUTPUT:	Policy default10 found
2011-03-28 16:57:03.564 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:57:03.564 OUTPUT:	Policy default11 found
2011-03-28 16:57:03.564 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:57:03.564 OUTPUT:	Zone ods found
2011-03-28 16:57:03.564 OUTPUT:	Policy set to default.
2011-03-28 16:57:03.564 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:57:03.564 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:57:03.564 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:57:03.564 01605 Wait(10)

2011-03-28 16:57:03.565 Requirement: ODSKC30

2011-03-28 16:57:13.565 01607 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 16:57:13.565 Requirement: ODSKC30

2011-03-28 16:57:13.565 01612 CheckLog()
2011-03-28 16:57:13.565 Requirement: ODSKC30

2011-03-28 16:57:13.742 01615 CheckLog()
2011-03-28 16:57:13.742 Requirement: ODSKC30

2011-03-28 16:57:13.914 01617 Comment: Reset the config files to the original ones.

2011-03-28 16:57:13.914 Requirement: ODSKC30

2011-03-28 16:57:13.914 01619 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:57:13.914 Requirement: ODSKC30

2011-03-28 16:57:13.914 01621 Stop()
2011-03-28 16:57:13.914 Requirement: ODSKC30
2011-03-28 16:57:13.914 RunCommand(ods-control stop)
2011-03-28 16:57:13.919 - runCommand: Process started, PID: 19314
2011-03-28 16:57:13.919 OUTPUT:	Stopping enforcer...
2011-03-28 16:57:13.919 OUTPUT:	Cannot find PID file
2011-03-28 16:57:13.919 OUTPUT:	Stopping signer engine..
2011-03-28 16:57:13.919 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:57:13.919 ERROR:	return code = 1
2011-03-28 16:57:13.919 RunCommand(ps -e | grep enforcer)
2011-03-28 16:57:13.930 - runCommand: Process started, PID: 19317
2011-03-28 16:57:13.931 ERROR:	return code = 1
2011-03-28 16:57:13.931 RunCommand(ps -e | grep signer)
2011-03-28 16:57:13.944 - runCommand: Process started, PID: 19320
2011-03-28 16:57:13.944 ERROR:	return code = 1

2011-03-28 16:57:13.944 01623 Wait(10)

2011-03-28 16:57:13.944 Requirement: ODSKC30

2011-03-28 16:57:23.944 01626 LoadConfig()
2011-03-28 16:57:23.944 Requirement: ODSKC30
2011-03-28 16:57:23.944 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:57:23.951 - runCommand: Process started, PID: 19323

2011-03-28 16:57:23.951 01629 LoadConfig()
2011-03-28 16:57:23.951 Requirement: ODSKC30
2011-03-28 16:57:23.951 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:57:23.957 - runCommand: Process started, PID: 19324

2011-03-28 16:57:23.957 01631 Comment: Update all the configs.

2011-03-28 16:57:23.957 Requirement: ODSKC30

2011-03-28 16:57:23.957 01633 UpdateAll()
2011-03-28 16:57:23.957 Requirement: ODSKC30
2011-03-28 16:57:23.957 RunCommand(ods-ksmutil update all)
2011-03-28 16:57:25.386 - runCommand: Process started, PID: 19325
2011-03-28 16:57:25.386 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:57:25.386 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:57:25.386 OUTPUT:	Repository SoftHSM found
2011-03-28 16:57:25.386 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:57:25.386 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:57:25.386 OUTPUT:	Policy default found
2011-03-28 16:57:25.386 OUTPUT:	Policy default2 found
2011-03-28 16:57:25.386 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:57:25.386 OUTPUT:	Zone ods found
2011-03-28 16:57:25.386 OUTPUT:	Policy set to default.
2011-03-28 16:57:25.386 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:57:25.386 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:57:25.386 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC30T70: Set Hash Algorithm to 2 and confirm ods-kaspcheck fails

2011-03-28 16:57:25.387 01638 Comment: Hash algorithm value has been adjusted to 2 (available for assignment, not assigned in this installation) in the kasp.xml for this testcase. Ods-kaspcheck should fail.

2011-03-28 16:57:25.387 Requirement: ODSKC30

2011-03-28 16:57:25.387 01640 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:57:25.387 Requirement: ODSKC30

2011-03-28 16:57:25.387 01642 Stop()
2011-03-28 16:57:25.387 Requirement: ODSKC30
2011-03-28 16:57:25.387 RunCommand(ods-control stop)
2011-03-28 16:57:25.394 - runCommand: Process started, PID: 19333
2011-03-28 16:57:25.395 OUTPUT:	Stopping enforcer...
2011-03-28 16:57:25.395 OUTPUT:	Cannot find PID file
2011-03-28 16:57:25.395 OUTPUT:	Stopping signer engine..
2011-03-28 16:57:25.395 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:57:25.395 ERROR:	return code = 1
2011-03-28 16:57:25.395 RunCommand(ps -e | grep enforcer)
2011-03-28 16:57:25.411 - runCommand: Process started, PID: 19336
2011-03-28 16:57:25.411 ERROR:	return code = 1
2011-03-28 16:57:25.411 RunCommand(ps -e | grep signer)
2011-03-28 16:57:25.422 - runCommand: Process started, PID: 19339
2011-03-28 16:57:25.422 ERROR:	return code = 1

2011-03-28 16:57:25.422 01644 Wait(10)

2011-03-28 16:57:25.422 Requirement: ODSKC30

2011-03-28 16:57:35.423 01646 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:57:35.423 Requirement: ODSKC30

2011-03-28 16:57:35.423 01649 LoadConfig()
2011-03-28 16:57:35.423 Requirement: ODSKC30
2011-03-28 16:57:35.423 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:57:35.429 - runCommand: Process started, PID: 19342

2011-03-28 16:57:35.430 01652 LoadConfig()
2011-03-28 16:57:35.430 Requirement: ODSKC30
2011-03-28 16:57:35.430 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC30T70_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:57:35.435 - runCommand: Process started, PID: 19343

2011-03-28 16:57:35.436 01654 Comment: Update all the configs.

2011-03-28 16:57:35.436 Requirement: ODSKC30

2011-03-28 16:57:35.436 01656 UpdateAll()
2011-03-28 16:57:35.436 Requirement: ODSKC30
2011-03-28 16:57:35.436 RunCommand(ods-ksmutil update all)
2011-03-28 16:57:41.869 - runCommand: Process started, PID: 19344
2011-03-28 16:57:41.869 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:57:41.869 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:57:41.869 OUTPUT:	Repository SoftHSM found
2011-03-28 16:57:41.869 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:57:41.869 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:57:41.869 OUTPUT:	Policy default found
2011-03-28 16:57:41.869 OUTPUT:	Policy default2 found
2011-03-28 16:57:41.869 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:57:41.869 OUTPUT:	Policy default3 found
2011-03-28 16:57:41.869 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:57:41.869 OUTPUT:	Policy default4 found
2011-03-28 16:57:41.869 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:57:41.869 OUTPUT:	Policy default5 found
2011-03-28 16:57:41.869 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:57:41.869 OUTPUT:	Policy default6 found
2011-03-28 16:57:41.869 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:57:41.869 OUTPUT:	Policy default7 found
2011-03-28 16:57:41.869 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:57:41.869 OUTPUT:	Policy default8 found
2011-03-28 16:57:41.869 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:57:41.869 OUTPUT:	Policy default9 found
2011-03-28 16:57:41.869 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:57:41.870 OUTPUT:	Policy default10 found
2011-03-28 16:57:41.870 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:57:41.870 OUTPUT:	Policy default11 found
2011-03-28 16:57:41.870 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:57:41.870 OUTPUT:	Zone ods found
2011-03-28 16:57:41.870 OUTPUT:	Policy set to default.
2011-03-28 16:57:41.870 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:57:41.870 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:57:41.870 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:57:41.870 01658 Wait(10)

2011-03-28 16:57:41.870 Requirement: ODSKC30

2011-03-28 16:57:51.870 01660 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 16:57:51.870 Requirement: ODSKC30

2011-03-28 16:57:51.870 01665 CheckLog()
2011-03-28 16:57:51.870 Requirement: ODSKC30

2011-03-28 16:57:52.461 01668 CheckLog()
2011-03-28 16:57:52.461 Requirement: ODSKC30

2011-03-28 16:57:52.218 01670 Comment: Reset the config files to the original ones.

2011-03-28 16:57:52.218 Requirement: ODSKC30

2011-03-28 16:57:52.218 01672 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:57:52.218 Requirement: ODSKC30

2011-03-28 16:57:52.218 01674 Stop()
2011-03-28 16:57:52.218 Requirement: ODSKC30
2011-03-28 16:57:52.218 RunCommand(ods-control stop)
2011-03-28 16:57:52.223 - runCommand: Process started, PID: 19352
2011-03-28 16:57:52.223 OUTPUT:	Stopping enforcer...
2011-03-28 16:57:52.223 OUTPUT:	Cannot find PID file
2011-03-28 16:57:52.223 OUTPUT:	Stopping signer engine..
2011-03-28 16:57:52.223 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:57:52.223 ERROR:	return code = 1
2011-03-28 16:57:52.223 RunCommand(ps -e | grep enforcer)
2011-03-28 16:57:52.234 - runCommand: Process started, PID: 19355
2011-03-28 16:57:52.235 ERROR:	return code = 1
2011-03-28 16:57:52.235 RunCommand(ps -e | grep signer)
2011-03-28 16:57:52.246 - runCommand: Process started, PID: 19358
2011-03-28 16:57:52.246 ERROR:	return code = 1

2011-03-28 16:57:52.246 01676 Wait(10)

2011-03-28 16:57:52.246 Requirement: ODSKC30

2011-03-28 16:58:02.246 01679 LoadConfig()
2011-03-28 16:58:02.246 Requirement: ODSKC30
2011-03-28 16:58:02.246 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:58:02.253 - runCommand: Process started, PID: 19361

2011-03-28 16:58:02.253 01682 LoadConfig()
2011-03-28 16:58:02.253 Requirement: ODSKC30
2011-03-28 16:58:02.253 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:58:02.259 - runCommand: Process started, PID: 19362

2011-03-28 16:58:02.259 01684 Comment: Update all the configs.

2011-03-28 16:58:02.259 Requirement: ODSKC30

2011-03-28 16:58:02.259 01686 UpdateAll()
2011-03-28 16:58:02.259 Requirement: ODSKC30
2011-03-28 16:58:02.259 RunCommand(ods-ksmutil update all)
2011-03-28 16:58:03.849 - runCommand: Process started, PID: 19363
2011-03-28 16:58:03.850 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:58:03.850 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:58:03.850 OUTPUT:	Repository SoftHSM found
2011-03-28 16:58:03.850 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:58:03.850 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:58:03.850 OUTPUT:	Policy default found
2011-03-28 16:58:03.850 OUTPUT:	Policy default2 found
2011-03-28 16:58:03.850 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:03.850 OUTPUT:	Zone ods found
2011-03-28 16:58:03.850 OUTPUT:	Policy set to default.
2011-03-28 16:58:03.850 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:58:03.850 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:58:03.850 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC30T80: Set Salt Length to 0 and confirm ods-kaspcheck fails

2011-03-28 16:58:03.850 01693 Comment: Salt length value has been adjusted to 0 in the kasp.xml for this testcase. Ods-kaspcheck should fail.

2011-03-28 16:58:03.850 Requirement: ODSKC30

2011-03-28 16:58:03.850 01695 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:58:03.850 Requirement: ODSKC30

2011-03-28 16:58:03.851 01697 Stop()
2011-03-28 16:58:03.851 Requirement: ODSKC30
2011-03-28 16:58:03.851 RunCommand(ods-control stop)
2011-03-28 16:58:03.858 - runCommand: Process started, PID: 19371
2011-03-28 16:58:03.858 OUTPUT:	Stopping enforcer...
2011-03-28 16:58:03.858 OUTPUT:	Cannot find PID file
2011-03-28 16:58:03.858 OUTPUT:	Stopping signer engine..
2011-03-28 16:58:03.858 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:58:03.858 ERROR:	return code = 1
2011-03-28 16:58:03.858 RunCommand(ps -e | grep enforcer)
2011-03-28 16:58:03.876 - runCommand: Process started, PID: 19374
2011-03-28 16:58:03.876 ERROR:	return code = 1
2011-03-28 16:58:03.876 RunCommand(ps -e | grep signer)
2011-03-28 16:58:03.894 - runCommand: Process started, PID: 19377
2011-03-28 16:58:03.894 ERROR:	return code = 1

2011-03-28 16:58:03.894 01699 Wait(10)

2011-03-28 16:58:03.894 Requirement: ODSKC30

2011-03-28 16:58:13.895 01701 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:58:13.895 Requirement: ODSKC30

2011-03-28 16:58:13.895 01704 LoadConfig()
2011-03-28 16:58:13.895 Requirement: ODSKC30
2011-03-28 16:58:13.895 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:58:13.901 - runCommand: Process started, PID: 19380

2011-03-28 16:58:13.902 01707 LoadConfig()
2011-03-28 16:58:13.902 Requirement: ODSKC30
2011-03-28 16:58:13.902 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC30T80_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:58:13.907 - runCommand: Process started, PID: 19381

2011-03-28 16:58:13.908 01709 Comment: Update all the configs.

2011-03-28 16:58:13.908 Requirement: ODSKC30

2011-03-28 16:58:13.908 01711 UpdateAll()
2011-03-28 16:58:13.908 Requirement: ODSKC30
2011-03-28 16:58:13.908 RunCommand(ods-ksmutil update all)
2011-03-28 16:58:20.316 - runCommand: Process started, PID: 19382
2011-03-28 16:58:20.316 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:58:20.316 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:58:20.316 OUTPUT:	Repository SoftHSM found
2011-03-28 16:58:20.316 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:58:20.316 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:58:20.316 OUTPUT:	Policy default found
2011-03-28 16:58:20.316 OUTPUT:	Policy default2 found
2011-03-28 16:58:20.316 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:20.316 OUTPUT:	Policy default3 found
2011-03-28 16:58:20.316 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:20.316 OUTPUT:	Policy default4 found
2011-03-28 16:58:20.316 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:20.316 OUTPUT:	Policy default5 found
2011-03-28 16:58:20.316 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:20.316 OUTPUT:	Policy default6 found
2011-03-28 16:58:20.316 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:20.316 OUTPUT:	Policy default7 found
2011-03-28 16:58:20.316 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:20.316 OUTPUT:	Policy default8 found
2011-03-28 16:58:20.316 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:58:20.316 OUTPUT:	Policy default9 found
2011-03-28 16:58:20.317 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:20.317 OUTPUT:	Policy default10 found
2011-03-28 16:58:20.317 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:20.317 OUTPUT:	Policy default11 found
2011-03-28 16:58:20.317 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:20.317 OUTPUT:	Zone ods found
2011-03-28 16:58:20.317 OUTPUT:	Policy set to default.
2011-03-28 16:58:20.317 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:58:20.317 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:58:20.317 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:58:20.317 01713 Wait(10)

2011-03-28 16:58:20.317 Requirement: ODSKC30

2011-03-28 16:58:30.317 01715 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 16:58:30.317 Requirement: ODSKC30

2011-03-28 16:58:30.317 01720 CheckLog()
2011-03-28 16:58:30.317 Requirement: ODSKC30

2011-03-28 16:58:30.492 01723 CheckLog()
2011-03-28 16:58:30.492 Requirement: ODSKC30

2011-03-28 16:58:30.664 01725 Comment: Reset the config files to the original ones.

2011-03-28 16:58:30.664 Requirement: ODSKC30

2011-03-28 16:58:30.664 01727 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:58:30.664 Requirement: ODSKC30

2011-03-28 16:58:30.664 01729 Stop()
2011-03-28 16:58:30.664 Requirement: ODSKC30
2011-03-28 16:58:30.664 RunCommand(ods-control stop)
2011-03-28 16:58:30.669 - runCommand: Process started, PID: 19390
2011-03-28 16:58:30.669 OUTPUT:	Stopping enforcer...
2011-03-28 16:58:30.669 OUTPUT:	Cannot find PID file
2011-03-28 16:58:30.669 OUTPUT:	Stopping signer engine..
2011-03-28 16:58:30.669 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:58:30.669 ERROR:	return code = 1
2011-03-28 16:58:30.669 RunCommand(ps -e | grep enforcer)
2011-03-28 16:58:30.682 - runCommand: Process started, PID: 19393
2011-03-28 16:58:30.682 ERROR:	return code = 1
2011-03-28 16:58:30.682 RunCommand(ps -e | grep signer)
2011-03-28 16:58:30.695 - runCommand: Process started, PID: 19396
2011-03-28 16:58:30.696 ERROR:	return code = 1

2011-03-28 16:58:30.696 01731 Wait(10)

2011-03-28 16:58:30.696 Requirement: ODSKC30

2011-03-28 16:58:40.696 01734 LoadConfig()
2011-03-28 16:58:40.696 Requirement: ODSKC30
2011-03-28 16:58:40.696 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:58:40.702 - runCommand: Process started, PID: 19399

2011-03-28 16:58:40.703 01737 LoadConfig()
2011-03-28 16:58:40.703 Requirement: ODSKC30
2011-03-28 16:58:40.703 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:58:40.708 - runCommand: Process started, PID: 19400

2011-03-28 16:58:40.709 01739 Comment: Update all the configs.

2011-03-28 16:58:40.709 Requirement: ODSKC30

2011-03-28 16:58:40.709 01741 UpdateAll()
2011-03-28 16:58:40.709 Requirement: ODSKC30
2011-03-28 16:58:40.709 RunCommand(ods-ksmutil update all)
2011-03-28 16:58:42.188 - runCommand: Process started, PID: 19401
2011-03-28 16:58:42.188 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:58:42.188 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:58:42.188 OUTPUT:	Repository SoftHSM found
2011-03-28 16:58:42.188 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:58:42.188 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:58:42.188 OUTPUT:	Policy default found
2011-03-28 16:58:42.188 OUTPUT:	Policy default2 found
2011-03-28 16:58:42.188 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:42.188 OUTPUT:	Zone ods found
2011-03-28 16:58:42.188 OUTPUT:	Policy set to default.
2011-03-28 16:58:42.188 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:58:42.188 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:58:42.188 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC30T90: Set Salt Length to 257 and confirm ods-kaspcheck runs successfully

2011-03-28 16:58:42.189 01749 Comment: Salt length value has been adjusted to 257 in the kasp.xml for this testcase. Ods-kaspcheck should validate conf and kasp.xml.

2011-03-28 16:58:42.189 Requirement: ODSKC30

2011-03-28 16:58:42.189 01751 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:58:42.189 Requirement: ODSKC30

2011-03-28 16:58:42.189 01753 Stop()
2011-03-28 16:58:42.189 Requirement: ODSKC30
2011-03-28 16:58:42.189 RunCommand(ods-control stop)
2011-03-28 16:58:42.197 - runCommand: Process started, PID: 19409
2011-03-28 16:58:42.197 OUTPUT:	Stopping enforcer...
2011-03-28 16:58:42.197 OUTPUT:	Cannot find PID file
2011-03-28 16:58:42.197 OUTPUT:	Stopping signer engine..
2011-03-28 16:58:42.197 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:58:42.197 ERROR:	return code = 1
2011-03-28 16:58:42.197 RunCommand(ps -e | grep enforcer)
2011-03-28 16:58:42.216 - runCommand: Process started, PID: 19412
2011-03-28 16:58:42.216 ERROR:	return code = 1
2011-03-28 16:58:42.216 RunCommand(ps -e | grep signer)
2011-03-28 16:58:42.234 - runCommand: Process started, PID: 19415
2011-03-28 16:58:42.234 ERROR:	return code = 1

2011-03-28 16:58:42.234 01755 Wait(10)

2011-03-28 16:58:42.234 Requirement: ODSKC30

2011-03-28 16:58:52.235 01757 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:58:52.235 Requirement: ODSKC30

2011-03-28 16:58:52.235 01760 LoadConfig()
2011-03-28 16:58:52.235 Requirement: ODSKC30
2011-03-28 16:58:52.235 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:58:52.241 - runCommand: Process started, PID: 19418

2011-03-28 16:58:52.242 01763 LoadConfig()
2011-03-28 16:58:52.242 Requirement: ODSKC30
2011-03-28 16:58:52.242 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC30T90_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:58:52.247 - runCommand: Process started, PID: 19419

2011-03-28 16:58:52.248 01765 Comment: Update all the configs.

2011-03-28 16:58:52.248 Requirement: ODSKC30

2011-03-28 16:58:52.248 01767 UpdateAll()
2011-03-28 16:58:52.248 Requirement: ODSKC30
2011-03-28 16:58:52.248 RunCommand(ods-ksmutil update all)
2011-03-28 16:58:58.846 - runCommand: Process started, PID: 19420
2011-03-28 16:58:58.846 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:58:58.846 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:58:58.846 OUTPUT:	Repository SoftHSM found
2011-03-28 16:58:58.846 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:58:58.847 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:58:58.847 OUTPUT:	Policy default found
2011-03-28 16:58:58.847 OUTPUT:	Policy default2 found
2011-03-28 16:58:58.847 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:58.847 OUTPUT:	Policy default3 found
2011-03-28 16:58:58.847 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:58.847 OUTPUT:	Policy default4 found
2011-03-28 16:58:58.847 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:58.847 OUTPUT:	Policy default5 found
2011-03-28 16:58:58.847 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:58.847 OUTPUT:	Policy default6 found
2011-03-28 16:58:58.847 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:58.847 OUTPUT:	Policy default7 found
2011-03-28 16:58:58.847 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:58.847 OUTPUT:	Policy default8 found
2011-03-28 16:58:58.847 OUTPUT:	Error: unable to read policy default8; skipping
2011-03-28 16:58:58.847 OUTPUT:	Policy default9 found
2011-03-28 16:58:58.847 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:58.847 OUTPUT:	Policy default10 found
2011-03-28 16:58:58.847 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:58.847 OUTPUT:	Policy default11 found
2011-03-28 16:58:58.847 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:58:58.847 OUTPUT:	Zone ods found
2011-03-28 16:58:58.847 OUTPUT:	Policy set to default.
2011-03-28 16:58:58.847 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:58:58.847 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:58:58.847 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 16:58:58.847 01769 Wait(10)

2011-03-28 16:58:58.847 Requirement: ODSKC30

2011-03-28 16:59:08.847 01771 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 16:59:08.847 Requirement: ODSKC30

2011-03-28 16:59:08.848 01776 CheckLog()
2011-03-28 16:59:08.848 Requirement: ODSKC30

2011-03-28 16:59:09.261 01779 CheckLog()
2011-03-28 16:59:09.261 Requirement: ODSKC30

2011-03-28 16:59:09.198 01781 Comment: Reset the config files to the original ones.

2011-03-28 16:59:09.198 Requirement: ODSKC30

2011-03-28 16:59:09.198 01783 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:59:09.198 Requirement: ODSKC30

2011-03-28 16:59:09.198 01785 Stop()
2011-03-28 16:59:09.198 Requirement: ODSKC30
2011-03-28 16:59:09.198 RunCommand(ods-control stop)
2011-03-28 16:59:09.203 - runCommand: Process started, PID: 19428
2011-03-28 16:59:09.203 OUTPUT:	Stopping enforcer...
2011-03-28 16:59:09.203 OUTPUT:	Cannot find PID file
2011-03-28 16:59:09.203 OUTPUT:	Stopping signer engine..
2011-03-28 16:59:09.203 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:59:09.203 ERROR:	return code = 1
2011-03-28 16:59:09.204 RunCommand(ps -e | grep enforcer)
2011-03-28 16:59:09.215 - runCommand: Process started, PID: 19431
2011-03-28 16:59:09.215 ERROR:	return code = 1
2011-03-28 16:59:09.215 RunCommand(ps -e | grep signer)
2011-03-28 16:59:09.226 - runCommand: Process started, PID: 19434
2011-03-28 16:59:09.226 ERROR:	return code = 1

2011-03-28 16:59:09.226 01787 Wait(10)

2011-03-28 16:59:09.226 Requirement: ODSKC30

2011-03-28 16:59:19.226 01790 LoadConfig()
2011-03-28 16:59:19.226 Requirement: ODSKC30
2011-03-28 16:59:19.226 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:59:19.233 - runCommand: Process started, PID: 19437

2011-03-28 16:59:19.233 01793 LoadConfig()
2011-03-28 16:59:19.233 Requirement: ODSKC30
2011-03-28 16:59:19.233 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:59:19.239 - runCommand: Process started, PID: 19438

2011-03-28 16:59:19.239 01795 Comment: Update all the configs.

2011-03-28 16:59:19.239 Requirement: ODSKC30

2011-03-28 16:59:19.239 01797 UpdateAll()
2011-03-28 16:59:19.239 Requirement: ODSKC30
2011-03-28 16:59:19.239 RunCommand(ods-ksmutil update all)
2011-03-28 16:59:20.868 - runCommand: Process started, PID: 19439
2011-03-28 16:59:20.868 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:59:20.869 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:59:20.869 OUTPUT:	Repository SoftHSM found
2011-03-28 16:59:20.869 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:59:20.869 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:59:20.869 OUTPUT:	Policy default found
2011-03-28 16:59:20.869 OUTPUT:	Policy default2 found
2011-03-28 16:59:20.869 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:59:20.869 OUTPUT:	Zone ods found
2011-03-28 16:59:20.869 OUTPUT:	Policy set to default.
2011-03-28 16:59:20.869 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:59:20.869 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:59:20.869 ERROR:	/etc/opendnssec/kasp.xml validates
Testcondition - ODSKC40: The Keys part located in kasp.xml should conform to several constraints and requirements (RFC's)

-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSKC40T10: Use a value with an incorrect format for TTL (P) and confirm ods-kaspcheck fails

2011-03-28 16:59:20.869 01804 Comment: TTL value in the keys part (general part) is incorrect: P instead of a valid value like PT10M. Ods-kaspcheck validation should fail for kasp.xml.

2011-03-28 16:59:20.869 Requirement: ODSKC40

2011-03-28 16:59:20.870 01806 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:59:20.870 Requirement: ODSKC40

2011-03-28 16:59:20.870 01808 Stop()
2011-03-28 16:59:20.870 Requirement: ODSKC40
2011-03-28 16:59:20.870 RunCommand(ods-control stop)
2011-03-28 16:59:20.877 - runCommand: Process started, PID: 19447
2011-03-28 16:59:20.877 OUTPUT:	Stopping enforcer...
2011-03-28 16:59:20.877 OUTPUT:	Cannot find PID file
2011-03-28 16:59:20.877 OUTPUT:	Stopping signer engine..
2011-03-28 16:59:20.877 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:59:20.877 ERROR:	return code = 1
2011-03-28 16:59:20.878 RunCommand(ps -e | grep enforcer)
2011-03-28 16:59:20.895 - runCommand: Process started, PID: 19450
2011-03-28 16:59:20.896 ERROR:	return code = 1
2011-03-28 16:59:20.896 RunCommand(ps -e | grep signer)
2011-03-28 16:59:20.907 - runCommand: Process started, PID: 19453
2011-03-28 16:59:20.907 ERROR:	return code = 1

2011-03-28 16:59:20.907 01810 Wait(10)

2011-03-28 16:59:20.907 Requirement: ODSKC40

2011-03-28 16:59:30.907 01812 Comment: Change the configuration with predefined xml config files.

2011-03-28 16:59:30.907 Requirement: ODSKC40

2011-03-28 16:59:30.908 01815 LoadConfig()
2011-03-28 16:59:30.908 Requirement: ODSKC40
2011-03-28 16:59:30.908 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:59:30.914 - runCommand: Process started, PID: 19456

2011-03-28 16:59:30.914 01818 LoadConfig()
2011-03-28 16:59:30.914 Requirement: ODSKC40
2011-03-28 16:59:30.914 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T10_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:59:30.920 - runCommand: Process started, PID: 19457

2011-03-28 16:59:30.920 01820 Comment: Update all the configs.

2011-03-28 16:59:30.920 Requirement: ODSKC40

2011-03-28 16:59:30.920 01822 UpdateAll()
2011-03-28 16:59:30.920 Requirement: ODSKC40
2011-03-28 16:59:30.920 RunCommand(ods-ksmutil update all)
2011-03-28 16:59:31.290 - runCommand: Process started, PID: 19458
2011-03-28 16:59:31.290 OUTPUT:	WARNING: Keys/PublishSafety (600 seconds) in default policy in /etc/opendnssec/kasp.xml is more than 5 * TTL (0 seconds)
2011-03-28 16:59:31.290 OUTPUT:	WARNING: Keys/RetireSafety (600 seconds) in default policy in /etc/opendnssec/kasp.xml is more than 5 * TTL (0 seconds)
2011-03-28 16:59:31.290 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:59:31.290 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:59:31.290 OUTPUT:	Repository SoftHSM found
2011-03-28 16:59:31.290 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:59:31.290 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:59:31.290 OUTPUT:	Error validating file "/etc/opendnssec/kasp.xml"
2011-03-28 16:59:31.290 OUTPUT:	Failed to update policies
2011-03-28 16:59:31.290 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:59:31.290 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:59:31.290 ERROR:	/etc/opendnssec/kasp.xml:34: element TTL: Relax-NG validity error : Type duration doesn't allow value 'P'
2011-03-28 16:59:31.290 ERROR:	/etc/opendnssec/kasp.xml:34: element TTL: Relax-NG validity error : Error validating datatype duration
2011-03-28 16:59:31.290 ERROR:	/etc/opendnssec/kasp.xml:34: element TTL: Relax-NG validity error : Element TTL failed to validate content
2011-03-28 16:59:31.290 ERROR:	/etc/opendnssec/kasp.xml fails to validate
2011-03-28 16:59:31.290 ERROR:	/etc/opendnssec/kasp.xml:34: element TTL: Relax-NG validity error : Type duration doesn't allow value 'P'
2011-03-28 16:59:31.290 ERROR:	/etc/opendnssec/kasp.xml:34: element TTL: Relax-NG validity error : Error validating datatype duration
2011-03-28 16:59:31.290 ERROR:	/etc/opendnssec/kasp.xml:34: element TTL: Relax-NG validity error : Element TTL failed to validate content
2011-03-28 16:59:31.290 ERROR:	return code = 1

2011-03-28 16:59:31.290 01824 Wait(10)

2011-03-28 16:59:31.290 Requirement: ODSKC40

2011-03-28 16:59:41.291 01826 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 16:59:41.291 Requirement: ODSKC40

2011-03-28 16:59:41.291 01831 CheckLog()
2011-03-28 16:59:41.291 Requirement: ODSKC40
2011-03-28 16:59:41.469 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 16:59:41.469 01834 CheckLog()
2011-03-28 16:59:41.469 Requirement: ODSKC40
2011-03-28 16:59:41.641 FAILED:	(Check for Like) - Expected: etc/opendnssec/kasp.xml:141: element TTL: Relax-NG validity error : Type duration doesn't allow value 'P10' Found: 

2011-03-28 16:59:41.642 01837 CheckLog()
2011-03-28 16:59:41.642 Requirement: ODSKC40
2011-03-28 16:59:41.813 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml fails to validate Found: 

2011-03-28 16:59:41.813 01839 Comment: Reset the config files to the original ones.

2011-03-28 16:59:41.813 Requirement: ODSKC40

2011-03-28 16:59:41.814 01841 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:59:41.814 Requirement: ODSKC40

2011-03-28 16:59:41.814 01843 Stop()
2011-03-28 16:59:41.814 Requirement: ODSKC40
2011-03-28 16:59:41.814 RunCommand(ods-control stop)
2011-03-28 16:59:41.819 - runCommand: Process started, PID: 19467
2011-03-28 16:59:41.819 OUTPUT:	Stopping enforcer...
2011-03-28 16:59:41.819 OUTPUT:	Cannot find PID file
2011-03-28 16:59:41.819 OUTPUT:	Stopping signer engine..
2011-03-28 16:59:41.819 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:59:41.819 ERROR:	return code = 1
2011-03-28 16:59:41.819 RunCommand(ps -e | grep enforcer)
2011-03-28 16:59:41.830 - runCommand: Process started, PID: 19470
2011-03-28 16:59:41.830 ERROR:	return code = 1
2011-03-28 16:59:41.830 RunCommand(ps -e | grep signer)
2011-03-28 16:59:41.841 - runCommand: Process started, PID: 19473
2011-03-28 16:59:41.842 ERROR:	return code = 1

2011-03-28 16:59:41.842 01845 Wait(10)

2011-03-28 16:59:41.842 Requirement: ODSKC40

2011-03-28 16:59:51.842 01848 LoadConfig()
2011-03-28 16:59:51.842 Requirement: ODSKC40
2011-03-28 16:59:51.842 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 16:59:51.848 - runCommand: Process started, PID: 19476

2011-03-28 16:59:51.849 01851 LoadConfig()
2011-03-28 16:59:51.849 Requirement: ODSKC40
2011-03-28 16:59:51.849 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 16:59:51.854 - runCommand: Process started, PID: 19477

2011-03-28 16:59:51.854 01853 Comment: Update all the configs.

2011-03-28 16:59:51.855 Requirement: ODSKC40

2011-03-28 16:59:51.855 01855 UpdateAll()
2011-03-28 16:59:51.855 Requirement: ODSKC40
2011-03-28 16:59:51.855 RunCommand(ods-ksmutil update all)
2011-03-28 16:59:53.210 - runCommand: Process started, PID: 19478
2011-03-28 16:59:53.210 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 16:59:53.210 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 16:59:53.210 OUTPUT:	Repository SoftHSM found
2011-03-28 16:59:53.210 OUTPUT:	No Maximum Capacity set.
2011-03-28 16:59:53.210 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 16:59:53.210 OUTPUT:	Policy default found
2011-03-28 16:59:53.210 OUTPUT:	Policy default2 found
2011-03-28 16:59:53.210 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 16:59:53.210 OUTPUT:	Zone ods found
2011-03-28 16:59:53.210 OUTPUT:	Policy set to default.
2011-03-28 16:59:53.210 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 16:59:53.210 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 16:59:53.210 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T20: Use a very high value for TTL (P1Y) and confirm ods-kaspcheck runs successfully

2011-03-28 16:59:53.211 01861 Comment: TTL value is very high (1 year: P1Y). Ods-kaspcheck should validate both kasp.xml as conf.xml.

2011-03-28 16:59:53.211 Requirement: ODSKC40

2011-03-28 16:59:53.211 01863 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 16:59:53.211 Requirement: ODSKC40

2011-03-28 16:59:53.211 01865 Stop()
2011-03-28 16:59:53.211 Requirement: ODSKC40
2011-03-28 16:59:53.211 RunCommand(ods-control stop)
2011-03-28 16:59:53.219 - runCommand: Process started, PID: 19486
2011-03-28 16:59:53.219 OUTPUT:	Stopping enforcer...
2011-03-28 16:59:53.219 OUTPUT:	Cannot find PID file
2011-03-28 16:59:53.219 OUTPUT:	Stopping signer engine..
2011-03-28 16:59:53.219 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 16:59:53.219 ERROR:	return code = 1
2011-03-28 16:59:53.219 RunCommand(ps -e | grep enforcer)
2011-03-28 16:59:53.237 - runCommand: Process started, PID: 19489
2011-03-28 16:59:53.237 ERROR:	return code = 1
2011-03-28 16:59:53.237 RunCommand(ps -e | grep signer)
2011-03-28 16:59:53.255 - runCommand: Process started, PID: 19492
2011-03-28 16:59:53.255 ERROR:	return code = 1

2011-03-28 16:59:53.255 01867 Wait(10)

2011-03-28 16:59:53.255 Requirement: ODSKC40

2011-03-28 17:00:03.255 01869 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:00:03.255 Requirement: ODSKC40

2011-03-28 17:00:03.255 01872 LoadConfig()
2011-03-28 17:00:03.255 Requirement: ODSKC40
2011-03-28 17:00:03.255 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:00:03.262 - runCommand: Process started, PID: 19495

2011-03-28 17:00:03.262 01875 LoadConfig()
2011-03-28 17:00:03.262 Requirement: ODSKC40
2011-03-28 17:00:03.262 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T20_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:00:03.268 - runCommand: Process started, PID: 19496

2011-03-28 17:00:03.268 01877 Comment: Update all the configs.

2011-03-28 17:00:03.268 Requirement: ODSKC40

2011-03-28 17:00:03.268 01879 UpdateAll()
2011-03-28 17:00:03.268 Requirement: ODSKC40
2011-03-28 17:00:03.268 RunCommand(ods-ksmutil update all)
2011-03-28 17:00:04.688 - runCommand: Process started, PID: 19497
2011-03-28 17:00:04.688 OUTPUT:	WARNING: Keys/PublishSafety (600 seconds) in default policy in /etc/opendnssec/kasp.xml is less than 0.1 * TTL (31536000 seconds)
2011-03-28 17:00:04.688 OUTPUT:	WARNING: Keys/RetireSafety (600 seconds) in default policy in /etc/opendnssec/kasp.xml is less than 0.1 * TTL (31536000 seconds)
2011-03-28 17:00:04.688 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:00:04.688 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:00:04.688 OUTPUT:	Repository SoftHSM found
2011-03-28 17:00:04.688 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:00:04.688 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:00:04.688 OUTPUT:	Policy default found
2011-03-28 17:00:04.688 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:00:04.688 OUTPUT:	Policy default2 found
2011-03-28 17:00:04.688 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:00:04.688 OUTPUT:	Zone ods found
2011-03-28 17:00:04.688 OUTPUT:	Policy set to default.
2011-03-28 17:00:04.688 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:00:04.688 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:00:04.688 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 17:00:04.688 01881 Wait(10)

2011-03-28 17:00:04.688 Requirement: ODSKC40

2011-03-28 17:00:14.688 01883 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 17:00:14.689 Requirement: ODSKC40

2011-03-28 17:00:14.689 01888 CheckLog()
2011-03-28 17:00:14.689 Requirement: ODSKC40
2011-03-28 17:00:14.866 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 17:00:14.867 01891 CheckLog()
2011-03-28 17:00:14.867 Requirement: ODSKC40
2011-03-28 17:00:15.409 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml validates Found: 

2011-03-28 17:00:15.411 01894 Comment: Reset the config files to the original ones.

2011-03-28 17:00:15.411 Requirement: ODSKC40

2011-03-28 17:00:15.412 01896 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:00:15.412 Requirement: ODSKC40

2011-03-28 17:00:15.413 01898 Stop()
2011-03-28 17:00:15.413 Requirement: ODSKC40
2011-03-28 17:00:15.413 RunCommand(ods-control stop)
2011-03-28 17:00:15.463 - runCommand: Process started, PID: 19505
2011-03-28 17:00:15.463 OUTPUT:	Stopping enforcer...
2011-03-28 17:00:15.463 OUTPUT:	Cannot find PID file
2011-03-28 17:00:15.463 OUTPUT:	Stopping signer engine..
2011-03-28 17:00:15.463 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:00:15.464 ERROR:	return code = 1
2011-03-28 17:00:15.464 RunCommand(ps -e | grep enforcer)
2011-03-28 17:00:15.594 - runCommand: Process started, PID: 19508
2011-03-28 17:00:15.595 ERROR:	return code = 1
2011-03-28 17:00:15.595 RunCommand(ps -e | grep signer)
2011-03-28 17:00:15.711 - runCommand: Process started, PID: 19511
2011-03-28 17:00:15.712 ERROR:	return code = 1

2011-03-28 17:00:15.713 01900 Wait(10)

2011-03-28 17:00:15.713 Requirement: ODSKC40

2011-03-28 17:00:25.716 01903 LoadConfig()
2011-03-28 17:00:25.717 Requirement: ODSKC40
2011-03-28 17:00:25.717 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:00:25.780 - runCommand: Process started, PID: 19514

2011-03-28 17:00:25.783 01906 LoadConfig()
2011-03-28 17:00:25.783 Requirement: ODSKC40
2011-03-28 17:00:25.784 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:00:25.840 - runCommand: Process started, PID: 19515

2011-03-28 17:00:25.843 01908 Comment: Update all the configs.

2011-03-28 17:00:25.843 Requirement: ODSKC40

2011-03-28 17:00:25.845 01910 UpdateAll()
2011-03-28 17:00:25.845 Requirement: ODSKC40
2011-03-28 17:00:25.845 RunCommand(ods-ksmutil update all)
2011-03-28 17:00:26.518 - runCommand: Process started, PID: 19516
2011-03-28 17:00:26.518 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:00:26.518 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:00:26.518 OUTPUT:	Repository SoftHSM found
2011-03-28 17:00:26.518 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:00:26.518 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:00:26.518 OUTPUT:	Policy default found
2011-03-28 17:00:26.518 OUTPUT:	Policy default2 found
2011-03-28 17:00:26.518 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:00:26.518 OUTPUT:	Zone ods found
2011-03-28 17:00:26.518 OUTPUT:	Policy set to default.
2011-03-28 17:00:26.518 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:00:26.518 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:00:26.518 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T30: Use a very low value for TTL (PT1S) and confirm ods-kaspcheck fails

2011-03-28 17:00:26.519 01916 Comment: Change the TTL value for the keys to a very low value. Logically spoken: the Ods-kaspcheck should validate for conf.xml and not for kasp.xml. (note: this is not well documented). According to the developpers the kasp.xml should be validated correctly.

2011-03-28 17:00:26.519 Requirement: ODSKC40

2011-03-28 17:00:26.519 01918 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:00:26.519 Requirement: ODSKC40

2011-03-28 17:00:26.519 01920 Stop()
2011-03-28 17:00:26.519 Requirement: ODSKC40
2011-03-28 17:00:26.519 RunCommand(ods-control stop)
2011-03-28 17:00:26.527 - runCommand: Process started, PID: 19524
2011-03-28 17:00:26.527 OUTPUT:	Stopping enforcer...
2011-03-28 17:00:26.527 OUTPUT:	Cannot find PID file
2011-03-28 17:00:26.527 OUTPUT:	Stopping signer engine..
2011-03-28 17:00:26.527 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:00:26.527 ERROR:	return code = 1
2011-03-28 17:00:26.527 RunCommand(ps -e | grep enforcer)
2011-03-28 17:00:26.545 - runCommand: Process started, PID: 19527
2011-03-28 17:00:26.545 ERROR:	return code = 1
2011-03-28 17:00:26.545 RunCommand(ps -e | grep signer)
2011-03-28 17:00:26.557 - runCommand: Process started, PID: 19530
2011-03-28 17:00:26.557 ERROR:	return code = 1

2011-03-28 17:00:26.557 01922 Wait(10)

2011-03-28 17:00:26.557 Requirement: ODSKC40

2011-03-28 17:00:36.557 01924 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:00:36.557 Requirement: ODSKC40

2011-03-28 17:00:36.558 01927 LoadConfig()
2011-03-28 17:00:36.558 Requirement: ODSKC40
2011-03-28 17:00:36.558 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:00:36.564 - runCommand: Process started, PID: 19533

2011-03-28 17:00:36.564 01930 LoadConfig()
2011-03-28 17:00:36.564 Requirement: ODSKC40
2011-03-28 17:00:36.564 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T30_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:00:36.570 - runCommand: Process started, PID: 19534

2011-03-28 17:00:36.570 01932 Comment: Update all the configs.

2011-03-28 17:00:36.570 Requirement: ODSKC40

2011-03-28 17:00:36.570 01934 UpdateAll()
2011-03-28 17:00:36.570 Requirement: ODSKC40
2011-03-28 17:00:36.570 RunCommand(ods-ksmutil update all)
2011-03-28 17:00:37.979 - runCommand: Process started, PID: 19535
2011-03-28 17:00:37.979 OUTPUT:	WARNING: Keys/PublishSafety (600 seconds) in default policy in /etc/opendnssec/kasp.xml is more than 5 * TTL (1 seconds)
2011-03-28 17:00:37.979 OUTPUT:	WARNING: Keys/RetireSafety (600 seconds) in default policy in /etc/opendnssec/kasp.xml is more than 5 * TTL (1 seconds)
2011-03-28 17:00:37.979 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:00:37.979 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:00:37.979 OUTPUT:	Repository SoftHSM found
2011-03-28 17:00:37.979 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:00:37.979 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:00:37.979 OUTPUT:	Policy default found
2011-03-28 17:00:37.979 OUTPUT:	Policy default2 found
2011-03-28 17:00:37.979 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:00:37.979 OUTPUT:	Zone ods found
2011-03-28 17:00:37.979 OUTPUT:	Policy set to default.
2011-03-28 17:00:37.979 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:00:37.979 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:00:37.979 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 17:00:37.979 01936 Wait(10)

2011-03-28 17:00:37.979 Requirement: ODSKC40

2011-03-28 17:00:47.980 01938 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 17:00:47.980 Requirement: ODSKC40

2011-03-28 17:00:47.980 01943 CheckLog()
2011-03-28 17:00:47.980 Requirement: ODSKC40
2011-03-28 17:00:48.157 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 17:00:48.157 01946 CheckLog()
2011-03-28 17:00:48.157 Requirement: ODSKC40
2011-03-28 17:00:48.329 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml fails to validate Found: 

2011-03-28 17:00:48.329 01948 Comment: Reset the config files to the original ones.

2011-03-28 17:00:48.329 Requirement: ODSKC40

2011-03-28 17:00:48.330 01950 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:00:48.330 Requirement: ODSKC40

2011-03-28 17:00:48.330 01952 Stop()
2011-03-28 17:00:48.330 Requirement: ODSKC40
2011-03-28 17:00:48.330 RunCommand(ods-control stop)
2011-03-28 17:00:48.335 - runCommand: Process started, PID: 19543
2011-03-28 17:00:48.335 OUTPUT:	Stopping enforcer...
2011-03-28 17:00:48.335 OUTPUT:	Cannot find PID file
2011-03-28 17:00:48.335 OUTPUT:	Stopping signer engine..
2011-03-28 17:00:48.335 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:00:48.335 ERROR:	return code = 1
2011-03-28 17:00:48.335 RunCommand(ps -e | grep enforcer)
2011-03-28 17:00:48.346 - runCommand: Process started, PID: 19546
2011-03-28 17:00:48.346 ERROR:	return code = 1
2011-03-28 17:00:48.346 RunCommand(ps -e | grep signer)
2011-03-28 17:00:48.357 - runCommand: Process started, PID: 19549
2011-03-28 17:00:48.357 ERROR:	return code = 1

2011-03-28 17:00:48.357 01954 Wait(10)

2011-03-28 17:00:48.358 Requirement: ODSKC40

2011-03-28 17:00:58.358 01957 LoadConfig()
2011-03-28 17:00:58.358 Requirement: ODSKC40
2011-03-28 17:00:58.358 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:00:58.364 - runCommand: Process started, PID: 19552

2011-03-28 17:00:58.364 01960 LoadConfig()
2011-03-28 17:00:58.365 Requirement: ODSKC40
2011-03-28 17:00:58.365 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:00:58.370 - runCommand: Process started, PID: 19553

2011-03-28 17:00:58.370 01962 Comment: Update all the configs.

2011-03-28 17:00:58.370 Requirement: ODSKC40

2011-03-28 17:00:58.371 01964 UpdateAll()
2011-03-28 17:00:58.371 Requirement: ODSKC40
2011-03-28 17:00:58.371 RunCommand(ods-ksmutil update all)
2011-03-28 17:00:59.918 - runCommand: Process started, PID: 19554
2011-03-28 17:00:59.918 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:00:59.918 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:00:59.918 OUTPUT:	Repository SoftHSM found
2011-03-28 17:00:59.918 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:00:59.918 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:00:59.918 OUTPUT:	Policy default found
2011-03-28 17:00:59.918 OUTPUT:	Policy default2 found
2011-03-28 17:00:59.918 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:00:59.918 OUTPUT:	Zone ods found
2011-03-28 17:00:59.918 OUTPUT:	Policy set to default.
2011-03-28 17:00:59.918 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:00:59.918 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:00:59.918 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T40: Use a value with an incorrect format for RetireSafety (T) and confirm ods-kaspcheck fails

2011-03-28 17:00:59.918 01971 Comment: RetireSafety value in the keys part (general part) is incorrect: T instead of a valid value like PT10M. Ods-kaspcheck validation should fail for kasp.xml.

2011-03-28 17:00:59.919 Requirement: ODSKC40

2011-03-28 17:00:59.919 01973 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:00:59.919 Requirement: ODSKC40

2011-03-28 17:00:59.919 01975 Stop()
2011-03-28 17:00:59.919 Requirement: ODSKC40
2011-03-28 17:00:59.919 RunCommand(ods-control stop)
2011-03-28 17:00:59.926 - runCommand: Process started, PID: 19562
2011-03-28 17:00:59.926 OUTPUT:	Stopping enforcer...
2011-03-28 17:00:59.926 OUTPUT:	Cannot find PID file
2011-03-28 17:00:59.926 OUTPUT:	Stopping signer engine..
2011-03-28 17:00:59.926 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:00:59.926 ERROR:	return code = 1
2011-03-28 17:00:59.927 RunCommand(ps -e | grep enforcer)
2011-03-28 17:00:59.946 - runCommand: Process started, PID: 19565
2011-03-28 17:00:59.947 ERROR:	return code = 1
2011-03-28 17:00:59.947 RunCommand(ps -e | grep signer)
2011-03-28 17:00:59.964 - runCommand: Process started, PID: 19568
2011-03-28 17:00:59.965 ERROR:	return code = 1

2011-03-28 17:00:59.965 01977 Wait(10)

2011-03-28 17:00:59.965 Requirement: ODSKC40

2011-03-28 17:01:09.965 01979 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:01:09.965 Requirement: ODSKC40

2011-03-28 17:01:09.965 01982 LoadConfig()
2011-03-28 17:01:09.965 Requirement: ODSKC40
2011-03-28 17:01:09.965 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:01:09.972 - runCommand: Process started, PID: 19571

2011-03-28 17:01:09.972 01985 LoadConfig()
2011-03-28 17:01:09.972 Requirement: ODSKC40
2011-03-28 17:01:09.972 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T40_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:01:09.978 - runCommand: Process started, PID: 19572

2011-03-28 17:01:09.978 01987 Comment: Update all the configs.

2011-03-28 17:01:09.978 Requirement: ODSKC40

2011-03-28 17:01:09.978 01989 UpdateAll()
2011-03-28 17:01:09.978 Requirement: ODSKC40
2011-03-28 17:01:09.978 RunCommand(ods-ksmutil update all)
2011-03-28 17:01:10.305 - runCommand: Process started, PID: 19573
2011-03-28 17:01:10.305 OUTPUT:	ERROR: Can't find Keys/RetireSafety in default in /etc/opendnssec/kasp.xml
2011-03-28 17:01:10.305 OUTPUT:	WARNING: Keys/RetireSafety (0 seconds) in default policy in /etc/opendnssec/kasp.xml is less than 0.1 * TTL (600 seconds)
2011-03-28 17:01:10.305 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:01:10.305 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:01:10.305 OUTPUT:	Repository SoftHSM found
2011-03-28 17:01:10.305 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:01:10.305 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:01:10.305 OUTPUT:	Error validating file "/etc/opendnssec/kasp.xml"
2011-03-28 17:01:10.305 OUTPUT:	Failed to update policies
2011-03-28 17:01:10.305 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:01:10.305 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:01:10.305 ERROR:	/etc/opendnssec/kasp.xml:35: element RetireSafety: Relax-NG validity error : Type duration doesn't allow value 'T'
2011-03-28 17:01:10.305 ERROR:	/etc/opendnssec/kasp.xml:35: element RetireSafety: Relax-NG validity error : Error validating datatype duration
2011-03-28 17:01:10.305 ERROR:	/etc/opendnssec/kasp.xml:35: element RetireSafety: Relax-NG validity error : Element RetireSafety failed to validate content
2011-03-28 17:01:10.305 ERROR:	/etc/opendnssec/kasp.xml fails to validate
2011-03-28 17:01:10.305 ERROR:	/etc/opendnssec/kasp.xml:35: element RetireSafety: Relax-NG validity error : Type duration doesn't allow value 'T'
2011-03-28 17:01:10.305 ERROR:	/etc/opendnssec/kasp.xml:35: element RetireSafety: Relax-NG validity error : Error validating datatype duration
2011-03-28 17:01:10.305 ERROR:	/etc/opendnssec/kasp.xml:35: element RetireSafety: Relax-NG validity error : Element RetireSafety failed to validate content
2011-03-28 17:01:10.305 ERROR:	return code = 1

2011-03-28 17:01:10.305 01991 Wait(10)

2011-03-28 17:01:10.305 Requirement: ODSKC40

2011-03-28 17:01:20.305 01993 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 17:01:20.305 Requirement: ODSKC40

2011-03-28 17:01:20.306 01998 CheckLog()
2011-03-28 17:01:20.306 Requirement: ODSKC40
2011-03-28 17:01:20.483 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 17:01:20.483 02001 CheckLog()
2011-03-28 17:01:20.483 Requirement: ODSKC40
2011-03-28 17:01:20.656 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml:115: element RetireSafety: Relax-NG validity error : Type duration doesn't allow value 'T' Found: 

2011-03-28 17:01:20.656 02004 CheckLog()
2011-03-28 17:01:20.656 Requirement: ODSKC40
2011-03-28 17:01:20.828 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml fails to validate Found: 

2011-03-28 17:01:20.829 02006 Comment: Reset the config files to the original ones.

2011-03-28 17:01:20.829 Requirement: ODSKC40

2011-03-28 17:01:20.829 02008 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:01:20.829 Requirement: ODSKC40

2011-03-28 17:01:20.829 02010 Stop()
2011-03-28 17:01:20.829 Requirement: ODSKC40
2011-03-28 17:01:20.829 RunCommand(ods-control stop)
2011-03-28 17:01:20.834 - runCommand: Process started, PID: 19581
2011-03-28 17:01:20.834 OUTPUT:	Stopping enforcer...
2011-03-28 17:01:20.834 OUTPUT:	Cannot find PID file
2011-03-28 17:01:20.834 OUTPUT:	Stopping signer engine..
2011-03-28 17:01:20.834 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:01:20.834 ERROR:	return code = 1
2011-03-28 17:01:20.834 RunCommand(ps -e | grep enforcer)
2011-03-28 17:01:20.845 - runCommand: Process started, PID: 19584
2011-03-28 17:01:20.845 ERROR:	return code = 1
2011-03-28 17:01:20.845 RunCommand(ps -e | grep signer)
2011-03-28 17:01:20.857 - runCommand: Process started, PID: 19587
2011-03-28 17:01:20.857 ERROR:	return code = 1

2011-03-28 17:01:20.857 02012 Wait(10)

2011-03-28 17:01:20.857 Requirement: ODSKC40

2011-03-28 17:01:30.857 02015 LoadConfig()
2011-03-28 17:01:30.857 Requirement: ODSKC40
2011-03-28 17:01:30.857 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:01:30.864 - runCommand: Process started, PID: 19590

2011-03-28 17:01:30.864 02018 LoadConfig()
2011-03-28 17:01:30.864 Requirement: ODSKC40
2011-03-28 17:01:30.864 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:01:30.870 - runCommand: Process started, PID: 19591

2011-03-28 17:01:30.870 02020 Comment: Update all the configs.

2011-03-28 17:01:30.870 Requirement: ODSKC40

2011-03-28 17:01:30.870 02022 UpdateAll()
2011-03-28 17:01:30.870 Requirement: ODSKC40
2011-03-28 17:01:30.870 RunCommand(ods-ksmutil update all)
2011-03-28 17:01:32.318 - runCommand: Process started, PID: 19592
2011-03-28 17:01:32.318 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:01:32.318 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:01:32.318 OUTPUT:	Repository SoftHSM found
2011-03-28 17:01:32.318 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:01:32.318 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:01:32.318 OUTPUT:	Policy default found
2011-03-28 17:01:32.318 OUTPUT:	Policy default2 found
2011-03-28 17:01:32.318 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:01:32.318 OUTPUT:	Zone ods found
2011-03-28 17:01:32.318 OUTPUT:	Policy set to default.
2011-03-28 17:01:32.318 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:01:32.318 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:01:32.318 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T50: Use a very high value for RetireSafety (P1Y) and confirm ods-kaspcheck runs successfully

2011-03-28 17:01:32.319 02029 Comment: RetireSafety value is very high (1 year: P1Y). Ods-kaspcheck should validate both kasp.xml as conf.xml.

2011-03-28 17:01:32.319 Requirement: ODSKC40

2011-03-28 17:01:32.319 02031 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:01:32.319 Requirement: ODSKC40

2011-03-28 17:01:32.319 02033 Stop()
2011-03-28 17:01:32.319 Requirement: ODSKC40
2011-03-28 17:01:32.319 RunCommand(ods-control stop)
2011-03-28 17:01:32.326 - runCommand: Process started, PID: 19600
2011-03-28 17:01:32.326 OUTPUT:	Stopping enforcer...
2011-03-28 17:01:32.326 OUTPUT:	Cannot find PID file
2011-03-28 17:01:32.326 OUTPUT:	Stopping signer engine..
2011-03-28 17:01:32.327 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:01:32.327 ERROR:	return code = 1
2011-03-28 17:01:32.327 RunCommand(ps -e | grep enforcer)
2011-03-28 17:01:32.346 - runCommand: Process started, PID: 19603
2011-03-28 17:01:32.347 ERROR:	return code = 1
2011-03-28 17:01:32.347 RunCommand(ps -e | grep signer)
2011-03-28 17:01:32.364 - runCommand: Process started, PID: 19606
2011-03-28 17:01:32.365 ERROR:	return code = 1

2011-03-28 17:01:32.365 02035 Wait(10)

2011-03-28 17:01:32.365 Requirement: ODSKC40

2011-03-28 17:01:42.365 02037 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:01:42.365 Requirement: ODSKC40

2011-03-28 17:01:42.365 02040 LoadConfig()
2011-03-28 17:01:42.365 Requirement: ODSKC40
2011-03-28 17:01:42.365 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:01:42.372 - runCommand: Process started, PID: 19609

2011-03-28 17:01:42.372 02043 LoadConfig()
2011-03-28 17:01:42.372 Requirement: ODSKC40
2011-03-28 17:01:42.372 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T50_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:01:42.377 - runCommand: Process started, PID: 19610

2011-03-28 17:01:42.378 02045 Comment: Update all the configs.

2011-03-28 17:01:42.378 Requirement: ODSKC40

2011-03-28 17:01:42.378 02047 UpdateAll()
2011-03-28 17:01:42.378 Requirement: ODSKC40
2011-03-28 17:01:42.378 RunCommand(ods-ksmutil update all)
2011-03-28 17:01:42.719 - runCommand: Process started, PID: 19611
2011-03-28 17:01:42.719 OUTPUT:	ERROR: Can't find Keys/RetireSafety in default in /etc/opendnssec/kasp.xml
2011-03-28 17:01:42.719 OUTPUT:	WARNING: Keys/RetireSafety (0 seconds) in default policy in /etc/opendnssec/kasp.xml is less than 0.1 * TTL (600 seconds)
2011-03-28 17:01:42.719 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:01:42.719 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:01:42.719 OUTPUT:	Repository SoftHSM found
2011-03-28 17:01:42.719 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:01:42.719 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:01:42.719 OUTPUT:	Error validating file "/etc/opendnssec/kasp.xml"
2011-03-28 17:01:42.719 OUTPUT:	Failed to update policies
2011-03-28 17:01:42.719 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:01:42.719 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:01:42.719 ERROR:	/etc/opendnssec/kasp.xml:35: element RetireSafety: Relax-NG validity error : Type duration doesn't allow value 'T'
2011-03-28 17:01:42.719 ERROR:	/etc/opendnssec/kasp.xml:35: element RetireSafety: Relax-NG validity error : Error validating datatype duration
2011-03-28 17:01:42.719 ERROR:	/etc/opendnssec/kasp.xml:35: element RetireSafety: Relax-NG validity error : Element RetireSafety failed to validate content
2011-03-28 17:01:42.719 ERROR:	/etc/opendnssec/kasp.xml fails to validate
2011-03-28 17:01:42.719 ERROR:	/etc/opendnssec/kasp.xml:35: element RetireSafety: Relax-NG validity error : Type duration doesn't allow value 'T'
2011-03-28 17:01:42.719 ERROR:	/etc/opendnssec/kasp.xml:35: element RetireSafety: Relax-NG validity error : Error validating datatype duration
2011-03-28 17:01:42.719 ERROR:	/etc/opendnssec/kasp.xml:35: element RetireSafety: Relax-NG validity error : Element RetireSafety failed to validate content
2011-03-28 17:01:42.719 ERROR:	return code = 1

2011-03-28 17:01:42.719 02049 Wait(10)

2011-03-28 17:01:42.719 Requirement: ODSKC40

2011-03-28 17:01:52.719 02051 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 17:01:52.719 Requirement: ODSKC40

2011-03-28 17:01:52.720 02056 CheckLog()
2011-03-28 17:01:52.720 Requirement: ODSKC40
2011-03-28 17:01:52.898 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 17:01:52.898 02059 CheckLog()
2011-03-28 17:01:52.898 Requirement: ODSKC40
2011-03-28 17:01:53.723 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml validates Found: 

2011-03-28 17:01:53.725 02062 Comment: Reset the config files to the original ones.

2011-03-28 17:01:53.726 Requirement: ODSKC40

2011-03-28 17:01:53.726 02064 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:01:53.727 Requirement: ODSKC40

2011-03-28 17:01:53.728 02066 Stop()
2011-03-28 17:01:53.728 Requirement: ODSKC40
2011-03-28 17:01:53.728 RunCommand(ods-control stop)
2011-03-28 17:01:53.777 - runCommand: Process started, PID: 19619
2011-03-28 17:01:53.778 OUTPUT:	Stopping enforcer...
2011-03-28 17:01:53.778 OUTPUT:	Cannot find PID file
2011-03-28 17:01:53.778 OUTPUT:	Stopping signer engine..
2011-03-28 17:01:53.778 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:01:53.778 ERROR:	return code = 1
2011-03-28 17:01:53.778 RunCommand(ps -e | grep enforcer)
2011-03-28 17:01:53.890 - runCommand: Process started, PID: 19622
2011-03-28 17:01:53.891 ERROR:	return code = 1
2011-03-28 17:01:53.891 RunCommand(ps -e | grep signer)
2011-03-28 17:01:53.100 - runCommand: Process started, PID: 19625
2011-03-28 17:01:53.100 ERROR:	return code = 1

2011-03-28 17:01:53.100 02068 Wait(10)

2011-03-28 17:01:53.100 Requirement: ODSKC40

2011-03-28 17:02:03.101 02071 LoadConfig()
2011-03-28 17:02:03.101 Requirement: ODSKC40
2011-03-28 17:02:03.101 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:02:03.107 - runCommand: Process started, PID: 19628

2011-03-28 17:02:03.107 02074 LoadConfig()
2011-03-28 17:02:03.107 Requirement: ODSKC40
2011-03-28 17:02:03.107 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:02:03.113 - runCommand: Process started, PID: 19629

2011-03-28 17:02:03.113 02076 Comment: Update all the configs.

2011-03-28 17:02:03.113 Requirement: ODSKC40

2011-03-28 17:02:03.113 02078 UpdateAll()
2011-03-28 17:02:03.113 Requirement: ODSKC40
2011-03-28 17:02:03.113 RunCommand(ods-ksmutil update all)
2011-03-28 17:02:04.426 - runCommand: Process started, PID: 19630
2011-03-28 17:02:04.426 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:02:04.426 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:02:04.426 OUTPUT:	Repository SoftHSM found
2011-03-28 17:02:04.426 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:02:04.426 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:02:04.426 OUTPUT:	Policy default found
2011-03-28 17:02:04.426 OUTPUT:	Policy default2 found
2011-03-28 17:02:04.426 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:02:04.426 OUTPUT:	Zone ods found
2011-03-28 17:02:04.427 OUTPUT:	Policy set to default.
2011-03-28 17:02:04.427 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:02:04.427 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:02:04.427 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T60: Deactivate RetireSafety (PT0S) and confirm ods-kaspcheck fails

2011-03-28 17:02:04.427 02085 Comment: Deactivate the RetireSafety by setting the time to zero (PT0S). Ods-kaspcheck should validate for conf.xml fail for kasp.xml.

2011-03-28 17:02:04.427 Requirement: ODSKC40

2011-03-28 17:02:04.427 02087 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:02:04.427 Requirement: ODSKC40

2011-03-28 17:02:04.427 02089 Stop()
2011-03-28 17:02:04.427 Requirement: ODSKC40
2011-03-28 17:02:04.427 RunCommand(ods-control stop)
2011-03-28 17:02:04.435 - runCommand: Process started, PID: 19638
2011-03-28 17:02:04.435 OUTPUT:	Stopping enforcer...
2011-03-28 17:02:04.435 OUTPUT:	Cannot find PID file
2011-03-28 17:02:04.435 OUTPUT:	Stopping signer engine..
2011-03-28 17:02:04.435 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:02:04.435 ERROR:	return code = 1
2011-03-28 17:02:04.435 RunCommand(ps -e | grep enforcer)
2011-03-28 17:02:04.450 - runCommand: Process started, PID: 19641
2011-03-28 17:02:04.450 ERROR:	return code = 1
2011-03-28 17:02:04.450 RunCommand(ps -e | grep signer)
2011-03-28 17:02:04.461 - runCommand: Process started, PID: 19644
2011-03-28 17:02:04.461 ERROR:	return code = 1

2011-03-28 17:02:04.461 02091 Wait(10)

2011-03-28 17:02:04.461 Requirement: ODSKC40

2011-03-28 17:02:14.462 02093 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:02:14.462 Requirement: ODSKC40

2011-03-28 17:02:14.462 02096 LoadConfig()
2011-03-28 17:02:14.462 Requirement: ODSKC40
2011-03-28 17:02:14.462 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:02:14.468 - runCommand: Process started, PID: 19647

2011-03-28 17:02:14.468 02099 LoadConfig()
2011-03-28 17:02:14.469 Requirement: ODSKC40
2011-03-28 17:02:14.469 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T60_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:02:14.474 - runCommand: Process started, PID: 19648

2011-03-28 17:02:14.474 02101 Comment: Update all the configs.

2011-03-28 17:02:14.474 Requirement: ODSKC40

2011-03-28 17:02:14.475 02103 UpdateAll()
2011-03-28 17:02:14.475 Requirement: ODSKC40
2011-03-28 17:02:14.475 RunCommand(ods-ksmutil update all)
2011-03-28 17:02:15.929 - runCommand: Process started, PID: 19649
2011-03-28 17:02:15.929 OUTPUT:	WARNING: Keys/RetireSafety (0 seconds) in default policy in /etc/opendnssec/kasp.xml is less than 0.1 * TTL (600 seconds)
2011-03-28 17:02:15.929 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:02:15.929 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:02:15.929 OUTPUT:	Repository SoftHSM found
2011-03-28 17:02:15.929 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:02:15.929 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:02:15.929 OUTPUT:	Policy default found
2011-03-28 17:02:15.929 OUTPUT:	Policy default2 found
2011-03-28 17:02:15.929 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:02:15.929 OUTPUT:	Zone ods found
2011-03-28 17:02:15.929 OUTPUT:	Policy set to default.
2011-03-28 17:02:15.929 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:02:15.929 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:02:15.929 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 17:02:15.929 02105 Wait(10)

2011-03-28 17:02:15.929 Requirement: ODSKC40

2011-03-28 17:02:25.930 02107 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 17:02:25.930 Requirement: ODSKC40

2011-03-28 17:02:25.930 02112 CheckLog()
2011-03-28 17:02:25.930 Requirement: ODSKC40
2011-03-28 17:02:26.109 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 17:02:26.109 02115 CheckLog()
2011-03-28 17:02:26.109 Requirement: ODSKC40
2011-03-28 17:02:26.282 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml fails to validate Found: 

2011-03-28 17:02:26.282 02118 CheckLog()
2011-03-28 17:02:26.282 Requirement: ODSKC40
2011-03-28 17:02:26.455 FAILED:	(Check for Like) - Expected: WARNING: Keys/RetireSafety (0 seconds) in default policy in /etc/opendnssec/kasp.xml is less than 0.1 * TTL (600 seconds) Found: 

2011-03-28 17:02:26.455 02120 Comment: Reset the config files to the original ones.

2011-03-28 17:02:26.455 Requirement: ODSKC40

2011-03-28 17:02:26.455 02122 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:02:26.455 Requirement: ODSKC40

2011-03-28 17:02:26.456 02124 Stop()
2011-03-28 17:02:26.456 Requirement: ODSKC40
2011-03-28 17:02:26.456 RunCommand(ods-control stop)
2011-03-28 17:02:26.460 - runCommand: Process started, PID: 19657
2011-03-28 17:02:26.461 OUTPUT:	Stopping enforcer...
2011-03-28 17:02:26.461 OUTPUT:	Cannot find PID file
2011-03-28 17:02:26.461 OUTPUT:	Stopping signer engine..
2011-03-28 17:02:26.461 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:02:26.461 ERROR:	return code = 1
2011-03-28 17:02:26.461 RunCommand(ps -e | grep enforcer)
2011-03-28 17:02:26.472 - runCommand: Process started, PID: 19660
2011-03-28 17:02:26.472 ERROR:	return code = 1
2011-03-28 17:02:26.472 RunCommand(ps -e | grep signer)
2011-03-28 17:02:26.483 - runCommand: Process started, PID: 19663
2011-03-28 17:02:26.483 ERROR:	return code = 1

2011-03-28 17:02:26.483 02126 Wait(10)

2011-03-28 17:02:26.483 Requirement: ODSKC40

2011-03-28 17:02:36.483 02129 LoadConfig()
2011-03-28 17:02:36.483 Requirement: ODSKC40
2011-03-28 17:02:36.484 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:02:36.491 - runCommand: Process started, PID: 19666

2011-03-28 17:02:36.491 02132 LoadConfig()
2011-03-28 17:02:36.491 Requirement: ODSKC40
2011-03-28 17:02:36.491 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:02:36.497 - runCommand: Process started, PID: 19667

2011-03-28 17:02:36.497 02134 Comment: Update all the configs.

2011-03-28 17:02:36.497 Requirement: ODSKC40

2011-03-28 17:02:36.497 02136 UpdateAll()
2011-03-28 17:02:36.497 Requirement: ODSKC40
2011-03-28 17:02:36.497 RunCommand(ods-ksmutil update all)
2011-03-28 17:02:38.131 - runCommand: Process started, PID: 19668
2011-03-28 17:02:38.143 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:02:38.145 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:02:38.147 OUTPUT:	Repository SoftHSM found
2011-03-28 17:02:38.148 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:02:38.150 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:02:38.152 OUTPUT:	Policy default found
2011-03-28 17:02:38.153 OUTPUT:	Policy default2 found
2011-03-28 17:02:38.155 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:02:38.156 OUTPUT:	Zone ods found
2011-03-28 17:02:38.158 OUTPUT:	Policy set to default.
2011-03-28 17:02:38.160 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:02:38.162 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:02:38.163 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T70: Use a value with an incorrect format for PublishSafety (M) and confirm ods-kaspcheck fails

2011-03-28 17:02:38.215 02142 Comment: PublishSafety value in the keys part (general part) is incorrect: M instead of a valid value like PT10M. Ods-kaspcheck validation should fail for kasp.xml.

2011-03-28 17:02:38.218 Requirement: ODSKC40

2011-03-28 17:02:38.234 02144 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:02:38.236 Requirement: ODSKC40

2011-03-28 17:02:38.251 02146 Stop()
2011-03-28 17:02:38.253 Requirement: ODSKC40
2011-03-28 17:02:38.255 RunCommand(ods-control stop)
2011-03-28 17:02:38.996 - runCommand: Process started, PID: 19677
2011-03-28 17:02:38.100 OUTPUT:	Stopping enforcer...
2011-03-28 17:02:38.100 OUTPUT:	Cannot find PID file
2011-03-28 17:02:38.100 OUTPUT:	Stopping signer engine..
2011-03-28 17:02:38.100 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:02:38.101 ERROR:	return code = 1
2011-03-28 17:02:38.101 RunCommand(ps -e | grep enforcer)
2011-03-28 17:02:38.279 - runCommand: Process started, PID: 19680
2011-03-28 17:02:38.280 ERROR:	return code = 1
2011-03-28 17:02:38.281 RunCommand(ps -e | grep signer)
2011-03-28 17:02:38.456 - runCommand: Process started, PID: 19683
2011-03-28 17:02:38.457 ERROR:	return code = 1

2011-03-28 17:02:38.458 02148 Wait(10)

2011-03-28 17:02:38.459 Requirement: ODSKC40

2011-03-28 17:02:48.461 02150 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:02:48.462 Requirement: ODSKC40

2011-03-28 17:02:48.463 02153 LoadConfig()
2011-03-28 17:02:48.463 Requirement: ODSKC40
2011-03-28 17:02:48.464 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:02:48.527 - runCommand: Process started, PID: 19690

2011-03-28 17:02:48.530 02156 LoadConfig()
2011-03-28 17:02:48.530 Requirement: ODSKC40
2011-03-28 17:02:48.531 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T70_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:02:48.586 - runCommand: Process started, PID: 19691

2011-03-28 17:02:48.589 02158 Comment: Update all the configs.

2011-03-28 17:02:48.589 Requirement: ODSKC40

2011-03-28 17:02:48.591 02160 UpdateAll()
2011-03-28 17:02:48.591 Requirement: ODSKC40
2011-03-28 17:02:48.592 RunCommand(ods-ksmutil update all)
2011-03-28 17:02:49.611 - runCommand: Process started, PID: 19692
2011-03-28 17:02:49.612 OUTPUT:	WARNING: Keys/RetireSafety (0 seconds) in default policy in /etc/opendnssec/kasp.xml is less than 0.1 * TTL (600 seconds)
2011-03-28 17:02:49.612 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:02:49.612 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:02:49.612 OUTPUT:	Repository SoftHSM found
2011-03-28 17:02:49.612 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:02:49.612 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:02:49.612 OUTPUT:	Policy default found
2011-03-28 17:02:49.612 OUTPUT:	Policy default2 found
2011-03-28 17:02:49.612 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:02:49.612 OUTPUT:	Zone ods found
2011-03-28 17:02:49.612 OUTPUT:	Policy set to default.
2011-03-28 17:02:49.612 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:02:49.612 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:02:49.612 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 17:02:49.612 02162 Wait(10)

2011-03-28 17:02:49.612 Requirement: ODSKC40

2011-03-28 17:02:59.612 02164 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 17:02:59.612 Requirement: ODSKC40

2011-03-28 17:02:59.613 02169 CheckLog()
2011-03-28 17:02:59.613 Requirement: ODSKC40
2011-03-28 17:02:59.792 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 17:02:59.792 02172 CheckLog()
2011-03-28 17:02:59.792 Requirement: ODSKC40
2011-03-28 17:02:59.965 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml fails to validate Found: 

2011-03-28 17:02:59.965 02175 CheckLog()
2011-03-28 17:02:59.965 Requirement: ODSKC40
2011-03-28 17:03:00.140 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml:116: element PublishSafety: Relax-NG validity error : Type duration doesn't allow value 'M' Found: 

2011-03-28 17:03:00.141 02177 Comment: Reset the config files to the original ones.

2011-03-28 17:03:00.141 Requirement: ODSKC40

2011-03-28 17:03:00.141 02179 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:03:00.141 Requirement: ODSKC40

2011-03-28 17:03:00.141 02181 Stop()
2011-03-28 17:03:00.141 Requirement: ODSKC40
2011-03-28 17:03:00.141 RunCommand(ods-control stop)
2011-03-28 17:03:00.146 - runCommand: Process started, PID: 19707
2011-03-28 17:03:00.146 OUTPUT:	Stopping enforcer...
2011-03-28 17:03:00.146 OUTPUT:	Cannot find PID file
2011-03-28 17:03:00.146 OUTPUT:	Stopping signer engine..
2011-03-28 17:03:00.146 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:03:00.146 ERROR:	return code = 1
2011-03-28 17:03:00.146 RunCommand(ps -e | grep enforcer)
2011-03-28 17:03:00.157 - runCommand: Process started, PID: 19710
2011-03-28 17:03:00.157 ERROR:	return code = 1
2011-03-28 17:03:00.157 RunCommand(ps -e | grep signer)
2011-03-28 17:03:00.171 - runCommand: Process started, PID: 19713
2011-03-28 17:03:00.171 ERROR:	return code = 1

2011-03-28 17:03:00.171 02183 Wait(10)

2011-03-28 17:03:00.171 Requirement: ODSKC40

2011-03-28 17:03:10.171 02186 LoadConfig()
2011-03-28 17:03:10.171 Requirement: ODSKC40
2011-03-28 17:03:10.171 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:03:10.178 - runCommand: Process started, PID: 19716

2011-03-28 17:03:10.178 02189 LoadConfig()
2011-03-28 17:03:10.178 Requirement: ODSKC40
2011-03-28 17:03:10.178 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:03:10.184 - runCommand: Process started, PID: 19717

2011-03-28 17:03:10.184 02191 Comment: Update all the configs.

2011-03-28 17:03:10.184 Requirement: ODSKC40

2011-03-28 17:03:10.184 02193 UpdateAll()
2011-03-28 17:03:10.184 Requirement: ODSKC40
2011-03-28 17:03:10.184 RunCommand(ods-ksmutil update all)
2011-03-28 17:03:11.725 - runCommand: Process started, PID: 19718
2011-03-28 17:03:11.725 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:03:11.725 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:03:11.725 OUTPUT:	Repository SoftHSM found
2011-03-28 17:03:11.725 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:03:11.725 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:03:11.725 OUTPUT:	Policy default found
2011-03-28 17:03:11.725 OUTPUT:	Policy default2 found
2011-03-28 17:03:11.725 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:03:11.725 OUTPUT:	Zone ods found
2011-03-28 17:03:11.725 OUTPUT:	Policy set to default.
2011-03-28 17:03:11.725 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:03:11.726 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:03:11.726 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T80: Use a very high value for PublishSafety (P1Y) and confirm ods-kaspcheck runs successfully

2011-03-28 17:03:11.726 02198 Comment: PublishSafety value is very high (1 year: P1Y). Ods-kaspcheck should validate both kasp.xml as conf.xml.

2011-03-28 17:03:11.726 Requirement: ODSKC40

2011-03-28 17:03:11.726 02200 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:03:11.726 Requirement: ODSKC40

2011-03-28 17:03:11.726 02202 Stop()
2011-03-28 17:03:11.726 Requirement: ODSKC40
2011-03-28 17:03:11.726 RunCommand(ods-control stop)
2011-03-28 17:03:11.734 - runCommand: Process started, PID: 19726
2011-03-28 17:03:11.734 OUTPUT:	Stopping enforcer...
2011-03-28 17:03:11.734 OUTPUT:	Cannot find PID file
2011-03-28 17:03:11.734 OUTPUT:	Stopping signer engine..
2011-03-28 17:03:11.734 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:03:11.734 ERROR:	return code = 1
2011-03-28 17:03:11.734 RunCommand(ps -e | grep enforcer)
2011-03-28 17:03:11.752 - runCommand: Process started, PID: 19729
2011-03-28 17:03:11.752 ERROR:	return code = 1
2011-03-28 17:03:11.752 RunCommand(ps -e | grep signer)
2011-03-28 17:03:11.770 - runCommand: Process started, PID: 19732
2011-03-28 17:03:11.770 ERROR:	return code = 1

2011-03-28 17:03:11.770 02204 Wait(10)

2011-03-28 17:03:11.770 Requirement: ODSKC40

2011-03-28 17:03:21.770 02206 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:03:21.770 Requirement: ODSKC40

2011-03-28 17:03:21.771 02209 LoadConfig()
2011-03-28 17:03:21.771 Requirement: ODSKC40
2011-03-28 17:03:21.771 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:03:21.777 - runCommand: Process started, PID: 19735

2011-03-28 17:03:21.777 02212 LoadConfig()
2011-03-28 17:03:21.777 Requirement: ODSKC40
2011-03-28 17:03:21.777 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T80_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:03:21.783 - runCommand: Process started, PID: 19736

2011-03-28 17:03:21.783 02214 Comment: Update all the configs.

2011-03-28 17:03:21.783 Requirement: ODSKC40

2011-03-28 17:03:21.783 02216 UpdateAll()
2011-03-28 17:03:21.783 Requirement: ODSKC40
2011-03-28 17:03:21.783 RunCommand(ods-ksmutil update all)
2011-03-28 17:03:23.328 - runCommand: Process started, PID: 19737
2011-03-28 17:03:23.328 OUTPUT:	WARNING: Keys/PublishSafety (31536000 seconds) in default policy in /etc/opendnssec/kasp.xml is more than 5 * TTL (600 seconds)
2011-03-28 17:03:23.328 OUTPUT:	WARNING: In policy default,  Y used in duration field for Keys/PublishSafety (P1Y) in /etc/opendnssec/kasp.xml - this will be interpreted as 365 days
2011-03-28 17:03:23.328 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:03:23.328 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:03:23.328 OUTPUT:	Repository SoftHSM found
2011-03-28 17:03:23.328 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:03:23.328 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:03:23.328 OUTPUT:	Policy default found
2011-03-28 17:03:23.328 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:03:23.328 OUTPUT:	Policy default2 found
2011-03-28 17:03:23.328 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:03:23.328 OUTPUT:	Zone ods found
2011-03-28 17:03:23.328 OUTPUT:	Policy set to default.
2011-03-28 17:03:23.328 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:03:23.328 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:03:23.328 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 17:03:23.328 02218 Wait(10)

2011-03-28 17:03:23.328 Requirement: ODSKC40

2011-03-28 17:03:33.328 02220 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 17:03:33.328 Requirement: ODSKC40

2011-03-28 17:03:33.329 02225 CheckLog()
2011-03-28 17:03:33.329 Requirement: ODSKC40
2011-03-28 17:03:33.505 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 17:03:33.505 02228 CheckLog()
2011-03-28 17:03:33.505 Requirement: ODSKC40
2011-03-28 17:03:33.678 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml validates Found: 

2011-03-28 17:03:33.678 02231 Comment: Reset the config files to the original ones.

2011-03-28 17:03:33.678 Requirement: ODSKC40

2011-03-28 17:03:33.678 02233 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:03:33.678 Requirement: ODSKC40

2011-03-28 17:03:33.678 02235 Stop()
2011-03-28 17:03:33.678 Requirement: ODSKC40
2011-03-28 17:03:33.678 RunCommand(ods-control stop)
2011-03-28 17:03:33.683 - runCommand: Process started, PID: 19745
2011-03-28 17:03:33.683 OUTPUT:	Stopping enforcer...
2011-03-28 17:03:33.683 OUTPUT:	Cannot find PID file
2011-03-28 17:03:33.683 OUTPUT:	Stopping signer engine..
2011-03-28 17:03:33.683 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:03:33.683 ERROR:	return code = 1
2011-03-28 17:03:33.683 RunCommand(ps -e | grep enforcer)
2011-03-28 17:03:33.694 - runCommand: Process started, PID: 19748
2011-03-28 17:03:33.695 ERROR:	return code = 1
2011-03-28 17:03:33.695 RunCommand(ps -e | grep signer)
2011-03-28 17:03:33.706 - runCommand: Process started, PID: 19751
2011-03-28 17:03:33.706 ERROR:	return code = 1

2011-03-28 17:03:33.706 02237 Wait(10)

2011-03-28 17:03:33.706 Requirement: ODSKC40

2011-03-28 17:03:43.706 02240 LoadConfig()
2011-03-28 17:03:43.706 Requirement: ODSKC40
2011-03-28 17:03:43.706 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:03:43.713 - runCommand: Process started, PID: 19754

2011-03-28 17:03:43.713 02243 LoadConfig()
2011-03-28 17:03:43.713 Requirement: ODSKC40
2011-03-28 17:03:43.713 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:03:43.719 - runCommand: Process started, PID: 19755

2011-03-28 17:03:43.719 02245 Comment: Update all the configs.

2011-03-28 17:03:43.719 Requirement: ODSKC40

2011-03-28 17:03:43.719 02247 UpdateAll()
2011-03-28 17:03:43.719 Requirement: ODSKC40
2011-03-28 17:03:43.719 RunCommand(ods-ksmutil update all)
2011-03-28 17:03:45.233 - runCommand: Process started, PID: 19756
2011-03-28 17:03:45.233 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:03:45.233 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:03:45.233 OUTPUT:	Repository SoftHSM found
2011-03-28 17:03:45.233 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:03:45.233 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:03:45.233 OUTPUT:	Policy default found
2011-03-28 17:03:45.233 OUTPUT:	Policy default2 found
2011-03-28 17:03:45.233 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:03:45.233 OUTPUT:	Zone ods found
2011-03-28 17:03:45.233 OUTPUT:	Policy set to default.
2011-03-28 17:03:45.233 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:03:45.233 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:03:45.233 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T90: Deactivate PublishSafety (PT0S) and confirm ods-kaspcheck fails

2011-03-28 17:03:45.234 02256 Comment: Deactivate the PublishSafety by setting the time to zero (PT0S). Ods-kaspcheck should validate for conf.xml and fail for kasp.xml.

2011-03-28 17:03:45.234 Requirement: ODSKC40

2011-03-28 17:03:45.234 02258 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:03:45.234 Requirement: ODSKC40

2011-03-28 17:03:45.234 02260 Stop()
2011-03-28 17:03:45.234 Requirement: ODSKC40
2011-03-28 17:03:45.234 RunCommand(ods-control stop)
2011-03-28 17:03:45.242 - runCommand: Process started, PID: 19764
2011-03-28 17:03:45.242 OUTPUT:	Stopping enforcer...
2011-03-28 17:03:45.242 OUTPUT:	Cannot find PID file
2011-03-28 17:03:45.242 OUTPUT:	Stopping signer engine..
2011-03-28 17:03:45.242 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:03:45.242 ERROR:	return code = 1
2011-03-28 17:03:45.242 RunCommand(ps -e | grep enforcer)
2011-03-28 17:03:45.259 - runCommand: Process started, PID: 19767
2011-03-28 17:03:45.260 ERROR:	return code = 1
2011-03-28 17:03:45.260 RunCommand(ps -e | grep signer)
2011-03-28 17:03:45.277 - runCommand: Process started, PID: 19770
2011-03-28 17:03:45.277 ERROR:	return code = 1

2011-03-28 17:03:45.278 02262 Wait(10)

2011-03-28 17:03:45.278 Requirement: ODSKC40

2011-03-28 17:03:55.278 02264 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:03:55.278 Requirement: ODSKC40

2011-03-28 17:03:55.278 02267 LoadConfig()
2011-03-28 17:03:55.278 Requirement: ODSKC40
2011-03-28 17:03:55.278 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:03:55.284 - runCommand: Process started, PID: 19773

2011-03-28 17:03:55.285 02270 LoadConfig()
2011-03-28 17:03:55.285 Requirement: ODSKC40
2011-03-28 17:03:55.285 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T90_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:03:55.290 - runCommand: Process started, PID: 19774

2011-03-28 17:03:55.291 02272 Comment: Update all the configs.

2011-03-28 17:03:55.291 Requirement: ODSKC40

2011-03-28 17:03:55.291 02274 UpdateAll()
2011-03-28 17:03:55.291 Requirement: ODSKC40
2011-03-28 17:03:55.291 RunCommand(ods-ksmutil update all)
2011-03-28 17:03:56.744 - runCommand: Process started, PID: 19775
2011-03-28 17:03:56.744 OUTPUT:	WARNING: Keys/PublishSafety (0 seconds) in default policy in /etc/opendnssec/kasp.xml is less than 0.1 * TTL (600 seconds)
2011-03-28 17:03:56.744 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:03:56.744 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:03:56.744 OUTPUT:	Repository SoftHSM found
2011-03-28 17:03:56.744 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:03:56.744 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:03:56.744 OUTPUT:	Policy default found
2011-03-28 17:03:56.744 OUTPUT:	Policy default2 found
2011-03-28 17:03:56.744 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:03:56.744 OUTPUT:	Zone ods found
2011-03-28 17:03:56.744 OUTPUT:	Policy set to default.
2011-03-28 17:03:56.744 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:03:56.744 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:03:56.744 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 17:03:56.744 02276 Wait(10)

2011-03-28 17:03:56.744 Requirement: ODSKC40

2011-03-28 17:04:06.745 02278 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 17:04:06.745 Requirement: ODSKC40

2011-03-28 17:04:06.745 02283 CheckLog()
2011-03-28 17:04:06.745 Requirement: ODSKC40
2011-03-28 17:04:06.923 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 17:04:06.924 02286 CheckLog()
2011-03-28 17:04:06.924 Requirement: ODSKC40
2011-03-28 17:04:07.986 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml fails to validate Found: 

2011-03-28 17:04:07.988 02289 CheckLog()
2011-03-28 17:04:07.988 Requirement: ODSKC40
2011-03-28 17:04:07.271 FAILED:	(Check for Like) - Expected: WARNING: Keys/PublishSafety (0 seconds) in default policy in /etc/opendnssec/kasp.xml is less than 0.1 * TTL (600 seconds) Found: 

2011-03-28 17:04:07.271 02291 Comment: Reset the config files to the original ones.

2011-03-28 17:04:07.271 Requirement: ODSKC40

2011-03-28 17:04:07.271 02293 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:04:07.271 Requirement: ODSKC40

2011-03-28 17:04:07.272 02295 Stop()
2011-03-28 17:04:07.272 Requirement: ODSKC40
2011-03-28 17:04:07.272 RunCommand(ods-control stop)
2011-03-28 17:04:07.277 - runCommand: Process started, PID: 19783
2011-03-28 17:04:07.277 OUTPUT:	Stopping enforcer...
2011-03-28 17:04:07.277 OUTPUT:	Cannot find PID file
2011-03-28 17:04:07.277 OUTPUT:	Stopping signer engine..
2011-03-28 17:04:07.277 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:04:07.277 ERROR:	return code = 1
2011-03-28 17:04:07.277 RunCommand(ps -e | grep enforcer)
2011-03-28 17:04:07.288 - runCommand: Process started, PID: 19786
2011-03-28 17:04:07.288 ERROR:	return code = 1
2011-03-28 17:04:07.288 RunCommand(ps -e | grep signer)
2011-03-28 17:04:07.300 - runCommand: Process started, PID: 19789
2011-03-28 17:04:07.300 ERROR:	return code = 1

2011-03-28 17:04:07.300 02297 Wait(10)

2011-03-28 17:04:07.300 Requirement: ODSKC40

2011-03-28 17:04:17.301 02300 LoadConfig()
2011-03-28 17:04:17.301 Requirement: ODSKC40
2011-03-28 17:04:17.301 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:04:17.307 - runCommand: Process started, PID: 19792

2011-03-28 17:04:17.307 02303 LoadConfig()
2011-03-28 17:04:17.307 Requirement: ODSKC40
2011-03-28 17:04:17.307 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:04:17.313 - runCommand: Process started, PID: 19793

2011-03-28 17:04:17.313 02305 Comment: Update all the configs.

2011-03-28 17:04:17.313 Requirement: ODSKC40

2011-03-28 17:04:17.313 02307 UpdateAll()
2011-03-28 17:04:17.313 Requirement: ODSKC40
2011-03-28 17:04:17.313 RunCommand(ods-ksmutil update all)
2011-03-28 17:04:18.666 - runCommand: Process started, PID: 19794
2011-03-28 17:04:18.666 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:04:18.666 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:04:18.666 OUTPUT:	Repository SoftHSM found
2011-03-28 17:04:18.666 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:04:18.666 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:04:18.666 OUTPUT:	Policy default found
2011-03-28 17:04:18.666 OUTPUT:	Policy default2 found
2011-03-28 17:04:18.666 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:04:18.666 OUTPUT:	Zone ods found
2011-03-28 17:04:18.666 OUTPUT:	Policy set to default.
2011-03-28 17:04:18.666 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:04:18.666 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:04:18.666 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T100: Activate SharedKeys and confirm ZSK and ZSK is used by more then 1 zone

2011-03-28 17:04:18.667 02313 Comment: In this testcase it's checked whether the keys will be shared for 2 zones: ods & tes.

2011-03-28 17:04:18.667 Requirement: ODSKC40

2011-03-28 17:04:18.667 02315 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:04:18.667 Requirement: ODSKC40

2011-03-28 17:04:18.667 02317 Stop()
2011-03-28 17:04:18.667 Requirement: ODSKC40
2011-03-28 17:04:18.667 RunCommand(ods-control stop)
2011-03-28 17:04:18.674 - runCommand: Process started, PID: 19802
2011-03-28 17:04:18.674 OUTPUT:	Stopping enforcer...
2011-03-28 17:04:18.674 OUTPUT:	Cannot find PID file
2011-03-28 17:04:18.674 OUTPUT:	Stopping signer engine..
2011-03-28 17:04:18.674 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:04:18.674 ERROR:	return code = 1
2011-03-28 17:04:18.674 RunCommand(ps -e | grep enforcer)
2011-03-28 17:04:18.685 - runCommand: Process started, PID: 19805
2011-03-28 17:04:18.685 ERROR:	return code = 1
2011-03-28 17:04:18.685 RunCommand(ps -e | grep signer)
2011-03-28 17:04:18.697 - runCommand: Process started, PID: 19808
2011-03-28 17:04:18.697 ERROR:	return code = 1

2011-03-28 17:04:18.697 02319 Wait(10)

2011-03-28 17:04:18.697 Requirement: ODSKC40

2011-03-28 17:04:28.697 02321 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 17:04:28.697 Requirement: ODSKC40

2011-03-28 17:04:28.697 02327 Wait(15)

2011-03-28 17:04:28.697 Requirement: ODSKC40

2011-03-28 17:04:43.698 02329 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:04:43.698 Requirement: ODSKC40

2011-03-28 17:04:43.698 02332 LoadConfig()
2011-03-28 17:04:43.698 Requirement: ODSKC40
2011-03-28 17:04:43.698 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:04:43.704 - runCommand: Process started, PID: 19811

2011-03-28 17:04:43.705 02335 LoadConfig()
2011-03-28 17:04:43.705 Requirement: ODSKC40
2011-03-28 17:04:43.705 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T100_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:04:43.710 - runCommand: Process started, PID: 19812

2011-03-28 17:04:43.710 02338 LoadConfig()
2011-03-28 17:04:43.710 Requirement: ODSKC40
2011-03-28 17:04:43.710 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/zonelist/ODSKC40T100_zonelist.xml /etc/opendnssec/zonelist.xml)
2011-03-28 17:04:43.716 - runCommand: Process started, PID: 19813

2011-03-28 17:04:43.716 02340 Comment: Update all the configs.

2011-03-28 17:04:43.716 Requirement: ODSKC40

2011-03-28 17:04:43.717 02342 UpdateAll()
2011-03-28 17:04:43.717 Requirement: ODSKC40
2011-03-28 17:04:43.717 RunCommand(ods-ksmutil update all)
2011-03-28 17:04:45.119 - runCommand: Process started, PID: 19814
2011-03-28 17:04:45.119 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:04:45.119 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:04:45.119 OUTPUT:	Repository SoftHSM found
2011-03-28 17:04:45.119 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:04:45.119 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:04:45.119 OUTPUT:	Policy default found
2011-03-28 17:04:45.119 OUTPUT:	Policy default2 found
2011-03-28 17:04:45.119 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:04:45.119 OUTPUT:	Zone ods found
2011-03-28 17:04:45.119 OUTPUT:	Policy set to default.
2011-03-28 17:04:45.119 OUTPUT:	Zone tes found
2011-03-28 17:04:45.119 OUTPUT:	Policy set to default.
2011-03-28 17:04:45.119 OUTPUT:	Added zone tes to database
2011-03-28 17:04:45.119 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:04:45.119 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:04:45.119 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 17:04:45.120 02344 Wait(20)

2011-03-28 17:04:45.120 Requirement: ODSKC40

2011-03-28 17:05:05.120 02346 Comment: Check if the conf and kasp.xml files validate.

2011-03-28 17:05:05.120 Requirement: ODSKC40

2011-03-28 17:05:05.120 02351 CheckLog()
2011-03-28 17:05:05.120 Requirement: ODSKC40

2011-03-28 17:05:05.300 02354 CheckLog()
2011-03-28 17:05:05.300 Requirement: ODSKC40

2011-03-28 17:05:05.474 02357 UpdateAll()
2011-03-28 17:05:05.474 Requirement: ODSKC40
2011-03-28 17:05:05.474 RunCommand(ods-ksmutil update all)
2011-03-28 17:05:06.825 - runCommand: Process started, PID: 19822
2011-03-28 17:05:06.825 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:05:06.825 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:05:06.825 OUTPUT:	Repository SoftHSM found
2011-03-28 17:05:06.825 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:05:06.825 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:05:06.825 OUTPUT:	Policy default found
2011-03-28 17:05:06.825 OUTPUT:	Policy default2 found
2011-03-28 17:05:06.825 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:05:06.825 OUTPUT:	Zone ods found
2011-03-28 17:05:06.825 OUTPUT:	Policy set to default.
2011-03-28 17:05:06.825 OUTPUT:	Zone tes found
2011-03-28 17:05:06.825 OUTPUT:	Policy set to default.
2011-03-28 17:05:06.825 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:05:06.825 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:05:06.825 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 17:05:06.825 02359 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:05:06.825 Requirement: ODSKC40

2011-03-28 17:05:06.825 02361 Wait(20)

2011-03-28 17:05:06.825 Requirement: ODSKC40

2011-03-28 17:05:26.826 02363 Comment: Now sign the new zone "tes" and check whether the signing is succesfull and a new signed zonefile will be created.

2011-03-28 17:05:26.826 Requirement: ODSKC40

2011-03-28 17:05:26.826 02367 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:05:26.826 Requirement: ODSKC40

2011-03-28 17:05:26.826 02369 Stop()
2011-03-28 17:05:26.826 Requirement: ODSKC40
2011-03-28 17:05:26.826 RunCommand(ods-control stop)
2011-03-28 17:05:26.834 - runCommand: Process started, PID: 19830
2011-03-28 17:05:26.834 OUTPUT:	Stopping enforcer...
2011-03-28 17:05:26.834 OUTPUT:	Cannot find PID file
2011-03-28 17:05:26.834 OUTPUT:	Stopping signer engine..
2011-03-28 17:05:26.834 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:05:26.834 ERROR:	return code = 1
2011-03-28 17:05:26.834 RunCommand(ps -e | grep enforcer)
2011-03-28 17:05:26.849 - runCommand: Process started, PID: 19833
2011-03-28 17:05:26.849 ERROR:	return code = 1
2011-03-28 17:05:26.849 RunCommand(ps -e | grep signer)
2011-03-28 17:05:26.860 - runCommand: Process started, PID: 19836
2011-03-28 17:05:26.860 ERROR:	return code = 1

2011-03-28 17:05:26.860 02371 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-28 17:05:26.860 Requirement: ODSKC40

2011-03-28 17:05:26.860 02374 CheckLog()
2011-03-28 17:05:26.860 Requirement: ODSKC40

2011-03-28 17:05:27.353 02376 Comment: Check also if a new signed zonefile has been created for the "tes" zone.

2011-03-28 17:05:27.353 Requirement: ODSKC40

2011-03-28 17:05:27.354 02379 CheckFilePresent(/var/opendnssec/signed/tes)
2011-03-28 17:05:27.355 Requirement: ODSKC40
2011-03-28 17:05:27.355 FAILED:	(Check for Equal) - Expected: /var/opendnssec/signed/tes Found: 

2011-03-28 17:05:27.356 02381 Comment: Check in the key repository if the keytags for the "ods" zone (KSK and ZSK) are the same as the keytags for the "tes" zone.

2011-03-28 17:05:27.356 Requirement: ODSKC40
SQLite database set to: /var/opendnssec/kasp.db
SQLite database set to: /var/opendnssec/kasp.db

2011-03-28 17:05:27.598 02384 ZoneSharedKeys(ods, tes)
2011-03-28 17:05:27.599 Requirement: ODSKC40
FAILED

2011-03-28 17:05:27.600 02387 Comment: Reset the config files to the original values

2011-03-28 17:05:27.600 Requirement: ODSKC40

2011-03-28 17:05:27.601 02390 Wait(10)

2011-03-28 17:05:27.601 Requirement: ODSKC40

2011-03-28 17:05:37.604 02393 LoadConfig()
2011-03-28 17:05:37.604 Requirement: ODSKC40
2011-03-28 17:05:37.605 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/zonelist/zonelist.xml /etc/opendnssec/zonelist.xml)
2011-03-28 17:05:37.668 - runCommand: Process started, PID: 19843

2011-03-28 17:05:37.671 02396 LoadConfig()
2011-03-28 17:05:37.672 Requirement: ODSKC40
2011-03-28 17:05:37.672 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:05:37.727 - runCommand: Process started, PID: 19844

2011-03-28 17:05:37.730 02399 LoadConfig()
2011-03-28 17:05:37.730 Requirement: ODSKC40
2011-03-28 17:05:37.731 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:05:37.786 - runCommand: Process started, PID: 19845

2011-03-28 17:05:37.788 02401 Comment: Update all the configs.

2011-03-28 17:05:37.789 Requirement: ODSKC40

2011-03-28 17:05:37.790 02403 UpdateAll()
2011-03-28 17:05:37.790 Requirement: ODSKC40
2011-03-28 17:05:37.791 RunCommand(ods-ksmutil update all)
2011-03-28 17:05:38.583 - runCommand: Process started, PID: 19846
2011-03-28 17:05:38.583 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:05:38.583 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:05:38.583 OUTPUT:	Repository SoftHSM found
2011-03-28 17:05:38.583 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:05:38.583 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:05:38.583 OUTPUT:	Policy default found
2011-03-28 17:05:38.583 OUTPUT:	Policy default2 found
2011-03-28 17:05:38.583 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:05:38.583 OUTPUT:	Zone ods found
2011-03-28 17:05:38.583 OUTPUT:	Policy set to default.
2011-03-28 17:05:38.583 OUTPUT:	Removing zone tes from database
2011-03-28 17:05:38.584 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:05:38.584 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:05:38.584 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T110: Deactivate SharedKeys and confirm every zone has an unique ZSK and ZSK

2011-03-28 17:05:38.584 02408 Comment: In this testcase it's checked whether the keys for 2 zones will be different when the keysharing will be turned off in the kasp.xml.

2011-03-28 17:05:38.584 Requirement: ODSKC40

2011-03-28 17:05:38.584 02410 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:05:38.584 Requirement: ODSKC40

2011-03-28 17:05:38.584 02412 Stop()
2011-03-28 17:05:38.584 Requirement: ODSKC40
2011-03-28 17:05:38.584 RunCommand(ods-control stop)
2011-03-28 17:05:38.592 - runCommand: Process started, PID: 19854
2011-03-28 17:05:38.592 OUTPUT:	Stopping enforcer...
2011-03-28 17:05:38.592 OUTPUT:	Cannot find PID file
2011-03-28 17:05:38.592 OUTPUT:	Stopping signer engine..
2011-03-28 17:05:38.592 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:05:38.592 ERROR:	return code = 1
2011-03-28 17:05:38.592 RunCommand(ps -e | grep enforcer)
2011-03-28 17:05:38.608 - runCommand: Process started, PID: 19857
2011-03-28 17:05:38.608 ERROR:	return code = 1
2011-03-28 17:05:38.609 RunCommand(ps -e | grep signer)
2011-03-28 17:05:38.620 - runCommand: Process started, PID: 19860
2011-03-28 17:05:38.620 ERROR:	return code = 1

2011-03-28 17:05:38.620 02414 Wait(10)

2011-03-28 17:05:38.620 Requirement: ODSKC40

2011-03-28 17:05:48.620 02416 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 17:05:48.621 Requirement: ODSKC40

2011-03-28 17:05:48.621 02422 Wait(15)

2011-03-28 17:05:48.621 Requirement: ODSKC40

2011-03-28 17:06:03.621 02424 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:06:03.621 Requirement: ODSKC40

2011-03-28 17:06:03.621 02427 LoadConfig()
2011-03-28 17:06:03.621 Requirement: ODSKC40
2011-03-28 17:06:03.621 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:06:03.628 - runCommand: Process started, PID: 19863

2011-03-28 17:06:03.628 02430 LoadConfig()
2011-03-28 17:06:03.628 Requirement: ODSKC40
2011-03-28 17:06:03.628 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T110_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:06:03.634 - runCommand: Process started, PID: 19864

2011-03-28 17:06:03.634 02433 LoadConfig()
2011-03-28 17:06:03.634 Requirement: ODSKC40
2011-03-28 17:06:03.634 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/zonelist/ODSKC40T100_zonelist.xml /etc/opendnssec/zonelist.xml)
2011-03-28 17:06:03.639 - runCommand: Process started, PID: 19865

2011-03-28 17:06:03.640 02435 Comment: Update all the configs.

2011-03-28 17:06:03.640 Requirement: ODSKC40

2011-03-28 17:06:03.640 02437 UpdateAll()
2011-03-28 17:06:03.640 Requirement: ODSKC40
2011-03-28 17:06:03.640 RunCommand(ods-ksmutil update all)
2011-03-28 17:06:05.195 - runCommand: Process started, PID: 19866
2011-03-28 17:06:05.195 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:06:05.195 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:06:05.195 OUTPUT:	Repository SoftHSM found
2011-03-28 17:06:05.195 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:06:05.195 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:06:05.195 OUTPUT:	Policy default found
2011-03-28 17:06:05.195 OUTPUT:	Policy default2 found
2011-03-28 17:06:05.195 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:06:05.195 OUTPUT:	Zone ods found
2011-03-28 17:06:05.195 OUTPUT:	Policy set to default.
2011-03-28 17:06:05.195 OUTPUT:	Zone tes found
2011-03-28 17:06:05.195 OUTPUT:	Policy set to default.
2011-03-28 17:06:05.195 OUTPUT:	Added zone tes to database
2011-03-28 17:06:05.195 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:06:05.195 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:06:05.195 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 17:06:05.195 02439 Wait(20)

2011-03-28 17:06:05.195 Requirement: ODSKC40

2011-03-28 17:06:25.196 02441 Comment: Check if the conf and kasp.xml files validate. 

2011-03-28 17:06:25.196 Requirement: ODSKC40

2011-03-28 17:06:25.196 02446 CheckLog()
2011-03-28 17:06:25.196 Requirement: ODSKC40

2011-03-28 17:06:25.376 02449 CheckLog()
2011-03-28 17:06:25.376 Requirement: ODSKC40

2011-03-28 17:06:25.549 02451 Comment: Perform a new setup for ODS. Old keys will be removed.

2011-03-28 17:06:25.549 Requirement: ODSKC40

2011-03-28 17:06:25.549 02455 Comment: Start the ODS-Enforcer and ODS-Signer.

2011-03-28 17:06:25.549 Requirement: ODSKC40

2011-03-28 17:06:25.549 02457 Comment: New keys will be created for the "ods" zone and the "tes" zone.

2011-03-28 17:06:25.549 Requirement: ODSKC40

2011-03-28 17:06:25.549 02459 Wait(20)

2011-03-28 17:06:25.549 Requirement: ODSKC40

2011-03-28 17:06:45.549 02461 Comment: Now sign the new zone "tes" and check whether the signing is succesfull and a new signed zonefile will be created.

2011-03-28 17:06:45.549 Requirement: ODSKC40

2011-03-28 17:06:45.549 02465 Comment: Check if the signing was succesfull. If a notify (new zonefile update) is available in the logging, the signing was succesful.

2011-03-28 17:06:45.549 Requirement: ODSKC40

2011-03-28 17:06:45.550 02467 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:06:45.550 Requirement: ODSKC40

2011-03-28 17:06:45.550 02469 Stop()
2011-03-28 17:06:45.550 Requirement: ODSKC40
2011-03-28 17:06:45.550 RunCommand(ods-control stop)
2011-03-28 17:06:45.558 - runCommand: Process started, PID: 19874
2011-03-28 17:06:45.558 OUTPUT:	Stopping enforcer...
2011-03-28 17:06:45.558 OUTPUT:	Cannot find PID file
2011-03-28 17:06:45.558 OUTPUT:	Stopping signer engine..
2011-03-28 17:06:45.558 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:06:45.558 ERROR:	return code = 1
2011-03-28 17:06:45.558 RunCommand(ps -e | grep enforcer)
2011-03-28 17:06:45.575 - runCommand: Process started, PID: 19877
2011-03-28 17:06:45.576 ERROR:	return code = 1
2011-03-28 17:06:45.576 RunCommand(ps -e | grep signer)
2011-03-28 17:06:45.593 - runCommand: Process started, PID: 19880
2011-03-28 17:06:45.593 ERROR:	return code = 1

2011-03-28 17:06:45.594 02472 CheckLog()
2011-03-28 17:06:45.594 Requirement: ODSKC40

2011-03-28 17:06:45.774 02474 Comment: Check also if a new signed zonefile has been created for the "tes" zone.

2011-03-28 17:06:45.774 Requirement: ODSKC40

2011-03-28 17:06:45.775 02477 CheckFilePresent(/var/opendnssec/signed/tes)
2011-03-28 17:06:45.775 Requirement: ODSKC40
2011-03-28 17:06:45.775 FAILED:	(Check for Equal) - Expected: /var/opendnssec/signed/tes Found: 

2011-03-28 17:06:45.775 02479 Comment: Check in the key repository if the keytags for the "ods" zone (KSK and ZSK) are the same as the keytags for the "tes" zone.

2011-03-28 17:06:45.775 Requirement: ODSKC40
SQLite database set to: /var/opendnssec/kasp.db
SQLite database set to: /var/opendnssec/kasp.db

2011-03-28 17:06:45.800 02482 ZoneSharedKeys(ods, tes)
2011-03-28 17:06:45.800 Requirement: ODSKC40
FAILED

2011-03-28 17:06:45.800 02484 Comment: The keys should be different. The compare should fail.

2011-03-28 17:06:45.800 Requirement: ODSKC40

2011-03-28 17:06:45.801 02486 Comment: Reset the config files to the original values

2011-03-28 17:06:45.801 Requirement: ODSKC40

2011-03-28 17:06:45.801 02489 Wait(10)

2011-03-28 17:06:45.801 Requirement: ODSKC40

2011-03-28 17:06:55.801 02492 LoadConfig()
2011-03-28 17:06:55.801 Requirement: ODSKC40
2011-03-28 17:06:55.801 RunCommand(cp /home/ods/ods_testautomation/ods_sit_conf/zonelist/zonelist.xml /etc/opendnssec/zonelist.xml)
2011-03-28 17:06:55.807 - runCommand: Process started, PID: 19887

2011-03-28 17:06:55.808 02495 LoadConfig()
2011-03-28 17:06:55.808 Requirement: ODSKC40
2011-03-28 17:06:55.808 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:06:55.813 - runCommand: Process started, PID: 19888

2011-03-28 17:06:55.814 02498 LoadConfig()
2011-03-28 17:06:55.814 Requirement: ODSKC40
2011-03-28 17:06:55.814 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:06:55.820 - runCommand: Process started, PID: 19889

2011-03-28 17:06:55.820 02500 Comment: Update all the configs.

2011-03-28 17:06:55.820 Requirement: ODSKC40

2011-03-28 17:06:55.820 02502 UpdateAll()
2011-03-28 17:06:55.820 Requirement: ODSKC40
2011-03-28 17:06:55.820 RunCommand(ods-ksmutil update all)
2011-03-28 17:06:57.318 - runCommand: Process started, PID: 19890
2011-03-28 17:06:57.318 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:06:57.318 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:06:57.318 OUTPUT:	Repository SoftHSM found
2011-03-28 17:06:57.318 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:06:57.318 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:06:57.318 OUTPUT:	Policy default found
2011-03-28 17:06:57.318 OUTPUT:	Policy default2 found
2011-03-28 17:06:57.318 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:06:57.318 OUTPUT:	Zone ods found
2011-03-28 17:06:57.318 OUTPUT:	Policy set to default.
2011-03-28 17:06:57.318 OUTPUT:	Removing zone tes from database
2011-03-28 17:06:57.318 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:06:57.318 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:06:57.318 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T120: Use a value with an incorrect format for Purge (D) and confirm ods-kaspcheck fails

2011-03-28 17:06:57.319 02509 Comment: Purge value in the keys part (general part) is incorrect: D instead of a valid value like PT10M. Ods-kaspcheck validation should fail for kasp.xml.

2011-03-28 17:06:57.319 Requirement: ODSKC40

2011-03-28 17:06:57.319 02511 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:06:57.319 Requirement: ODSKC40

2011-03-28 17:06:57.319 02513 Stop()
2011-03-28 17:06:57.319 Requirement: ODSKC40
2011-03-28 17:06:57.319 RunCommand(ods-control stop)
2011-03-28 17:06:57.326 - runCommand: Process started, PID: 19898
2011-03-28 17:06:57.326 OUTPUT:	Stopping enforcer...
2011-03-28 17:06:57.326 OUTPUT:	Cannot find PID file
2011-03-28 17:06:57.326 OUTPUT:	Stopping signer engine..
2011-03-28 17:06:57.326 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:06:57.326 ERROR:	return code = 1
2011-03-28 17:06:57.326 RunCommand(ps -e | grep enforcer)
2011-03-28 17:06:57.337 - runCommand: Process started, PID: 19901
2011-03-28 17:06:57.337 ERROR:	return code = 1
2011-03-28 17:06:57.337 RunCommand(ps -e | grep signer)
2011-03-28 17:06:57.348 - runCommand: Process started, PID: 19904
2011-03-28 17:06:57.348 ERROR:	return code = 1

2011-03-28 17:06:57.349 02515 Wait(10)

2011-03-28 17:06:57.349 Requirement: ODSKC40

2011-03-28 17:07:07.349 02517 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:07:07.349 Requirement: ODSKC40

2011-03-28 17:07:07.349 02520 LoadConfig()
2011-03-28 17:07:07.349 Requirement: ODSKC40
2011-03-28 17:07:07.349 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:07:07.355 - runCommand: Process started, PID: 19907

2011-03-28 17:07:07.356 02523 LoadConfig()
2011-03-28 17:07:07.356 Requirement: ODSKC40
2011-03-28 17:07:07.356 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T120_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:07:07.361 - runCommand: Process started, PID: 19908

2011-03-28 17:07:07.362 02525 Comment: Update all the configs.

2011-03-28 17:07:07.362 Requirement: ODSKC40

2011-03-28 17:07:07.362 02527 UpdateAll()
2011-03-28 17:07:07.362 Requirement: ODSKC40
2011-03-28 17:07:07.362 RunCommand(ods-ksmutil update all)
2011-03-28 17:07:08.754 - runCommand: Process started, PID: 19909
2011-03-28 17:07:08.754 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:07:08.754 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:07:08.754 OUTPUT:	Repository SoftHSM found
2011-03-28 17:07:08.754 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:07:08.754 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:07:08.754 OUTPUT:	Policy default found
2011-03-28 17:07:08.754 OUTPUT:	Policy default2 found
2011-03-28 17:07:08.754 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:07:08.754 OUTPUT:	Zone ods found
2011-03-28 17:07:08.754 OUTPUT:	Policy set to default.
2011-03-28 17:07:08.754 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:07:08.754 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:07:08.754 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 17:07:08.754 02529 Wait(10)

2011-03-28 17:07:08.754 Requirement: ODSKC40

2011-03-28 17:07:18.755 02531 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 17:07:18.755 Requirement: ODSKC40

2011-03-28 17:07:18.755 02536 CheckLog()
2011-03-28 17:07:18.755 Requirement: ODSKC40

2011-03-28 17:07:18.934 02539 CheckLog()
2011-03-28 17:07:18.934 Requirement: ODSKC40

2011-03-28 17:07:19.108 02542 CheckLog()
2011-03-28 17:07:19.108 Requirement: ODSKC40

2011-03-28 17:07:19.281 02544 Comment: Reset the config files to the original ones.

2011-03-28 17:07:19.282 Requirement: ODSKC40

2011-03-28 17:07:19.282 02546 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:07:19.282 Requirement: ODSKC40

2011-03-28 17:07:19.282 02548 Stop()
2011-03-28 17:07:19.282 Requirement: ODSKC40
2011-03-28 17:07:19.282 RunCommand(ods-control stop)
2011-03-28 17:07:19.287 - runCommand: Process started, PID: 19917
2011-03-28 17:07:19.287 OUTPUT:	Stopping enforcer...
2011-03-28 17:07:19.287 OUTPUT:	Cannot find PID file
2011-03-28 17:07:19.287 OUTPUT:	Stopping signer engine..
2011-03-28 17:07:19.287 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:07:19.287 ERROR:	return code = 1
2011-03-28 17:07:19.287 RunCommand(ps -e | grep enforcer)
2011-03-28 17:07:19.298 - runCommand: Process started, PID: 19920
2011-03-28 17:07:19.298 ERROR:	return code = 1
2011-03-28 17:07:19.298 RunCommand(ps -e | grep signer)
2011-03-28 17:07:19.310 - runCommand: Process started, PID: 19923
2011-03-28 17:07:19.310 ERROR:	return code = 1

2011-03-28 17:07:19.310 02550 Wait(10)

2011-03-28 17:07:19.310 Requirement: ODSKC40

2011-03-28 17:07:29.310 02553 LoadConfig()
2011-03-28 17:07:29.310 Requirement: ODSKC40
2011-03-28 17:07:29.310 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:07:29.317 - runCommand: Process started, PID: 19926

2011-03-28 17:07:29.317 02556 LoadConfig()
2011-03-28 17:07:29.317 Requirement: ODSKC40
2011-03-28 17:07:29.317 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:07:29.320 - runCommand: Process started, PID: 19927

2011-03-28 17:07:29.320 02558 Comment: Update all the configs.

2011-03-28 17:07:29.320 Requirement: ODSKC40

2011-03-28 17:07:29.321 02560 UpdateAll()
2011-03-28 17:07:29.321 Requirement: ODSKC40
2011-03-28 17:07:29.321 RunCommand(ods-ksmutil update all)
2011-03-28 17:07:30.634 - runCommand: Process started, PID: 19928
2011-03-28 17:07:30.634 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:07:30.634 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:07:30.634 OUTPUT:	Repository SoftHSM found
2011-03-28 17:07:30.634 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:07:30.634 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:07:30.634 OUTPUT:	Policy default found
2011-03-28 17:07:30.635 OUTPUT:	Policy default2 found
2011-03-28 17:07:30.635 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:07:30.635 OUTPUT:	Zone ods found
2011-03-28 17:07:30.635 OUTPUT:	Policy set to default.
2011-03-28 17:07:30.635 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:07:30.635 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:07:30.635 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T130: Use a very high value for Purge (P1M) while having a low capacity HSM (10) and daily rollovers which results in full HSM 

2011-03-28 17:07:30.635 02564 Comment: Purge value is very high, key repository capacity very low (10). Roll-over of the ZSK every minute, re-signing also every minute; key repository will be full within 5 minutes.

2011-03-28 17:07:30.635 Requirement: ODSKC40

2011-03-28 17:07:30.635 02566 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:07:30.635 Requirement: ODSKC40

2011-03-28 17:07:30.635 02568 Stop()
2011-03-28 17:07:30.635 Requirement: ODSKC40
2011-03-28 17:07:30.636 RunCommand(ods-control stop)
2011-03-28 17:07:30.643 - runCommand: Process started, PID: 19936
2011-03-28 17:07:30.643 OUTPUT:	Stopping enforcer...
2011-03-28 17:07:30.643 OUTPUT:	Cannot find PID file
2011-03-28 17:07:30.643 OUTPUT:	Stopping signer engine..
2011-03-28 17:07:30.643 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:07:30.643 ERROR:	return code = 1
2011-03-28 17:07:30.643 RunCommand(ps -e | grep enforcer)
2011-03-28 17:07:30.662 - runCommand: Process started, PID: 19939
2011-03-28 17:07:30.663 ERROR:	return code = 1
2011-03-28 17:07:30.663 RunCommand(ps -e | grep signer)
2011-03-28 17:07:30.674 - runCommand: Process started, PID: 19942
2011-03-28 17:07:30.674 ERROR:	return code = 1

2011-03-28 17:07:30.674 02570 Wait(10)

2011-03-28 17:07:30.674 Requirement: ODSKC40

2011-03-28 17:07:40.674 02572 Comment: Clear the tmp folder with the next command.

2011-03-28 17:07:40.674 Requirement: ODSKC40

2011-03-28 17:07:40.674 02576 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:07:40.674 Requirement: ODSKC40

2011-03-28 17:07:40.675 02580 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:07:40.675 Requirement: ODSKC40

2011-03-28 17:07:40.675 02583 LoadConfig()
2011-03-28 17:07:40.675 Requirement: ODSKC40
2011-03-28 17:07:40.675 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/ODSKC40T130_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:07:40.681 - runCommand: Process started, PID: 19945

2011-03-28 17:07:40.681 02586 LoadConfig()
2011-03-28 17:07:40.682 Requirement: ODSKC40
2011-03-28 17:07:40.682 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T130_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:07:40.687 - runCommand: Process started, PID: 19946

2011-03-28 17:07:40.688 02588 Comment: New setup for the configs and key repository

2011-03-28 17:07:40.688 Requirement: ODSKC40

2011-03-28 17:07:40.688 02592 Wait(10)

2011-03-28 17:07:40.688 Requirement: ODSKC40

2011-03-28 17:07:50.688 02594 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:07:50.688 Requirement: ODSKC40

2011-03-28 17:07:50.688 02596 Start()
2011-03-28 17:07:50.688 Requirement: ODSKC40
2011-03-28 17:07:50.688 RunCommand(ods-control start)
2011-03-28 17:07:50.691 - runCommand: Background process started, PID: 19947
2011-03-28 17:07:55.719 ERROR:	return code = 1
2011-03-28 17:07:55.719 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:07:55.731 - runCommand: Process started, PID: 19967
2011-03-28 17:07:55.731 ERROR:	return code = 1
2011-03-28 17:07:55.731 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:07:55.745 - runCommand: Process started, PID: 19971

2011-03-28 17:07:55.745 02598 Comment: Wait 5 minutes

2011-03-28 17:07:55.745 Requirement: ODSKC40

2011-03-28 17:07:55.745 02600 Wait(300)

2011-03-28 17:07:55.745 Requirement: ODSKC40

2011-03-28 17:12:55.746 02602 Comment: Check in the log if the SoftHSM key repository is full after 5 minutes (5 times roll-over).

2011-03-28 17:12:55.746 Requirement: ODSKC40

2011-03-28 17:12:55.746 02605 CheckLog()
2011-03-28 17:12:55.746 Requirement: ODSKC40

2011-03-28 17:12:55.922 02607 Comment: 

2011-03-28 17:12:55.922 Requirement: ODSKC40

2011-03-28 17:12:55.922 02609 Comment: Reset the config files to the original ones.

2011-03-28 17:12:55.922 Requirement: ODSKC40

2011-03-28 17:12:55.922 02611 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:12:55.922 Requirement: ODSKC40

2011-03-28 17:12:55.923 02613 Stop()
2011-03-28 17:12:55.923 Requirement: ODSKC40
2011-03-28 17:12:55.923 RunCommand(ods-control stop)
2011-03-28 17:12:55.928 - runCommand: Process started, PID: 19977
2011-03-28 17:12:55.928 OUTPUT:	Stopping enforcer...
2011-03-28 17:12:55.928 OUTPUT:	Cannot find PID file
2011-03-28 17:12:55.928 OUTPUT:	Stopping signer engine..
2011-03-28 17:12:55.928 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:12:55.928 ERROR:	return code = 1
2011-03-28 17:12:55.928 RunCommand(ps -e | grep enforcer)
2011-03-28 17:12:55.939 - runCommand: Process started, PID: 19980
2011-03-28 17:12:55.939 ERROR:	return code = 1
2011-03-28 17:12:55.939 RunCommand(ps -e | grep signer)
2011-03-28 17:12:55.950 - runCommand: Process started, PID: 19983
2011-03-28 17:12:55.950 ERROR:	return code = 1

2011-03-28 17:12:55.950 02615 Wait(10)

2011-03-28 17:12:55.950 Requirement: ODSKC40

2011-03-28 17:13:05.950 02617 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:13:05.950 Requirement: ODSKC40

2011-03-28 17:13:05.950 02622 LoadConfig()
2011-03-28 17:13:05.950 Requirement: ODSKC40
2011-03-28 17:13:05.950 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:13:05.957 - runCommand: Process started, PID: 19986

2011-03-28 17:13:05.957 02625 LoadConfig()
2011-03-28 17:13:05.957 Requirement: ODSKC40
2011-03-28 17:13:05.957 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:13:05.963 - runCommand: Process started, PID: 19987

2011-03-28 17:13:05.963 02627 Comment: New setup for the configs and key repository

2011-03-28 17:13:05.963 Requirement: ODSKC40

2011-03-28 17:13:05.963 02631 Wait(10)

2011-03-28 17:13:05.963 Requirement: ODSKC40

2011-03-28 17:13:15.963 02633 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:13:15.963 Requirement: ODSKC40

2011-03-28 17:13:15.964 02635 Start()
2011-03-28 17:13:15.964 Requirement: ODSKC40
2011-03-28 17:13:15.964 RunCommand(ods-control start)
2011-03-28 17:13:15.966 - runCommand: Background process started, PID: 19988
2011-03-28 17:13:16.984 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:13:17.377 - runCommand: Process started, PID: 20006
2011-03-28 17:13:17.384 OUTPUT:	ods-enforcerd
2011-03-28 17:13:17.387 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:13:17.253 - runCommand: Process started, PID: 20011
2011-03-28 17:13:17.253 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:13:17.255 02637 Wait(30)

2011-03-28 17:13:17.255 Requirement: ODSKC40

2011-03-28 17:13:47.258 02639 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:13:47.258 Requirement: ODSKC40

2011-03-28 17:13:47.260 02641 Stop()
2011-03-28 17:13:47.260 Requirement: ODSKC40
2011-03-28 17:13:47.260 RunCommand(ods-control stop)
2011-03-28 17:13:48.378 - runCommand: Process started, PID: 20038
2011-03-28 17:13:48.379 OUTPUT:	Stopping enforcer...
2011-03-28 17:13:48.379 OUTPUT:	Stopping signer engine..
2011-03-28 17:13:48.379 OUTPUT:	Engine shut down.
2011-03-28 17:13:48.379 RunCommand(ps -e | grep enforcer)
2011-03-28 17:13:48.559 - runCommand: Process started, PID: 20044
2011-03-28 17:13:48.560 ERROR:	return code = 1
2011-03-28 17:13:48.561 RunCommand(ps -e | grep signer)
2011-03-28 17:13:48.737 - runCommand: Process started, PID: 20047
2011-03-28 17:13:48.738 ERROR:	return code = 1

-------------------------------------------------------------------------------
Wide character in print at ActionWords.pm line 830, <ERROR> line 412.
Testcase - ODSKC40T140: Use a very low value for Purge (PT1M) while having a low capacity HSM (4) and confirm “dead” keys to be deleted directly

2011-03-28 17:13:48.741 02646 Comment: Purge value is very low (PT1M), key repository capacity very low (4). Roll-over of the ZSK every 2 minutes, re-signing also every 2 minutes; dead keys will be deleted directly.

2011-03-28 17:13:48.741 Requirement: ODSKC40

2011-03-28 17:13:48.742 02648 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:13:48.742 Requirement: ODSKC40

2011-03-28 17:13:48.743 02650 Stop()
2011-03-28 17:13:48.743 Requirement: ODSKC40
2011-03-28 17:13:48.743 RunCommand(ods-control stop)
2011-03-28 17:13:48.788 - runCommand: Process started, PID: 20050
2011-03-28 17:13:48.788 OUTPUT:	Stopping enforcer...
2011-03-28 17:13:48.788 OUTPUT:	Cannot find PID file
2011-03-28 17:13:48.788 OUTPUT:	Stopping signer engine..
2011-03-28 17:13:48.788 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:13:48.789 ERROR:	return code = 1
2011-03-28 17:13:48.789 RunCommand(ps -e | grep enforcer)
2011-03-28 17:13:48.896 - runCommand: Process started, PID: 20053
2011-03-28 17:13:48.897 ERROR:	return code = 1
2011-03-28 17:13:48.897 RunCommand(ps -e | grep signer)
2011-03-28 17:13:48.101 - runCommand: Process started, PID: 20056
2011-03-28 17:13:48.102 ERROR:	return code = 1

2011-03-28 17:13:48.102 02652 Wait(10)

2011-03-28 17:13:48.102 Requirement: ODSKC40

2011-03-28 17:13:58.102 02654 Comment: Clear the tmp folder with the next command.

2011-03-28 17:13:58.102 Requirement: ODSKC40

2011-03-28 17:13:58.102 02658 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:13:58.102 Requirement: ODSKC40

2011-03-28 17:13:58.102 02662 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:13:58.102 Requirement: ODSKC40

2011-03-28 17:13:58.103 02665 LoadConfig()
2011-03-28 17:13:58.103 Requirement: ODSKC40
2011-03-28 17:13:58.103 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/ODSKC40T140_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:13:58.109 - runCommand: Process started, PID: 20059

2011-03-28 17:13:58.109 02668 LoadConfig()
2011-03-28 17:13:58.109 Requirement: ODSKC40
2011-03-28 17:13:58.109 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T140_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:13:58.115 - runCommand: Process started, PID: 20060

2011-03-28 17:13:58.115 02670 Comment: New setup for the configs and key repository

2011-03-28 17:13:58.115 Requirement: ODSKC40

2011-03-28 17:13:58.115 02674 Wait(10)

2011-03-28 17:13:58.115 Requirement: ODSKC40

2011-03-28 17:14:08.116 02676 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:14:08.116 Requirement: ODSKC40

2011-03-28 17:14:08.116 02678 Start()
2011-03-28 17:14:08.116 Requirement: ODSKC40
2011-03-28 17:14:08.116 RunCommand(ods-control start)
2011-03-28 17:14:08.118 - runCommand: Background process started, PID: 20063
2011-03-28 17:14:13.148 ERROR:	return code = 1
2011-03-28 17:14:13.148 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:14:13.166 - runCommand: Process started, PID: 20082
2011-03-28 17:14:13.166 ERROR:	return code = 1
2011-03-28 17:14:13.166 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:14:13.180 - runCommand: Process started, PID: 20086

2011-03-28 17:14:13.181 02680 Comment: Wait 5 minutes

2011-03-28 17:14:13.181 Requirement: ODSKC40

2011-03-28 17:14:13.181 02682 Wait(300)

2011-03-28 17:14:13.181 Requirement: ODSKC40

2011-03-28 17:19:13.181 02684 Comment: Check if the dead keys will be deleted directly.

2011-03-28 17:19:13.181 Requirement: ODSKC40

2011-03-28 17:19:13.181 02687 CheckLog()
2011-03-28 17:19:13.181 Requirement: ODSKC40

2011-03-28 17:19:13.361 02689 Comment: Additional checks are required (for example check if a specific keytag will be deleted.) --> for ODS 1.3

2011-03-28 17:19:13.361 Requirement: ODSKC40

2011-03-28 17:19:13.361 02691 Comment: Reset the config files to the original ones.

2011-03-28 17:19:13.361 Requirement: ODSKC40

2011-03-28 17:19:13.361 02693 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:19:13.361 Requirement: ODSKC40

2011-03-28 17:19:13.362 02695 Stop()
2011-03-28 17:19:13.362 Requirement: ODSKC40
2011-03-28 17:19:13.362 RunCommand(ods-control stop)
2011-03-28 17:19:13.366 - runCommand: Process started, PID: 20158
2011-03-28 17:19:13.367 OUTPUT:	Stopping enforcer...
2011-03-28 17:19:13.367 OUTPUT:	Cannot find PID file
2011-03-28 17:19:13.367 OUTPUT:	Stopping signer engine..
2011-03-28 17:19:13.367 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:19:13.367 ERROR:	return code = 1
2011-03-28 17:19:13.367 RunCommand(ps -e | grep enforcer)
2011-03-28 17:19:13.377 - runCommand: Process started, PID: 20161
2011-03-28 17:19:13.378 ERROR:	return code = 1
2011-03-28 17:19:13.378 RunCommand(ps -e | grep signer)
2011-03-28 17:19:13.389 - runCommand: Process started, PID: 20164
2011-03-28 17:19:13.389 ERROR:	return code = 1

2011-03-28 17:19:13.390 02697 Wait(10)

2011-03-28 17:19:13.390 Requirement: ODSKC40

2011-03-28 17:19:23.390 02699 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:19:23.390 Requirement: ODSKC40

2011-03-28 17:19:23.390 02704 LoadConfig()
2011-03-28 17:19:23.390 Requirement: ODSKC40
2011-03-28 17:19:23.390 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:19:23.396 - runCommand: Process started, PID: 20167

2011-03-28 17:19:23.397 02707 LoadConfig()
2011-03-28 17:19:23.397 Requirement: ODSKC40
2011-03-28 17:19:23.397 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:19:23.402 - runCommand: Process started, PID: 20168

2011-03-28 17:19:23.403 02709 Comment: New setup for the configs and key repository

2011-03-28 17:19:23.403 Requirement: ODSKC40

2011-03-28 17:19:23.403 02713 Wait(10)

2011-03-28 17:19:23.403 Requirement: ODSKC40

2011-03-28 17:19:33.403 02715 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:19:33.403 Requirement: ODSKC40

2011-03-28 17:19:33.403 02717 Start()
2011-03-28 17:19:33.403 Requirement: ODSKC40
2011-03-28 17:19:33.403 RunCommand(ods-control start)
2011-03-28 17:19:33.406 - runCommand: Background process started, PID: 20169
2011-03-28 17:19:34.423 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:19:34.436 - runCommand: Process started, PID: 20185
2011-03-28 17:19:34.436 OUTPUT:	ods-enforcerd
2011-03-28 17:19:34.436 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:19:34.452 - runCommand: Process started, PID: 20190
2011-03-28 17:19:34.452 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:19:34.452 02719 Wait(30)

2011-03-28 17:19:34.452 Requirement: ODSKC40

2011-03-28 17:20:04.453 02721 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:20:04.453 Requirement: ODSKC40

2011-03-28 17:20:04.453 02723 Stop()
2011-03-28 17:20:04.453 Requirement: ODSKC40
2011-03-28 17:20:04.453 RunCommand(ods-control stop)
2011-03-28 17:20:05.464 - runCommand: Process started, PID: 20213
2011-03-28 17:20:05.464 OUTPUT:	Stopping enforcer...
2011-03-28 17:20:05.464 OUTPUT:	Stopping signer engine..
2011-03-28 17:20:05.464 OUTPUT:	Engine shut down.
2011-03-28 17:20:05.464 RunCommand(ps -e | grep enforcer)
2011-03-28 17:20:05.482 - runCommand: Process started, PID: 20219
2011-03-28 17:20:05.483 ERROR:	return code = 1
2011-03-28 17:20:05.483 RunCommand(ps -e | grep signer)
2011-03-28 17:20:05.495 - runCommand: Process started, PID: 20222
2011-03-28 17:20:05.495 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T150: Use a ZSK Algorithm length of 128 (Algorithm 7) and confirm ODS fails signing

2011-03-28 17:20:05.495 02728 Comment: ZSK Algorithm length is 128 with algorithm 7. Siging of the ODS zone should fail.

2011-03-28 17:20:05.495 Requirement: ODSKC40

2011-03-28 17:20:05.495 02730 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:20:05.495 Requirement: ODSKC40

2011-03-28 17:20:05.495 02732 Stop()
2011-03-28 17:20:05.495 Requirement: ODSKC40
2011-03-28 17:20:05.495 RunCommand(ods-control stop)
2011-03-28 17:20:05.500 - runCommand: Process started, PID: 20225
2011-03-28 17:20:05.500 OUTPUT:	Stopping enforcer...
2011-03-28 17:20:05.500 OUTPUT:	Cannot find PID file
2011-03-28 17:20:05.500 OUTPUT:	Stopping signer engine..
2011-03-28 17:20:05.500 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:20:05.500 ERROR:	return code = 1
2011-03-28 17:20:05.500 RunCommand(ps -e | grep enforcer)
2011-03-28 17:20:05.511 - runCommand: Process started, PID: 20228
2011-03-28 17:20:05.511 ERROR:	return code = 1
2011-03-28 17:20:05.511 RunCommand(ps -e | grep signer)
2011-03-28 17:20:05.525 - runCommand: Process started, PID: 20231
2011-03-28 17:20:05.525 ERROR:	return code = 1

2011-03-28 17:20:05.525 02734 Wait(10)

2011-03-28 17:20:05.525 Requirement: ODSKC40

2011-03-28 17:20:15.525 02736 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:20:15.525 Requirement: ODSKC40

2011-03-28 17:20:15.525 02742 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:20:15.525 Requirement: ODSKC40

2011-03-28 17:20:15.526 02746 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:20:15.526 Requirement: ODSKC40

2011-03-28 17:20:15.526 02749 LoadConfig()
2011-03-28 17:20:15.526 Requirement: ODSKC40
2011-03-28 17:20:15.526 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:20:15.532 - runCommand: Process started, PID: 20234

2011-03-28 17:20:15.533 02752 LoadConfig()
2011-03-28 17:20:15.533 Requirement: ODSKC40
2011-03-28 17:20:15.533 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T150_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:20:15.538 - runCommand: Process started, PID: 20235

2011-03-28 17:20:15.539 02754 Comment: New setup for the configs and key repository

2011-03-28 17:20:15.539 Requirement: ODSKC40

2011-03-28 17:20:15.539 02758 Wait(10)

2011-03-28 17:20:15.539 Requirement: ODSKC40

2011-03-28 17:20:25.539 02760 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:20:25.539 Requirement: ODSKC40

2011-03-28 17:20:25.539 02762 Start()
2011-03-28 17:20:25.539 Requirement: ODSKC40
2011-03-28 17:20:25.539 RunCommand(ods-control start)
2011-03-28 17:20:25.542 - runCommand: Background process started, PID: 20236
2011-03-28 17:20:26.560 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:20:26.578 - runCommand: Process started, PID: 20251
2011-03-28 17:20:26.579 OUTPUT:	ods-enforcerd
2011-03-28 17:20:26.579 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:20:26.593 - runCommand: Process started, PID: 20256
2011-03-28 17:20:26.593 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:20:26.593 02764 Comment: Sign the ODS zone manually

2011-03-28 17:20:26.594 Requirement: ODSKC40

2011-03-28 17:20:26.594 02769 Wait(20)

2011-03-28 17:20:26.594 Requirement: ODSKC40

2011-03-28 17:20:46.594 02771 Comment: Check if the signing of the ods zone failed. No signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 17:20:46.594 Requirement: ODSKC40

2011-03-28 17:20:46.594 02775 CheckFilePresent(ods)
2011-03-28 17:20:46.594 Requirement: ODSKC40
2011-03-28 17:20:46.594 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:20:46.594 02777 Comment: Signed zone file should not be present.

2011-03-28 17:20:46.594 Requirement: ODSKC40

2011-03-28 17:20:46.594 02779 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:20:46.594 Requirement: ODSKC40

2011-03-28 17:20:46.595 02784 LoadConfig()
2011-03-28 17:20:46.595 Requirement: ODSKC40
2011-03-28 17:20:46.595 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:20:46.601 - runCommand: Process started, PID: 20269

2011-03-28 17:20:46.601 02787 LoadConfig()
2011-03-28 17:20:46.601 Requirement: ODSKC40
2011-03-28 17:20:46.601 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:20:46.607 - runCommand: Process started, PID: 20270

2011-03-28 17:20:46.607 02789 Comment: New setup for the configs and key repository

2011-03-28 17:20:46.607 Requirement: ODSKC40

2011-03-28 17:20:46.607 02793 Wait(10)

2011-03-28 17:20:46.607 Requirement: ODSKC40

2011-03-28 17:20:56.608 02795 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:20:56.608 Requirement: ODSKC40

2011-03-28 17:20:56.608 02797 Start()
2011-03-28 17:20:56.608 Requirement: ODSKC40
2011-03-28 17:20:56.608 RunCommand(ods-control start)
2011-03-28 17:20:56.610 - runCommand: Background process started, PID: 20271
2011-03-28 17:20:56.618 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:20:56.635 - runCommand: Process started, PID: 20278
2011-03-28 17:20:56.636 OUTPUT:	ods-enforcerd
2011-03-28 17:20:56.636 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:20:56.653 - runCommand: Process started, PID: 20282
2011-03-28 17:20:56.653 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:20:56.653 02799 Wait(30)

2011-03-28 17:20:56.653 Requirement: ODSKC40

2011-03-28 17:21:26.653 02801 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:21:26.653 Requirement: ODSKC40

2011-03-28 17:21:26.653 02803 Stop()
2011-03-28 17:21:26.653 Requirement: ODSKC40
2011-03-28 17:21:26.653 RunCommand(ods-control stop)
2011-03-28 17:21:27.665 - runCommand: Process started, PID: 20287
2011-03-28 17:21:27.665 OUTPUT:	Stopping enforcer...
2011-03-28 17:21:27.665 OUTPUT:	Stopping signer engine..
2011-03-28 17:21:27.665 OUTPUT:	Engine shut down.
2011-03-28 17:21:27.665 RunCommand(ps -e | grep enforcer)
2011-03-28 17:21:27.683 - runCommand: Process started, PID: 20294
2011-03-28 17:21:27.683 ERROR:	return code = 1
2011-03-28 17:21:27.683 RunCommand(ps -e | grep signer)
2011-03-28 17:21:27.701 - runCommand: Process started, PID: 20297
2011-03-28 17:21:27.701 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T160: Use a ZSK Algorithm length of 256 (Algorithm 7) and confirm ODS signs a zone with the configured algorithm length

2011-03-28 17:21:27.701 02810 Comment: ZSK Algorithm length is 256 with algorithm 7. Singing of the ODS zone should be succesfull.

2011-03-28 17:21:27.701 Requirement: ODSKC40

2011-03-28 17:21:27.701 02812 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:21:27.701 Requirement: ODSKC40

2011-03-28 17:21:27.701 02814 Stop()
2011-03-28 17:21:27.701 Requirement: ODSKC40
2011-03-28 17:21:27.701 RunCommand(ods-control stop)
2011-03-28 17:21:27.708 - runCommand: Process started, PID: 20300
2011-03-28 17:21:27.708 OUTPUT:	Stopping enforcer...
2011-03-28 17:21:27.708 OUTPUT:	Cannot find PID file
2011-03-28 17:21:27.709 OUTPUT:	Stopping signer engine..
2011-03-28 17:21:27.709 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:21:27.709 ERROR:	return code = 1
2011-03-28 17:21:27.709 RunCommand(ps -e | grep enforcer)
2011-03-28 17:21:27.726 - runCommand: Process started, PID: 20303
2011-03-28 17:21:27.726 ERROR:	return code = 1
2011-03-28 17:21:27.726 RunCommand(ps -e | grep signer)
2011-03-28 17:21:27.739 - runCommand: Process started, PID: 20306
2011-03-28 17:21:27.740 ERROR:	return code = 1

2011-03-28 17:21:27.740 02816 Wait(10)

2011-03-28 17:21:27.740 Requirement: ODSKC40

2011-03-28 17:21:37.740 02818 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:21:37.740 Requirement: ODSKC40

2011-03-28 17:21:37.740 02824 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:21:37.740 Requirement: ODSKC40

2011-03-28 17:21:37.740 02828 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:21:37.740 Requirement: ODSKC40

2011-03-28 17:21:37.741 02831 LoadConfig()
2011-03-28 17:21:37.741 Requirement: ODSKC40
2011-03-28 17:21:37.741 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:21:37.747 - runCommand: Process started, PID: 20309

2011-03-28 17:21:37.747 02834 LoadConfig()
2011-03-28 17:21:37.747 Requirement: ODSKC40
2011-03-28 17:21:37.747 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T160_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:21:37.753 - runCommand: Process started, PID: 20310

2011-03-28 17:21:37.753 02836 Comment: New setup for the configs and key repository

2011-03-28 17:21:37.753 Requirement: ODSKC40

2011-03-28 17:21:37.753 02840 Wait(10)

2011-03-28 17:21:37.753 Requirement: ODSKC40

2011-03-28 17:21:47.753 02842 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:21:47.753 Requirement: ODSKC40

2011-03-28 17:21:47.754 02844 Start()
2011-03-28 17:21:47.754 Requirement: ODSKC40
2011-03-28 17:21:47.754 RunCommand(ods-control start)
2011-03-28 17:21:47.756 - runCommand: Background process started, PID: 20311
2011-03-28 17:21:48.772 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:21:48.786 - runCommand: Process started, PID: 20326
2011-03-28 17:21:48.786 OUTPUT:	ods-enforcerd
2011-03-28 17:21:48.786 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:21:48.801 - runCommand: Process started, PID: 20331
2011-03-28 17:21:48.801 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:21:48.801 02846 Wait(10)

2011-03-28 17:21:48.801 Requirement: ODSKC40

2011-03-28 17:21:58.801 02848 Comment: Sign the ODS zone manually

2011-03-28 17:21:58.801 Requirement: ODSKC40

2011-03-28 17:21:58.801 02853 Wait(20)

2011-03-28 17:21:58.801 Requirement: ODSKC40

2011-03-28 17:22:18.802 02855 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 17:22:18.802 Requirement: ODSKC40

2011-03-28 17:22:18.802 02859 CheckFilePresent(ods)
2011-03-28 17:22:18.802 Requirement: ODSKC40
2011-03-28 17:22:18.802 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:22:18.802 02861 Comment: Signed zone file should be present.

2011-03-28 17:22:18.802 Requirement: ODSKC40

2011-03-28 17:22:18.802 02863 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:22:18.802 Requirement: ODSKC40

2011-03-28 17:22:18.802 02868 LoadConfig()
2011-03-28 17:22:18.803 Requirement: ODSKC40
2011-03-28 17:22:18.803 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:22:18.809 - runCommand: Process started, PID: 20344

2011-03-28 17:22:18.809 02871 LoadConfig()
2011-03-28 17:22:18.809 Requirement: ODSKC40
2011-03-28 17:22:18.809 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:22:18.815 - runCommand: Process started, PID: 20345

2011-03-28 17:22:18.815 02873 Comment: New setup for the configs and key repository

2011-03-28 17:22:18.815 Requirement: ODSKC40

2011-03-28 17:22:18.815 02877 Wait(10)

2011-03-28 17:22:18.815 Requirement: ODSKC40

2011-03-28 17:22:28.816 02879 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:22:28.816 Requirement: ODSKC40

2011-03-28 17:22:28.816 02881 Start()
2011-03-28 17:22:28.816 Requirement: ODSKC40
2011-03-28 17:22:28.816 RunCommand(ods-control start)
2011-03-28 17:22:28.819 - runCommand: Background process started, PID: 20346
2011-03-28 17:22:28.826 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:22:28.841 - runCommand: Process started, PID: 20353
2011-03-28 17:22:28.841 OUTPUT:	ods-enforcerd
2011-03-28 17:22:28.841 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:22:28.860 - runCommand: Process started, PID: 20357
2011-03-28 17:22:28.860 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:22:28.860 02883 Wait(30)

2011-03-28 17:22:28.860 Requirement: ODSKC40

2011-03-28 17:22:58.860 02885 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:22:58.860 Requirement: ODSKC40

2011-03-28 17:22:58.861 02887 Stop()
2011-03-28 17:22:58.861 Requirement: ODSKC40
2011-03-28 17:22:58.861 RunCommand(ods-control stop)
2011-03-28 17:22:59.872 - runCommand: Process started, PID: 20372
2011-03-28 17:22:59.872 OUTPUT:	Stopping enforcer...
2011-03-28 17:22:59.872 OUTPUT:	Stopping signer engine..
2011-03-28 17:22:59.872 OUTPUT:	Engine shut down.
2011-03-28 17:22:59.872 RunCommand(ps -e | grep enforcer)
2011-03-28 17:22:59.890 - runCommand: Process started, PID: 20378
2011-03-28 17:22:59.890 ERROR:	return code = 1
2011-03-28 17:22:59.890 RunCommand(ps -e | grep signer)
2011-03-28 17:22:59.908 - runCommand: Process started, PID: 20381
2011-03-28 17:22:59.908 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T170: Use a ZSK Algorithm length of 512 (Algorithm 7) and confirm ODS signs a zone with the configured algorithm length

2011-03-28 17:22:59.908 02893 Comment: ZSK Algorithm length is 512 with algorithm 7. Singing of the ODS zone should be succesfull.

2011-03-28 17:22:59.908 Requirement: ODSKC40

2011-03-28 17:22:59.909 02895 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:22:59.909 Requirement: ODSKC40

2011-03-28 17:22:59.909 02897 Stop()
2011-03-28 17:22:59.909 Requirement: ODSKC40
2011-03-28 17:22:59.909 RunCommand(ods-control stop)
2011-03-28 17:22:59.916 - runCommand: Process started, PID: 20384
2011-03-28 17:22:59.916 OUTPUT:	Stopping enforcer...
2011-03-28 17:22:59.916 OUTPUT:	Cannot find PID file
2011-03-28 17:22:59.916 OUTPUT:	Stopping signer engine..
2011-03-28 17:22:59.916 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:22:59.916 ERROR:	return code = 1
2011-03-28 17:22:59.916 RunCommand(ps -e | grep enforcer)
2011-03-28 17:22:59.933 - runCommand: Process started, PID: 20387
2011-03-28 17:22:59.933 ERROR:	return code = 1
2011-03-28 17:22:59.933 RunCommand(ps -e | grep signer)
2011-03-28 17:22:59.951 - runCommand: Process started, PID: 20390
2011-03-28 17:22:59.951 ERROR:	return code = 1

2011-03-28 17:22:59.951 02899 Wait(10)

2011-03-28 17:22:59.951 Requirement: ODSKC40

2011-03-28 17:23:09.951 02901 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:23:09.951 Requirement: ODSKC40

2011-03-28 17:23:09.951 02907 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:23:09.951 Requirement: ODSKC40

2011-03-28 17:23:09.951 02911 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:23:09.952 Requirement: ODSKC40

2011-03-28 17:23:09.952 02914 LoadConfig()
2011-03-28 17:23:09.952 Requirement: ODSKC40
2011-03-28 17:23:09.952 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:23:09.958 - runCommand: Process started, PID: 20393

2011-03-28 17:23:09.958 02917 LoadConfig()
2011-03-28 17:23:09.958 Requirement: ODSKC40
2011-03-28 17:23:09.958 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T170_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:23:09.964 - runCommand: Process started, PID: 20394

2011-03-28 17:23:09.964 02919 Comment: New setup for the configs and key repository

2011-03-28 17:23:09.964 Requirement: ODSKC40

2011-03-28 17:23:09.964 02923 Wait(10)

2011-03-28 17:23:09.964 Requirement: ODSKC40

2011-03-28 17:23:19.965 02925 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:23:19.965 Requirement: ODSKC40

2011-03-28 17:23:19.965 02927 Start()
2011-03-28 17:23:19.965 Requirement: ODSKC40
2011-03-28 17:23:19.965 RunCommand(ods-control start)
2011-03-28 17:23:19.968 - runCommand: Background process started, PID: 20395
2011-03-28 17:23:19.993 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:23:20.152 - runCommand: Process started, PID: 20409
2011-03-28 17:23:20.153 OUTPUT:	ods-enforcerd
2011-03-28 17:23:20.153 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:23:20.328 - runCommand: Process started, PID: 20421
2011-03-28 17:23:20.328 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:23:20.330 02929 Wait(10)

2011-03-28 17:23:20.330 Requirement: ODSKC40

2011-03-28 17:23:30.333 02931 Comment: Sign the ODS zone manually

2011-03-28 17:23:30.333 Requirement: ODSKC40

2011-03-28 17:23:30.335 02936 Wait(20)

2011-03-28 17:23:30.335 Requirement: ODSKC40

2011-03-28 17:23:50.338 02938 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 17:23:50.338 Requirement: ODSKC40

2011-03-28 17:23:50.340 02942 CheckFilePresent(ods)
2011-03-28 17:23:50.340 Requirement: ODSKC40
2011-03-28 17:23:50.340 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:23:50.342 02944 Comment: Signed zone file should be present.

2011-03-28 17:23:50.342 Requirement: ODSKC40

2011-03-28 17:23:50.344 02946 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:23:50.344 Requirement: ODSKC40

2011-03-28 17:23:50.346 02951 LoadConfig()
2011-03-28 17:23:50.346 Requirement: ODSKC40
2011-03-28 17:23:50.346 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:23:50.409 - runCommand: Process started, PID: 20426

2011-03-28 17:23:50.412 02954 LoadConfig()
2011-03-28 17:23:50.412 Requirement: ODSKC40
2011-03-28 17:23:50.412 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:23:50.446 - runCommand: Process started, PID: 20427

2011-03-28 17:23:50.448 02956 Comment: New setup for the configs and key repository

2011-03-28 17:23:50.448 Requirement: ODSKC40

2011-03-28 17:23:50.449 02960 Wait(10)

2011-03-28 17:23:50.449 Requirement: ODSKC40

2011-03-28 17:24:00.452 02962 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:24:00.452 Requirement: ODSKC40

2011-03-28 17:24:00.454 02964 Start()
2011-03-28 17:24:00.454 Requirement: ODSKC40
2011-03-28 17:24:00.454 RunCommand(ods-control start)
2011-03-28 17:24:00.480 - runCommand: Background process started, PID: 20428
2011-03-28 17:24:00.552 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:24:00.743 - runCommand: Process started, PID: 20435
2011-03-28 17:24:00.743 OUTPUT:	ods-enforcerd
2011-03-28 17:24:00.744 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:24:00.883 - runCommand: Process started, PID: 20439
2011-03-28 17:24:00.884 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:24:00.885 02966 Wait(30)

2011-03-28 17:24:00.885 Requirement: ODSKC40

2011-03-28 17:24:30.888 02968 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:24:30.888 Requirement: ODSKC40

2011-03-28 17:24:30.890 02970 Stop()
2011-03-28 17:24:30.890 Requirement: ODSKC40
2011-03-28 17:24:30.890 RunCommand(ods-control stop)
2011-03-28 17:24:31.100 - runCommand: Process started, PID: 20448
2011-03-28 17:24:31.100 OUTPUT:	Stopping enforcer...
2011-03-28 17:24:31.100 OUTPUT:	Stopping signer engine..
2011-03-28 17:24:31.100 OUTPUT:	Engine shut down.
2011-03-28 17:24:31.101 RunCommand(ps -e | grep enforcer)
2011-03-28 17:24:31.119 - runCommand: Process started, PID: 20455
2011-03-28 17:24:31.119 ERROR:	return code = 1
2011-03-28 17:24:31.119 RunCommand(ps -e | grep signer)
2011-03-28 17:24:31.140 - runCommand: Process started, PID: 20458
2011-03-28 17:24:31.140 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T180: Use a ZSK Algorithm length of 1024 (Algorithm 7) and confirm ODS signs a zone with the configured algorithm length

2011-03-28 17:24:31.140 02981 Comment: ZSK Algorithm length is 1024 with algorithm 7. Singing of the ODS zone should be succesfull.

2011-03-28 17:24:31.140 Requirement: ODSKC40

2011-03-28 17:24:31.140 02983 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:24:31.140 Requirement: ODSKC40

2011-03-28 17:24:31.141 02985 Stop()
2011-03-28 17:24:31.141 Requirement: ODSKC40
2011-03-28 17:24:31.141 RunCommand(ods-control stop)
2011-03-28 17:24:31.145 - runCommand: Process started, PID: 20461
2011-03-28 17:24:31.146 OUTPUT:	Stopping enforcer...
2011-03-28 17:24:31.146 OUTPUT:	Cannot find PID file
2011-03-28 17:24:31.146 OUTPUT:	Stopping signer engine..
2011-03-28 17:24:31.146 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:24:31.146 ERROR:	return code = 1
2011-03-28 17:24:31.146 RunCommand(ps -e | grep enforcer)
2011-03-28 17:24:31.156 - runCommand: Process started, PID: 20464
2011-03-28 17:24:31.156 ERROR:	return code = 1
2011-03-28 17:24:31.156 RunCommand(ps -e | grep signer)
2011-03-28 17:24:31.169 - runCommand: Process started, PID: 20467
2011-03-28 17:24:31.169 ERROR:	return code = 1

2011-03-28 17:24:31.169 02987 Wait(10)

2011-03-28 17:24:31.169 Requirement: ODSKC40

2011-03-28 17:24:41.169 02989 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:24:41.169 Requirement: ODSKC40

2011-03-28 17:24:41.169 02995 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:24:41.169 Requirement: ODSKC40

2011-03-28 17:24:41.169 02999 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:24:41.169 Requirement: ODSKC40

2011-03-28 17:24:41.170 03002 LoadConfig()
2011-03-28 17:24:41.170 Requirement: ODSKC40
2011-03-28 17:24:41.170 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:24:41.176 - runCommand: Process started, PID: 20475

2011-03-28 17:24:41.176 03005 LoadConfig()
2011-03-28 17:24:41.176 Requirement: ODSKC40
2011-03-28 17:24:41.176 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T180_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:24:41.182 - runCommand: Process started, PID: 20476

2011-03-28 17:24:41.182 03007 Comment: New setup for the configs and key repository

2011-03-28 17:24:41.182 Requirement: ODSKC40

2011-03-28 17:24:41.182 03011 Wait(10)

2011-03-28 17:24:41.182 Requirement: ODSKC40

2011-03-28 17:24:51.183 03013 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:24:51.183 Requirement: ODSKC40

2011-03-28 17:24:51.183 03015 Start()
2011-03-28 17:24:51.183 Requirement: ODSKC40
2011-03-28 17:24:51.183 RunCommand(ods-control start)
2011-03-28 17:24:51.185 - runCommand: Background process started, PID: 20477
2011-03-28 17:24:52.204 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:24:52.221 - runCommand: Process started, PID: 20492
2011-03-28 17:24:52.221 OUTPUT:	ods-enforcerd
2011-03-28 17:24:52.221 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:24:52.236 - runCommand: Process started, PID: 20497
2011-03-28 17:24:52.236 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:24:52.236 03017 Wait(10)

2011-03-28 17:24:52.236 Requirement: ODSKC40

2011-03-28 17:25:02.236 03019 Comment: Sign the ODS zone manually

2011-03-28 17:25:02.236 Requirement: ODSKC40

2011-03-28 17:25:02.236 03024 Wait(20)

2011-03-28 17:25:02.236 Requirement: ODSKC40

2011-03-28 17:25:22.237 03026 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 17:25:22.237 Requirement: ODSKC40

2011-03-28 17:25:22.237 03030 CheckFilePresent(ods)
2011-03-28 17:25:22.237 Requirement: ODSKC40
2011-03-28 17:25:22.237 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:25:22.237 03032 Comment: Signed zone file should be present.

2011-03-28 17:25:22.237 Requirement: ODSKC40

2011-03-28 17:25:22.237 03034 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:25:22.237 Requirement: ODSKC40

2011-03-28 17:25:22.237 03039 LoadConfig()
2011-03-28 17:25:22.238 Requirement: ODSKC40
2011-03-28 17:25:22.238 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:25:22.244 - runCommand: Process started, PID: 20510

2011-03-28 17:25:22.244 03042 LoadConfig()
2011-03-28 17:25:22.244 Requirement: ODSKC40
2011-03-28 17:25:22.244 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:25:22.250 - runCommand: Process started, PID: 20511

2011-03-28 17:25:22.250 03044 Comment: New setup for the configs and key repository

2011-03-28 17:25:22.250 Requirement: ODSKC40

2011-03-28 17:25:22.250 03048 Wait(10)

2011-03-28 17:25:22.250 Requirement: ODSKC40

2011-03-28 17:25:32.250 03050 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:25:32.250 Requirement: ODSKC40

2011-03-28 17:25:32.251 03052 Start()
2011-03-28 17:25:32.251 Requirement: ODSKC40
2011-03-28 17:25:32.251 RunCommand(ods-control start)
2011-03-28 17:25:32.253 - runCommand: Background process started, PID: 20512
2011-03-28 17:25:32.260 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:25:32.283 - runCommand: Process started, PID: 20519
2011-03-28 17:25:32.283 OUTPUT:	ods-enforcerd
2011-03-28 17:25:32.283 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:25:32.298 - runCommand: Process started, PID: 20523
2011-03-28 17:25:32.298 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:25:32.298 03054 Wait(30)

2011-03-28 17:25:32.298 Requirement: ODSKC40

2011-03-28 17:26:02.299 03056 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:26:02.299 Requirement: ODSKC40

2011-03-28 17:26:02.299 03058 Stop()
2011-03-28 17:26:02.299 Requirement: ODSKC40
2011-03-28 17:26:02.299 RunCommand(ods-control stop)
2011-03-28 17:26:03.310 - runCommand: Process started, PID: 20538
2011-03-28 17:26:03.310 OUTPUT:	Stopping enforcer...
2011-03-28 17:26:03.310 OUTPUT:	Stopping signer engine..
2011-03-28 17:26:03.310 OUTPUT:	Engine shut down.
2011-03-28 17:26:03.310 RunCommand(ps -e | grep enforcer)
2011-03-28 17:26:03.329 - runCommand: Process started, PID: 20544
2011-03-28 17:26:03.329 ERROR:	return code = 1
2011-03-28 17:26:03.329 RunCommand(ps -e | grep signer)
2011-03-28 17:26:03.346 - runCommand: Process started, PID: 20547
2011-03-28 17:26:03.347 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T190: Use a ZSK Algorithm length of 2048 (Algorithm 7) and confirm ODS signs a zone with the configured algorithm length

2011-03-28 17:26:03.347 03065 Comment: ZSK Algorithm length is 2048 with algorithm 7. Singing of the ODS zone should be succesfull.

2011-03-28 17:26:03.347 Requirement: ODSKC40

2011-03-28 17:26:03.347 03067 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:26:03.347 Requirement: ODSKC40

2011-03-28 17:26:03.347 03069 Stop()
2011-03-28 17:26:03.347 Requirement: ODSKC40
2011-03-28 17:26:03.347 RunCommand(ods-control stop)
2011-03-28 17:26:03.355 - runCommand: Process started, PID: 20550
2011-03-28 17:26:03.355 OUTPUT:	Stopping enforcer...
2011-03-28 17:26:03.355 OUTPUT:	Cannot find PID file
2011-03-28 17:26:03.355 OUTPUT:	Stopping signer engine..
2011-03-28 17:26:03.355 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:26:03.355 ERROR:	return code = 1
2011-03-28 17:26:03.355 RunCommand(ps -e | grep enforcer)
2011-03-28 17:26:03.372 - runCommand: Process started, PID: 20553
2011-03-28 17:26:03.372 ERROR:	return code = 1
2011-03-28 17:26:03.372 RunCommand(ps -e | grep signer)
2011-03-28 17:26:03.384 - runCommand: Process started, PID: 20556
2011-03-28 17:26:03.384 ERROR:	return code = 1

2011-03-28 17:26:03.385 03071 Wait(10)

2011-03-28 17:26:03.385 Requirement: ODSKC40

2011-03-28 17:26:13.385 03073 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:26:13.385 Requirement: ODSKC40

2011-03-28 17:26:13.385 03079 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:26:13.385 Requirement: ODSKC40

2011-03-28 17:26:13.385 03083 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:26:13.385 Requirement: ODSKC40

2011-03-28 17:26:13.385 03086 LoadConfig()
2011-03-28 17:26:13.385 Requirement: ODSKC40
2011-03-28 17:26:13.385 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:26:13.392 - runCommand: Process started, PID: 20559

2011-03-28 17:26:13.392 03089 LoadConfig()
2011-03-28 17:26:13.392 Requirement: ODSKC40
2011-03-28 17:26:13.392 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T190_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:26:13.398 - runCommand: Process started, PID: 20560

2011-03-28 17:26:13.398 03091 Comment: New setup for the configs and key repository

2011-03-28 17:26:13.398 Requirement: ODSKC40

2011-03-28 17:26:13.398 03095 Wait(10)

2011-03-28 17:26:13.398 Requirement: ODSKC40

2011-03-28 17:26:23.398 03097 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:26:23.399 Requirement: ODSKC40

2011-03-28 17:26:23.399 03099 Start()
2011-03-28 17:26:23.399 Requirement: ODSKC40
2011-03-28 17:26:23.399 RunCommand(ods-control start)
2011-03-28 17:26:23.401 - runCommand: Background process started, PID: 20561
2011-03-28 17:26:24.419 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:26:24.442 - runCommand: Process started, PID: 20576
2011-03-28 17:26:24.442 OUTPUT:	ods-enforcerd
2011-03-28 17:26:24.442 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:26:24.458 - runCommand: Process started, PID: 20589
2011-03-28 17:26:24.458 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:26:24.458 03101 Wait(15)

2011-03-28 17:26:24.458 Requirement: ODSKC40

2011-03-28 17:26:39.459 03103 Comment: Sign the ODS zone manually

2011-03-28 17:26:39.459 Requirement: ODSKC40

2011-03-28 17:26:39.459 03108 Wait(20)

2011-03-28 17:26:39.459 Requirement: ODSKC40

2011-03-28 17:26:59.459 03110 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 17:26:59.459 Requirement: ODSKC40

2011-03-28 17:26:59.459 03114 CheckFilePresent(ods)
2011-03-28 17:26:59.459 Requirement: ODSKC40
2011-03-28 17:26:59.459 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:26:59.460 03116 Comment: Signed zone file should be present.

2011-03-28 17:26:59.460 Requirement: ODSKC40

2011-03-28 17:26:59.460 03118 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:26:59.460 Requirement: ODSKC40

2011-03-28 17:26:59.460 03123 LoadConfig()
2011-03-28 17:26:59.460 Requirement: ODSKC40
2011-03-28 17:26:59.460 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:26:59.466 - runCommand: Process started, PID: 20594

2011-03-28 17:26:59.467 03126 LoadConfig()
2011-03-28 17:26:59.467 Requirement: ODSKC40
2011-03-28 17:26:59.467 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:26:59.472 - runCommand: Process started, PID: 20595

2011-03-28 17:26:59.473 03128 Comment: New setup for the configs and key repository

2011-03-28 17:26:59.473 Requirement: ODSKC40

2011-03-28 17:26:59.473 03132 Wait(10)

2011-03-28 17:26:59.473 Requirement: ODSKC40

2011-03-28 17:27:09.473 03134 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:27:09.473 Requirement: ODSKC40

2011-03-28 17:27:09.473 03136 Start()
2011-03-28 17:27:09.473 Requirement: ODSKC40
2011-03-28 17:27:09.473 RunCommand(ods-control start)
2011-03-28 17:27:09.476 - runCommand: Background process started, PID: 20596
2011-03-28 17:27:09.484 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:27:09.504 - runCommand: Process started, PID: 20603
2011-03-28 17:27:09.504 OUTPUT:	ods-enforcerd
2011-03-28 17:27:09.504 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:27:09.532 - runCommand: Process started, PID: 20607
2011-03-28 17:27:09.533 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:27:09.533 03138 Wait(30)

2011-03-28 17:27:09.533 Requirement: ODSKC40

2011-03-28 17:27:39.533 03140 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:27:39.533 Requirement: ODSKC40

2011-03-28 17:27:39.533 03142 Stop()
2011-03-28 17:27:39.533 Requirement: ODSKC40
2011-03-28 17:27:39.533 RunCommand(ods-control stop)
2011-03-28 17:27:40.546 - runCommand: Process started, PID: 20612
2011-03-28 17:27:40.546 OUTPUT:	Stopping enforcer...
2011-03-28 17:27:40.546 OUTPUT:	Stopping signer engine..
2011-03-28 17:27:40.546 OUTPUT:	Engine shut down.
2011-03-28 17:27:40.546 RunCommand(ps -e | grep enforcer)
2011-03-28 17:27:40.558 - runCommand: Process started, PID: 20619
2011-03-28 17:27:40.558 ERROR:	return code = 1
2011-03-28 17:27:40.558 RunCommand(ps -e | grep signer)
2011-03-28 17:27:40.571 - runCommand: Process started, PID: 20622
2011-03-28 17:27:40.571 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T200: Use a ZSK Algorithm length of 4096 (Algorithm 7) and confirm ODS signs a zone with the configured algorithm length

2011-03-28 17:27:40.571 03149 Comment: ZSK Algorithm length is 4096 with algorithm 7. Singing of the ODS zone should be succesfull.

2011-03-28 17:27:40.571 Requirement: ODSKC40

2011-03-28 17:27:40.571 03151 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:27:40.571 Requirement: ODSKC40

2011-03-28 17:27:40.571 03153 Stop()
2011-03-28 17:27:40.571 Requirement: ODSKC40
2011-03-28 17:27:40.571 RunCommand(ods-control stop)
2011-03-28 17:27:40.578 - runCommand: Process started, PID: 20625
2011-03-28 17:27:40.578 OUTPUT:	Stopping enforcer...
2011-03-28 17:27:40.578 OUTPUT:	Cannot find PID file
2011-03-28 17:27:40.578 OUTPUT:	Stopping signer engine..
2011-03-28 17:27:40.578 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:27:40.578 ERROR:	return code = 1
2011-03-28 17:27:40.578 RunCommand(ps -e | grep enforcer)
2011-03-28 17:27:40.592 - runCommand: Process started, PID: 20628
2011-03-28 17:27:40.592 ERROR:	return code = 1
2011-03-28 17:27:40.592 RunCommand(ps -e | grep signer)
2011-03-28 17:27:40.603 - runCommand: Process started, PID: 20631
2011-03-28 17:27:40.603 ERROR:	return code = 1

2011-03-28 17:27:40.604 03155 Wait(10)

2011-03-28 17:27:40.604 Requirement: ODSKC40

2011-03-28 17:27:50.604 03157 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:27:50.604 Requirement: ODSKC40

2011-03-28 17:27:50.604 03163 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:27:50.604 Requirement: ODSKC40

2011-03-28 17:27:50.604 03167 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:27:50.604 Requirement: ODSKC40

2011-03-28 17:27:50.604 03170 LoadConfig()
2011-03-28 17:27:50.604 Requirement: ODSKC40
2011-03-28 17:27:50.604 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:27:50.611 - runCommand: Process started, PID: 20634

2011-03-28 17:27:50.611 03173 LoadConfig()
2011-03-28 17:27:50.611 Requirement: ODSKC40
2011-03-28 17:27:50.611 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T200_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:27:50.617 - runCommand: Process started, PID: 20635

2011-03-28 17:27:50.617 03175 Comment: New setup for the configs and key repository

2011-03-28 17:27:50.617 Requirement: ODSKC40

2011-03-28 17:27:50.617 03179 Wait(10)

2011-03-28 17:27:50.617 Requirement: ODSKC40

2011-03-28 17:28:00.617 03181 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:28:00.617 Requirement: ODSKC40

2011-03-28 17:28:00.618 03183 Start()
2011-03-28 17:28:00.618 Requirement: ODSKC40
2011-03-28 17:28:00.618 RunCommand(ods-control start)
2011-03-28 17:28:00.620 - runCommand: Background process started, PID: 20636
2011-03-28 17:28:01.636 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:28:01.653 - runCommand: Process started, PID: 20651
2011-03-28 17:28:01.654 OUTPUT:	ods-enforcerd
2011-03-28 17:28:01.654 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:28:01.669 - runCommand: Process started, PID: 20664
2011-03-28 17:28:01.669 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:28:01.669 03185 Wait(30)

2011-03-28 17:28:01.669 Requirement: ODSKC40

2011-03-28 17:28:31.670 03187 Comment: Sign the ODS zone manually

2011-03-28 17:28:31.670 Requirement: ODSKC40

2011-03-28 17:28:31.670 03192 Wait(20)

2011-03-28 17:28:31.670 Requirement: ODSKC40

2011-03-28 17:28:51.670 03194 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 17:28:51.670 Requirement: ODSKC40

2011-03-28 17:28:51.670 03198 CheckFilePresent(ods)
2011-03-28 17:28:51.670 Requirement: ODSKC40
2011-03-28 17:28:51.670 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:28:51.671 03200 Comment: Signed zone file should be present.

2011-03-28 17:28:51.671 Requirement: ODSKC40

2011-03-28 17:28:51.671 03202 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:28:51.671 Requirement: ODSKC40

2011-03-28 17:28:51.671 03207 LoadConfig()
2011-03-28 17:28:51.671 Requirement: ODSKC40
2011-03-28 17:28:51.671 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:28:51.677 - runCommand: Process started, PID: 20669

2011-03-28 17:28:51.677 03210 LoadConfig()
2011-03-28 17:28:51.678 Requirement: ODSKC40
2011-03-28 17:28:51.678 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:28:51.683 - runCommand: Process started, PID: 20670

2011-03-28 17:28:51.683 03212 Comment: New setup for the configs and key repository

2011-03-28 17:28:51.683 Requirement: ODSKC40

2011-03-28 17:28:51.684 03216 Wait(10)

2011-03-28 17:28:51.684 Requirement: ODSKC40

2011-03-28 17:29:01.684 03218 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:29:01.684 Requirement: ODSKC40

2011-03-28 17:29:01.684 03220 Start()
2011-03-28 17:29:01.684 Requirement: ODSKC40
2011-03-28 17:29:01.684 RunCommand(ods-control start)
2011-03-28 17:29:01.687 - runCommand: Background process started, PID: 20671
2011-03-28 17:29:01.694 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:29:01.715 - runCommand: Process started, PID: 20678
2011-03-28 17:29:01.715 OUTPUT:	ods-enforcerd
2011-03-28 17:29:01.715 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:29:01.730 - runCommand: Process started, PID: 20682
2011-03-28 17:29:01.730 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:29:01.731 03222 Wait(30)

2011-03-28 17:29:01.731 Requirement: ODSKC40

2011-03-28 17:29:31.731 03224 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:29:31.731 Requirement: ODSKC40

2011-03-28 17:29:31.731 03226 Stop()
2011-03-28 17:29:31.731 Requirement: ODSKC40
2011-03-28 17:29:31.731 RunCommand(ods-control stop)
2011-03-28 17:29:32.742 - runCommand: Process started, PID: 20687
2011-03-28 17:29:32.742 OUTPUT:	Stopping enforcer...
2011-03-28 17:29:32.742 OUTPUT:	Stopping signer engine..
2011-03-28 17:29:32.743 OUTPUT:	Engine shut down.
2011-03-28 17:29:32.743 RunCommand(ps -e | grep enforcer)
2011-03-28 17:29:32.760 - runCommand: Process started, PID: 20694
2011-03-28 17:29:32.761 ERROR:	return code = 1
2011-03-28 17:29:32.761 RunCommand(ps -e | grep signer)
2011-03-28 17:29:32.773 - runCommand: Process started, PID: 20697
2011-03-28 17:29:32.773 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T210: Use a ZSK Algorithm length of 8192 (Algorithm 7) and confirm ODS fails signing

2011-03-28 17:29:32.773 03231 Comment: ZSK Algorithm length is 8192 with algorithm 7. Siging of the ODS zone should fail.

2011-03-28 17:29:32.773 Requirement: ODSKC40

2011-03-28 17:29:32.773 03233 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:29:32.773 Requirement: ODSKC40

2011-03-28 17:29:32.773 03235 Stop()
2011-03-28 17:29:32.773 Requirement: ODSKC40
2011-03-28 17:29:32.773 RunCommand(ods-control stop)
2011-03-28 17:29:32.778 - runCommand: Process started, PID: 20700
2011-03-28 17:29:32.778 OUTPUT:	Stopping enforcer...
2011-03-28 17:29:32.778 OUTPUT:	Cannot find PID file
2011-03-28 17:29:32.778 OUTPUT:	Stopping signer engine..
2011-03-28 17:29:32.778 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:29:32.778 ERROR:	return code = 1
2011-03-28 17:29:32.778 RunCommand(ps -e | grep enforcer)
2011-03-28 17:29:32.789 - runCommand: Process started, PID: 20703
2011-03-28 17:29:32.789 ERROR:	return code = 1
2011-03-28 17:29:32.789 RunCommand(ps -e | grep signer)
2011-03-28 17:29:32.803 - runCommand: Process started, PID: 20706
2011-03-28 17:29:32.803 ERROR:	return code = 1

2011-03-28 17:29:32.803 03237 Wait(10)

2011-03-28 17:29:32.803 Requirement: ODSKC40

2011-03-28 17:29:42.803 03239 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:29:42.803 Requirement: ODSKC40

2011-03-28 17:29:42.803 03245 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:29:42.803 Requirement: ODSKC40

2011-03-28 17:29:42.804 03249 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:29:42.804 Requirement: ODSKC40

2011-03-28 17:29:42.804 03252 LoadConfig()
2011-03-28 17:29:42.804 Requirement: ODSKC40
2011-03-28 17:29:42.804 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:29:42.810 - runCommand: Process started, PID: 20709

2011-03-28 17:29:42.810 03255 LoadConfig()
2011-03-28 17:29:42.810 Requirement: ODSKC40
2011-03-28 17:29:42.810 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T210_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:29:42.816 - runCommand: Process started, PID: 20710

2011-03-28 17:29:42.816 03257 Comment: New setup for the configs and key repository

2011-03-28 17:29:42.816 Requirement: ODSKC40

2011-03-28 17:29:42.817 03261 Wait(10)

2011-03-28 17:29:42.817 Requirement: ODSKC40

2011-03-28 17:29:52.817 03263 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:29:52.817 Requirement: ODSKC40

2011-03-28 17:29:52.817 03265 Start()
2011-03-28 17:29:52.817 Requirement: ODSKC40
2011-03-28 17:29:52.817 RunCommand(ods-control start)
2011-03-28 17:29:52.820 - runCommand: Background process started, PID: 20711
2011-03-28 17:29:53.836 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:29:53.854 - runCommand: Process started, PID: 20726
2011-03-28 17:29:53.854 OUTPUT:	ods-enforcerd
2011-03-28 17:29:53.854 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:29:53.868 - runCommand: Process started, PID: 20739
2011-03-28 17:29:53.868 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:29:53.868 03267 Comment: Sign the ODS zone manually

2011-03-28 17:29:53.868 Requirement: ODSKC40

2011-03-28 17:29:53.868 03272 Wait(20)

2011-03-28 17:29:53.868 Requirement: ODSKC40

2011-03-28 17:30:13.869 03274 Comment: Check if the signing of the ods zone failed. No signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 17:30:13.869 Requirement: ODSKC40

2011-03-28 17:30:13.869 03278 CheckFilePresent(ods)
2011-03-28 17:30:13.869 Requirement: ODSKC40
2011-03-28 17:30:13.869 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:30:13.869 03280 Comment: Signed zone lile should not be present.

2011-03-28 17:30:13.869 Requirement: ODSKC40

2011-03-28 17:30:13.869 03282 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:30:13.869 Requirement: ODSKC40

2011-03-28 17:30:13.870 03287 LoadConfig()
2011-03-28 17:30:13.870 Requirement: ODSKC40
2011-03-28 17:30:13.870 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:30:13.876 - runCommand: Process started, PID: 20744

2011-03-28 17:30:13.876 03290 LoadConfig()
2011-03-28 17:30:13.876 Requirement: ODSKC40
2011-03-28 17:30:13.876 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:30:13.882 - runCommand: Process started, PID: 20745

2011-03-28 17:30:13.882 03292 Comment: New setup for the configs and key repository

2011-03-28 17:30:13.882 Requirement: ODSKC40

2011-03-28 17:30:13.882 03296 Wait(10)

2011-03-28 17:30:13.882 Requirement: ODSKC40

2011-03-28 17:30:23.882 03298 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:30:23.883 Requirement: ODSKC40

2011-03-28 17:30:23.883 03300 Start()
2011-03-28 17:30:23.883 Requirement: ODSKC40
2011-03-28 17:30:23.883 RunCommand(ods-control start)
2011-03-28 17:30:23.885 - runCommand: Background process started, PID: 20746
2011-03-28 17:30:23.892 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:30:23.911 - runCommand: Process started, PID: 20753
2011-03-28 17:30:23.911 OUTPUT:	ods-enforcerd
2011-03-28 17:30:23.911 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:30:23.926 - runCommand: Process started, PID: 20757
2011-03-28 17:30:23.926 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:30:23.926 03302 Wait(30)

2011-03-28 17:30:23.926 Requirement: ODSKC40

2011-03-28 17:30:53.927 03304 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:30:53.927 Requirement: ODSKC40

2011-03-28 17:30:53.927 03306 Stop()
2011-03-28 17:30:53.927 Requirement: ODSKC40
2011-03-28 17:30:53.927 RunCommand(ods-control stop)
2011-03-28 17:30:54.938 - runCommand: Process started, PID: 20762
2011-03-28 17:30:54.938 OUTPUT:	Stopping enforcer...
2011-03-28 17:30:54.938 OUTPUT:	Stopping signer engine..
2011-03-28 17:30:54.938 OUTPUT:	Engine shut down.
2011-03-28 17:30:54.939 RunCommand(ps -e | grep enforcer)
2011-03-28 17:30:54.956 - runCommand: Process started, PID: 20769
2011-03-28 17:30:54.957 ERROR:	return code = 1
2011-03-28 17:30:54.957 RunCommand(ps -e | grep signer)
2011-03-28 17:30:54.969 - runCommand: Process started, PID: 20772
2011-03-28 17:30:54.969 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T220: Use a ZSK Algorithm length of 2048 and Algorithm 3 (DSA/SHA1) and confirm ODS signs a zone with this configuration

2011-03-28 17:30:54.970 03312 Comment: ZSK Algorithm length is 2048 with algorithm 3. Singing of the ODS zone should be succesfull.

2011-03-28 17:30:54.970 Requirement: ODSKC40

2011-03-28 17:30:54.970 03314 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:30:54.970 Requirement: ODSKC40

2011-03-28 17:30:54.970 03316 Stop()
2011-03-28 17:30:54.970 Requirement: ODSKC40
2011-03-28 17:30:54.970 RunCommand(ods-control stop)
2011-03-28 17:30:54.975 - runCommand: Process started, PID: 20775
2011-03-28 17:30:54.975 OUTPUT:	Stopping enforcer...
2011-03-28 17:30:54.975 OUTPUT:	Cannot find PID file
2011-03-28 17:30:54.975 OUTPUT:	Stopping signer engine..
2011-03-28 17:30:54.975 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:30:54.975 ERROR:	return code = 1
2011-03-28 17:30:54.975 RunCommand(ps -e | grep enforcer)
2011-03-28 17:30:54.986 - runCommand: Process started, PID: 20778
2011-03-28 17:30:54.986 ERROR:	return code = 1
2011-03-28 17:30:54.986 RunCommand(ps -e | grep signer)
2011-03-28 17:30:54.999 - runCommand: Process started, PID: 20781
2011-03-28 17:30:54.999 ERROR:	return code = 1

2011-03-28 17:30:54.999 03318 Wait(10)

2011-03-28 17:30:54.999 Requirement: ODSKC40

2011-03-28 17:31:04.999 03320 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:31:04.999 Requirement: ODSKC40

2011-03-28 17:31:05.069 03326 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:31:05.091 Requirement: ODSKC40

2011-03-28 17:31:05.246 03330 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:31:05.267 Requirement: ODSKC40

2011-03-28 17:31:05.424 03333 LoadConfig()
2011-03-28 17:31:05.444 Requirement: ODSKC40
2011-03-28 17:31:05.467 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:31:05.698 - runCommand: Process started, PID: 20784

2011-03-28 17:31:05.732 03336 LoadConfig()
2011-03-28 17:31:05.734 Requirement: ODSKC40
2011-03-28 17:31:05.736 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T220_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:31:05.133 - runCommand: Process started, PID: 20785

2011-03-28 17:31:05.137 03338 Comment: New setup for the configs and key repository

2011-03-28 17:31:05.137 Requirement: ODSKC40

2011-03-28 17:31:05.139 03342 Wait(10)

2011-03-28 17:31:05.139 Requirement: ODSKC40

2011-03-28 17:31:15.142 03344 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:31:15.142 Requirement: ODSKC40

2011-03-28 17:31:15.144 03346 Start()
2011-03-28 17:31:15.144 Requirement: ODSKC40
2011-03-28 17:31:15.144 RunCommand(ods-control start)
2011-03-28 17:31:15.172 - runCommand: Background process started, PID: 20786
2011-03-28 17:31:16.345 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:31:16.487 - runCommand: Process started, PID: 20801
2011-03-28 17:31:16.488 OUTPUT:	ods-enforcerd
2011-03-28 17:31:16.488 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:31:16.648 - runCommand: Process started, PID: 20806
2011-03-28 17:31:16.649 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:31:16.651 03348 Wait(30)

2011-03-28 17:31:16.651 Requirement: ODSKC40

2011-03-28 17:31:46.654 03350 Comment: Sign the ODS zone manually

2011-03-28 17:31:46.654 Requirement: ODSKC40

2011-03-28 17:31:46.656 03355 Wait(20)

2011-03-28 17:31:46.656 Requirement: ODSKC40

2011-03-28 17:32:06.659 03357 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 17:32:06.659 Requirement: ODSKC40

2011-03-28 17:32:06.661 03361 CheckFilePresent(ods)
2011-03-28 17:32:06.661 Requirement: ODSKC40
2011-03-28 17:32:06.661 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:32:06.663 03363 Comment: Signed zone file should be present.

2011-03-28 17:32:06.663 Requirement: ODSKC40

2011-03-28 17:32:06.664 03365 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:32:06.665 Requirement: ODSKC40

2011-03-28 17:32:06.666 03370 LoadConfig()
2011-03-28 17:32:06.667 Requirement: ODSKC40
2011-03-28 17:32:06.667 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:32:06.730 - runCommand: Process started, PID: 20819

2011-03-28 17:32:06.732 03373 LoadConfig()
2011-03-28 17:32:06.732 Requirement: ODSKC40
2011-03-28 17:32:06.733 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:32:06.766 - runCommand: Process started, PID: 20820

2011-03-28 17:32:06.768 03375 Comment: New setup for the configs and key repository

2011-03-28 17:32:06.768 Requirement: ODSKC40

2011-03-28 17:32:06.769 03379 Wait(10)

2011-03-28 17:32:06.769 Requirement: ODSKC40

2011-03-28 17:32:16.772 03381 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:32:16.772 Requirement: ODSKC40

2011-03-28 17:32:16.774 03383 Start()
2011-03-28 17:32:16.774 Requirement: ODSKC40
2011-03-28 17:32:16.774 RunCommand(ods-control start)
2011-03-28 17:32:16.800 - runCommand: Background process started, PID: 20821
2011-03-28 17:32:16.872 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:32:16.106 - runCommand: Process started, PID: 20828
2011-03-28 17:32:16.106 OUTPUT:	ods-enforcerd
2011-03-28 17:32:16.106 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:32:16.120 - runCommand: Process started, PID: 20832
2011-03-28 17:32:16.120 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:32:16.120 03385 Wait(30)

2011-03-28 17:32:16.120 Requirement: ODSKC40

2011-03-28 17:32:46.121 03387 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:32:46.121 Requirement: ODSKC40

2011-03-28 17:32:46.121 03389 Stop()
2011-03-28 17:32:46.121 Requirement: ODSKC40
2011-03-28 17:32:46.121 RunCommand(ods-control stop)
2011-03-28 17:32:47.133 - runCommand: Process started, PID: 20837
2011-03-28 17:32:47.133 OUTPUT:	Stopping enforcer...
2011-03-28 17:32:47.133 OUTPUT:	Stopping signer engine..
2011-03-28 17:32:47.133 OUTPUT:	Engine shut down.
2011-03-28 17:32:47.133 RunCommand(ps -e | grep enforcer)
2011-03-28 17:32:47.145 - runCommand: Process started, PID: 20844
2011-03-28 17:32:47.145 ERROR:	return code = 1
2011-03-28 17:32:47.145 RunCommand(ps -e | grep signer)
2011-03-28 17:32:47.158 - runCommand: Process started, PID: 20847
2011-03-28 17:32:47.158 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T230: Use a ZSK Algorithm length of 2048 and Algorithm 5 (RSA/SHA1) and confirm ODS signs a zone with this configuration

2011-03-28 17:32:47.158 03395 Comment: ZSK Algorithm length is 2048 with algorithm 5. Singing of the ODS zone should be succesfull.

2011-03-28 17:32:47.158 Requirement: ODSKC40

2011-03-28 17:32:47.159 03397 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:32:47.159 Requirement: ODSKC40

2011-03-28 17:32:47.159 03399 Stop()
2011-03-28 17:32:47.159 Requirement: ODSKC40
2011-03-28 17:32:47.159 RunCommand(ods-control stop)
2011-03-28 17:32:47.163 - runCommand: Process started, PID: 20850
2011-03-28 17:32:47.163 OUTPUT:	Stopping enforcer...
2011-03-28 17:32:47.163 OUTPUT:	Cannot find PID file
2011-03-28 17:32:47.163 OUTPUT:	Stopping signer engine..
2011-03-28 17:32:47.163 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:32:47.163 ERROR:	return code = 1
2011-03-28 17:32:47.163 RunCommand(ps -e | grep enforcer)
2011-03-28 17:32:47.174 - runCommand: Process started, PID: 20853
2011-03-28 17:32:47.174 ERROR:	return code = 1
2011-03-28 17:32:47.174 RunCommand(ps -e | grep signer)
2011-03-28 17:32:47.185 - runCommand: Process started, PID: 20856
2011-03-28 17:32:47.185 ERROR:	return code = 1

2011-03-28 17:32:47.185 03401 Wait(10)

2011-03-28 17:32:47.185 Requirement: ODSKC40

2011-03-28 17:32:57.186 03403 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:32:57.186 Requirement: ODSKC40

2011-03-28 17:32:57.186 03409 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:32:57.186 Requirement: ODSKC40

2011-03-28 17:32:57.186 03413 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:32:57.186 Requirement: ODSKC40

2011-03-28 17:32:57.186 03416 LoadConfig()
2011-03-28 17:32:57.186 Requirement: ODSKC40
2011-03-28 17:32:57.186 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:32:57.193 - runCommand: Process started, PID: 20859

2011-03-28 17:32:57.193 03419 LoadConfig()
2011-03-28 17:32:57.193 Requirement: ODSKC40
2011-03-28 17:32:57.193 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T230_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:32:57.198 - runCommand: Process started, PID: 20860

2011-03-28 17:32:57.199 03421 Comment: New setup for the configs and key repository

2011-03-28 17:32:57.199 Requirement: ODSKC40

2011-03-28 17:32:57.199 03425 Wait(10)

2011-03-28 17:32:57.199 Requirement: ODSKC40

2011-03-28 17:33:07.199 03427 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:33:07.199 Requirement: ODSKC40

2011-03-28 17:33:07.199 03429 Start()
2011-03-28 17:33:07.199 Requirement: ODSKC40
2011-03-28 17:33:07.199 RunCommand(ods-control start)
2011-03-28 17:33:07.202 - runCommand: Background process started, PID: 20861
2011-03-28 17:33:08.220 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:33:08.243 - runCommand: Process started, PID: 20877
2011-03-28 17:33:08.243 OUTPUT:	ods-enforcerd
2011-03-28 17:33:08.243 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:33:08.257 - runCommand: Process started, PID: 20889
2011-03-28 17:33:08.257 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:33:08.257 03431 Wait(30)

2011-03-28 17:33:08.257 Requirement: ODSKC40

2011-03-28 17:33:38.257 03433 Comment: Sign the ODS zone manually

2011-03-28 17:33:38.257 Requirement: ODSKC40

2011-03-28 17:33:38.258 03438 Wait(20)

2011-03-28 17:33:38.258 Requirement: ODSKC40

2011-03-28 17:33:58.258 03440 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 17:33:58.258 Requirement: ODSKC40

2011-03-28 17:33:58.258 03444 CheckFilePresent(ods)
2011-03-28 17:33:58.258 Requirement: ODSKC40
2011-03-28 17:33:58.258 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:33:58.258 03446 Comment: Signed zone file should be present.

2011-03-28 17:33:58.258 Requirement: ODSKC40

2011-03-28 17:33:58.259 03448 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:33:58.259 Requirement: ODSKC40

2011-03-28 17:33:58.259 03453 LoadConfig()
2011-03-28 17:33:58.259 Requirement: ODSKC40
2011-03-28 17:33:58.259 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:33:58.265 - runCommand: Process started, PID: 20894

2011-03-28 17:33:58.265 03456 LoadConfig()
2011-03-28 17:33:58.265 Requirement: ODSKC40
2011-03-28 17:33:58.265 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:33:58.271 - runCommand: Process started, PID: 20895

2011-03-28 17:33:58.271 03458 Comment: New setup for the configs and key repository

2011-03-28 17:33:58.271 Requirement: ODSKC40

2011-03-28 17:33:58.271 03462 Wait(10)

2011-03-28 17:33:58.271 Requirement: ODSKC40

2011-03-28 17:34:08.272 03464 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:34:08.272 Requirement: ODSKC40

2011-03-28 17:34:08.272 03466 Start()
2011-03-28 17:34:08.272 Requirement: ODSKC40
2011-03-28 17:34:08.272 RunCommand(ods-control start)
2011-03-28 17:34:08.275 - runCommand: Background process started, PID: 20896
2011-03-28 17:34:08.282 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:34:08.304 - runCommand: Process started, PID: 20903
2011-03-28 17:34:08.304 OUTPUT:	ods-enforcerd
2011-03-28 17:34:08.304 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:34:08.319 - runCommand: Process started, PID: 20907
2011-03-28 17:34:08.319 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:34:08.319 03468 Wait(30)

2011-03-28 17:34:08.319 Requirement: ODSKC40

2011-03-28 17:34:38.319 03470 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:34:38.319 Requirement: ODSKC40

2011-03-28 17:34:38.319 03472 Stop()
2011-03-28 17:34:38.319 Requirement: ODSKC40
2011-03-28 17:34:38.319 RunCommand(ods-control stop)
2011-03-28 17:34:39.331 - runCommand: Process started, PID: 20914
2011-03-28 17:34:39.331 OUTPUT:	Stopping enforcer...
2011-03-28 17:34:39.331 OUTPUT:	Stopping signer engine..
2011-03-28 17:34:39.331 OUTPUT:	Engine shut down.
2011-03-28 17:34:39.331 RunCommand(ps -e | grep enforcer)
2011-03-28 17:34:39.349 - runCommand: Process started, PID: 20921
2011-03-28 17:34:39.349 ERROR:	return code = 1
2011-03-28 17:34:39.349 RunCommand(ps -e | grep signer)
2011-03-28 17:34:39.360 - runCommand: Process started, PID: 20924
2011-03-28 17:34:39.361 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T240: Use a ZSK Algorithm length of 2048 and Algorithm 6 (DSA-NSEC3-SHA1) and confirm ODS signs a zone with this configuration

2011-03-28 17:34:39.361 03479 Comment: ZSK Algorithm length is 2048 with algorithm 6. Singing of the ODS zone should be succesfull.

2011-03-28 17:34:39.361 Requirement: ODSKC40

2011-03-28 17:34:39.361 03481 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:34:39.361 Requirement: ODSKC40

2011-03-28 17:34:39.361 03483 Stop()
2011-03-28 17:34:39.361 Requirement: ODSKC40
2011-03-28 17:34:39.361 RunCommand(ods-control stop)
2011-03-28 17:34:39.366 - runCommand: Process started, PID: 20927
2011-03-28 17:34:39.366 OUTPUT:	Stopping enforcer...
2011-03-28 17:34:39.366 OUTPUT:	Cannot find PID file
2011-03-28 17:34:39.366 OUTPUT:	Stopping signer engine..
2011-03-28 17:34:39.366 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:34:39.366 ERROR:	return code = 1
2011-03-28 17:34:39.366 RunCommand(ps -e | grep enforcer)
2011-03-28 17:34:39.377 - runCommand: Process started, PID: 20930
2011-03-28 17:34:39.377 ERROR:	return code = 1
2011-03-28 17:34:39.377 RunCommand(ps -e | grep signer)
2011-03-28 17:34:39.390 - runCommand: Process started, PID: 20933
2011-03-28 17:34:39.391 ERROR:	return code = 1

2011-03-28 17:34:39.391 03485 Wait(10)

2011-03-28 17:34:39.391 Requirement: ODSKC40

2011-03-28 17:34:49.391 03487 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:34:49.391 Requirement: ODSKC40

2011-03-28 17:34:49.391 03493 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:34:49.391 Requirement: ODSKC40

2011-03-28 17:34:49.391 03497 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:34:49.391 Requirement: ODSKC40

2011-03-28 17:34:49.392 03500 LoadConfig()
2011-03-28 17:34:49.392 Requirement: ODSKC40
2011-03-28 17:34:49.392 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:34:49.398 - runCommand: Process started, PID: 20936

2011-03-28 17:34:49.398 03503 LoadConfig()
2011-03-28 17:34:49.398 Requirement: ODSKC40
2011-03-28 17:34:49.398 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T240_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:34:49.404 - runCommand: Process started, PID: 20937

2011-03-28 17:34:49.404 03505 Comment: New setup for the configs and key repository

2011-03-28 17:34:49.404 Requirement: ODSKC40

2011-03-28 17:34:49.404 03509 Wait(10)

2011-03-28 17:34:49.404 Requirement: ODSKC40

2011-03-28 17:34:59.405 03511 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:34:59.405 Requirement: ODSKC40

2011-03-28 17:34:59.405 03513 Start()
2011-03-28 17:34:59.405 Requirement: ODSKC40
2011-03-28 17:34:59.405 RunCommand(ods-control start)
2011-03-28 17:34:59.407 - runCommand: Background process started, PID: 20938
2011-03-28 17:35:00.424 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:35:00.442 - runCommand: Process started, PID: 20953
2011-03-28 17:35:00.442 OUTPUT:	ods-enforcerd
2011-03-28 17:35:00.442 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:35:00.457 - runCommand: Process started, PID: 20966
2011-03-28 17:35:00.457 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:35:00.457 03515 Wait(30)

2011-03-28 17:35:00.457 Requirement: ODSKC40

2011-03-28 17:35:30.458 03517 Comment: Sign the ODS zone manually

2011-03-28 17:35:30.458 Requirement: ODSKC40

2011-03-28 17:35:30.458 03522 Wait(20)

2011-03-28 17:35:30.458 Requirement: ODSKC40

2011-03-28 17:35:50.458 03524 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 17:35:50.458 Requirement: ODSKC40

2011-03-28 17:35:50.458 03528 CheckFilePresent(ods)
2011-03-28 17:35:50.458 Requirement: ODSKC40
2011-03-28 17:35:50.458 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:35:50.459 03530 Comment: Signed zone file should be present.

2011-03-28 17:35:50.459 Requirement: ODSKC40

2011-03-28 17:35:50.459 03532 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:35:50.459 Requirement: ODSKC40

2011-03-28 17:35:50.459 03537 LoadConfig()
2011-03-28 17:35:50.459 Requirement: ODSKC40
2011-03-28 17:35:50.459 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:35:50.465 - runCommand: Process started, PID: 20971

2011-03-28 17:35:50.466 03540 LoadConfig()
2011-03-28 17:35:50.466 Requirement: ODSKC40
2011-03-28 17:35:50.466 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:35:50.471 - runCommand: Process started, PID: 20972

2011-03-28 17:35:50.471 03542 Comment: New setup for the configs and key repository

2011-03-28 17:35:50.471 Requirement: ODSKC40

2011-03-28 17:35:50.472 03546 Wait(10)

2011-03-28 17:35:50.472 Requirement: ODSKC40

2011-03-28 17:36:00.472 03548 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:36:00.472 Requirement: ODSKC40

2011-03-28 17:36:00.472 03550 Start()
2011-03-28 17:36:00.472 Requirement: ODSKC40
2011-03-28 17:36:00.472 RunCommand(ods-control start)
2011-03-28 17:36:00.475 - runCommand: Background process started, PID: 20973
2011-03-28 17:36:00.482 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:36:00.503 - runCommand: Process started, PID: 20980
2011-03-28 17:36:00.503 OUTPUT:	ods-enforcerd
2011-03-28 17:36:00.503 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:36:00.518 - runCommand: Process started, PID: 20984
2011-03-28 17:36:00.518 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:36:00.518 03552 Wait(30)

2011-03-28 17:36:00.518 Requirement: ODSKC40

2011-03-28 17:36:30.518 03554 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:36:30.518 Requirement: ODSKC40

2011-03-28 17:36:30.519 03556 Stop()
2011-03-28 17:36:30.519 Requirement: ODSKC40
2011-03-28 17:36:30.519 RunCommand(ods-control stop)
2011-03-28 17:36:31.531 - runCommand: Process started, PID: 20989
2011-03-28 17:36:31.531 OUTPUT:	Stopping enforcer...
2011-03-28 17:36:31.531 OUTPUT:	Stopping signer engine..
2011-03-28 17:36:31.531 OUTPUT:	Engine shut down.
2011-03-28 17:36:31.531 RunCommand(ps -e | grep enforcer)
2011-03-28 17:36:31.549 - runCommand: Process started, PID: 20996
2011-03-28 17:36:31.549 ERROR:	return code = 1
2011-03-28 17:36:31.549 RunCommand(ps -e | grep signer)
2011-03-28 17:36:31.560 - runCommand: Process started, PID: 20999
2011-03-28 17:36:31.560 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T250: Use a ZSK Algorithm length of 2048 and Algorithm 7 (RSASHA1-NSEC3-SHA1) and confirm ODS signs a zone with this configuration

2011-03-28 17:36:31.560 03562 Comment: ZSK Algorithm length is 2048 with algorithm 7. Singing of the ODS zone should be succesfull.

2011-03-28 17:36:31.560 Requirement: ODSKC40

2011-03-28 17:36:31.560 03564 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:36:31.560 Requirement: ODSKC40

2011-03-28 17:36:31.560 03566 Stop()
2011-03-28 17:36:31.560 Requirement: ODSKC40
2011-03-28 17:36:31.560 RunCommand(ods-control stop)
2011-03-28 17:36:31.565 - runCommand: Process started, PID: 21002
2011-03-28 17:36:31.565 OUTPUT:	Stopping enforcer...
2011-03-28 17:36:31.565 OUTPUT:	Cannot find PID file
2011-03-28 17:36:31.565 OUTPUT:	Stopping signer engine..
2011-03-28 17:36:31.565 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:36:31.565 ERROR:	return code = 1
2011-03-28 17:36:31.565 RunCommand(ps -e | grep enforcer)
2011-03-28 17:36:31.577 - runCommand: Process started, PID: 21005
2011-03-28 17:36:31.577 ERROR:	return code = 1
2011-03-28 17:36:31.577 RunCommand(ps -e | grep signer)
2011-03-28 17:36:31.590 - runCommand: Process started, PID: 21008
2011-03-28 17:36:31.590 ERROR:	return code = 1

2011-03-28 17:36:31.591 03568 Wait(10)

2011-03-28 17:36:31.591 Requirement: ODSKC40

2011-03-28 17:36:41.591 03570 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:36:41.591 Requirement: ODSKC40

2011-03-28 17:36:41.591 03576 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:36:41.591 Requirement: ODSKC40

2011-03-28 17:36:41.591 03580 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:36:41.591 Requirement: ODSKC40

2011-03-28 17:36:41.591 03583 LoadConfig()
2011-03-28 17:36:41.592 Requirement: ODSKC40
2011-03-28 17:36:41.592 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:36:41.598 - runCommand: Process started, PID: 21011

2011-03-28 17:36:41.598 03586 LoadConfig()
2011-03-28 17:36:41.598 Requirement: ODSKC40
2011-03-28 17:36:41.598 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T250_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:36:41.604 - runCommand: Process started, PID: 21012

2011-03-28 17:36:41.604 03588 Comment: New setup for the configs and key repository

2011-03-28 17:36:41.604 Requirement: ODSKC40

2011-03-28 17:36:41.604 03592 Wait(10)

2011-03-28 17:36:41.604 Requirement: ODSKC40

2011-03-28 17:36:51.605 03594 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:36:51.605 Requirement: ODSKC40

2011-03-28 17:36:51.605 03596 Start()
2011-03-28 17:36:51.605 Requirement: ODSKC40
2011-03-28 17:36:51.605 RunCommand(ods-control start)
2011-03-28 17:36:51.607 - runCommand: Background process started, PID: 21015
2011-03-28 17:36:52.623 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:36:52.642 - runCommand: Process started, PID: 21030
2011-03-28 17:36:52.642 OUTPUT:	ods-enforcerd
2011-03-28 17:36:52.642 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:36:52.657 - runCommand: Process started, PID: 21043
2011-03-28 17:36:52.657 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:36:52.657 03598 Wait(30)

2011-03-28 17:36:52.657 Requirement: ODSKC40

2011-03-28 17:37:22.658 03600 Comment: Sign the ODS zone manually

2011-03-28 17:37:22.658 Requirement: ODSKC40

2011-03-28 17:37:22.658 03605 Wait(20)

2011-03-28 17:37:22.658 Requirement: ODSKC40

2011-03-28 17:37:42.658 03607 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 17:37:42.658 Requirement: ODSKC40

2011-03-28 17:37:42.658 03611 CheckFilePresent(ods)
2011-03-28 17:37:42.659 Requirement: ODSKC40
2011-03-28 17:37:42.659 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:37:42.659 03613 Comment: Signed zone file should be present.

2011-03-28 17:37:42.659 Requirement: ODSKC40

2011-03-28 17:37:42.659 03615 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:37:42.659 Requirement: ODSKC40

2011-03-28 17:37:42.659 03620 LoadConfig()
2011-03-28 17:37:42.659 Requirement: ODSKC40
2011-03-28 17:37:42.659 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:37:42.665 - runCommand: Process started, PID: 21048

2011-03-28 17:37:42.666 03623 LoadConfig()
2011-03-28 17:37:42.666 Requirement: ODSKC40
2011-03-28 17:37:42.666 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:37:42.671 - runCommand: Process started, PID: 21049

2011-03-28 17:37:42.672 03625 Comment: New setup for the configs and key repository

2011-03-28 17:37:42.672 Requirement: ODSKC40

2011-03-28 17:37:42.672 03629 Wait(10)

2011-03-28 17:37:42.672 Requirement: ODSKC40

2011-03-28 17:37:52.672 03631 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:37:52.672 Requirement: ODSKC40

2011-03-28 17:37:52.672 03633 Start()
2011-03-28 17:37:52.672 Requirement: ODSKC40
2011-03-28 17:37:52.672 RunCommand(ods-control start)
2011-03-28 17:37:52.675 - runCommand: Background process started, PID: 21050
2011-03-28 17:37:52.682 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:37:52.703 - runCommand: Process started, PID: 21057
2011-03-28 17:37:52.703 OUTPUT:	ods-enforcerd
2011-03-28 17:37:52.703 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:37:52.718 - runCommand: Process started, PID: 21061
2011-03-28 17:37:52.718 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:37:52.718 03635 Wait(30)

2011-03-28 17:37:52.718 Requirement: ODSKC40

2011-03-28 17:38:22.718 03637 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:38:22.718 Requirement: ODSKC40

2011-03-28 17:38:22.719 03639 Stop()
2011-03-28 17:38:22.719 Requirement: ODSKC40
2011-03-28 17:38:22.719 RunCommand(ods-control stop)
2011-03-28 17:38:23.730 - runCommand: Process started, PID: 21066
2011-03-28 17:38:23.730 OUTPUT:	Stopping enforcer...
2011-03-28 17:38:23.730 OUTPUT:	Stopping signer engine..
2011-03-28 17:38:23.730 OUTPUT:	Engine shut down.
2011-03-28 17:38:23.730 RunCommand(ps -e | grep enforcer)
2011-03-28 17:38:23.748 - runCommand: Process started, PID: 21073
2011-03-28 17:38:23.749 ERROR:	return code = 1
2011-03-28 17:38:23.749 RunCommand(ps -e | grep signer)
2011-03-28 17:38:23.760 - runCommand: Process started, PID: 21076
2011-03-28 17:38:23.760 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T260: Use a ZSK Algorithm length of 2048 and Algorithm 8 (RSA/SHA-256) and confirm ODS signs a zone with this configuration

2011-03-28 17:38:23.760 03644 Comment: ZSK Algorithm length is 2048 with algorithm 8. Singing of the ODS zone should be succesfull.

2011-03-28 17:38:23.760 Requirement: ODSKC40

2011-03-28 17:38:23.760 03646 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:38:23.760 Requirement: ODSKC40

2011-03-28 17:38:23.761 03648 Stop()
2011-03-28 17:38:23.761 Requirement: ODSKC40
2011-03-28 17:38:23.761 RunCommand(ods-control stop)
2011-03-28 17:38:23.765 - runCommand: Process started, PID: 21079
2011-03-28 17:38:23.765 OUTPUT:	Stopping enforcer...
2011-03-28 17:38:23.765 OUTPUT:	Cannot find PID file
2011-03-28 17:38:23.765 OUTPUT:	Stopping signer engine..
2011-03-28 17:38:23.765 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:38:23.765 ERROR:	return code = 1
2011-03-28 17:38:23.765 RunCommand(ps -e | grep enforcer)
2011-03-28 17:38:23.777 - runCommand: Process started, PID: 21082
2011-03-28 17:38:23.777 ERROR:	return code = 1
2011-03-28 17:38:23.777 RunCommand(ps -e | grep signer)
2011-03-28 17:38:23.790 - runCommand: Process started, PID: 21085
2011-03-28 17:38:23.790 ERROR:	return code = 1

2011-03-28 17:38:23.790 03650 Wait(10)

2011-03-28 17:38:23.790 Requirement: ODSKC40

2011-03-28 17:38:33.791 03652 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:38:33.791 Requirement: ODSKC40

2011-03-28 17:38:33.791 03658 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:38:33.791 Requirement: ODSKC40

2011-03-28 17:38:33.791 03662 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:38:33.791 Requirement: ODSKC40

2011-03-28 17:38:33.791 03665 LoadConfig()
2011-03-28 17:38:33.791 Requirement: ODSKC40
2011-03-28 17:38:33.791 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:38:33.797 - runCommand: Process started, PID: 21088

2011-03-28 17:38:33.798 03668 LoadConfig()
2011-03-28 17:38:33.798 Requirement: ODSKC40
2011-03-28 17:38:33.798 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T260_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:38:33.803 - runCommand: Process started, PID: 21089

2011-03-28 17:38:33.804 03670 Comment: New setup for the configs and key repository

2011-03-28 17:38:33.804 Requirement: ODSKC40

2011-03-28 17:38:33.804 03674 Wait(10)

2011-03-28 17:38:33.804 Requirement: ODSKC40

2011-03-28 17:38:43.804 03676 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:38:43.804 Requirement: ODSKC40

2011-03-28 17:38:43.804 03678 Start()
2011-03-28 17:38:43.804 Requirement: ODSKC40
2011-03-28 17:38:43.804 RunCommand(ods-control start)
2011-03-28 17:38:43.807 - runCommand: Background process started, PID: 21090
2011-03-28 17:38:44.823 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:38:44.841 - runCommand: Process started, PID: 21105
2011-03-28 17:38:44.841 OUTPUT:	ods-enforcerd
2011-03-28 17:38:44.841 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:38:44.857 - runCommand: Process started, PID: 21118
2011-03-28 17:38:44.857 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:38:44.857 03680 Wait(30)

2011-03-28 17:38:44.857 Requirement: ODSKC40

2011-03-28 17:39:14.857 03682 Comment: Sign the ODS zone manually

2011-03-28 17:39:14.857 Requirement: ODSKC40

2011-03-28 17:39:14.858 03687 Wait(20)

2011-03-28 17:39:14.858 Requirement: ODSKC40

2011-03-28 17:39:34.858 03689 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 17:39:34.858 Requirement: ODSKC40

2011-03-28 17:39:34.858 03693 CheckFilePresent(ods)
2011-03-28 17:39:34.858 Requirement: ODSKC40
2011-03-28 17:39:34.858 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:39:34.858 03695 Comment: Signed zone file should be present.

2011-03-28 17:39:34.858 Requirement: ODSKC40

2011-03-28 17:39:34.858 03697 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:39:34.858 Requirement: ODSKC40

2011-03-28 17:39:34.859 03702 LoadConfig()
2011-03-28 17:39:34.859 Requirement: ODSKC40
2011-03-28 17:39:34.859 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:39:34.865 - runCommand: Process started, PID: 21123

2011-03-28 17:39:34.866 03705 LoadConfig()
2011-03-28 17:39:34.866 Requirement: ODSKC40
2011-03-28 17:39:34.866 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:39:34.872 - runCommand: Process started, PID: 21124

2011-03-28 17:39:34.872 03707 Comment: New setup for the configs and key repository

2011-03-28 17:39:34.872 Requirement: ODSKC40

2011-03-28 17:39:34.873 03711 Wait(10)

2011-03-28 17:39:34.873 Requirement: ODSKC40

2011-03-28 17:39:44.873 03713 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:39:44.873 Requirement: ODSKC40

2011-03-28 17:39:44.873 03715 Start()
2011-03-28 17:39:44.873 Requirement: ODSKC40
2011-03-28 17:39:44.873 RunCommand(ods-control start)
2011-03-28 17:39:44.876 - runCommand: Background process started, PID: 21125
2011-03-28 17:39:44.883 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:39:44.902 - runCommand: Process started, PID: 21132
2011-03-28 17:39:44.902 OUTPUT:	ods-enforcerd
2011-03-28 17:39:44.902 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:39:44.916 - runCommand: Process started, PID: 21136
2011-03-28 17:39:44.916 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:39:44.916 03717 Wait(30)

2011-03-28 17:39:44.916 Requirement: ODSKC40

2011-03-28 17:40:14.917 03719 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:40:14.917 Requirement: ODSKC40

2011-03-28 17:40:14.917 03721 Stop()
2011-03-28 17:40:14.917 Requirement: ODSKC40
2011-03-28 17:40:14.917 RunCommand(ods-control stop)
2011-03-28 17:40:15.928 - runCommand: Process started, PID: 21141
2011-03-28 17:40:15.928 OUTPUT:	Stopping enforcer...
2011-03-28 17:40:15.928 OUTPUT:	Stopping signer engine..
2011-03-28 17:40:15.928 OUTPUT:	Engine shut down.
2011-03-28 17:40:15.928 RunCommand(ps -e | grep enforcer)
2011-03-28 17:40:15.946 - runCommand: Process started, PID: 21148
2011-03-28 17:40:15.946 ERROR:	return code = 1
2011-03-28 17:40:15.947 RunCommand(ps -e | grep signer)
2011-03-28 17:40:15.965 - runCommand: Process started, PID: 21151
2011-03-28 17:40:15.965 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T270: Use a ZSK Algorithm length of 2048 and Algorithm 10 (RSA/SHA-512) and confirm ODS signs a zone with this configuration

2011-03-28 17:40:15.965 03729 Comment: ZSK Algorithm length is 2048 with algorithm 10. Singing of the ODS zone should be succesfull.

2011-03-28 17:40:15.965 Requirement: ODSKC40

2011-03-28 17:40:15.965 03731 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:40:15.965 Requirement: ODSKC40

2011-03-28 17:40:15.966 03733 Stop()
2011-03-28 17:40:15.966 Requirement: ODSKC40
2011-03-28 17:40:15.966 RunCommand(ods-control stop)
2011-03-28 17:40:15.973 - runCommand: Process started, PID: 21154
2011-03-28 17:40:15.973 OUTPUT:	Stopping enforcer...
2011-03-28 17:40:15.973 OUTPUT:	Cannot find PID file
2011-03-28 17:40:15.973 OUTPUT:	Stopping signer engine..
2011-03-28 17:40:15.973 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:40:15.973 ERROR:	return code = 1
2011-03-28 17:40:15.973 RunCommand(ps -e | grep enforcer)
2011-03-28 17:40:15.990 - runCommand: Process started, PID: 21157
2011-03-28 17:40:15.990 ERROR:	return code = 1
2011-03-28 17:40:15.990 RunCommand(ps -e | grep signer)
2011-03-28 17:40:16.424 - runCommand: Process started, PID: 21160
2011-03-28 17:40:16.431 ERROR:	return code = 1

2011-03-28 17:40:16.444 03735 Wait(10)

2011-03-28 17:40:16.445 Requirement: ODSKC40

2011-03-28 17:40:26.472 03737 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:40:26.476 Requirement: ODSKC40

2011-03-28 17:40:26.493 03743 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:40:26.495 Requirement: ODSKC40

2011-03-28 17:40:26.511 03747 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:40:26.513 Requirement: ODSKC40

2011-03-28 17:40:26.529 03750 LoadConfig()
2011-03-28 17:40:26.531 Requirement: ODSKC40
2011-03-28 17:40:26.533 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:40:26.116 - runCommand: Process started, PID: 21163

2011-03-28 17:40:26.119 03753 LoadConfig()
2011-03-28 17:40:26.119 Requirement: ODSKC40
2011-03-28 17:40:26.119 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T270_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:40:26.175 - runCommand: Process started, PID: 21164

2011-03-28 17:40:26.178 03755 Comment: New setup for the configs and key repository

2011-03-28 17:40:26.179 Requirement: ODSKC40

2011-03-28 17:40:26.180 03759 Wait(10)

2011-03-28 17:40:26.180 Requirement: ODSKC40

2011-03-28 17:40:36.183 03761 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:40:36.184 Requirement: ODSKC40

2011-03-28 17:40:36.185 03763 Start()
2011-03-28 17:40:36.185 Requirement: ODSKC40
2011-03-28 17:40:36.185 RunCommand(ods-control start)
2011-03-28 17:40:36.211 - runCommand: Background process started, PID: 21165
2011-03-28 17:40:37.413 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:40:37.591 - runCommand: Process started, PID: 21180
2011-03-28 17:40:37.591 OUTPUT:	ods-enforcerd
2011-03-28 17:40:37.592 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:40:37.773 - runCommand: Process started, PID: 21193
2011-03-28 17:40:37.774 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:40:37.775 03765 Wait(30)

2011-03-28 17:40:37.776 Requirement: ODSKC40

2011-03-28 17:41:07.778 03767 Comment: Sign the ODS zone manually

2011-03-28 17:41:07.779 Requirement: ODSKC40

2011-03-28 17:41:07.780 03772 Wait(20)

2011-03-28 17:41:07.780 Requirement: ODSKC40

2011-03-28 17:41:27.783 03774 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 17:41:27.784 Requirement: ODSKC40

2011-03-28 17:41:27.785 03778 CheckFilePresent(ods)
2011-03-28 17:41:27.786 Requirement: ODSKC40
2011-03-28 17:41:27.786 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:41:27.787 03780 Comment: Signed zone file should be present.

2011-03-28 17:41:27.788 Requirement: ODSKC40

2011-03-28 17:41:27.789 03782 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:41:27.789 Requirement: ODSKC40

2011-03-28 17:41:27.791 03787 LoadConfig()
2011-03-28 17:41:27.791 Requirement: ODSKC40
2011-03-28 17:41:27.791 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:41:27.853 - runCommand: Process started, PID: 21198

2011-03-28 17:41:27.855 03790 LoadConfig()
2011-03-28 17:41:27.855 Requirement: ODSKC40
2011-03-28 17:41:27.855 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:41:27.889 - runCommand: Process started, PID: 21199

2011-03-28 17:41:27.891 03792 Comment: New setup for the configs and key repository

2011-03-28 17:41:27.891 Requirement: ODSKC40

2011-03-28 17:41:27.892 03796 Wait(10)

2011-03-28 17:41:27.892 Requirement: ODSKC40

2011-03-28 17:41:37.895 03798 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:41:37.895 Requirement: ODSKC40

2011-03-28 17:41:37.897 03800 Start()
2011-03-28 17:41:37.897 Requirement: ODSKC40
2011-03-28 17:41:37.897 RunCommand(ods-control start)
2011-03-28 17:41:37.923 - runCommand: Background process started, PID: 21201
2011-03-28 17:41:37.995 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:41:37.118 - runCommand: Process started, PID: 21208
2011-03-28 17:41:37.118 OUTPUT:	ods-enforcerd
2011-03-28 17:41:37.118 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:41:37.132 - runCommand: Process started, PID: 21212
2011-03-28 17:41:37.133 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:41:37.133 03802 Wait(30)

2011-03-28 17:41:37.133 Requirement: ODSKC40

2011-03-28 17:42:07.133 03804 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:42:07.133 Requirement: ODSKC40

2011-03-28 17:42:07.133 03806 Stop()
2011-03-28 17:42:07.133 Requirement: ODSKC40
2011-03-28 17:42:07.133 RunCommand(ods-control stop)
2011-03-28 17:42:08.145 - runCommand: Process started, PID: 21217
2011-03-28 17:42:08.145 OUTPUT:	Stopping enforcer...
2011-03-28 17:42:08.145 OUTPUT:	Stopping signer engine..
2011-03-28 17:42:08.145 OUTPUT:	Engine shut down.
2011-03-28 17:42:08.145 RunCommand(ps -e | grep enforcer)
2011-03-28 17:42:08.157 - runCommand: Process started, PID: 21224
2011-03-28 17:42:08.158 ERROR:	return code = 1
2011-03-28 17:42:08.158 RunCommand(ps -e | grep signer)
2011-03-28 17:42:08.170 - runCommand: Process started, PID: 21227
2011-03-28 17:42:08.170 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T280: Use a ZSK Algorithm length of 2048 and Algorithm 12 (GOST R 34.10-2001) and confirm ODS signs a zone with this configuration

2011-03-28 17:42:08.171 03811 Comment: ZSK Algorithm length is 2048 with algorithm 12. Singing of the ODS zone should be succesfull.

2011-03-28 17:42:08.171 Requirement: ODSKC40

2011-03-28 17:42:08.171 03813 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:42:08.171 Requirement: ODSKC40

2011-03-28 17:42:08.171 03815 Stop()
2011-03-28 17:42:08.171 Requirement: ODSKC40
2011-03-28 17:42:08.171 RunCommand(ods-control stop)
2011-03-28 17:42:08.175 - runCommand: Process started, PID: 21230
2011-03-28 17:42:08.175 OUTPUT:	Stopping enforcer...
2011-03-28 17:42:08.175 OUTPUT:	Cannot find PID file
2011-03-28 17:42:08.175 OUTPUT:	Stopping signer engine..
2011-03-28 17:42:08.175 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:42:08.175 ERROR:	return code = 1
2011-03-28 17:42:08.175 RunCommand(ps -e | grep enforcer)
2011-03-28 17:42:08.187 - runCommand: Process started, PID: 21233
2011-03-28 17:42:08.187 ERROR:	return code = 1
2011-03-28 17:42:08.187 RunCommand(ps -e | grep signer)
2011-03-28 17:42:08.197 - runCommand: Process started, PID: 21236
2011-03-28 17:42:08.198 ERROR:	return code = 1

2011-03-28 17:42:08.198 03817 Wait(10)

2011-03-28 17:42:08.198 Requirement: ODSKC40

2011-03-28 17:42:18.198 03819 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:42:18.198 Requirement: ODSKC40

2011-03-28 17:42:18.198 03825 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:42:18.198 Requirement: ODSKC40

2011-03-28 17:42:18.198 03829 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:42:18.198 Requirement: ODSKC40

2011-03-28 17:42:18.198 03832 LoadConfig()
2011-03-28 17:42:18.199 Requirement: ODSKC40
2011-03-28 17:42:18.199 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:42:18.205 - runCommand: Process started, PID: 21239

2011-03-28 17:42:18.205 03835 LoadConfig()
2011-03-28 17:42:18.205 Requirement: ODSKC40
2011-03-28 17:42:18.205 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T280_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:42:18.211 - runCommand: Process started, PID: 21240

2011-03-28 17:42:18.211 03837 Comment: New setup for the configs and key repository

2011-03-28 17:42:18.211 Requirement: ODSKC40

2011-03-28 17:42:18.211 03841 Wait(10)

2011-03-28 17:42:18.211 Requirement: ODSKC40

2011-03-28 17:42:28.212 03843 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:42:28.212 Requirement: ODSKC40

2011-03-28 17:42:28.212 03845 Start()
2011-03-28 17:42:28.212 Requirement: ODSKC40
2011-03-28 17:42:28.212 RunCommand(ods-control start)
2011-03-28 17:42:28.214 - runCommand: Background process started, PID: 21241
2011-03-28 17:42:29.232 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:42:29.254 - runCommand: Process started, PID: 21256
2011-03-28 17:42:29.254 OUTPUT:	ods-enforcerd
2011-03-28 17:42:29.254 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:42:29.271 - runCommand: Process started, PID: 21269
2011-03-28 17:42:29.271 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:42:29.271 03847 Wait(30)

2011-03-28 17:42:29.271 Requirement: ODSKC40

2011-03-28 17:42:59.272 03849 Comment: Sign the ODS zone manually

2011-03-28 17:42:59.272 Requirement: ODSKC40

2011-03-28 17:42:59.272 03854 Wait(20)

2011-03-28 17:42:59.272 Requirement: ODSKC40

2011-03-28 17:43:19.272 03856 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 17:43:19.272 Requirement: ODSKC40

2011-03-28 17:43:19.272 03860 CheckFilePresent(ods)
2011-03-28 17:43:19.272 Requirement: ODSKC40
2011-03-28 17:43:19.272 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:43:19.273 03862 Comment: Signed zone file should be present.

2011-03-28 17:43:19.273 Requirement: ODSKC40

2011-03-28 17:43:19.273 03864 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:43:19.273 Requirement: ODSKC40

2011-03-28 17:43:19.273 03869 LoadConfig()
2011-03-28 17:43:19.273 Requirement: ODSKC40
2011-03-28 17:43:19.273 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:43:19.279 - runCommand: Process started, PID: 21274

2011-03-28 17:43:19.280 03872 LoadConfig()
2011-03-28 17:43:19.280 Requirement: ODSKC40
2011-03-28 17:43:19.280 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:43:19.285 - runCommand: Process started, PID: 21275

2011-03-28 17:43:19.285 03874 Comment: New setup for the configs and key repository

2011-03-28 17:43:19.285 Requirement: ODSKC40

2011-03-28 17:43:19.286 03878 Wait(10)

2011-03-28 17:43:19.286 Requirement: ODSKC40

2011-03-28 17:43:29.286 03880 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:43:29.286 Requirement: ODSKC40

2011-03-28 17:43:29.286 03882 Start()
2011-03-28 17:43:29.286 Requirement: ODSKC40
2011-03-28 17:43:29.286 RunCommand(ods-control start)
2011-03-28 17:43:29.289 - runCommand: Background process started, PID: 21276
2011-03-28 17:43:29.296 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:43:29.315 - runCommand: Process started, PID: 21283
2011-03-28 17:43:29.315 OUTPUT:	ods-enforcerd
2011-03-28 17:43:29.315 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:43:29.331 - runCommand: Process started, PID: 21287
2011-03-28 17:43:29.331 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:43:29.331 03884 Wait(30)

2011-03-28 17:43:29.331 Requirement: ODSKC40

2011-03-28 17:43:59.332 03886 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:43:59.332 Requirement: ODSKC40

2011-03-28 17:43:59.332 03888 Stop()
2011-03-28 17:43:59.332 Requirement: ODSKC40
2011-03-28 17:43:59.332 RunCommand(ods-control stop)
2011-03-28 17:44:00.344 - runCommand: Process started, PID: 21292
2011-03-28 17:44:00.344 OUTPUT:	Stopping enforcer...
2011-03-28 17:44:00.344 OUTPUT:	Stopping signer engine..
2011-03-28 17:44:00.344 OUTPUT:	Engine shut down.
2011-03-28 17:44:00.344 RunCommand(ps -e | grep enforcer)
2011-03-28 17:44:00.357 - runCommand: Process started, PID: 21299
2011-03-28 17:44:00.357 ERROR:	return code = 1
2011-03-28 17:44:00.357 RunCommand(ps -e | grep signer)
2011-03-28 17:44:00.368 - runCommand: Process started, PID: 21302
2011-03-28 17:44:00.368 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T290: Use a value with an incorrect format for ZSK Lifetime (A) and confirm ods-kaspcheck fails

2011-03-28 17:44:00.369 03895 Comment: ZSK Lifetime value in the keys part (general part) is incorrect: A instead of a valid value like PT12H. Ods-kaspcheck validation should fail for kasp.xml.

2011-03-28 17:44:00.369 Requirement: ODSKC40

2011-03-28 17:44:00.369 03897 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:44:00.369 Requirement: ODSKC40

2011-03-28 17:44:00.369 03899 Stop()
2011-03-28 17:44:00.369 Requirement: ODSKC40
2011-03-28 17:44:00.369 RunCommand(ods-control stop)
2011-03-28 17:44:00.375 - runCommand: Process started, PID: 21305
2011-03-28 17:44:00.375 OUTPUT:	Stopping enforcer...
2011-03-28 17:44:00.375 OUTPUT:	Cannot find PID file
2011-03-28 17:44:00.375 OUTPUT:	Stopping signer engine..
2011-03-28 17:44:00.375 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:44:00.375 ERROR:	return code = 1
2011-03-28 17:44:00.375 RunCommand(ps -e | grep enforcer)
2011-03-28 17:44:00.386 - runCommand: Process started, PID: 21308
2011-03-28 17:44:00.386 ERROR:	return code = 1
2011-03-28 17:44:00.386 RunCommand(ps -e | grep signer)
2011-03-28 17:44:00.397 - runCommand: Process started, PID: 21311
2011-03-28 17:44:00.397 ERROR:	return code = 1

2011-03-28 17:44:00.397 03901 Wait(10)

2011-03-28 17:44:00.397 Requirement: ODSKC40

2011-03-28 17:44:10.397 03903 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:44:10.397 Requirement: ODSKC40

2011-03-28 17:44:10.397 03906 LoadConfig()
2011-03-28 17:44:10.397 Requirement: ODSKC40
2011-03-28 17:44:10.397 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:44:10.404 - runCommand: Process started, PID: 21314

2011-03-28 17:44:10.404 03909 LoadConfig()
2011-03-28 17:44:10.404 Requirement: ODSKC40
2011-03-28 17:44:10.404 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T290_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:44:10.409 - runCommand: Process started, PID: 21315

2011-03-28 17:44:10.410 03911 Comment: Update all the configs.

2011-03-28 17:44:10.410 Requirement: ODSKC40

2011-03-28 17:44:10.410 03913 UpdateAll()
2011-03-28 17:44:10.410 Requirement: ODSKC40
2011-03-28 17:44:10.410 RunCommand(ods-ksmutil update all)
2011-03-28 17:44:10.759 - runCommand: Process started, PID: 21316
2011-03-28 17:44:10.759 OUTPUT:	ERROR: Can't find Lifetime in  in /etc/opendnssec/kasp.xml
2011-03-28 17:44:10.759 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:44:10.759 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:44:10.759 OUTPUT:	Repository SoftHSM found
2011-03-28 17:44:10.759 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:44:10.759 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:44:10.759 OUTPUT:	Error validating file "/etc/opendnssec/kasp.xml"
2011-03-28 17:44:10.759 OUTPUT:	Failed to update policies
2011-03-28 17:44:10.759 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:44:10.759 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:44:10.759 ERROR:	/etc/opendnssec/kasp.xml:52: element Lifetime: Relax-NG validity error : Type duration doesn't allow value 'A'
2011-03-28 17:44:10.759 ERROR:	/etc/opendnssec/kasp.xml:52: element Lifetime: Relax-NG validity error : Error validating datatype duration
2011-03-28 17:44:10.759 ERROR:	/etc/opendnssec/kasp.xml:52: element Lifetime: Relax-NG validity error : Element Lifetime failed to validate content
2011-03-28 17:44:10.759 ERROR:	/etc/opendnssec/kasp.xml fails to validate
2011-03-28 17:44:10.759 ERROR:	/etc/opendnssec/kasp.xml:52: element Lifetime: Relax-NG validity error : Type duration doesn't allow value 'A'
2011-03-28 17:44:10.759 ERROR:	/etc/opendnssec/kasp.xml:52: element Lifetime: Relax-NG validity error : Error validating datatype duration
2011-03-28 17:44:10.759 ERROR:	/etc/opendnssec/kasp.xml:52: element Lifetime: Relax-NG validity error : Element Lifetime failed to validate content
2011-03-28 17:44:10.759 ERROR:	return code = 1

2011-03-28 17:44:10.759 03915 Wait(10)

2011-03-28 17:44:10.759 Requirement: ODSKC40

2011-03-28 17:44:20.759 03917 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 17:44:20.759 Requirement: ODSKC40

2011-03-28 17:44:20.760 03922 CheckLog()
2011-03-28 17:44:20.760 Requirement: ODSKC40
2011-03-28 17:44:20.983 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 17:44:20.984 03925 CheckLog()
2011-03-28 17:44:20.984 Requirement: ODSKC40
2011-03-28 17:44:21.203 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml fails to validate Found: 

2011-03-28 17:44:21.204 03928 CheckLog()
2011-03-28 17:44:21.204 Requirement: ODSKC40
2011-03-28 17:44:21.422 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml:123: element Lifetime: Relax-NG validity error : Type duration doesn't allow value 'A' Found: 

2011-03-28 17:44:21.422 03930 Comment: Reset the config files to the original ones.

2011-03-28 17:44:21.422 Requirement: ODSKC40

2011-03-28 17:44:21.422 03932 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:44:21.422 Requirement: ODSKC40

2011-03-28 17:44:21.422 03934 Stop()
2011-03-28 17:44:21.422 Requirement: ODSKC40
2011-03-28 17:44:21.422 RunCommand(ods-control stop)
2011-03-28 17:44:21.427 - runCommand: Process started, PID: 21324
2011-03-28 17:44:21.427 OUTPUT:	Stopping enforcer...
2011-03-28 17:44:21.427 OUTPUT:	Cannot find PID file
2011-03-28 17:44:21.427 OUTPUT:	Stopping signer engine..
2011-03-28 17:44:21.427 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:44:21.427 ERROR:	return code = 1
2011-03-28 17:44:21.427 RunCommand(ps -e | grep enforcer)
2011-03-28 17:44:21.440 - runCommand: Process started, PID: 21327
2011-03-28 17:44:21.440 ERROR:	return code = 1
2011-03-28 17:44:21.440 RunCommand(ps -e | grep signer)
2011-03-28 17:44:21.452 - runCommand: Process started, PID: 21330
2011-03-28 17:44:21.452 ERROR:	return code = 1

2011-03-28 17:44:21.452 03936 Wait(10)

2011-03-28 17:44:21.452 Requirement: ODSKC40

2011-03-28 17:44:31.452 03939 LoadConfig()
2011-03-28 17:44:31.452 Requirement: ODSKC40
2011-03-28 17:44:31.452 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:44:31.459 - runCommand: Process started, PID: 21333

2011-03-28 17:44:31.459 03942 LoadConfig()
2011-03-28 17:44:31.459 Requirement: ODSKC40
2011-03-28 17:44:31.459 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:44:31.464 - runCommand: Process started, PID: 21334

2011-03-28 17:44:31.465 03944 Comment: Update all the configs.

2011-03-28 17:44:31.465 Requirement: ODSKC40

2011-03-28 17:44:31.465 03946 UpdateAll()
2011-03-28 17:44:31.465 Requirement: ODSKC40
2011-03-28 17:44:31.465 RunCommand(ods-ksmutil update all)
2011-03-28 17:44:32.913 - runCommand: Process started, PID: 21335
2011-03-28 17:44:32.913 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:44:32.914 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:44:32.914 OUTPUT:	Repository SoftHSM found
2011-03-28 17:44:32.914 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:44:32.914 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:44:32.914 OUTPUT:	Policy default found
2011-03-28 17:44:32.914 OUTPUT:	Policy default2 found
2011-03-28 17:44:32.914 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:44:32.914 OUTPUT:	Zone ods found
2011-03-28 17:44:32.914 OUTPUT:	Policy set to default.
2011-03-28 17:44:32.914 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:44:32.914 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:44:32.914 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T300: Use a very high value for ZSK lifetime (P100Y) and confirm ods-kaspcheck runs successfully

2011-03-28 17:44:32.914 03951 Comment: ZSK Lifetime value is very high (100 years: P100Y). Ods-kaspcheck should validate both kasp.xml as conf.xml.

2011-03-28 17:44:32.914 Requirement: ODSKC40

2011-03-28 17:44:32.914 03953 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:44:32.914 Requirement: ODSKC40

2011-03-28 17:44:32.915 03955 Stop()
2011-03-28 17:44:32.915 Requirement: ODSKC40
2011-03-28 17:44:32.915 RunCommand(ods-control stop)
2011-03-28 17:44:32.922 - runCommand: Process started, PID: 21343
2011-03-28 17:44:32.922 OUTPUT:	Stopping enforcer...
2011-03-28 17:44:32.922 OUTPUT:	Cannot find PID file
2011-03-28 17:44:32.922 OUTPUT:	Stopping signer engine..
2011-03-28 17:44:32.922 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:44:32.922 ERROR:	return code = 1
2011-03-28 17:44:32.922 RunCommand(ps -e | grep enforcer)
2011-03-28 17:44:32.943 - runCommand: Process started, PID: 21346
2011-03-28 17:44:32.943 ERROR:	return code = 1
2011-03-28 17:44:32.943 RunCommand(ps -e | grep signer)
2011-03-28 17:44:32.961 - runCommand: Process started, PID: 21349
2011-03-28 17:44:32.961 ERROR:	return code = 1

2011-03-28 17:44:32.961 03957 Wait(10)

2011-03-28 17:44:32.961 Requirement: ODSKC40

2011-03-28 17:44:42.962 03959 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:44:42.962 Requirement: ODSKC40

2011-03-28 17:44:42.962 03962 LoadConfig()
2011-03-28 17:44:42.962 Requirement: ODSKC40
2011-03-28 17:44:42.962 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:44:42.968 - runCommand: Process started, PID: 21354

2011-03-28 17:44:42.968 03965 LoadConfig()
2011-03-28 17:44:42.968 Requirement: ODSKC40
2011-03-28 17:44:42.969 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T300_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:44:42.974 - runCommand: Process started, PID: 21355

2011-03-28 17:44:42.974 03967 Comment: Update all the configs.

2011-03-28 17:44:42.974 Requirement: ODSKC40

2011-03-28 17:44:42.975 03969 UpdateAll()
2011-03-28 17:44:42.975 Requirement: ODSKC40
2011-03-28 17:44:42.975 RunCommand(ods-ksmutil update all)
2011-03-28 17:44:44.416 - runCommand: Process started, PID: 21356
2011-03-28 17:44:44.416 OUTPUT:	WARNING: KSK minimum lifetime (259200 seconds) is less than ZSK minimum lifetime (3153600000 seconds) for default Policy in /etc/opendnssec/kasp.xml
2011-03-28 17:44:44.416 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:44:44.416 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:44:44.416 OUTPUT:	Repository SoftHSM found
2011-03-28 17:44:44.416 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:44:44.416 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:44:44.416 OUTPUT:	Policy default found
2011-03-28 17:44:44.416 OUTPUT:	Info: converting P100Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:44:44.416 OUTPUT:	Policy default2 found
2011-03-28 17:44:44.416 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:44:44.416 OUTPUT:	Zone ods found
2011-03-28 17:44:44.416 OUTPUT:	Policy set to default.
2011-03-28 17:44:44.416 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:44:44.416 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:44:44.416 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 17:44:44.416 03971 Wait(10)

2011-03-28 17:44:44.416 Requirement: ODSKC40

2011-03-28 17:44:54.417 03973 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 17:44:54.417 Requirement: ODSKC40

2011-03-28 17:44:54.417 03978 CheckLog()
2011-03-28 17:44:54.417 Requirement: ODSKC40
2011-03-28 17:44:54.643 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 17:44:54.644 03981 CheckLog()
2011-03-28 17:44:54.644 Requirement: ODSKC40
2011-03-28 17:44:54.862 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml validates Found: 

2011-03-28 17:44:54.863 03984 Comment: Reset the config files to the original ones.

2011-03-28 17:44:54.863 Requirement: ODSKC40

2011-03-28 17:44:54.863 03986 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:44:54.863 Requirement: ODSKC40

2011-03-28 17:44:54.863 03988 Stop()
2011-03-28 17:44:54.863 Requirement: ODSKC40
2011-03-28 17:44:54.863 RunCommand(ods-control stop)
2011-03-28 17:44:54.868 - runCommand: Process started, PID: 21364
2011-03-28 17:44:54.868 OUTPUT:	Stopping enforcer...
2011-03-28 17:44:54.868 OUTPUT:	Cannot find PID file
2011-03-28 17:44:54.868 OUTPUT:	Stopping signer engine..
2011-03-28 17:44:54.868 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:44:54.868 ERROR:	return code = 1
2011-03-28 17:44:54.868 RunCommand(ps -e | grep enforcer)
2011-03-28 17:44:54.879 - runCommand: Process started, PID: 21367
2011-03-28 17:44:54.879 ERROR:	return code = 1
2011-03-28 17:44:54.879 RunCommand(ps -e | grep signer)
2011-03-28 17:44:54.893 - runCommand: Process started, PID: 21370
2011-03-28 17:44:54.893 ERROR:	return code = 1

2011-03-28 17:44:54.894 03990 Wait(10)

2011-03-28 17:44:54.894 Requirement: ODSKC40

2011-03-28 17:45:04.894 03993 LoadConfig()
2011-03-28 17:45:04.894 Requirement: ODSKC40
2011-03-28 17:45:04.894 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:45:04.900 - runCommand: Process started, PID: 21373

2011-03-28 17:45:04.900 03996 LoadConfig()
2011-03-28 17:45:04.900 Requirement: ODSKC40
2011-03-28 17:45:04.900 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:45:04.906 - runCommand: Process started, PID: 21374

2011-03-28 17:45:04.907 03998 Comment: Update all the configs.

2011-03-28 17:45:04.907 Requirement: ODSKC40

2011-03-28 17:45:04.907 04000 UpdateAll()
2011-03-28 17:45:04.907 Requirement: ODSKC40
2011-03-28 17:45:04.907 RunCommand(ods-ksmutil update all)
2011-03-28 17:45:06.363 - runCommand: Process started, PID: 21375
2011-03-28 17:45:06.363 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:45:06.363 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:45:06.363 OUTPUT:	Repository SoftHSM found
2011-03-28 17:45:06.363 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:45:06.363 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:45:06.363 OUTPUT:	Policy default found
2011-03-28 17:45:06.363 OUTPUT:	Policy default2 found
2011-03-28 17:45:06.363 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:45:06.363 OUTPUT:	Zone ods found
2011-03-28 17:45:06.363 OUTPUT:	Policy set to default.
2011-03-28 17:45:06.363 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:45:06.363 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:45:06.363 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T310: Use a very low value for ZSK lifetime (PT1S) and confirm ods-kaspcheck fails

2011-03-28 17:45:06.364 04006 Comment: Change the ZSK Lifetime value for the keys to a very low value. Logically spoken: the Ods-kaspcheck should validate for conf.xml and not for kasp.xml. (note: this is not well documented). According to the developpers the kasp.xml should be validated correctly.

2011-03-28 17:45:06.364 Requirement: ODSKC40

2011-03-28 17:45:06.364 04008 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:45:06.364 Requirement: ODSKC40

2011-03-28 17:45:06.364 04010 Stop()
2011-03-28 17:45:06.364 Requirement: ODSKC40
2011-03-28 17:45:06.364 RunCommand(ods-control stop)
2011-03-28 17:45:06.371 - runCommand: Process started, PID: 21383
2011-03-28 17:45:06.372 OUTPUT:	Stopping enforcer...
2011-03-28 17:45:06.372 OUTPUT:	Cannot find PID file
2011-03-28 17:45:06.372 OUTPUT:	Stopping signer engine..
2011-03-28 17:45:06.372 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:45:06.372 ERROR:	return code = 1
2011-03-28 17:45:06.372 RunCommand(ps -e | grep enforcer)
2011-03-28 17:45:06.391 - runCommand: Process started, PID: 21386
2011-03-28 17:45:06.391 ERROR:	return code = 1
2011-03-28 17:45:06.391 RunCommand(ps -e | grep signer)
2011-03-28 17:45:06.409 - runCommand: Process started, PID: 21389
2011-03-28 17:45:06.409 ERROR:	return code = 1

2011-03-28 17:45:06.409 04012 Wait(10)

2011-03-28 17:45:06.409 Requirement: ODSKC40

2011-03-28 17:45:16.409 04014 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:45:16.409 Requirement: ODSKC40

2011-03-28 17:45:16.410 04017 LoadConfig()
2011-03-28 17:45:16.410 Requirement: ODSKC40
2011-03-28 17:45:16.410 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:45:16.416 - runCommand: Process started, PID: 21392

2011-03-28 17:45:16.416 04020 LoadConfig()
2011-03-28 17:45:16.416 Requirement: ODSKC40
2011-03-28 17:45:16.416 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T310_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:45:16.422 - runCommand: Process started, PID: 21393

2011-03-28 17:45:16.422 04022 Comment: Update all the configs.

2011-03-28 17:45:16.422 Requirement: ODSKC40

2011-03-28 17:45:16.422 04024 UpdateAll()
2011-03-28 17:45:16.422 Requirement: ODSKC40
2011-03-28 17:45:16.422 RunCommand(ods-ksmutil update all)
2011-03-28 17:45:17.815 - runCommand: Process started, PID: 21394
2011-03-28 17:45:17.815 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:45:17.816 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:45:17.816 OUTPUT:	Repository SoftHSM found
2011-03-28 17:45:17.816 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:45:17.816 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:45:17.816 OUTPUT:	Policy default found
2011-03-28 17:45:17.816 OUTPUT:	Policy default2 found
2011-03-28 17:45:17.816 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:45:17.816 OUTPUT:	Zone ods found
2011-03-28 17:45:17.816 OUTPUT:	Policy set to default.
2011-03-28 17:45:17.816 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:45:17.816 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:45:17.816 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 17:45:17.816 04026 Wait(10)

2011-03-28 17:45:17.816 Requirement: ODSKC40

2011-03-28 17:45:27.816 04028 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 17:45:27.816 Requirement: ODSKC40

2011-03-28 17:45:27.816 04033 CheckLog()
2011-03-28 17:45:27.816 Requirement: ODSKC40
2011-03-28 17:45:28.409 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 17:45:28.410 04036 CheckLog()
2011-03-28 17:45:28.410 Requirement: ODSKC40
2011-03-28 17:45:28.259 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml fails to validate Found: 

2011-03-28 17:45:28.259 04038 Comment: Reset the config files to the original ones.

2011-03-28 17:45:28.259 Requirement: ODSKC40

2011-03-28 17:45:28.259 04040 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:45:28.259 Requirement: ODSKC40

2011-03-28 17:45:28.260 04042 Stop()
2011-03-28 17:45:28.260 Requirement: ODSKC40
2011-03-28 17:45:28.260 RunCommand(ods-control stop)
2011-03-28 17:45:28.264 - runCommand: Process started, PID: 21402
2011-03-28 17:45:28.264 OUTPUT:	Stopping enforcer...
2011-03-28 17:45:28.265 OUTPUT:	Cannot find PID file
2011-03-28 17:45:28.265 OUTPUT:	Stopping signer engine..
2011-03-28 17:45:28.265 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:45:28.265 ERROR:	return code = 1
2011-03-28 17:45:28.265 RunCommand(ps -e | grep enforcer)
2011-03-28 17:45:28.276 - runCommand: Process started, PID: 21405
2011-03-28 17:45:28.276 ERROR:	return code = 1
2011-03-28 17:45:28.276 RunCommand(ps -e | grep signer)
2011-03-28 17:45:28.287 - runCommand: Process started, PID: 21408
2011-03-28 17:45:28.287 ERROR:	return code = 1

2011-03-28 17:45:28.288 04044 Wait(10)

2011-03-28 17:45:28.288 Requirement: ODSKC40

2011-03-28 17:45:38.288 04047 LoadConfig()
2011-03-28 17:45:38.288 Requirement: ODSKC40
2011-03-28 17:45:38.288 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:45:38.294 - runCommand: Process started, PID: 21411

2011-03-28 17:45:38.295 04050 LoadConfig()
2011-03-28 17:45:38.295 Requirement: ODSKC40
2011-03-28 17:45:38.295 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:45:38.300 - runCommand: Process started, PID: 21412

2011-03-28 17:45:38.301 04052 Comment: Update all the configs.

2011-03-28 17:45:38.301 Requirement: ODSKC40

2011-03-28 17:45:38.301 04054 UpdateAll()
2011-03-28 17:45:38.301 Requirement: ODSKC40
2011-03-28 17:45:38.301 RunCommand(ods-ksmutil update all)
2011-03-28 17:45:39.712 - runCommand: Process started, PID: 21413
2011-03-28 17:45:39.713 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:45:39.713 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:45:39.713 OUTPUT:	Repository SoftHSM found
2011-03-28 17:45:39.713 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:45:39.713 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:45:39.713 OUTPUT:	Policy default found
2011-03-28 17:45:39.713 OUTPUT:	Policy default2 found
2011-03-28 17:45:39.713 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:45:39.713 OUTPUT:	Zone ods found
2011-03-28 17:45:39.713 OUTPUT:	Policy set to default.
2011-03-28 17:45:39.713 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:45:39.713 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:45:39.713 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T320: Use a non-existing repository for ZSK repository and confirm ods-kaspcheck fails

2011-03-28 17:45:39.713 04060 Comment: Change the reposiitory name for the ZSK's to a non-existing one in the kasp.xml. The ods-kaspcheck should fail for the kasp.xml.

2011-03-28 17:45:39.713 Requirement: ODSKC40

2011-03-28 17:45:39.714 04062 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:45:39.714 Requirement: ODSKC40

2011-03-28 17:45:39.714 04064 Stop()
2011-03-28 17:45:39.714 Requirement: ODSKC40
2011-03-28 17:45:39.714 RunCommand(ods-control stop)
2011-03-28 17:45:39.721 - runCommand: Process started, PID: 21421
2011-03-28 17:45:39.721 OUTPUT:	Stopping enforcer...
2011-03-28 17:45:39.721 OUTPUT:	Cannot find PID file
2011-03-28 17:45:39.721 OUTPUT:	Stopping signer engine..
2011-03-28 17:45:39.721 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:45:39.721 ERROR:	return code = 1
2011-03-28 17:45:39.721 RunCommand(ps -e | grep enforcer)
2011-03-28 17:45:39.737 - runCommand: Process started, PID: 21424
2011-03-28 17:45:39.738 ERROR:	return code = 1
2011-03-28 17:45:39.738 RunCommand(ps -e | grep signer)
2011-03-28 17:45:39.750 - runCommand: Process started, PID: 21427
2011-03-28 17:45:39.750 ERROR:	return code = 1

2011-03-28 17:45:39.750 04066 Wait(10)

2011-03-28 17:45:39.750 Requirement: ODSKC40

2011-03-28 17:45:49.750 04068 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:45:49.750 Requirement: ODSKC40

2011-03-28 17:45:49.751 04071 LoadConfig()
2011-03-28 17:45:49.751 Requirement: ODSKC40
2011-03-28 17:45:49.751 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:45:49.757 - runCommand: Process started, PID: 21430

2011-03-28 17:45:49.757 04074 LoadConfig()
2011-03-28 17:45:49.757 Requirement: ODSKC40
2011-03-28 17:45:49.757 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T310_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:45:49.763 - runCommand: Process started, PID: 21431

2011-03-28 17:45:49.763 04076 Comment: Update all the configs.

2011-03-28 17:45:49.763 Requirement: ODSKC40

2011-03-28 17:45:49.763 04078 UpdateAll()
2011-03-28 17:45:49.763 Requirement: ODSKC40
2011-03-28 17:45:49.763 RunCommand(ods-ksmutil update all)
2011-03-28 17:45:51.148 - runCommand: Process started, PID: 21432
2011-03-28 17:45:51.148 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:45:51.148 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:45:51.148 OUTPUT:	Repository SoftHSM found
2011-03-28 17:45:51.148 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:45:51.149 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:45:51.149 OUTPUT:	Policy default found
2011-03-28 17:45:51.149 OUTPUT:	Policy default2 found
2011-03-28 17:45:51.149 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:45:51.149 OUTPUT:	Zone ods found
2011-03-28 17:45:51.149 OUTPUT:	Policy set to default.
2011-03-28 17:45:51.149 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:45:51.149 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:45:51.149 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 17:45:51.149 04080 Wait(10)

2011-03-28 17:45:51.149 Requirement: ODSKC40

2011-03-28 17:46:01.149 04082 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 17:46:01.149 Requirement: ODSKC40

2011-03-28 17:46:01.149 04087 CheckLog()
2011-03-28 17:46:01.149 Requirement: ODSKC40

2011-03-28 17:46:01.375 04090 CheckLog()
2011-03-28 17:46:01.375 Requirement: ODSKC40

2011-03-28 17:46:01.594 04093 CheckLog()
2011-03-28 17:46:01.594 Requirement: ODSKC40

2011-03-28 17:46:01.813 04095 Comment: Reset the config files to the original ones.

2011-03-28 17:46:01.813 Requirement: ODSKC40

2011-03-28 17:46:01.813 04097 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:46:01.813 Requirement: ODSKC40

2011-03-28 17:46:01.813 04099 Stop()
2011-03-28 17:46:01.813 Requirement: ODSKC40
2011-03-28 17:46:01.813 RunCommand(ods-control stop)
2011-03-28 17:46:01.818 - runCommand: Process started, PID: 21440
2011-03-28 17:46:01.818 OUTPUT:	Stopping enforcer...
2011-03-28 17:46:01.818 OUTPUT:	Cannot find PID file
2011-03-28 17:46:01.818 OUTPUT:	Stopping signer engine..
2011-03-28 17:46:01.818 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:46:01.818 ERROR:	return code = 1
2011-03-28 17:46:01.818 RunCommand(ps -e | grep enforcer)
2011-03-28 17:46:01.830 - runCommand: Process started, PID: 21443
2011-03-28 17:46:01.830 ERROR:	return code = 1
2011-03-28 17:46:01.830 RunCommand(ps -e | grep signer)
2011-03-28 17:46:01.843 - runCommand: Process started, PID: 21446
2011-03-28 17:46:01.843 ERROR:	return code = 1

2011-03-28 17:46:01.843 04101 Wait(10)

2011-03-28 17:46:01.843 Requirement: ODSKC40

2011-03-28 17:46:11.843 04104 LoadConfig()
2011-03-28 17:46:11.843 Requirement: ODSKC40
2011-03-28 17:46:11.843 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:46:11.849 - runCommand: Process started, PID: 21449

2011-03-28 17:46:11.850 04107 LoadConfig()
2011-03-28 17:46:11.850 Requirement: ODSKC40
2011-03-28 17:46:11.850 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:46:11.855 - runCommand: Process started, PID: 21450

2011-03-28 17:46:11.856 04109 Comment: Update all the configs.

2011-03-28 17:46:11.856 Requirement: ODSKC40

2011-03-28 17:46:11.856 04111 UpdateAll()
2011-03-28 17:46:11.856 Requirement: ODSKC40
2011-03-28 17:46:11.856 RunCommand(ods-ksmutil update all)
2011-03-28 17:46:13.354 - runCommand: Process started, PID: 21451
2011-03-28 17:46:13.354 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 17:46:13.354 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 17:46:13.354 OUTPUT:	Repository SoftHSM found
2011-03-28 17:46:13.354 OUTPUT:	No Maximum Capacity set.
2011-03-28 17:46:13.354 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 17:46:13.354 OUTPUT:	Policy default found
2011-03-28 17:46:13.354 OUTPUT:	Policy default2 found
2011-03-28 17:46:13.354 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 17:46:13.354 OUTPUT:	Zone ods found
2011-03-28 17:46:13.354 OUTPUT:	Policy set to default.
2011-03-28 17:46:13.354 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 17:46:13.354 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 17:46:13.354 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T330: Use a different repository for ZSK then ZSK and confirm ZSK is created in correct repository

2011-03-28 17:46:13.354 04116 Comment: The ZSK and KSK have both a different repository: ZSK = SoftHSM2 & KSK = SoftHSM. Check whether the keys will be created in the correct repository.

2011-03-28 17:46:13.354 Requirement: ODSKC40

2011-03-28 17:46:13.355 04118 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:46:13.355 Requirement: ODSKC40

2011-03-28 17:46:13.355 04120 Stop()
2011-03-28 17:46:13.355 Requirement: ODSKC40
2011-03-28 17:46:13.355 RunCommand(ods-control stop)
2011-03-28 17:46:13.362 - runCommand: Process started, PID: 21459
2011-03-28 17:46:13.362 OUTPUT:	Stopping enforcer...
2011-03-28 17:46:13.362 OUTPUT:	Cannot find PID file
2011-03-28 17:46:13.362 OUTPUT:	Stopping signer engine..
2011-03-28 17:46:13.362 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:46:13.362 ERROR:	return code = 1
2011-03-28 17:46:13.362 RunCommand(ps -e | grep enforcer)
2011-03-28 17:46:13.382 - runCommand: Process started, PID: 21462
2011-03-28 17:46:13.382 ERROR:	return code = 1
2011-03-28 17:46:13.382 RunCommand(ps -e | grep signer)
2011-03-28 17:46:13.393 - runCommand: Process started, PID: 21465
2011-03-28 17:46:13.393 ERROR:	return code = 1

2011-03-28 17:46:13.393 04122 Wait(10)

2011-03-28 17:46:13.393 Requirement: ODSKC40

2011-03-28 17:46:23.393 04124 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:46:23.393 Requirement: ODSKC40

2011-03-28 17:46:23.393 04130 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 17:46:23.393 Requirement: ODSKC40

2011-03-28 17:46:23.393 04137 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:46:23.393 Requirement: ODSKC40

2011-03-28 17:46:23.394 04140 LoadConfig()
2011-03-28 17:46:23.394 Requirement: ODSKC40
2011-03-28 17:46:23.394 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/ODSKC40T330_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:46:23.400 - runCommand: Process started, PID: 21468

2011-03-28 17:46:23.400 04143 LoadConfig()
2011-03-28 17:46:23.400 Requirement: ODSKC40
2011-03-28 17:46:23.400 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T330_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:46:23.406 - runCommand: Process started, PID: 21469

2011-03-28 17:46:23.406 04145 Comment: New setup for the configs and key repository

2011-03-28 17:46:23.406 Requirement: ODSKC40

2011-03-28 17:46:23.406 04149 Wait(10)

2011-03-28 17:46:23.406 Requirement: ODSKC40

2011-03-28 17:46:33.407 04151 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:46:33.407 Requirement: ODSKC40

2011-03-28 17:46:33.407 04153 Start()
2011-03-28 17:46:33.407 Requirement: ODSKC40
2011-03-28 17:46:33.407 RunCommand(ods-control start)
2011-03-28 17:46:33.409 - runCommand: Background process started, PID: 21470
2011-03-28 17:46:34.427 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:46:34.450 - runCommand: Process started, PID: 21486
2011-03-28 17:46:34.450 OUTPUT:	ods-enforcerd
2011-03-28 17:46:34.450 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:46:34.466 - runCommand: Process started, PID: 21499
2011-03-28 17:46:34.467 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:46:34.467 04155 Comment: Check whether the new keys for the ZSK have been created in the SoftHSM2 repository and the KSK key(s) in the SoftHSM repository.

2011-03-28 17:46:34.467 Requirement: ODSKC40

2011-03-28 17:46:34.467 04160 CheckLog()
2011-03-28 17:46:34.467 Requirement: ODSKC40
2011-03-28 17:46:34.691 FAILED:	(Check for Like) - Expected: 1 key found Found: 

2011-03-28 17:46:34.691 04162 Wait(60)

2011-03-28 17:46:34.691 Requirement: ODSKC40

2011-03-28 17:47:34.692 04164 Comment: Check if only 1 KSK has been created in the SoftHSM repository.

2011-03-28 17:47:34.692 Requirement: ODSKC40

2011-03-28 17:47:34.692 04169 CheckLog()
2011-03-28 17:47:34.692 Requirement: ODSKC40

2011-03-28 17:47:34.918 04171 Comment: Sign the ODS zone manually

2011-03-28 17:47:34.918 Requirement: ODSKC40

2011-03-28 17:47:34.918 04176 Wait(20)

2011-03-28 17:47:34.918 Requirement: ODSKC40

2011-03-28 17:47:54.918 04178 Comment: Check if the signing of the ods zone is succesfull.

2011-03-28 17:47:54.918 Requirement: ODSKC40

2011-03-28 17:47:54.919 04182 CheckFilePresent(ods)
2011-03-28 17:47:54.919 Requirement: ODSKC40
2011-03-28 17:47:54.919 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:47:54.919 04184 Comment: Signed zone file should be present

2011-03-28 17:47:54.919 Requirement: ODSKC40

2011-03-28 17:47:54.919 04186 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:47:54.919 Requirement: ODSKC40

2011-03-28 17:47:54.919 04192 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:47:54.919 Requirement: ODSKC40

2011-03-28 17:47:54.919 04199 LoadConfig()
2011-03-28 17:47:54.919 Requirement: ODSKC40
2011-03-28 17:47:54.919 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:47:54.925 - runCommand: Process started, PID: 21504

2011-03-28 17:47:54.925 04202 LoadConfig()
2011-03-28 17:47:54.925 Requirement: ODSKC40
2011-03-28 17:47:54.925 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:47:54.929 - runCommand: Process started, PID: 21505

2011-03-28 17:47:54.929 04204 Comment: New setup for the configs and key repository

2011-03-28 17:47:54.929 Requirement: ODSKC40

2011-03-28 17:47:54.929 04208 Wait(10)

2011-03-28 17:47:54.929 Requirement: ODSKC40

2011-03-28 17:48:04.929 04210 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:48:04.929 Requirement: ODSKC40

2011-03-28 17:48:04.930 04212 Start()
2011-03-28 17:48:04.930 Requirement: ODSKC40
2011-03-28 17:48:04.930 RunCommand(ods-control start)
2011-03-28 17:48:04.932 - runCommand: Background process started, PID: 21506
2011-03-28 17:48:04.939 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:48:04.959 - runCommand: Process started, PID: 21513
2011-03-28 17:48:04.959 OUTPUT:	ods-enforcerd
2011-03-28 17:48:04.959 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:48:04.973 - runCommand: Process started, PID: 21517
2011-03-28 17:48:04.973 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:48:04.974 04214 Wait(30)

2011-03-28 17:48:04.974 Requirement: ODSKC40

2011-03-28 17:48:34.974 04216 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:48:34.974 Requirement: ODSKC40

2011-03-28 17:48:34.974 04218 Stop()
2011-03-28 17:48:34.974 Requirement: ODSKC40
2011-03-28 17:48:34.974 RunCommand(ods-control stop)
2011-03-28 17:48:35.985 - runCommand: Process started, PID: 21522
2011-03-28 17:48:35.985 OUTPUT:	Stopping enforcer...
2011-03-28 17:48:35.985 OUTPUT:	Stopping signer engine..
2011-03-28 17:48:35.985 OUTPUT:	Engine shut down.
2011-03-28 17:48:35.985 RunCommand(ps -e | grep enforcer)
2011-03-28 17:48:36.378 - runCommand: Process started, PID: 21530
2011-03-28 17:48:36.389 ERROR:	return code = 1
2011-03-28 17:48:36.391 RunCommand(ps -e | grep signer)
2011-03-28 17:48:36.218 - runCommand: Process started, PID: 21533
2011-03-28 17:48:36.219 OUTPUT:	21482 ?        00:00:00 ods-signerd

-------------------------------------------------------------------------------
Testcase - ODSKC40T340: Set ZSK Standby to 10 and confirm 11 ZSK's in repository and 1 ZSK in signed zone

2011-03-28 17:48:36.224 04224 Comment: The ZSK and KSK have both a different repository: ZSK = SoftHSM2 & KSK = SoftHSM. Check whether the keys will be created in the correct repository. Thereby for the ZSK 10 standby keys should be created.

2011-03-28 17:48:36.224 Requirement: ODSKC40

2011-03-28 17:48:36.226 04226 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:48:36.226 Requirement: ODSKC40

2011-03-28 17:48:36.227 04228 Stop()
2011-03-28 17:48:36.227 Requirement: ODSKC40
2011-03-28 17:48:36.228 RunCommand(ods-control stop)
2011-03-28 17:48:36.986 - runCommand: Process started, PID: 21536
2011-03-28 17:48:36.986 OUTPUT:	Stopping enforcer...
2011-03-28 17:48:36.986 OUTPUT:	Cannot find PID file
2011-03-28 17:48:36.986 OUTPUT:	Stopping signer engine..
2011-03-28 17:48:36.986 ERROR:	error: Connection reset by peer
2011-03-28 17:48:36.986 ERROR:	return code = 1
2011-03-28 17:48:36.986 RunCommand(ps -e | grep enforcer)
2011-03-28 17:48:37.966 - runCommand: Process started, PID: 21539
2011-03-28 17:48:37.974 ERROR:	return code = 1
2011-03-28 17:48:37.975 RunCommand(ps -e | grep signer)
2011-03-28 17:48:37.245 - runCommand: Process started, PID: 21542
2011-03-28 17:48:37.246 ERROR:	return code = 1

2011-03-28 17:48:37.247 04230 Wait(10)

2011-03-28 17:48:37.247 Requirement: ODSKC40

2011-03-28 17:48:47.250 04232 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:48:47.250 Requirement: ODSKC40

2011-03-28 17:48:47.252 04238 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 17:48:47.252 Requirement: ODSKC40

2011-03-28 17:48:47.254 04245 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:48:47.254 Requirement: ODSKC40

2011-03-28 17:48:47.256 04248 LoadConfig()
2011-03-28 17:48:47.256 Requirement: ODSKC40
2011-03-28 17:48:47.256 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/ODSKC40T340_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:48:47.320 - runCommand: Process started, PID: 21545

2011-03-28 17:48:47.323 04251 LoadConfig()
2011-03-28 17:48:47.323 Requirement: ODSKC40
2011-03-28 17:48:47.323 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T340_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:48:47.379 - runCommand: Process started, PID: 21546

2011-03-28 17:48:47.382 04253 Comment: New setup for the configs and key repository

2011-03-28 17:48:47.382 Requirement: ODSKC40

2011-03-28 17:48:47.383 04257 Wait(10)

2011-03-28 17:48:47.384 Requirement: ODSKC40

2011-03-28 17:48:57.386 04259 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:48:57.387 Requirement: ODSKC40

2011-03-28 17:48:57.388 04261 Start()
2011-03-28 17:48:57.388 Requirement: ODSKC40
2011-03-28 17:48:57.389 RunCommand(ods-control start)
2011-03-28 17:48:57.415 - runCommand: Background process started, PID: 21547
2011-03-28 17:48:58.585 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:48:58.728 - runCommand: Process started, PID: 21562
2011-03-28 17:48:58.729 OUTPUT:	ods-enforcerd
2011-03-28 17:48:58.730 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:48:58.891 - runCommand: Process started, PID: 21567
2011-03-28 17:48:58.891 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:48:58.893 04263 Comment: Check whether the 11 new keys for the ZSK have been created in the SoftHSM2 repository.

2011-03-28 17:48:58.893 Requirement: ODSKC40

2011-03-28 17:48:58.894 04268 CheckLog()
2011-03-28 17:48:58.894 Requirement: ODSKC40
2011-03-28 17:48:58.316 FAILED:	(Check for Like) - Expected: 11 keys found Found: 

2011-03-28 17:48:58.316 04270 Wait(60)

2011-03-28 17:48:58.316 Requirement: ODSKC40

2011-03-28 17:49:58.316 04272 Comment: Check only 1 key is used for signing the zone ods.

2011-03-28 17:49:58.316 Requirement: ODSKC40

2011-03-28 17:49:58.317 04277 CheckLog()
2011-03-28 17:49:58.317 Requirement: ODSKC40

2011-03-28 17:49:58.547 04279 Comment: Sign the ODS zone manually

2011-03-28 17:49:58.547 Requirement: ODSKC40

2011-03-28 17:49:58.547 04284 Wait(20)

2011-03-28 17:49:58.547 Requirement: ODSKC40

2011-03-28 17:50:18.548 04286 Comment: Check if the signing of the ods zone is succesfull.

2011-03-28 17:50:18.548 Requirement: ODSKC40

2011-03-28 17:50:18.548 04290 CheckFilePresent(ods)
2011-03-28 17:50:18.548 Requirement: ODSKC40
2011-03-28 17:50:18.548 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:50:18.548 04292 Comment: Signed zone file should be present

2011-03-28 17:50:18.548 Requirement: ODSKC40

2011-03-28 17:50:18.548 04294 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:50:18.548 Requirement: ODSKC40

2011-03-28 17:50:18.548 04300 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:50:18.548 Requirement: ODSKC40

2011-03-28 17:50:18.549 04307 LoadConfig()
2011-03-28 17:50:18.549 Requirement: ODSKC40
2011-03-28 17:50:18.549 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:50:18.555 - runCommand: Process started, PID: 21580

2011-03-28 17:50:18.555 04310 LoadConfig()
2011-03-28 17:50:18.555 Requirement: ODSKC40
2011-03-28 17:50:18.555 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:50:18.561 - runCommand: Process started, PID: 21581

2011-03-28 17:50:18.561 04312 Comment: New setup for the configs and key repository

2011-03-28 17:50:18.561 Requirement: ODSKC40

2011-03-28 17:50:18.561 04316 Wait(10)

2011-03-28 17:50:18.561 Requirement: ODSKC40

2011-03-28 17:50:28.562 04318 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:50:28.562 Requirement: ODSKC40

2011-03-28 17:50:28.562 04320 Start()
2011-03-28 17:50:28.562 Requirement: ODSKC40
2011-03-28 17:50:28.562 RunCommand(ods-control start)
2011-03-28 17:50:28.565 - runCommand: Background process started, PID: 21582
2011-03-28 17:50:28.572 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:50:28.591 - runCommand: Process started, PID: 21589
2011-03-28 17:50:28.591 OUTPUT:	ods-enforcerd
2011-03-28 17:50:28.591 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:50:28.608 - runCommand: Process started, PID: 21593
2011-03-28 17:50:28.608 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:50:28.608 04322 Wait(30)

2011-03-28 17:50:28.608 Requirement: ODSKC40

2011-03-28 17:50:58.609 04324 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:50:58.609 Requirement: ODSKC40

2011-03-28 17:50:58.609 04326 Stop()
2011-03-28 17:50:58.609 Requirement: ODSKC40
2011-03-28 17:50:58.609 RunCommand(ods-control stop)
2011-03-28 17:50:59.621 - runCommand: Process started, PID: 21598
2011-03-28 17:50:59.621 OUTPUT:	Stopping enforcer...
2011-03-28 17:50:59.621 OUTPUT:	Stopping signer engine..
2011-03-28 17:50:59.621 OUTPUT:	Engine shut down.
2011-03-28 17:50:59.621 RunCommand(ps -e | grep enforcer)
2011-03-28 17:50:59.639 - runCommand: Process started, PID: 21606
2011-03-28 17:50:59.639 ERROR:	return code = 1
2011-03-28 17:50:59.639 RunCommand(ps -e | grep signer)
2011-03-28 17:50:59.651 - runCommand: Process started, PID: 21609
2011-03-28 17:50:59.651 OUTPUT:	21558 ?        00:00:00 ods-signerd

-------------------------------------------------------------------------------
Testcase - ODSKC40T350: Set ZSK Standby to 0 and confirm 1 ZSK in repository and 1 ZSK in signed zone

2011-03-28 17:50:59.651 04331 Comment: Check whether the ZSK key will be created in the correct repository. Thereby for the ZSK 0 standby keys should be created.

2011-03-28 17:50:59.651 Requirement: ODSKC40

2011-03-28 17:50:59.652 04333 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:50:59.652 Requirement: ODSKC40

2011-03-28 17:50:59.652 04335 Stop()
2011-03-28 17:50:59.652 Requirement: ODSKC40
2011-03-28 17:50:59.652 RunCommand(ods-control stop)
2011-03-28 17:51:00.621 - runCommand: Process started, PID: 21612
2011-03-28 17:51:00.622 OUTPUT:	Stopping enforcer...
2011-03-28 17:51:00.622 OUTPUT:	Cannot find PID file
2011-03-28 17:51:00.622 OUTPUT:	Stopping signer engine..
2011-03-28 17:51:00.622 ERROR:	error: Connection reset by peer
2011-03-28 17:51:00.622 ERROR:	return code = 1
2011-03-28 17:51:00.622 RunCommand(ps -e | grep enforcer)
2011-03-28 17:51:00.640 - runCommand: Process started, PID: 21615
2011-03-28 17:51:00.640 ERROR:	return code = 1
2011-03-28 17:51:00.640 RunCommand(ps -e | grep signer)
2011-03-28 17:51:00.658 - runCommand: Process started, PID: 21618
2011-03-28 17:51:00.658 ERROR:	return code = 1

2011-03-28 17:51:00.658 04337 Wait(10)

2011-03-28 17:51:00.658 Requirement: ODSKC40

2011-03-28 17:51:10.658 04339 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:51:10.658 Requirement: ODSKC40

2011-03-28 17:51:10.659 04345 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 17:51:10.659 Requirement: ODSKC40

2011-03-28 17:51:10.659 04352 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:51:10.659 Requirement: ODSKC40

2011-03-28 17:51:10.659 04355 LoadConfig()
2011-03-28 17:51:10.659 Requirement: ODSKC40
2011-03-28 17:51:10.659 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:51:10.665 - runCommand: Process started, PID: 21621

2011-03-28 17:51:10.666 04358 LoadConfig()
2011-03-28 17:51:10.666 Requirement: ODSKC40
2011-03-28 17:51:10.666 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T340_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:51:10.671 - runCommand: Process started, PID: 21622

2011-03-28 17:51:10.672 04360 Comment: New setup for the configs and key repository

2011-03-28 17:51:10.672 Requirement: ODSKC40

2011-03-28 17:51:10.672 04364 Wait(10)

2011-03-28 17:51:10.672 Requirement: ODSKC40

2011-03-28 17:51:20.672 04366 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:51:20.672 Requirement: ODSKC40

2011-03-28 17:51:20.672 04368 Start()
2011-03-28 17:51:20.672 Requirement: ODSKC40
2011-03-28 17:51:20.672 RunCommand(ods-control start)
2011-03-28 17:51:20.675 - runCommand: Background process started, PID: 21623
2011-03-28 17:51:21.693 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:51:21.713 - runCommand: Process started, PID: 21638
2011-03-28 17:51:21.713 OUTPUT:	ods-enforcerd
2011-03-28 17:51:21.713 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:51:21.731 - runCommand: Process started, PID: 21643
2011-03-28 17:51:21.731 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:51:21.731 04370 Comment: Check whether the 1 new key for the ZSK has been created in the SoftHSM repository. The other key is the KSK key. In total 2 keys should be found.

2011-03-28 17:51:21.731 Requirement: ODSKC40

2011-03-28 17:51:21.731 04375 CheckLog()
2011-03-28 17:51:21.731 Requirement: ODSKC40
2011-03-28 17:51:21.961 FAILED:	(Check for Like) - Expected: 2 keys found Found: 

2011-03-28 17:51:21.961 04377 Wait(60)

2011-03-28 17:51:21.961 Requirement: ODSKC40

2011-03-28 17:52:21.962 04379 Comment: Check only 1 key is used for signing the zone ods.

2011-03-28 17:52:21.962 Requirement: ODSKC40

2011-03-28 17:52:21.962 04384 CheckLog()
2011-03-28 17:52:21.962 Requirement: ODSKC40

2011-03-28 17:52:22.193 04386 Comment: Sign the ODS zone manually

2011-03-28 17:52:22.193 Requirement: ODSKC40

2011-03-28 17:52:22.193 04391 Wait(20)

2011-03-28 17:52:22.193 Requirement: ODSKC40

2011-03-28 17:52:42.194 04393 Comment: Check if the signing of the ods zone is succesfull.

2011-03-28 17:52:42.194 Requirement: ODSKC40

2011-03-28 17:52:42.194 04397 CheckFilePresent(ods)
2011-03-28 17:52:42.194 Requirement: ODSKC40
2011-03-28 17:52:42.194 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:52:42.194 04399 Comment: Signed zone file should be present

2011-03-28 17:52:42.194 Requirement: ODSKC40

2011-03-28 17:52:42.194 04401 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:52:42.194 Requirement: ODSKC40

2011-03-28 17:52:42.194 04405 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:52:42.194 Requirement: ODSKC40

2011-03-28 17:52:42.194 04412 LoadConfig()
2011-03-28 17:52:42.195 Requirement: ODSKC40
2011-03-28 17:52:42.195 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:52:42.201 - runCommand: Process started, PID: 21656

2011-03-28 17:52:42.201 04415 LoadConfig()
2011-03-28 17:52:42.201 Requirement: ODSKC40
2011-03-28 17:52:42.201 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:52:42.207 - runCommand: Process started, PID: 21657

2011-03-28 17:52:42.207 04417 Comment: New setup for the configs and key repository

2011-03-28 17:52:42.207 Requirement: ODSKC40

2011-03-28 17:52:42.207 04421 Wait(10)

2011-03-28 17:52:42.207 Requirement: ODSKC40

2011-03-28 17:52:52.207 04423 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:52:52.208 Requirement: ODSKC40

2011-03-28 17:52:52.208 04425 Start()
2011-03-28 17:52:52.208 Requirement: ODSKC40
2011-03-28 17:52:52.208 RunCommand(ods-control start)
2011-03-28 17:52:52.210 - runCommand: Background process started, PID: 21658
2011-03-28 17:52:52.216 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:52:52.230 - runCommand: Process started, PID: 21665
2011-03-28 17:52:52.230 OUTPUT:	ods-enforcerd
2011-03-28 17:52:52.230 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:52:52.247 - runCommand: Process started, PID: 21669
2011-03-28 17:52:52.247 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:52:52.247 04427 Wait(30)

2011-03-28 17:52:52.247 Requirement: ODSKC40

2011-03-28 17:53:22.248 04429 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:53:22.248 Requirement: ODSKC40

2011-03-28 17:53:22.248 04431 Stop()
2011-03-28 17:53:22.248 Requirement: ODSKC40
2011-03-28 17:53:22.248 RunCommand(ods-control stop)
2011-03-28 17:53:23.259 - runCommand: Process started, PID: 21674
2011-03-28 17:53:23.259 OUTPUT:	Stopping enforcer...
2011-03-28 17:53:23.259 OUTPUT:	Stopping signer engine..
2011-03-28 17:53:23.259 OUTPUT:	Engine shut down.
2011-03-28 17:53:23.259 RunCommand(ps -e | grep enforcer)
2011-03-28 17:53:23.272 - runCommand: Process started, PID: 21681
2011-03-28 17:53:23.272 ERROR:	return code = 1
2011-03-28 17:53:23.272 RunCommand(ps -e | grep signer)
2011-03-28 17:53:23.284 - runCommand: Process started, PID: 21684
2011-03-28 17:53:23.284 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T360: Use a KSK Algorithm length of 128 (Algorithm 7) and confirm ODS fails signing

2011-03-28 17:53:23.284 04437 Comment: KSK Algorithm length is 128 with algorithm 7. Siging of the ODS zone should fail.

2011-03-28 17:53:23.284 Requirement: ODSKC40

2011-03-28 17:53:23.284 04439 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:53:23.284 Requirement: ODSKC40

2011-03-28 17:53:23.285 04441 Stop()
2011-03-28 17:53:23.285 Requirement: ODSKC40
2011-03-28 17:53:23.285 RunCommand(ods-control stop)
2011-03-28 17:53:23.290 - runCommand: Process started, PID: 21687
2011-03-28 17:53:23.290 OUTPUT:	Stopping enforcer...
2011-03-28 17:53:23.290 OUTPUT:	Cannot find PID file
2011-03-28 17:53:23.290 OUTPUT:	Stopping signer engine..
2011-03-28 17:53:23.290 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:53:23.290 ERROR:	return code = 1
2011-03-28 17:53:23.290 RunCommand(ps -e | grep enforcer)
2011-03-28 17:53:23.302 - runCommand: Process started, PID: 21690
2011-03-28 17:53:23.302 ERROR:	return code = 1
2011-03-28 17:53:23.302 RunCommand(ps -e | grep signer)
2011-03-28 17:53:23.313 - runCommand: Process started, PID: 21693
2011-03-28 17:53:23.313 ERROR:	return code = 1

2011-03-28 17:53:23.313 04443 Wait(10)

2011-03-28 17:53:23.313 Requirement: ODSKC40

2011-03-28 17:53:33.314 04445 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:53:33.314 Requirement: ODSKC40

2011-03-28 17:53:33.314 04451 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:53:33.314 Requirement: ODSKC40

2011-03-28 17:53:33.314 04455 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:53:33.314 Requirement: ODSKC40

2011-03-28 17:53:33.314 04458 LoadConfig()
2011-03-28 17:53:33.314 Requirement: ODSKC40
2011-03-28 17:53:33.314 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:53:33.321 - runCommand: Process started, PID: 21696

2011-03-28 17:53:33.321 04461 LoadConfig()
2011-03-28 17:53:33.321 Requirement: ODSKC40
2011-03-28 17:53:33.321 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T360_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:53:33.326 - runCommand: Process started, PID: 21697

2011-03-28 17:53:33.327 04463 Comment: New setup for the configs and key repository

2011-03-28 17:53:33.327 Requirement: ODSKC40

2011-03-28 17:53:33.327 04467 Wait(10)

2011-03-28 17:53:33.327 Requirement: ODSKC40

2011-03-28 17:53:43.327 04469 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:53:43.327 Requirement: ODSKC40

2011-03-28 17:53:43.327 04471 Start()
2011-03-28 17:53:43.327 Requirement: ODSKC40
2011-03-28 17:53:43.328 RunCommand(ods-control start)
2011-03-28 17:53:43.330 - runCommand: Background process started, PID: 21698
2011-03-28 17:53:44.349 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:53:44.376 - runCommand: Process started, PID: 21714
2011-03-28 17:53:44.376 OUTPUT:	ods-enforcerd
2011-03-28 17:53:44.376 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:53:44.396 - runCommand: Process started, PID: 21726
2011-03-28 17:53:44.396 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:53:44.396 04473 Comment: Sign the ODS zone manually

2011-03-28 17:53:44.396 Requirement: ODSKC40

2011-03-28 17:53:44.396 04478 Wait(20)

2011-03-28 17:53:44.396 Requirement: ODSKC40

2011-03-28 17:54:04.397 04480 Comment: Check if the signing of the ods zone failed. No signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 17:54:04.397 Requirement: ODSKC40

2011-03-28 17:54:04.397 04484 CheckFilePresent(ods)
2011-03-28 17:54:04.397 Requirement: ODSKC40
2011-03-28 17:54:04.397 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:54:04.397 04486 Comment: Signed zone lile should not be present.

2011-03-28 17:54:04.397 Requirement: ODSKC40

2011-03-28 17:54:04.397 04488 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:54:04.397 Requirement: ODSKC40

2011-03-28 17:54:04.397 04493 LoadConfig()
2011-03-28 17:54:04.397 Requirement: ODSKC40
2011-03-28 17:54:04.397 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:54:04.404 - runCommand: Process started, PID: 21731

2011-03-28 17:54:04.404 04496 LoadConfig()
2011-03-28 17:54:04.404 Requirement: ODSKC40
2011-03-28 17:54:04.404 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:54:04.409 - runCommand: Process started, PID: 21732

2011-03-28 17:54:04.410 04498 Comment: New setup for the configs and key repository

2011-03-28 17:54:04.410 Requirement: ODSKC40

2011-03-28 17:54:04.410 04502 Wait(10)

2011-03-28 17:54:04.410 Requirement: ODSKC40

2011-03-28 17:54:14.410 04504 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:54:14.410 Requirement: ODSKC40

2011-03-28 17:54:14.410 04506 Start()
2011-03-28 17:54:14.410 Requirement: ODSKC40
2011-03-28 17:54:14.410 RunCommand(ods-control start)
2011-03-28 17:54:14.413 - runCommand: Background process started, PID: 21733
2011-03-28 17:54:14.420 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:54:14.440 - runCommand: Process started, PID: 21740
2011-03-28 17:54:14.440 OUTPUT:	ods-enforcerd
2011-03-28 17:54:14.440 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:54:14.455 - runCommand: Process started, PID: 21744
2011-03-28 17:54:14.455 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:54:14.455 04508 Wait(30)

2011-03-28 17:54:14.455 Requirement: ODSKC40

2011-03-28 17:54:44.456 04510 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:54:44.456 Requirement: ODSKC40

2011-03-28 17:54:44.456 04512 Stop()
2011-03-28 17:54:44.456 Requirement: ODSKC40
2011-03-28 17:54:44.456 RunCommand(ods-control stop)
2011-03-28 17:54:45.468 - runCommand: Process started, PID: 21751
2011-03-28 17:54:45.468 OUTPUT:	Stopping enforcer...
2011-03-28 17:54:45.468 OUTPUT:	Stopping signer engine..
2011-03-28 17:54:45.468 OUTPUT:	Engine shut down.
2011-03-28 17:54:45.468 RunCommand(ps -e | grep enforcer)
2011-03-28 17:54:45.486 - runCommand: Process started, PID: 21758
2011-03-28 17:54:45.486 ERROR:	return code = 1
2011-03-28 17:54:45.486 RunCommand(ps -e | grep signer)
2011-03-28 17:54:45.504 - runCommand: Process started, PID: 21761
2011-03-28 17:54:45.504 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T370: Use a KSK Algorithm length of 256 (Algorithm 7) and confirm ODS signs a zone with the configured algorithm length

2011-03-28 17:54:45.505 04518 Comment: KSK Algorithm length is 256 with algorithm 7. Signing of the ODS zone should be succesfull.

2011-03-28 17:54:45.505 Requirement: ODSKC40

2011-03-28 17:54:45.505 04520 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:54:45.505 Requirement: ODSKC40

2011-03-28 17:54:45.505 04522 Stop()
2011-03-28 17:54:45.505 Requirement: ODSKC40
2011-03-28 17:54:45.505 RunCommand(ods-control stop)
2011-03-28 17:54:45.512 - runCommand: Process started, PID: 21764
2011-03-28 17:54:45.512 OUTPUT:	Stopping enforcer...
2011-03-28 17:54:45.512 OUTPUT:	Cannot find PID file
2011-03-28 17:54:45.512 OUTPUT:	Stopping signer engine..
2011-03-28 17:54:45.512 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:54:45.512 ERROR:	return code = 1
2011-03-28 17:54:45.512 RunCommand(ps -e | grep enforcer)
2011-03-28 17:54:45.529 - runCommand: Process started, PID: 21767
2011-03-28 17:54:45.529 ERROR:	return code = 1
2011-03-28 17:54:45.529 RunCommand(ps -e | grep signer)
2011-03-28 17:54:45.541 - runCommand: Process started, PID: 21770
2011-03-28 17:54:45.541 ERROR:	return code = 1

2011-03-28 17:54:45.541 04524 Wait(10)

2011-03-28 17:54:45.541 Requirement: ODSKC40

2011-03-28 17:54:55.541 04526 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:54:55.541 Requirement: ODSKC40

2011-03-28 17:54:55.541 04532 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:54:55.541 Requirement: ODSKC40

2011-03-28 17:54:55.541 04536 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:54:55.541 Requirement: ODSKC40

2011-03-28 17:54:55.542 04539 LoadConfig()
2011-03-28 17:54:55.542 Requirement: ODSKC40
2011-03-28 17:54:55.542 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:54:55.548 - runCommand: Process started, PID: 21773

2011-03-28 17:54:55.548 04542 LoadConfig()
2011-03-28 17:54:55.548 Requirement: ODSKC40
2011-03-28 17:54:55.548 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T370_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:54:55.554 - runCommand: Process started, PID: 21774

2011-03-28 17:54:55.554 04544 Comment: New setup for the configs and key repository

2011-03-28 17:54:55.554 Requirement: ODSKC40

2011-03-28 17:54:55.554 04548 Wait(10)

2011-03-28 17:54:55.554 Requirement: ODSKC40

2011-03-28 17:55:05.555 04550 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:55:05.555 Requirement: ODSKC40

2011-03-28 17:55:05.555 04552 Start()
2011-03-28 17:55:05.555 Requirement: ODSKC40
2011-03-28 17:55:05.555 RunCommand(ods-control start)
2011-03-28 17:55:05.557 - runCommand: Background process started, PID: 21775
2011-03-28 17:55:06.575 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:55:06.598 - runCommand: Process started, PID: 21790
2011-03-28 17:55:06.598 OUTPUT:	ods-enforcerd
2011-03-28 17:55:06.598 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:55:06.613 - runCommand: Process started, PID: 21803
2011-03-28 17:55:06.613 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:55:06.613 04554 Wait(10)

2011-03-28 17:55:06.613 Requirement: ODSKC40

2011-03-28 17:55:16.614 04556 Comment: Sign the ODS zone manually

2011-03-28 17:55:16.614 Requirement: ODSKC40

2011-03-28 17:55:16.614 04561 Wait(20)

2011-03-28 17:55:16.614 Requirement: ODSKC40

2011-03-28 17:55:36.614 04563 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 17:55:36.614 Requirement: ODSKC40

2011-03-28 17:55:36.614 04567 CheckFilePresent(ods)
2011-03-28 17:55:36.614 Requirement: ODSKC40
2011-03-28 17:55:36.614 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:55:36.614 04569 Comment: Signed zone file should be present.

2011-03-28 17:55:36.615 Requirement: ODSKC40

2011-03-28 17:55:36.615 04571 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:55:36.615 Requirement: ODSKC40

2011-03-28 17:55:36.615 04576 LoadConfig()
2011-03-28 17:55:36.615 Requirement: ODSKC40
2011-03-28 17:55:36.615 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:55:36.621 - runCommand: Process started, PID: 21808

2011-03-28 17:55:36.621 04579 LoadConfig()
2011-03-28 17:55:36.621 Requirement: ODSKC40
2011-03-28 17:55:36.622 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:55:36.627 - runCommand: Process started, PID: 21809

2011-03-28 17:55:36.627 04581 Comment: New setup for the configs and key repository

2011-03-28 17:55:36.627 Requirement: ODSKC40

2011-03-28 17:55:36.628 04585 Wait(10)

2011-03-28 17:55:36.628 Requirement: ODSKC40

2011-03-28 17:55:46.628 04587 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:55:46.628 Requirement: ODSKC40

2011-03-28 17:55:46.628 04589 Start()
2011-03-28 17:55:46.628 Requirement: ODSKC40
2011-03-28 17:55:46.628 RunCommand(ods-control start)
2011-03-28 17:55:46.631 - runCommand: Background process started, PID: 21810
2011-03-28 17:55:46.638 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:55:46.654 - runCommand: Process started, PID: 21817
2011-03-28 17:55:46.654 OUTPUT:	ods-enforcerd
2011-03-28 17:55:46.654 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:55:46.671 - runCommand: Process started, PID: 21821
2011-03-28 17:55:46.671 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:55:46.671 04591 Wait(30)

2011-03-28 17:55:46.671 Requirement: ODSKC40

2011-03-28 17:56:16.671 04593 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:56:16.671 Requirement: ODSKC40

2011-03-28 17:56:16.671 04595 Stop()
2011-03-28 17:56:16.671 Requirement: ODSKC40
2011-03-28 17:56:16.671 RunCommand(ods-control stop)
2011-03-28 17:56:17.683 - runCommand: Process started, PID: 21826
2011-03-28 17:56:17.683 OUTPUT:	Stopping enforcer...
2011-03-28 17:56:17.684 OUTPUT:	Stopping signer engine..
2011-03-28 17:56:17.684 OUTPUT:	Engine shut down.
2011-03-28 17:56:17.684 RunCommand(ps -e | grep enforcer)
2011-03-28 17:56:17.702 - runCommand: Process started, PID: 21833
2011-03-28 17:56:17.702 ERROR:	return code = 1
2011-03-28 17:56:17.702 RunCommand(ps -e | grep signer)
2011-03-28 17:56:17.714 - runCommand: Process started, PID: 21836
2011-03-28 17:56:17.714 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T380: Use a KSK Algorithm length of 512 (Algorithm 7) and confirm ODS signs a zone with the configured algorithm length

2011-03-28 17:56:17.714 04602 Comment: KSK Algorithm length is 512 with algorithm 7. Singing of the ODS zone should be succesfull.

2011-03-28 17:56:17.714 Requirement: ODSKC40

2011-03-28 17:56:17.714 04604 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:56:17.714 Requirement: ODSKC40

2011-03-28 17:56:17.714 04606 Stop()
2011-03-28 17:56:17.714 Requirement: ODSKC40
2011-03-28 17:56:17.714 RunCommand(ods-control stop)
2011-03-28 17:56:17.719 - runCommand: Process started, PID: 21839
2011-03-28 17:56:17.719 OUTPUT:	Stopping enforcer...
2011-03-28 17:56:17.719 OUTPUT:	Cannot find PID file
2011-03-28 17:56:17.719 OUTPUT:	Stopping signer engine..
2011-03-28 17:56:17.719 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:56:17.719 ERROR:	return code = 1
2011-03-28 17:56:17.719 RunCommand(ps -e | grep enforcer)
2011-03-28 17:56:17.731 - runCommand: Process started, PID: 21842
2011-03-28 17:56:17.731 ERROR:	return code = 1
2011-03-28 17:56:17.731 RunCommand(ps -e | grep signer)
2011-03-28 17:56:17.744 - runCommand: Process started, PID: 21845
2011-03-28 17:56:17.744 ERROR:	return code = 1

2011-03-28 17:56:17.745 04608 Wait(10)

2011-03-28 17:56:17.745 Requirement: ODSKC40

2011-03-28 17:56:27.745 04610 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:56:27.745 Requirement: ODSKC40

2011-03-28 17:56:27.745 04616 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:56:27.745 Requirement: ODSKC40

2011-03-28 17:56:27.745 04620 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:56:27.745 Requirement: ODSKC40

2011-03-28 17:56:27.746 04623 LoadConfig()
2011-03-28 17:56:27.746 Requirement: ODSKC40
2011-03-28 17:56:27.746 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:56:27.752 - runCommand: Process started, PID: 21848

2011-03-28 17:56:27.752 04626 LoadConfig()
2011-03-28 17:56:27.752 Requirement: ODSKC40
2011-03-28 17:56:27.752 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T380_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:56:27.758 - runCommand: Process started, PID: 21849

2011-03-28 17:56:27.758 04628 Comment: New setup for the configs and key repository

2011-03-28 17:56:27.758 Requirement: ODSKC40

2011-03-28 17:56:27.758 04632 Wait(10)

2011-03-28 17:56:27.758 Requirement: ODSKC40

2011-03-28 17:56:37.759 04634 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:56:37.759 Requirement: ODSKC40

2011-03-28 17:56:37.759 04636 Start()
2011-03-28 17:56:37.759 Requirement: ODSKC40
2011-03-28 17:56:37.759 RunCommand(ods-control start)
2011-03-28 17:56:37.761 - runCommand: Background process started, PID: 21850
2011-03-28 17:56:38.780 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:56:38.804 - runCommand: Process started, PID: 21865
2011-03-28 17:56:38.804 OUTPUT:	ods-enforcerd
2011-03-28 17:56:38.804 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:56:38.822 - runCommand: Process started, PID: 21878
2011-03-28 17:56:38.822 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:56:38.822 04638 Wait(10)

2011-03-28 17:56:38.822 Requirement: ODSKC40

2011-03-28 17:56:48.823 04640 Comment: Sign the ODS zone manually

2011-03-28 17:56:48.823 Requirement: ODSKC40

2011-03-28 17:56:48.823 04645 Wait(20)

2011-03-28 17:56:48.823 Requirement: ODSKC40

2011-03-28 17:57:08.823 04647 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 17:57:08.823 Requirement: ODSKC40

2011-03-28 17:57:08.823 04651 CheckFilePresent(ods)
2011-03-28 17:57:08.823 Requirement: ODSKC40
2011-03-28 17:57:08.823 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:57:08.824 04653 Comment: Signed zone file should be present.

2011-03-28 17:57:08.824 Requirement: ODSKC40

2011-03-28 17:57:08.824 04655 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:57:08.824 Requirement: ODSKC40

2011-03-28 17:57:08.824 04660 LoadConfig()
2011-03-28 17:57:08.824 Requirement: ODSKC40
2011-03-28 17:57:08.824 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:57:08.830 - runCommand: Process started, PID: 21883

2011-03-28 17:57:08.831 04663 LoadConfig()
2011-03-28 17:57:08.831 Requirement: ODSKC40
2011-03-28 17:57:08.831 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:57:08.836 - runCommand: Process started, PID: 21884

2011-03-28 17:57:08.837 04665 Comment: New setup for the configs and key repository

2011-03-28 17:57:08.837 Requirement: ODSKC40

2011-03-28 17:57:08.837 04669 Wait(10)

2011-03-28 17:57:08.837 Requirement: ODSKC40

2011-03-28 17:57:18.837 04671 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:57:18.837 Requirement: ODSKC40

2011-03-28 17:57:18.837 04673 Start()
2011-03-28 17:57:18.837 Requirement: ODSKC40
2011-03-28 17:57:18.837 RunCommand(ods-control start)
2011-03-28 17:57:18.840 - runCommand: Background process started, PID: 21885
2011-03-28 17:57:18.847 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:57:18.866 - runCommand: Process started, PID: 21892
2011-03-28 17:57:18.866 OUTPUT:	ods-enforcerd
2011-03-28 17:57:18.866 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:57:18.880 - runCommand: Process started, PID: 21896
2011-03-28 17:57:18.880 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:57:18.881 04675 Wait(30)

2011-03-28 17:57:18.881 Requirement: ODSKC40

2011-03-28 17:57:48.881 04677 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:57:48.881 Requirement: ODSKC40

2011-03-28 17:57:48.881 04679 Stop()
2011-03-28 17:57:48.881 Requirement: ODSKC40
2011-03-28 17:57:48.881 RunCommand(ods-control stop)
2011-03-28 17:57:49.892 - runCommand: Process started, PID: 21901
2011-03-28 17:57:49.892 OUTPUT:	Stopping enforcer...
2011-03-28 17:57:49.892 OUTPUT:	Stopping signer engine..
2011-03-28 17:57:49.892 OUTPUT:	Engine shut down.
2011-03-28 17:57:49.893 RunCommand(ps -e | grep enforcer)
2011-03-28 17:57:49.910 - runCommand: Process started, PID: 21908
2011-03-28 17:57:49.910 ERROR:	return code = 1
2011-03-28 17:57:49.910 RunCommand(ps -e | grep signer)
2011-03-28 17:57:49.921 - runCommand: Process started, PID: 21911
2011-03-28 17:57:49.921 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T390: Use a KSK Algorithm length of 1024 (Algorithm 7) and confirm ODS signs a zone with the configured algorithm length

2011-03-28 17:57:49.922 04685 Comment: KSK Algorithm length is 1024 with algorithm 7. Singing of the ODS zone should be succesfull.

2011-03-28 17:57:49.922 Requirement: ODSKC40

2011-03-28 17:57:49.922 04687 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:57:49.922 Requirement: ODSKC40

2011-03-28 17:57:49.922 04689 Stop()
2011-03-28 17:57:49.922 Requirement: ODSKC40
2011-03-28 17:57:49.922 RunCommand(ods-control stop)
2011-03-28 17:57:49.927 - runCommand: Process started, PID: 21914
2011-03-28 17:57:49.927 OUTPUT:	Stopping enforcer...
2011-03-28 17:57:49.927 OUTPUT:	Cannot find PID file
2011-03-28 17:57:49.927 OUTPUT:	Stopping signer engine..
2011-03-28 17:57:49.927 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:57:49.927 ERROR:	return code = 1
2011-03-28 17:57:49.927 RunCommand(ps -e | grep enforcer)
2011-03-28 17:57:49.939 - runCommand: Process started, PID: 21917
2011-03-28 17:57:49.939 ERROR:	return code = 1
2011-03-28 17:57:49.939 RunCommand(ps -e | grep signer)
2011-03-28 17:57:49.952 - runCommand: Process started, PID: 21920
2011-03-28 17:57:49.952 ERROR:	return code = 1

2011-03-28 17:57:49.952 04691 Wait(10)

2011-03-28 17:57:49.952 Requirement: ODSKC40

2011-03-28 17:57:59.953 04693 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:57:59.953 Requirement: ODSKC40

2011-03-28 17:57:59.953 04699 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:57:59.953 Requirement: ODSKC40

2011-03-28 17:57:59.953 04703 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:57:59.953 Requirement: ODSKC40

2011-03-28 17:57:59.953 04706 LoadConfig()
2011-03-28 17:57:59.953 Requirement: ODSKC40
2011-03-28 17:57:59.953 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:57:59.959 - runCommand: Process started, PID: 21923

2011-03-28 17:57:59.960 04709 LoadConfig()
2011-03-28 17:57:59.960 Requirement: ODSKC40
2011-03-28 17:57:59.960 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T390_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:57:59.965 - runCommand: Process started, PID: 21924

2011-03-28 17:57:59.966 04711 Comment: New setup for the configs and key repository

2011-03-28 17:57:59.966 Requirement: ODSKC40

2011-03-28 17:57:59.966 04715 Wait(10)

2011-03-28 17:57:59.966 Requirement: ODSKC40

2011-03-28 17:58:09.966 04717 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:58:09.966 Requirement: ODSKC40

2011-03-28 17:58:09.966 04719 Start()
2011-03-28 17:58:09.966 Requirement: ODSKC40
2011-03-28 17:58:09.966 RunCommand(ods-control start)
2011-03-28 17:58:09.969 - runCommand: Background process started, PID: 21925
2011-03-28 17:58:10.986 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:58:11.104 - runCommand: Process started, PID: 21940
2011-03-28 17:58:11.105 OUTPUT:	ods-enforcerd
2011-03-28 17:58:11.105 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:58:11.275 - runCommand: Process started, PID: 21945
2011-03-28 17:58:11.276 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:58:11.277 04721 Wait(10)

2011-03-28 17:58:11.277 Requirement: ODSKC40

2011-03-28 17:58:21.280 04723 Comment: Sign the ODS zone manually

2011-03-28 17:58:21.280 Requirement: ODSKC40

2011-03-28 17:58:21.282 04728 Wait(20)

2011-03-28 17:58:21.282 Requirement: ODSKC40

2011-03-28 17:58:41.285 04730 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 17:58:41.285 Requirement: ODSKC40

2011-03-28 17:58:41.287 04734 CheckFilePresent(ods)
2011-03-28 17:58:41.287 Requirement: ODSKC40
2011-03-28 17:58:41.287 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 17:58:41.289 04736 Comment: Signed zone file should be present.

2011-03-28 17:58:41.289 Requirement: ODSKC40

2011-03-28 17:58:41.291 04738 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:58:41.291 Requirement: ODSKC40

2011-03-28 17:58:41.292 04743 LoadConfig()
2011-03-28 17:58:41.293 Requirement: ODSKC40
2011-03-28 17:58:41.293 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:58:41.355 - runCommand: Process started, PID: 21968

2011-03-28 17:58:41.358 04746 LoadConfig()
2011-03-28 17:58:41.358 Requirement: ODSKC40
2011-03-28 17:58:41.359 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:58:41.414 - runCommand: Process started, PID: 21969

2011-03-28 17:58:41.418 04748 Comment: New setup for the configs and key repository

2011-03-28 17:58:41.418 Requirement: ODSKC40

2011-03-28 17:58:41.419 04752 Wait(10)

2011-03-28 17:58:41.420 Requirement: ODSKC40

2011-03-28 17:58:51.422 04754 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 17:58:51.423 Requirement: ODSKC40

2011-03-28 17:58:51.424 04756 Start()
2011-03-28 17:58:51.425 Requirement: ODSKC40
2011-03-28 17:58:51.425 RunCommand(ods-control start)
2011-03-28 17:58:51.451 - runCommand: Background process started, PID: 21970
2011-03-28 17:58:51.523 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:58:51.678 - runCommand: Process started, PID: 21977
2011-03-28 17:58:51.678 OUTPUT:	ods-enforcerd
2011-03-28 17:58:51.679 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:58:51.843 - runCommand: Process started, PID: 21981
2011-03-28 17:58:51.844 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:58:51.845 04758 Wait(30)

2011-03-28 17:58:51.846 Requirement: ODSKC40

2011-03-28 17:59:21.848 04760 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:59:21.849 Requirement: ODSKC40

2011-03-28 17:59:21.850 04762 Stop()
2011-03-28 17:59:21.850 Requirement: ODSKC40
2011-03-28 17:59:21.851 RunCommand(ods-control stop)
2011-03-28 17:59:22.967 - runCommand: Process started, PID: 21986
2011-03-28 17:59:22.968 OUTPUT:	Stopping enforcer...
2011-03-28 17:59:22.968 OUTPUT:	Stopping signer engine..
2011-03-28 17:59:22.968 OUTPUT:	Engine shut down.
2011-03-28 17:59:22.969 RunCommand(ps -e | grep enforcer)
2011-03-28 17:59:22.115 - runCommand: Process started, PID: 21992
2011-03-28 17:59:22.115 ERROR:	return code = 1
2011-03-28 17:59:22.115 RunCommand(ps -e | grep signer)
2011-03-28 17:59:22.127 - runCommand: Process started, PID: 21995
2011-03-28 17:59:22.127 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T400: Use a KSK Algorithm length of 2048 (Algorithm 7) and confirm ODS signs a zone with the configured algorithm length

2011-03-28 17:59:22.127 04768 Comment: KSK Algorithm length is 2048 with algorithm 7. Singing of the ODS zone should be succesfull.

2011-03-28 17:59:22.127 Requirement: ODSKC40

2011-03-28 17:59:22.127 04770 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 17:59:22.127 Requirement: ODSKC40

2011-03-28 17:59:22.127 04772 Stop()
2011-03-28 17:59:22.127 Requirement: ODSKC40
2011-03-28 17:59:22.127 RunCommand(ods-control stop)
2011-03-28 17:59:22.132 - runCommand: Process started, PID: 21998
2011-03-28 17:59:22.132 OUTPUT:	Stopping enforcer...
2011-03-28 17:59:22.132 OUTPUT:	Cannot find PID file
2011-03-28 17:59:22.132 OUTPUT:	Stopping signer engine..
2011-03-28 17:59:22.132 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 17:59:22.132 ERROR:	return code = 1
2011-03-28 17:59:22.132 RunCommand(ps -e | grep enforcer)
2011-03-28 17:59:22.143 - runCommand: Process started, PID: 22001
2011-03-28 17:59:22.143 ERROR:	return code = 1
2011-03-28 17:59:22.143 RunCommand(ps -e | grep signer)
2011-03-28 17:59:22.157 - runCommand: Process started, PID: 22004
2011-03-28 17:59:22.157 ERROR:	return code = 1

2011-03-28 17:59:22.157 04774 Wait(10)

2011-03-28 17:59:22.157 Requirement: ODSKC40

2011-03-28 17:59:32.157 04776 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 17:59:32.157 Requirement: ODSKC40

2011-03-28 17:59:32.157 04782 Comment: Purge the keys in the SoftHSM repository

2011-03-28 17:59:32.158 Requirement: ODSKC40

2011-03-28 17:59:32.158 04786 Comment: Change the configuration with predefined xml config files.

2011-03-28 17:59:32.158 Requirement: ODSKC40

2011-03-28 17:59:32.158 04789 LoadConfig()
2011-03-28 17:59:32.158 Requirement: ODSKC40
2011-03-28 17:59:32.158 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 17:59:32.164 - runCommand: Process started, PID: 22007

2011-03-28 17:59:32.164 04792 LoadConfig()
2011-03-28 17:59:32.165 Requirement: ODSKC40
2011-03-28 17:59:32.165 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T400_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 17:59:32.170 - runCommand: Process started, PID: 22008

2011-03-28 17:59:32.170 04794 Comment: New setup for the configs and key repository

2011-03-28 17:59:32.170 Requirement: ODSKC40

2011-03-28 17:59:32.171 04798 Wait(10)

2011-03-28 17:59:32.171 Requirement: ODSKC40

2011-03-28 17:59:42.171 04800 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 17:59:42.171 Requirement: ODSKC40

2011-03-28 17:59:42.171 04802 Start()
2011-03-28 17:59:42.171 Requirement: ODSKC40
2011-03-28 17:59:42.171 RunCommand(ods-control start)
2011-03-28 17:59:42.174 - runCommand: Background process started, PID: 22009
2011-03-28 17:59:43.190 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 17:59:43.205 - runCommand: Process started, PID: 22024
2011-03-28 17:59:43.205 OUTPUT:	ods-enforcerd
2011-03-28 17:59:43.205 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 17:59:43.222 - runCommand: Process started, PID: 22029
2011-03-28 17:59:43.222 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 17:59:43.222 04804 Wait(15)

2011-03-28 17:59:43.222 Requirement: ODSKC40

2011-03-28 17:59:58.222 04806 Comment: Sign the ODS zone manually

2011-03-28 17:59:58.222 Requirement: ODSKC40

2011-03-28 17:59:58.222 04811 Wait(20)

2011-03-28 17:59:58.222 Requirement: ODSKC40

2011-03-28 18:00:18.223 04813 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 18:00:18.223 Requirement: ODSKC40

2011-03-28 18:00:18.223 04817 CheckFilePresent(ods)
2011-03-28 18:00:18.223 Requirement: ODSKC40
2011-03-28 18:00:18.223 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 18:00:18.223 04819 Comment: Signed zone file should be present.

2011-03-28 18:00:18.223 Requirement: ODSKC40

2011-03-28 18:00:18.223 04821 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:00:18.223 Requirement: ODSKC40

2011-03-28 18:00:18.223 04826 LoadConfig()
2011-03-28 18:00:18.223 Requirement: ODSKC40
2011-03-28 18:00:18.223 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:00:18.229 - runCommand: Process started, PID: 22042

2011-03-28 18:00:18.230 04829 LoadConfig()
2011-03-28 18:00:18.230 Requirement: ODSKC40
2011-03-28 18:00:18.230 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:00:18.233 - runCommand: Process started, PID: 22043

2011-03-28 18:00:18.233 04831 Comment: New setup for the configs and key repository

2011-03-28 18:00:18.233 Requirement: ODSKC40

2011-03-28 18:00:18.233 04835 Wait(10)

2011-03-28 18:00:18.233 Requirement: ODSKC40

2011-03-28 18:00:28.234 04837 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 18:00:28.234 Requirement: ODSKC40

2011-03-28 18:00:28.234 04839 Start()
2011-03-28 18:00:28.234 Requirement: ODSKC40
2011-03-28 18:00:28.234 RunCommand(ods-control start)
2011-03-28 18:00:28.236 - runCommand: Background process started, PID: 22044
2011-03-28 18:00:28.244 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:00:28.263 - runCommand: Process started, PID: 22051
2011-03-28 18:00:28.263 OUTPUT:	ods-enforcerd
2011-03-28 18:00:28.263 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:00:28.279 - runCommand: Process started, PID: 22055
2011-03-28 18:00:28.279 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:00:28.280 04841 Wait(30)

2011-03-28 18:00:28.280 Requirement: ODSKC40

2011-03-28 18:00:58.280 04843 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:00:58.280 Requirement: ODSKC40

2011-03-28 18:00:58.280 04845 Stop()
2011-03-28 18:00:58.280 Requirement: ODSKC40
2011-03-28 18:00:58.280 RunCommand(ods-control stop)
2011-03-28 18:00:59.291 - runCommand: Process started, PID: 22060
2011-03-28 18:00:59.291 OUTPUT:	Stopping enforcer...
2011-03-28 18:00:59.291 OUTPUT:	Stopping signer engine..
2011-03-28 18:00:59.291 OUTPUT:	Engine shut down.
2011-03-28 18:00:59.291 RunCommand(ps -e | grep enforcer)
2011-03-28 18:00:59.309 - runCommand: Process started, PID: 22067
2011-03-28 18:00:59.309 ERROR:	return code = 1
2011-03-28 18:00:59.309 RunCommand(ps -e | grep signer)
2011-03-28 18:00:59.329 - runCommand: Process started, PID: 22070
2011-03-28 18:00:59.329 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T410: Use a KSK Algorithm length of 4096 (Algorithm 7) and confirm ODS signs a zone with the configured algorithm length

2011-03-28 18:00:59.330 04851 Comment: KSK Algorithm length is 4096 with algorithm 7. Singing of the ODS zone should be succesfull.

2011-03-28 18:00:59.330 Requirement: ODSKC40

2011-03-28 18:00:59.330 04853 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:00:59.330 Requirement: ODSKC40

2011-03-28 18:00:59.330 04855 Stop()
2011-03-28 18:00:59.330 Requirement: ODSKC40
2011-03-28 18:00:59.330 RunCommand(ods-control stop)
2011-03-28 18:00:59.337 - runCommand: Process started, PID: 22073
2011-03-28 18:00:59.338 OUTPUT:	Stopping enforcer...
2011-03-28 18:00:59.338 OUTPUT:	Cannot find PID file
2011-03-28 18:00:59.338 OUTPUT:	Stopping signer engine..
2011-03-28 18:00:59.338 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:00:59.338 ERROR:	return code = 1
2011-03-28 18:00:59.338 RunCommand(ps -e | grep enforcer)
2011-03-28 18:00:59.358 - runCommand: Process started, PID: 22076
2011-03-28 18:00:59.358 ERROR:	return code = 1
2011-03-28 18:00:59.359 RunCommand(ps -e | grep signer)
2011-03-28 18:00:59.376 - runCommand: Process started, PID: 22079
2011-03-28 18:00:59.376 ERROR:	return code = 1

2011-03-28 18:00:59.377 04857 Wait(10)

2011-03-28 18:00:59.377 Requirement: ODSKC40

2011-03-28 18:01:09.377 04859 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:01:09.377 Requirement: ODSKC40

2011-03-28 18:01:09.377 04865 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:01:09.377 Requirement: ODSKC40

2011-03-28 18:01:09.377 04869 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:01:09.377 Requirement: ODSKC40

2011-03-28 18:01:09.377 04872 LoadConfig()
2011-03-28 18:01:09.377 Requirement: ODSKC40
2011-03-28 18:01:09.377 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:01:09.384 - runCommand: Process started, PID: 22082

2011-03-28 18:01:09.384 04875 LoadConfig()
2011-03-28 18:01:09.384 Requirement: ODSKC40
2011-03-28 18:01:09.384 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T410_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:01:09.390 - runCommand: Process started, PID: 22083

2011-03-28 18:01:09.390 04877 Comment: New setup for the configs and key repository

2011-03-28 18:01:09.390 Requirement: ODSKC40

2011-03-28 18:01:09.390 04881 Wait(10)

2011-03-28 18:01:09.390 Requirement: ODSKC40

2011-03-28 18:01:19.390 04883 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:01:19.390 Requirement: ODSKC40

2011-03-28 18:01:19.391 04885 Start()
2011-03-28 18:01:19.391 Requirement: ODSKC40
2011-03-28 18:01:19.391 RunCommand(ods-control start)
2011-03-28 18:01:19.393 - runCommand: Background process started, PID: 22084
2011-03-28 18:01:20.411 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:01:20.433 - runCommand: Process started, PID: 22099
2011-03-28 18:01:20.433 OUTPUT:	ods-enforcerd
2011-03-28 18:01:20.433 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:01:20.449 - runCommand: Process started, PID: 22112
2011-03-28 18:01:20.449 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:01:20.449 04887 Wait(30)

2011-03-28 18:01:20.449 Requirement: ODSKC40

2011-03-28 18:01:50.449 04889 Comment: Sign the ODS zone manually

2011-03-28 18:01:50.449 Requirement: ODSKC40

2011-03-28 18:01:50.450 04894 Wait(20)

2011-03-28 18:01:50.450 Requirement: ODSKC40

2011-03-28 18:02:10.450 04896 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 18:02:10.450 Requirement: ODSKC40

2011-03-28 18:02:10.450 04900 CheckFilePresent(ods)
2011-03-28 18:02:10.450 Requirement: ODSKC40
2011-03-28 18:02:10.450 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 18:02:10.450 04902 Comment: Signed zone file should be present.

2011-03-28 18:02:10.450 Requirement: ODSKC40

2011-03-28 18:02:10.450 04904 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:02:10.450 Requirement: ODSKC40

2011-03-28 18:02:10.451 04909 LoadConfig()
2011-03-28 18:02:10.451 Requirement: ODSKC40
2011-03-28 18:02:10.451 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:02:10.457 - runCommand: Process started, PID: 22127

2011-03-28 18:02:10.457 04912 LoadConfig()
2011-03-28 18:02:10.457 Requirement: ODSKC40
2011-03-28 18:02:10.457 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:02:10.463 - runCommand: Process started, PID: 22128

2011-03-28 18:02:10.463 04914 Comment: New setup for the configs and key repository

2011-03-28 18:02:10.463 Requirement: ODSKC40

2011-03-28 18:02:10.463 04918 Wait(10)

2011-03-28 18:02:10.463 Requirement: ODSKC40

2011-03-28 18:02:20.464 04920 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 18:02:20.464 Requirement: ODSKC40

2011-03-28 18:02:20.464 04922 Start()
2011-03-28 18:02:20.464 Requirement: ODSKC40
2011-03-28 18:02:20.464 RunCommand(ods-control start)
2011-03-28 18:02:20.467 - runCommand: Background process started, PID: 22129
2011-03-28 18:02:20.474 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:02:20.496 - runCommand: Process started, PID: 22136
2011-03-28 18:02:20.496 OUTPUT:	ods-enforcerd
2011-03-28 18:02:20.496 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:02:20.513 - runCommand: Process started, PID: 22140
2011-03-28 18:02:20.513 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:02:20.513 04924 Wait(30)

2011-03-28 18:02:20.513 Requirement: ODSKC40

2011-03-28 18:02:50.513 04926 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:02:50.513 Requirement: ODSKC40

2011-03-28 18:02:50.513 04928 Stop()
2011-03-28 18:02:50.513 Requirement: ODSKC40
2011-03-28 18:02:50.513 RunCommand(ods-control stop)
2011-03-28 18:02:51.524 - runCommand: Process started, PID: 22145
2011-03-28 18:02:51.524 OUTPUT:	Stopping enforcer...
2011-03-28 18:02:51.524 OUTPUT:	Stopping signer engine..
2011-03-28 18:02:51.524 OUTPUT:	Engine shut down.
2011-03-28 18:02:51.524 RunCommand(ps -e | grep enforcer)
2011-03-28 18:02:51.543 - runCommand: Process started, PID: 22152
2011-03-28 18:02:51.543 ERROR:	return code = 1
2011-03-28 18:02:51.543 RunCommand(ps -e | grep signer)
2011-03-28 18:02:51.560 - runCommand: Process started, PID: 22155
2011-03-28 18:02:51.561 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T420: Use a KSK Algorithm length of 8192 (Algorithm 7) and confirm ODS fails signing

2011-03-28 18:02:51.561 04934 Comment: KSK Algorithm length is 8192 with algorithm 7. Siging of the ODS zone should fail.

2011-03-28 18:02:51.561 Requirement: ODSKC40

2011-03-28 18:02:51.561 04936 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:02:51.561 Requirement: ODSKC40

2011-03-28 18:02:51.561 04938 Stop()
2011-03-28 18:02:51.561 Requirement: ODSKC40
2011-03-28 18:02:51.561 RunCommand(ods-control stop)
2011-03-28 18:02:51.569 - runCommand: Process started, PID: 22158
2011-03-28 18:02:51.569 OUTPUT:	Stopping enforcer...
2011-03-28 18:02:51.569 OUTPUT:	Cannot find PID file
2011-03-28 18:02:51.569 OUTPUT:	Stopping signer engine..
2011-03-28 18:02:51.569 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:02:51.569 ERROR:	return code = 1
2011-03-28 18:02:51.569 RunCommand(ps -e | grep enforcer)
2011-03-28 18:02:51.586 - runCommand: Process started, PID: 22161
2011-03-28 18:02:51.586 ERROR:	return code = 1
2011-03-28 18:02:51.586 RunCommand(ps -e | grep signer)
2011-03-28 18:02:51.598 - runCommand: Process started, PID: 22164
2011-03-28 18:02:51.598 ERROR:	return code = 1

2011-03-28 18:02:51.598 04940 Wait(10)

2011-03-28 18:02:51.599 Requirement: ODSKC40

2011-03-28 18:03:01.599 04942 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:03:01.599 Requirement: ODSKC40

2011-03-28 18:03:01.599 04948 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:03:01.599 Requirement: ODSKC40

2011-03-28 18:03:01.599 04952 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:03:01.599 Requirement: ODSKC40

2011-03-28 18:03:01.599 04955 LoadConfig()
2011-03-28 18:03:01.599 Requirement: ODSKC40
2011-03-28 18:03:01.599 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:03:01.606 - runCommand: Process started, PID: 22167

2011-03-28 18:03:01.606 04958 LoadConfig()
2011-03-28 18:03:01.606 Requirement: ODSKC40
2011-03-28 18:03:01.606 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T420_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:03:01.612 - runCommand: Process started, PID: 22168

2011-03-28 18:03:01.612 04960 Comment: New setup for the configs and key repository

2011-03-28 18:03:01.612 Requirement: ODSKC40

2011-03-28 18:03:01.612 04964 Wait(10)

2011-03-28 18:03:01.612 Requirement: ODSKC40

2011-03-28 18:03:11.612 04966 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:03:11.612 Requirement: ODSKC40

2011-03-28 18:03:11.613 04968 Start()
2011-03-28 18:03:11.613 Requirement: ODSKC40
2011-03-28 18:03:11.613 RunCommand(ods-control start)
2011-03-28 18:03:11.615 - runCommand: Background process started, PID: 22169
2011-03-28 18:03:12.631 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:03:12.655 - runCommand: Process started, PID: 22184
2011-03-28 18:03:12.655 OUTPUT:	ods-enforcerd
2011-03-28 18:03:12.655 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:03:12.673 - runCommand: Process started, PID: 22197
2011-03-28 18:03:12.673 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:03:12.673 04970 Comment: Sign the ODS zone manually

2011-03-28 18:03:12.673 Requirement: ODSKC40

2011-03-28 18:03:12.673 04975 Wait(20)

2011-03-28 18:03:12.673 Requirement: ODSKC40

2011-03-28 18:03:32.673 04977 Comment: Check if the signing of the ods zone failed. No signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 18:03:32.673 Requirement: ODSKC40

2011-03-28 18:03:32.674 04981 CheckFilePresent(ods)
2011-03-28 18:03:32.674 Requirement: ODSKC40
2011-03-28 18:03:32.674 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 18:03:32.674 04983 Comment: Signed zone lile should not be present.

2011-03-28 18:03:32.674 Requirement: ODSKC40

2011-03-28 18:03:32.674 04985 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:03:32.674 Requirement: ODSKC40

2011-03-28 18:03:32.674 04990 LoadConfig()
2011-03-28 18:03:32.674 Requirement: ODSKC40
2011-03-28 18:03:32.674 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:03:32.680 - runCommand: Process started, PID: 22202

2011-03-28 18:03:32.681 04993 LoadConfig()
2011-03-28 18:03:32.681 Requirement: ODSKC40
2011-03-28 18:03:32.681 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:03:32.686 - runCommand: Process started, PID: 22203

2011-03-28 18:03:32.687 04995 Comment: New setup for the configs and key repository

2011-03-28 18:03:32.687 Requirement: ODSKC40

2011-03-28 18:03:32.687 04999 Wait(10)

2011-03-28 18:03:32.687 Requirement: ODSKC40

2011-03-28 18:03:42.687 05001 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 18:03:42.687 Requirement: ODSKC40

2011-03-28 18:03:42.687 05003 Start()
2011-03-28 18:03:42.687 Requirement: ODSKC40
2011-03-28 18:03:42.687 RunCommand(ods-control start)
2011-03-28 18:03:42.690 - runCommand: Background process started, PID: 22204
2011-03-28 18:03:42.697 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:03:42.719 - runCommand: Process started, PID: 22211
2011-03-28 18:03:42.719 OUTPUT:	ods-enforcerd
2011-03-28 18:03:42.719 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:03:42.736 - runCommand: Process started, PID: 22215
2011-03-28 18:03:42.736 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:03:42.737 05005 Wait(30)

2011-03-28 18:03:42.737 Requirement: ODSKC40

2011-03-28 18:04:12.737 05007 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:04:12.737 Requirement: ODSKC40

-------------------------------------------------------------------------------
Testcase - ODSKC40T430: Use a KSK Algorithm length of 1024 and Algorithm 3 (DSA/SHA1) and confirm ODS signs a zone with this configuration

2011-03-28 18:04:12.737 05013 Comment: KSK Algorithm length is 1024 with algorithm 3. Singing of the ODS zone should be succesfull.

2011-03-28 18:04:12.737 Requirement: ODSKC40

2011-03-28 18:04:12.737 05015 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:04:12.738 Requirement: ODSKC40

2011-03-28 18:04:12.738 05017 Stop()
2011-03-28 18:04:12.738 Requirement: ODSKC40
2011-03-28 18:04:12.738 RunCommand(ods-control stop)
2011-03-28 18:04:13.749 - runCommand: Process started, PID: 22220
2011-03-28 18:04:13.749 OUTPUT:	Stopping enforcer...
2011-03-28 18:04:13.749 OUTPUT:	Stopping signer engine..
2011-03-28 18:04:13.749 OUTPUT:	Engine shut down.
2011-03-28 18:04:13.749 RunCommand(ps -e | grep enforcer)
2011-03-28 18:04:13.767 - runCommand: Process started, PID: 22227
2011-03-28 18:04:13.767 ERROR:	return code = 1
2011-03-28 18:04:13.767 RunCommand(ps -e | grep signer)
2011-03-28 18:04:13.788 - runCommand: Process started, PID: 22230
2011-03-28 18:04:13.788 ERROR:	return code = 1

2011-03-28 18:04:13.789 05019 Wait(10)

2011-03-28 18:04:13.789 Requirement: ODSKC40

2011-03-28 18:04:23.789 05021 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:04:23.789 Requirement: ODSKC40

2011-03-28 18:04:23.789 05027 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:04:23.789 Requirement: ODSKC40

2011-03-28 18:04:23.789 05031 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:04:23.789 Requirement: ODSKC40

2011-03-28 18:04:23.790 05034 LoadConfig()
2011-03-28 18:04:23.790 Requirement: ODSKC40
2011-03-28 18:04:23.790 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:04:23.796 - runCommand: Process started, PID: 22233

2011-03-28 18:04:23.796 05037 LoadConfig()
2011-03-28 18:04:23.796 Requirement: ODSKC40
2011-03-28 18:04:23.796 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T430_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:04:23.802 - runCommand: Process started, PID: 22234

2011-03-28 18:04:23.802 05039 Comment: New setup for the configs and key repository

2011-03-28 18:04:23.802 Requirement: ODSKC40

2011-03-28 18:04:23.802 05043 Wait(10)

2011-03-28 18:04:23.802 Requirement: ODSKC40

2011-03-28 18:04:33.803 05045 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:04:33.803 Requirement: ODSKC40

2011-03-28 18:04:33.803 05047 Start()
2011-03-28 18:04:33.803 Requirement: ODSKC40
2011-03-28 18:04:33.803 RunCommand(ods-control start)
2011-03-28 18:04:33.805 - runCommand: Background process started, PID: 22237
2011-03-28 18:04:34.823 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:04:34.846 - runCommand: Process started, PID: 22252
2011-03-28 18:04:34.846 OUTPUT:	ods-enforcerd
2011-03-28 18:04:34.846 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:04:34.861 - runCommand: Process started, PID: 22265
2011-03-28 18:04:34.862 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:04:34.862 05049 Wait(30)

2011-03-28 18:04:34.862 Requirement: ODSKC40

2011-03-28 18:05:04.862 05051 Comment: Sign the ODS zone manually

2011-03-28 18:05:04.862 Requirement: ODSKC40

2011-03-28 18:05:04.862 05056 Wait(20)

2011-03-28 18:05:04.862 Requirement: ODSKC40

2011-03-28 18:05:24.862 05058 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 18:05:24.863 Requirement: ODSKC40

2011-03-28 18:05:24.863 05062 CheckFilePresent(ods)
2011-03-28 18:05:24.863 Requirement: ODSKC40
2011-03-28 18:05:24.863 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 18:05:24.863 05064 Comment: Signed zone file should be present.

2011-03-28 18:05:24.863 Requirement: ODSKC40

2011-03-28 18:05:24.863 05066 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:05:24.863 Requirement: ODSKC40

2011-03-28 18:05:24.863 05071 LoadConfig()
2011-03-28 18:05:24.863 Requirement: ODSKC40
2011-03-28 18:05:24.863 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:05:24.870 - runCommand: Process started, PID: 22282

2011-03-28 18:05:24.870 05074 LoadConfig()
2011-03-28 18:05:24.870 Requirement: ODSKC40
2011-03-28 18:05:24.870 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:05:24.875 - runCommand: Process started, PID: 22283

2011-03-28 18:05:24.876 05076 Comment: New setup for the configs and key repository

2011-03-28 18:05:24.876 Requirement: ODSKC40

2011-03-28 18:05:24.876 05080 Wait(10)

2011-03-28 18:05:24.876 Requirement: ODSKC40

2011-03-28 18:05:34.876 05082 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 18:05:34.876 Requirement: ODSKC40

2011-03-28 18:05:34.876 05084 Start()
2011-03-28 18:05:34.876 Requirement: ODSKC40
2011-03-28 18:05:34.876 RunCommand(ods-control start)
2011-03-28 18:05:34.879 - runCommand: Background process started, PID: 22284
2011-03-28 18:05:34.886 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:05:34.908 - runCommand: Process started, PID: 22291
2011-03-28 18:05:34.908 OUTPUT:	ods-enforcerd
2011-03-28 18:05:34.908 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:05:34.923 - runCommand: Process started, PID: 22295
2011-03-28 18:05:34.923 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:05:34.923 05086 Wait(30)

2011-03-28 18:05:34.923 Requirement: ODSKC40

2011-03-28 18:06:04.924 05088 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:06:04.924 Requirement: ODSKC40

2011-03-28 18:06:04.924 05090 Stop()
2011-03-28 18:06:04.924 Requirement: ODSKC40
2011-03-28 18:06:04.924 RunCommand(ods-control stop)
2011-03-28 18:06:05.935 - runCommand: Process started, PID: 22300
2011-03-28 18:06:05.935 OUTPUT:	Stopping enforcer...
2011-03-28 18:06:05.936 OUTPUT:	Stopping signer engine..
2011-03-28 18:06:05.936 OUTPUT:	Engine shut down.
2011-03-28 18:06:05.936 RunCommand(ps -e | grep enforcer)
2011-03-28 18:06:05.953 - runCommand: Process started, PID: 22307
2011-03-28 18:06:05.954 ERROR:	return code = 1
2011-03-28 18:06:05.954 RunCommand(ps -e | grep signer)
2011-03-28 18:06:05.965 - runCommand: Process started, PID: 22310
2011-03-28 18:06:05.965 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T440: Use a KSK Algorithm length of 1024 and Algorithm 5 (RSA/SHA1) and confirm ODS signs a zone with this configuration

2011-03-28 18:06:05.965 05095 Comment: KSK Algorithm length is 1024 with algorithm 5. Singing of the ODS zone should be succesfull.

2011-03-28 18:06:05.965 Requirement: ODSKC40

2011-03-28 18:06:05.965 05097 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:06:05.965 Requirement: ODSKC40

2011-03-28 18:06:05.965 05099 Stop()
2011-03-28 18:06:05.965 Requirement: ODSKC40
2011-03-28 18:06:05.965 RunCommand(ods-control stop)
2011-03-28 18:06:05.970 - runCommand: Process started, PID: 22313
2011-03-28 18:06:05.970 OUTPUT:	Stopping enforcer...
2011-03-28 18:06:05.970 OUTPUT:	Cannot find PID file
2011-03-28 18:06:05.970 OUTPUT:	Stopping signer engine..
2011-03-28 18:06:05.970 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:06:05.970 ERROR:	return code = 1
2011-03-28 18:06:05.970 RunCommand(ps -e | grep enforcer)
2011-03-28 18:06:05.982 - runCommand: Process started, PID: 22316
2011-03-28 18:06:05.982 ERROR:	return code = 1
2011-03-28 18:06:05.982 RunCommand(ps -e | grep signer)
2011-03-28 18:06:05.995 - runCommand: Process started, PID: 22319
2011-03-28 18:06:05.995 ERROR:	return code = 1

2011-03-28 18:06:05.995 05101 Wait(10)

2011-03-28 18:06:05.995 Requirement: ODSKC40

2011-03-28 18:06:15.996 05103 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:06:15.996 Requirement: ODSKC40

2011-03-28 18:06:15.996 05109 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:06:15.996 Requirement: ODSKC40

2011-03-28 18:06:15.996 05113 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:06:15.996 Requirement: ODSKC40

2011-03-28 18:06:15.996 05116 LoadConfig()
2011-03-28 18:06:15.996 Requirement: ODSKC40
2011-03-28 18:06:15.996 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:06:16.309 - runCommand: Process started, PID: 22322

2011-03-28 18:06:16.339 05119 LoadConfig()
2011-03-28 18:06:16.341 Requirement: ODSKC40
2011-03-28 18:06:16.345 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T440_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:06:16.897 - runCommand: Process started, PID: 22323

2011-03-28 18:06:16.930 05121 Comment: New setup for the configs and key repository

2011-03-28 18:06:16.932 Requirement: ODSKC40

2011-03-28 18:06:16.951 05125 Wait(10)

2011-03-28 18:06:16.953 Requirement: ODSKC40

2011-03-28 18:06:26.980 05127 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:06:26.984 Requirement: ODSKC40

2011-03-28 18:06:26.999 05129 Start()
2011-03-28 18:06:26.100 Requirement: ODSKC40
2011-03-28 18:06:26.100 RunCommand(ods-control start)
2011-03-28 18:06:26.126 - runCommand: Background process started, PID: 22324
2011-03-28 18:06:27.304 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:06:27.516 - runCommand: Process started, PID: 22339
2011-03-28 18:06:27.517 OUTPUT:	ods-enforcerd
2011-03-28 18:06:27.517 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:06:27.713 - runCommand: Process started, PID: 22344
2011-03-28 18:06:27.714 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:06:27.716 05131 Wait(30)

2011-03-28 18:06:27.716 Requirement: ODSKC40

2011-03-28 18:06:57.718 05133 Comment: Sign the ODS zone manually

2011-03-28 18:06:57.719 Requirement: ODSKC40

2011-03-28 18:06:57.720 05138 Wait(20)

2011-03-28 18:06:57.721 Requirement: ODSKC40

2011-03-28 18:07:17.723 05140 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 18:07:17.724 Requirement: ODSKC40

2011-03-28 18:07:17.725 05144 CheckFilePresent(ods)
2011-03-28 18:07:17.726 Requirement: ODSKC40
2011-03-28 18:07:17.726 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 18:07:17.727 05146 Comment: Signed zone file should be present.

2011-03-28 18:07:17.728 Requirement: ODSKC40

2011-03-28 18:07:17.729 05148 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:07:17.729 Requirement: ODSKC40

2011-03-28 18:07:17.731 05153 LoadConfig()
2011-03-28 18:07:17.731 Requirement: ODSKC40
2011-03-28 18:07:17.731 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:07:17.794 - runCommand: Process started, PID: 22357

2011-03-28 18:07:17.797 05156 LoadConfig()
2011-03-28 18:07:17.797 Requirement: ODSKC40
2011-03-28 18:07:17.797 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:07:17.856 - runCommand: Process started, PID: 22358

2011-03-28 18:07:17.860 05158 Comment: New setup for the configs and key repository

2011-03-28 18:07:17.860 Requirement: ODSKC40

2011-03-28 18:07:17.862 05162 Wait(10)

2011-03-28 18:07:17.862 Requirement: ODSKC40

2011-03-28 18:07:27.865 05164 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 18:07:27.865 Requirement: ODSKC40

2011-03-28 18:07:27.867 05166 Start()
2011-03-28 18:07:27.867 Requirement: ODSKC40
2011-03-28 18:07:27.867 RunCommand(ods-control start)
2011-03-28 18:07:27.893 - runCommand: Background process started, PID: 22359
2011-03-28 18:07:27.964 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:07:27.115 - runCommand: Process started, PID: 22366
2011-03-28 18:07:27.115 OUTPUT:	ods-enforcerd
2011-03-28 18:07:27.115 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:07:27.132 - runCommand: Process started, PID: 22370
2011-03-28 18:07:27.133 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:07:27.133 05168 Wait(30)

2011-03-28 18:07:27.133 Requirement: ODSKC40

2011-03-28 18:07:57.133 05170 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:07:57.133 Requirement: ODSKC40

2011-03-28 18:07:57.133 05172 Stop()
2011-03-28 18:07:57.133 Requirement: ODSKC40
2011-03-28 18:07:57.133 RunCommand(ods-control stop)
2011-03-28 18:07:58.145 - runCommand: Process started, PID: 22386
2011-03-28 18:07:58.145 OUTPUT:	Stopping enforcer...
2011-03-28 18:07:58.145 OUTPUT:	Stopping signer engine..
2011-03-28 18:07:58.145 OUTPUT:	Engine shut down.
2011-03-28 18:07:58.146 RunCommand(ps -e | grep enforcer)
2011-03-28 18:07:58.163 - runCommand: Process started, PID: 22392
2011-03-28 18:07:58.163 ERROR:	return code = 1
2011-03-28 18:07:58.163 RunCommand(ps -e | grep signer)
2011-03-28 18:07:58.179 - runCommand: Process started, PID: 22395
2011-03-28 18:07:58.179 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T450: Use a KSK Algorithm length of 1024 and Algorithm 6 (DSA-NSEC3-SHA1) and confirm ODS signs a zone with this configuration

2011-03-28 18:07:58.179 05178 Comment: KSK Algorithm length is 1024 with algorithm 6. Singing of the ODS zone should be succesfull.

2011-03-28 18:07:58.179 Requirement: ODSKC40

2011-03-28 18:07:58.179 05180 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:07:58.179 Requirement: ODSKC40

2011-03-28 18:07:58.179 05182 Stop()
2011-03-28 18:07:58.179 Requirement: ODSKC40
2011-03-28 18:07:58.179 RunCommand(ods-control stop)
2011-03-28 18:07:58.184 - runCommand: Process started, PID: 22398
2011-03-28 18:07:58.184 OUTPUT:	Stopping enforcer...
2011-03-28 18:07:58.184 OUTPUT:	Cannot find PID file
2011-03-28 18:07:58.184 OUTPUT:	Stopping signer engine..
2011-03-28 18:07:58.184 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:07:58.184 ERROR:	return code = 1
2011-03-28 18:07:58.184 RunCommand(ps -e | grep enforcer)
2011-03-28 18:07:58.196 - runCommand: Process started, PID: 22401
2011-03-28 18:07:58.196 ERROR:	return code = 1
2011-03-28 18:07:58.196 RunCommand(ps -e | grep signer)
2011-03-28 18:07:58.209 - runCommand: Process started, PID: 22404
2011-03-28 18:07:58.209 ERROR:	return code = 1

2011-03-28 18:07:58.209 05184 Wait(10)

2011-03-28 18:07:58.209 Requirement: ODSKC40

2011-03-28 18:08:08.210 05186 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:08:08.210 Requirement: ODSKC40

2011-03-28 18:08:08.210 05192 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:08:08.210 Requirement: ODSKC40

2011-03-28 18:08:08.210 05196 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:08:08.210 Requirement: ODSKC40

2011-03-28 18:08:08.210 05199 LoadConfig()
2011-03-28 18:08:08.210 Requirement: ODSKC40
2011-03-28 18:08:08.210 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:08:08.217 - runCommand: Process started, PID: 22407

2011-03-28 18:08:08.217 05202 LoadConfig()
2011-03-28 18:08:08.217 Requirement: ODSKC40
2011-03-28 18:08:08.217 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T450_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:08:08.223 - runCommand: Process started, PID: 22408

2011-03-28 18:08:08.223 05204 Comment: New setup for the configs and key repository

2011-03-28 18:08:08.223 Requirement: ODSKC40

2011-03-28 18:08:08.223 05208 Wait(10)

2011-03-28 18:08:08.223 Requirement: ODSKC40

2011-03-28 18:08:18.223 05210 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:08:18.223 Requirement: ODSKC40

2011-03-28 18:08:18.224 05212 Start()
2011-03-28 18:08:18.224 Requirement: ODSKC40
2011-03-28 18:08:18.224 RunCommand(ods-control start)
2011-03-28 18:08:18.226 - runCommand: Background process started, PID: 22409
2011-03-28 18:08:19.243 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:08:19.266 - runCommand: Process started, PID: 22424
2011-03-28 18:08:19.266 OUTPUT:	ods-enforcerd
2011-03-28 18:08:19.266 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:08:19.284 - runCommand: Process started, PID: 22429
2011-03-28 18:08:19.284 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:08:19.284 05214 Wait(30)

2011-03-28 18:08:19.284 Requirement: ODSKC40

2011-03-28 18:08:49.284 05216 Comment: Sign the ODS zone manually

2011-03-28 18:08:49.284 Requirement: ODSKC40

2011-03-28 18:08:49.284 05221 Wait(20)

2011-03-28 18:08:49.284 Requirement: ODSKC40

2011-03-28 18:09:09.285 05223 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 18:09:09.285 Requirement: ODSKC40

2011-03-28 18:09:09.285 05227 CheckFilePresent(ods)
2011-03-28 18:09:09.285 Requirement: ODSKC40
2011-03-28 18:09:09.285 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 18:09:09.285 05229 Comment: Signed zone file should be present.

2011-03-28 18:09:09.285 Requirement: ODSKC40

2011-03-28 18:09:09.285 05231 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:09:09.285 Requirement: ODSKC40

2011-03-28 18:09:09.285 05236 LoadConfig()
2011-03-28 18:09:09.285 Requirement: ODSKC40
2011-03-28 18:09:09.285 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:09:09.292 - runCommand: Process started, PID: 22442

2011-03-28 18:09:09.292 05239 LoadConfig()
2011-03-28 18:09:09.292 Requirement: ODSKC40
2011-03-28 18:09:09.292 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:09:09.298 - runCommand: Process started, PID: 22443

2011-03-28 18:09:09.298 05241 Comment: New setup for the configs and key repository

2011-03-28 18:09:09.298 Requirement: ODSKC40

2011-03-28 18:09:09.298 05245 Wait(10)

2011-03-28 18:09:09.298 Requirement: ODSKC40

2011-03-28 18:09:19.298 05247 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 18:09:19.298 Requirement: ODSKC40

2011-03-28 18:09:19.299 05249 Start()
2011-03-28 18:09:19.299 Requirement: ODSKC40
2011-03-28 18:09:19.299 RunCommand(ods-control start)
2011-03-28 18:09:19.301 - runCommand: Background process started, PID: 22444
2011-03-28 18:09:19.308 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:09:19.328 - runCommand: Process started, PID: 22451
2011-03-28 18:09:19.328 OUTPUT:	ods-enforcerd
2011-03-28 18:09:19.328 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:09:19.345 - runCommand: Process started, PID: 22455
2011-03-28 18:09:19.345 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:09:19.345 05251 Wait(30)

2011-03-28 18:09:19.345 Requirement: ODSKC40

2011-03-28 18:09:49.345 05253 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:09:49.345 Requirement: ODSKC40

2011-03-28 18:09:49.346 05255 Stop()
2011-03-28 18:09:49.346 Requirement: ODSKC40
2011-03-28 18:09:49.346 RunCommand(ods-control stop)
2011-03-28 18:09:50.357 - runCommand: Process started, PID: 22460
2011-03-28 18:09:50.357 OUTPUT:	Stopping enforcer...
2011-03-28 18:09:50.357 OUTPUT:	Stopping signer engine..
2011-03-28 18:09:50.357 OUTPUT:	Engine shut down.
2011-03-28 18:09:50.357 RunCommand(ps -e | grep enforcer)
2011-03-28 18:09:50.375 - runCommand: Process started, PID: 22467
2011-03-28 18:09:50.375 ERROR:	return code = 1
2011-03-28 18:09:50.375 RunCommand(ps -e | grep signer)
2011-03-28 18:09:50.387 - runCommand: Process started, PID: 22470
2011-03-28 18:09:50.387 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T460: Use a KSK Algorithm length of 1024 and Algorithm 7 (RSASHA1-NSEC3-SHA1) and confirm ODS signs a zone with this configuration

2011-03-28 18:09:50.387 05261 Comment: KSK Algorithm length is 1024 with algorithm 7. Singing of the ODS zone should be succesfull.

2011-03-28 18:09:50.387 Requirement: ODSKC40

2011-03-28 18:09:50.387 05263 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:09:50.387 Requirement: ODSKC40

2011-03-28 18:09:50.388 05265 Stop()
2011-03-28 18:09:50.388 Requirement: ODSKC40
2011-03-28 18:09:50.388 RunCommand(ods-control stop)
2011-03-28 18:09:50.392 - runCommand: Process started, PID: 22473
2011-03-28 18:09:50.392 OUTPUT:	Stopping enforcer...
2011-03-28 18:09:50.392 OUTPUT:	Cannot find PID file
2011-03-28 18:09:50.392 OUTPUT:	Stopping signer engine..
2011-03-28 18:09:50.392 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:09:50.392 ERROR:	return code = 1
2011-03-28 18:09:50.392 RunCommand(ps -e | grep enforcer)
2011-03-28 18:09:50.404 - runCommand: Process started, PID: 22476
2011-03-28 18:09:50.404 ERROR:	return code = 1
2011-03-28 18:09:50.404 RunCommand(ps -e | grep signer)
2011-03-28 18:09:50.417 - runCommand: Process started, PID: 22479
2011-03-28 18:09:50.417 ERROR:	return code = 1

2011-03-28 18:09:50.417 05267 Wait(10)

2011-03-28 18:09:50.417 Requirement: ODSKC40

2011-03-28 18:10:00.418 05269 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:10:00.418 Requirement: ODSKC40

2011-03-28 18:10:00.418 05275 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:10:00.418 Requirement: ODSKC40

2011-03-28 18:10:00.418 05279 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:10:00.418 Requirement: ODSKC40

2011-03-28 18:10:00.418 05282 LoadConfig()
2011-03-28 18:10:00.418 Requirement: ODSKC40
2011-03-28 18:10:00.418 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:10:00.425 - runCommand: Process started, PID: 22482

2011-03-28 18:10:00.425 05285 LoadConfig()
2011-03-28 18:10:00.425 Requirement: ODSKC40
2011-03-28 18:10:00.425 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T460_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:10:00.431 - runCommand: Process started, PID: 22483

2011-03-28 18:10:00.431 05287 Comment: New setup for the configs and key repository

2011-03-28 18:10:00.431 Requirement: ODSKC40

2011-03-28 18:10:00.431 05291 Wait(10)

2011-03-28 18:10:00.431 Requirement: ODSKC40

2011-03-28 18:10:10.431 05293 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:10:10.431 Requirement: ODSKC40

2011-03-28 18:10:10.432 05295 Start()
2011-03-28 18:10:10.432 Requirement: ODSKC40
2011-03-28 18:10:10.432 RunCommand(ods-control start)
2011-03-28 18:10:10.434 - runCommand: Background process started, PID: 22484
2011-03-28 18:10:11.452 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:10:11.471 - runCommand: Process started, PID: 22499
2011-03-28 18:10:11.471 OUTPUT:	ods-enforcerd
2011-03-28 18:10:11.471 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:10:11.488 - runCommand: Process started, PID: 22504
2011-03-28 18:10:11.488 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:10:11.488 05297 Wait(30)

2011-03-28 18:10:11.488 Requirement: ODSKC40

2011-03-28 18:10:41.488 05299 Comment: Sign the ODS zone manually

2011-03-28 18:10:41.488 Requirement: ODSKC40

2011-03-28 18:10:41.488 05304 Wait(20)

2011-03-28 18:10:41.488 Requirement: ODSKC40

2011-03-28 18:11:01.489 05306 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 18:11:01.489 Requirement: ODSKC40

2011-03-28 18:11:01.489 05310 CheckFilePresent(ods)
2011-03-28 18:11:01.489 Requirement: ODSKC40
2011-03-28 18:11:01.489 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 18:11:01.489 05312 Comment: Signed zone file should be present.

2011-03-28 18:11:01.489 Requirement: ODSKC40

2011-03-28 18:11:01.489 05314 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:11:01.489 Requirement: ODSKC40

2011-03-28 18:11:01.489 05319 LoadConfig()
2011-03-28 18:11:01.489 Requirement: ODSKC40
2011-03-28 18:11:01.489 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:11:01.496 - runCommand: Process started, PID: 22527

2011-03-28 18:11:01.496 05322 LoadConfig()
2011-03-28 18:11:01.496 Requirement: ODSKC40
2011-03-28 18:11:01.496 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:11:01.502 - runCommand: Process started, PID: 22528

2011-03-28 18:11:01.502 05324 Comment: New setup for the configs and key repository

2011-03-28 18:11:01.502 Requirement: ODSKC40

2011-03-28 18:11:01.502 05328 Wait(10)

2011-03-28 18:11:01.502 Requirement: ODSKC40

2011-03-28 18:11:11.502 05330 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 18:11:11.502 Requirement: ODSKC40

2011-03-28 18:11:11.503 05332 Start()
2011-03-28 18:11:11.503 Requirement: ODSKC40
2011-03-28 18:11:11.503 RunCommand(ods-control start)
2011-03-28 18:11:11.505 - runCommand: Background process started, PID: 22529
2011-03-28 18:11:11.511 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:11:11.523 - runCommand: Process started, PID: 22536
2011-03-28 18:11:11.523 OUTPUT:	ods-enforcerd
2011-03-28 18:11:11.524 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:11:11.540 - runCommand: Process started, PID: 22540
2011-03-28 18:11:11.541 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:11:11.541 05334 Wait(30)

2011-03-28 18:11:11.541 Requirement: ODSKC40

2011-03-28 18:11:41.541 05336 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:11:41.541 Requirement: ODSKC40

2011-03-28 18:11:41.541 05338 Stop()
2011-03-28 18:11:41.541 Requirement: ODSKC40
2011-03-28 18:11:41.541 RunCommand(ods-control stop)
2011-03-28 18:11:42.553 - runCommand: Process started, PID: 22546
2011-03-28 18:11:42.553 OUTPUT:	Stopping enforcer...
2011-03-28 18:11:42.553 OUTPUT:	Stopping signer engine..
2011-03-28 18:11:42.553 OUTPUT:	Engine shut down.
2011-03-28 18:11:42.553 RunCommand(ps -e | grep enforcer)
2011-03-28 18:11:42.571 - runCommand: Process started, PID: 22552
2011-03-28 18:11:42.571 ERROR:	return code = 1
2011-03-28 18:11:42.571 RunCommand(ps -e | grep signer)
2011-03-28 18:11:42.586 - runCommand: Process started, PID: 22555
2011-03-28 18:11:42.586 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T470: Use a KSK Algorithm length of 1024 and Algorithm 8 (RSA/SHA-256) and confirm ODS signs a zone with this configuration

2011-03-28 18:11:42.586 05343 Comment: KSK Algorithm length is 1024 with algorithm 8. Singing of the ODS zone should be succesfull.

2011-03-28 18:11:42.586 Requirement: ODSKC40

2011-03-28 18:11:42.586 05345 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:11:42.586 Requirement: ODSKC40

2011-03-28 18:11:42.586 05347 Stop()
2011-03-28 18:11:42.586 Requirement: ODSKC40
2011-03-28 18:11:42.586 RunCommand(ods-control stop)
2011-03-28 18:11:42.591 - runCommand: Process started, PID: 22558
2011-03-28 18:11:42.591 OUTPUT:	Stopping enforcer...
2011-03-28 18:11:42.591 OUTPUT:	Cannot find PID file
2011-03-28 18:11:42.591 OUTPUT:	Stopping signer engine..
2011-03-28 18:11:42.591 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:11:42.591 ERROR:	return code = 1
2011-03-28 18:11:42.591 RunCommand(ps -e | grep enforcer)
2011-03-28 18:11:42.602 - runCommand: Process started, PID: 22561
2011-03-28 18:11:42.602 ERROR:	return code = 1
2011-03-28 18:11:42.602 RunCommand(ps -e | grep signer)
2011-03-28 18:11:42.617 - runCommand: Process started, PID: 22564
2011-03-28 18:11:42.617 ERROR:	return code = 1

2011-03-28 18:11:42.617 05349 Wait(10)

2011-03-28 18:11:42.617 Requirement: ODSKC40

2011-03-28 18:11:52.617 05351 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:11:52.617 Requirement: ODSKC40

2011-03-28 18:11:52.617 05357 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:11:52.617 Requirement: ODSKC40

2011-03-28 18:11:52.617 05361 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:11:52.618 Requirement: ODSKC40

2011-03-28 18:11:52.618 05364 LoadConfig()
2011-03-28 18:11:52.618 Requirement: ODSKC40
2011-03-28 18:11:52.618 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:11:52.624 - runCommand: Process started, PID: 22567

2011-03-28 18:11:52.624 05367 LoadConfig()
2011-03-28 18:11:52.624 Requirement: ODSKC40
2011-03-28 18:11:52.624 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T470_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:11:52.630 - runCommand: Process started, PID: 22568

2011-03-28 18:11:52.630 05369 Comment: New setup for the configs and key repository

2011-03-28 18:11:52.630 Requirement: ODSKC40

2011-03-28 18:11:52.630 05373 Wait(10)

2011-03-28 18:11:52.630 Requirement: ODSKC40

2011-03-28 18:12:02.631 05375 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:12:02.631 Requirement: ODSKC40

2011-03-28 18:12:02.631 05377 Start()
2011-03-28 18:12:02.631 Requirement: ODSKC40
2011-03-28 18:12:02.631 RunCommand(ods-control start)
2011-03-28 18:12:02.633 - runCommand: Background process started, PID: 22569
2011-03-28 18:12:03.651 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:12:03.674 - runCommand: Process started, PID: 22584
2011-03-28 18:12:03.674 OUTPUT:	ods-enforcerd
2011-03-28 18:12:03.674 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:12:03.689 - runCommand: Process started, PID: 22597
2011-03-28 18:12:03.689 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:12:03.689 05379 Wait(30)

2011-03-28 18:12:03.689 Requirement: ODSKC40

2011-03-28 18:12:33.690 05381 Comment: Sign the ODS zone manually

2011-03-28 18:12:33.690 Requirement: ODSKC40

2011-03-28 18:12:33.690 05386 Wait(20)

2011-03-28 18:12:33.690 Requirement: ODSKC40

2011-03-28 18:12:53.690 05388 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 18:12:53.690 Requirement: ODSKC40

2011-03-28 18:12:53.690 05392 CheckFilePresent(ods)
2011-03-28 18:12:53.690 Requirement: ODSKC40
2011-03-28 18:12:53.691 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 18:12:53.691 05394 Comment: Signed zone file should be present.

2011-03-28 18:12:53.691 Requirement: ODSKC40

2011-03-28 18:12:53.691 05396 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:12:53.691 Requirement: ODSKC40

2011-03-28 18:12:53.691 05401 LoadConfig()
2011-03-28 18:12:53.691 Requirement: ODSKC40
2011-03-28 18:12:53.691 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:12:53.697 - runCommand: Process started, PID: 22602

2011-03-28 18:12:53.698 05404 LoadConfig()
2011-03-28 18:12:53.698 Requirement: ODSKC40
2011-03-28 18:12:53.698 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:12:53.703 - runCommand: Process started, PID: 22603

2011-03-28 18:12:53.704 05406 Comment: New setup for the configs and key repository

2011-03-28 18:12:53.704 Requirement: ODSKC40

2011-03-28 18:12:53.704 05410 Wait(10)

2011-03-28 18:12:53.704 Requirement: ODSKC40

2011-03-28 18:13:03.704 05412 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 18:13:03.704 Requirement: ODSKC40

2011-03-28 18:13:03.704 05414 Start()
2011-03-28 18:13:03.704 Requirement: ODSKC40
2011-03-28 18:13:03.704 RunCommand(ods-control start)
2011-03-28 18:13:03.707 - runCommand: Background process started, PID: 22604
2011-03-28 18:13:03.712 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:13:03.724 - runCommand: Process started, PID: 22611
2011-03-28 18:13:03.724 OUTPUT:	ods-enforcerd
2011-03-28 18:13:03.724 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:13:03.738 - runCommand: Process started, PID: 22615
2011-03-28 18:13:03.738 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:13:03.739 05416 Wait(30)

2011-03-28 18:13:03.739 Requirement: ODSKC40

2011-03-28 18:13:33.739 05418 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:13:33.739 Requirement: ODSKC40

2011-03-28 18:13:33.739 05420 Stop()
2011-03-28 18:13:33.739 Requirement: ODSKC40
2011-03-28 18:13:33.739 RunCommand(ods-control stop)
2011-03-28 18:13:34.749 - runCommand: Process started, PID: 22620
2011-03-28 18:13:34.749 OUTPUT:	Stopping enforcer...
2011-03-28 18:13:34.749 OUTPUT:	Stopping signer engine..
2011-03-28 18:13:34.749 OUTPUT:	Engine shut down.
2011-03-28 18:13:34.749 RunCommand(ps -e | grep enforcer)
2011-03-28 18:13:34.767 - runCommand: Process started, PID: 22627
2011-03-28 18:13:34.767 ERROR:	return code = 1
2011-03-28 18:13:34.767 RunCommand(ps -e | grep signer)
2011-03-28 18:13:34.789 - runCommand: Process started, PID: 22630
2011-03-28 18:13:34.789 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T480: Use a KSK Algorithm length of 1024 and Algorithm 10 (RSA/SHA-512) and confirm ODS signs a zone with this configuration

2011-03-28 18:13:34.789 05426 Comment: KSK Algorithm length is 1024 with algorithm 10. Singing of the ODS zone should be succesfull.

2011-03-28 18:13:34.789 Requirement: ODSKC40

2011-03-28 18:13:34.789 05428 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:13:34.789 Requirement: ODSKC40

2011-03-28 18:13:34.789 05430 Stop()
2011-03-28 18:13:34.790 Requirement: ODSKC40
2011-03-28 18:13:34.790 RunCommand(ods-control stop)
2011-03-28 18:13:34.797 - runCommand: Process started, PID: 22633
2011-03-28 18:13:34.797 OUTPUT:	Stopping enforcer...
2011-03-28 18:13:34.797 OUTPUT:	Cannot find PID file
2011-03-28 18:13:34.797 OUTPUT:	Stopping signer engine..
2011-03-28 18:13:34.797 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:13:34.797 ERROR:	return code = 1
2011-03-28 18:13:34.797 RunCommand(ps -e | grep enforcer)
2011-03-28 18:13:34.814 - runCommand: Process started, PID: 22636
2011-03-28 18:13:34.814 ERROR:	return code = 1
2011-03-28 18:13:34.814 RunCommand(ps -e | grep signer)
2011-03-28 18:13:34.825 - runCommand: Process started, PID: 22639
2011-03-28 18:13:34.825 ERROR:	return code = 1

2011-03-28 18:13:34.825 05432 Wait(10)

2011-03-28 18:13:34.825 Requirement: ODSKC40

2011-03-28 18:13:44.825 05434 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:13:44.825 Requirement: ODSKC40

2011-03-28 18:13:44.826 05440 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:13:44.826 Requirement: ODSKC40

2011-03-28 18:13:44.826 05444 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:13:44.826 Requirement: ODSKC40

2011-03-28 18:13:44.826 05447 LoadConfig()
2011-03-28 18:13:44.826 Requirement: ODSKC40
2011-03-28 18:13:44.826 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:13:44.832 - runCommand: Process started, PID: 22642

2011-03-28 18:13:44.833 05450 LoadConfig()
2011-03-28 18:13:44.833 Requirement: ODSKC40
2011-03-28 18:13:44.833 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T480_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:13:44.838 - runCommand: Process started, PID: 22643

2011-03-28 18:13:44.839 05452 Comment: New setup for the configs and key repository

2011-03-28 18:13:44.839 Requirement: ODSKC40

2011-03-28 18:13:44.839 05456 Wait(10)

2011-03-28 18:13:44.839 Requirement: ODSKC40

2011-03-28 18:13:54.839 05458 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:13:54.839 Requirement: ODSKC40

2011-03-28 18:13:54.839 05460 Start()
2011-03-28 18:13:54.839 Requirement: ODSKC40
2011-03-28 18:13:54.839 RunCommand(ods-control start)
2011-03-28 18:13:54.842 - runCommand: Background process started, PID: 22644
2011-03-28 18:13:55.859 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:13:55.882 - runCommand: Process started, PID: 22659
2011-03-28 18:13:55.882 OUTPUT:	ods-enforcerd
2011-03-28 18:13:55.882 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:13:55.902 - runCommand: Process started, PID: 22672
2011-03-28 18:13:55.902 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:13:55.902 05462 Wait(30)

2011-03-28 18:13:55.902 Requirement: ODSKC40

2011-03-28 18:14:25.902 05464 Comment: Sign the ODS zone manually

2011-03-28 18:14:25.903 Requirement: ODSKC40

2011-03-28 18:14:25.903 05469 Wait(20)

2011-03-28 18:14:25.903 Requirement: ODSKC40

2011-03-28 18:14:45.903 05471 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 18:14:45.903 Requirement: ODSKC40

2011-03-28 18:14:45.903 05475 CheckFilePresent(ods)
2011-03-28 18:14:45.903 Requirement: ODSKC40
2011-03-28 18:14:45.903 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 18:14:45.903 05477 Comment: Signed zone file should be present.

2011-03-28 18:14:45.903 Requirement: ODSKC40

2011-03-28 18:14:45.904 05479 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:14:45.904 Requirement: ODSKC40

2011-03-28 18:14:45.904 05484 LoadConfig()
2011-03-28 18:14:45.904 Requirement: ODSKC40
2011-03-28 18:14:45.904 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:14:45.910 - runCommand: Process started, PID: 22689

2011-03-28 18:14:45.910 05487 LoadConfig()
2011-03-28 18:14:45.910 Requirement: ODSKC40
2011-03-28 18:14:45.910 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:14:45.916 - runCommand: Process started, PID: 22690

2011-03-28 18:14:45.916 05489 Comment: New setup for the configs and key repository

2011-03-28 18:14:45.916 Requirement: ODSKC40

2011-03-28 18:14:45.916 05493 Wait(10)

2011-03-28 18:14:45.916 Requirement: ODSKC40

2011-03-28 18:14:55.917 05495 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 18:14:55.917 Requirement: ODSKC40

2011-03-28 18:14:55.917 05497 Start()
2011-03-28 18:14:55.917 Requirement: ODSKC40
2011-03-28 18:14:55.917 RunCommand(ods-control start)
2011-03-28 18:14:55.919 - runCommand: Background process started, PID: 22691
2011-03-28 18:14:55.927 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:14:55.946 - runCommand: Process started, PID: 22698
2011-03-28 18:14:55.946 OUTPUT:	ods-enforcerd
2011-03-28 18:14:55.946 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:14:55.960 - runCommand: Process started, PID: 22702
2011-03-28 18:14:55.960 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:14:55.960 05499 Wait(30)

2011-03-28 18:14:55.960 Requirement: ODSKC40

2011-03-28 18:15:25.961 05501 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:15:25.961 Requirement: ODSKC40

2011-03-28 18:15:25.961 05503 Stop()
2011-03-28 18:15:25.961 Requirement: ODSKC40
2011-03-28 18:15:25.961 RunCommand(ods-control stop)
2011-03-28 18:15:26.972 - runCommand: Process started, PID: 22707
2011-03-28 18:15:26.972 OUTPUT:	Stopping enforcer...
2011-03-28 18:15:26.972 OUTPUT:	Stopping signer engine..
2011-03-28 18:15:26.972 OUTPUT:	Engine shut down.
2011-03-28 18:15:26.972 RunCommand(ps -e | grep enforcer)
2011-03-28 18:15:26.990 - runCommand: Process started, PID: 22714
2011-03-28 18:15:26.990 ERROR:	return code = 1
2011-03-28 18:15:26.990 RunCommand(ps -e | grep signer)
2011-03-28 18:15:27.131 - runCommand: Process started, PID: 22717
2011-03-28 18:15:27.139 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T490: Use a KSK Algorithm length of 1024 and Algorithm 12 (GOST R 34.10-2001) and confirm ODS signs a zone with this configuration

2011-03-28 18:15:27.171 05508 Comment: KSK Algorithm length is 1024 with algorithm 12. Singing of the ODS zone should be succesfull.

2011-03-28 18:15:27.173 Requirement: ODSKC40

2011-03-28 18:15:27.182 05510 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:15:27.183 Requirement: ODSKC40

2011-03-28 18:15:27.192 05512 Stop()
2011-03-28 18:15:27.193 Requirement: ODSKC40
2011-03-28 18:15:27.195 RunCommand(ods-control stop)
2011-03-28 18:15:27.707 - runCommand: Process started, PID: 22720
2011-03-28 18:15:27.713 OUTPUT:	Stopping enforcer...
2011-03-28 18:15:27.714 OUTPUT:	Cannot find PID file
2011-03-28 18:15:27.715 OUTPUT:	Stopping signer engine..
2011-03-28 18:15:27.716 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:15:27.718 ERROR:	return code = 1
2011-03-28 18:15:27.720 RunCommand(ps -e | grep enforcer)
2011-03-28 18:15:27.194 - runCommand: Process started, PID: 22723
2011-03-28 18:15:27.194 ERROR:	return code = 1
2011-03-28 18:15:27.195 RunCommand(ps -e | grep signer)
2011-03-28 18:15:27.330 - runCommand: Process started, PID: 22726
2011-03-28 18:15:27.331 ERROR:	return code = 1

2011-03-28 18:15:27.333 05514 Wait(10)

2011-03-28 18:15:27.333 Requirement: ODSKC40

2011-03-28 18:15:37.335 05516 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:15:37.336 Requirement: ODSKC40

2011-03-28 18:15:37.337 05522 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:15:37.338 Requirement: ODSKC40

2011-03-28 18:15:37.339 05526 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:15:37.339 Requirement: ODSKC40

2011-03-28 18:15:37.341 05529 LoadConfig()
2011-03-28 18:15:37.341 Requirement: ODSKC40
2011-03-28 18:15:37.341 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:15:37.404 - runCommand: Process started, PID: 22729

2011-03-28 18:15:37.407 05532 LoadConfig()
2011-03-28 18:15:37.407 Requirement: ODSKC40
2011-03-28 18:15:37.407 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T490_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:15:37.463 - runCommand: Process started, PID: 22730

2011-03-28 18:15:37.465 05534 Comment: New setup for the configs and key repository

2011-03-28 18:15:37.465 Requirement: ODSKC40

2011-03-28 18:15:37.467 05538 Wait(10)

2011-03-28 18:15:37.467 Requirement: ODSKC40

2011-03-28 18:15:47.470 05540 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:15:47.470 Requirement: ODSKC40

2011-03-28 18:15:47.472 05542 Start()
2011-03-28 18:15:47.472 Requirement: ODSKC40
2011-03-28 18:15:47.472 RunCommand(ods-control start)
2011-03-28 18:15:47.499 - runCommand: Background process started, PID: 22731
2011-03-28 18:15:48.738 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:15:48.909 - runCommand: Process started, PID: 22746
2011-03-28 18:15:48.910 OUTPUT:	ods-enforcerd
2011-03-28 18:15:48.910 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:15:48.105 - runCommand: Process started, PID: 22759
2011-03-28 18:15:48.105 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:15:48.105 05544 Wait(30)

2011-03-28 18:15:48.105 Requirement: ODSKC40

2011-03-28 18:16:18.106 05546 Comment: Sign the ODS zone manually

2011-03-28 18:16:18.106 Requirement: ODSKC40

2011-03-28 18:16:18.106 05551 Wait(20)

2011-03-28 18:16:18.106 Requirement: ODSKC40

2011-03-28 18:16:38.106 05553 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 18:16:38.106 Requirement: ODSKC40

2011-03-28 18:16:38.106 05557 CheckFilePresent(ods)
2011-03-28 18:16:38.106 Requirement: ODSKC40
2011-03-28 18:16:38.106 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 18:16:38.106 05559 Comment: Signed zone file should be present.

2011-03-28 18:16:38.106 Requirement: ODSKC40

2011-03-28 18:16:38.107 05561 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:16:38.107 Requirement: ODSKC40

2011-03-28 18:16:38.107 05566 LoadConfig()
2011-03-28 18:16:38.107 Requirement: ODSKC40
2011-03-28 18:16:38.107 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:16:38.113 - runCommand: Process started, PID: 22764

2011-03-28 18:16:38.113 05569 LoadConfig()
2011-03-28 18:16:38.113 Requirement: ODSKC40
2011-03-28 18:16:38.113 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:16:38.117 - runCommand: Process started, PID: 22765

2011-03-28 18:16:38.117 05571 Comment: New setup for the configs and key repository

2011-03-28 18:16:38.117 Requirement: ODSKC40

2011-03-28 18:16:38.117 05575 Wait(10)

2011-03-28 18:16:38.117 Requirement: ODSKC40

2011-03-28 18:16:48.117 05577 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 18:16:48.117 Requirement: ODSKC40

2011-03-28 18:16:48.117 05579 Start()
2011-03-28 18:16:48.117 Requirement: ODSKC40
2011-03-28 18:16:48.118 RunCommand(ods-control start)
2011-03-28 18:16:48.120 - runCommand: Background process started, PID: 22766
2011-03-28 18:16:48.127 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:16:48.147 - runCommand: Process started, PID: 22773
2011-03-28 18:16:48.147 OUTPUT:	ods-enforcerd
2011-03-28 18:16:48.147 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:16:48.163 - runCommand: Process started, PID: 22777
2011-03-28 18:16:48.163 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:16:48.163 05581 Wait(30)

2011-03-28 18:16:48.163 Requirement: ODSKC40

2011-03-28 18:17:18.164 05583 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:17:18.164 Requirement: ODSKC40

2011-03-28 18:17:18.164 05585 Stop()
2011-03-28 18:17:18.164 Requirement: ODSKC40
2011-03-28 18:17:18.164 RunCommand(ods-control stop)
2011-03-28 18:17:19.176 - runCommand: Process started, PID: 22786
2011-03-28 18:17:19.176 OUTPUT:	Stopping enforcer...
2011-03-28 18:17:19.176 OUTPUT:	Stopping signer engine..
2011-03-28 18:17:19.176 OUTPUT:	Engine shut down.
2011-03-28 18:17:19.176 RunCommand(ps -e | grep enforcer)
2011-03-28 18:17:19.197 - runCommand: Process started, PID: 22792
2011-03-28 18:17:19.197 ERROR:	return code = 1
2011-03-28 18:17:19.197 RunCommand(ps -e | grep signer)
2011-03-28 18:17:19.217 - runCommand: Process started, PID: 22795
2011-03-28 18:17:19.217 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T500: Use a value with an incorrect format for KSK Lifetime (@) and confirm ods-kaspcheck fails

2011-03-28 18:17:19.217 05592 Comment: KSK Lifetime value in the keys part (general part) is incorrect: A instead of a valid value like PT12H. Ods-kaspcheck validation should fail for kasp.xml.

2011-03-28 18:17:19.217 Requirement: ODSKC40

2011-03-28 18:17:19.217 05594 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:17:19.217 Requirement: ODSKC40

2011-03-28 18:17:19.218 05596 Stop()
2011-03-28 18:17:19.218 Requirement: ODSKC40
2011-03-28 18:17:19.218 RunCommand(ods-control stop)
2011-03-28 18:17:19.225 - runCommand: Process started, PID: 22798
2011-03-28 18:17:19.225 OUTPUT:	Stopping enforcer...
2011-03-28 18:17:19.225 OUTPUT:	Cannot find PID file
2011-03-28 18:17:19.225 OUTPUT:	Stopping signer engine..
2011-03-28 18:17:19.225 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:17:19.225 ERROR:	return code = 1
2011-03-28 18:17:19.225 RunCommand(ps -e | grep enforcer)
2011-03-28 18:17:19.242 - runCommand: Process started, PID: 22801
2011-03-28 18:17:19.242 ERROR:	return code = 1
2011-03-28 18:17:19.242 RunCommand(ps -e | grep signer)
2011-03-28 18:17:19.260 - runCommand: Process started, PID: 22804
2011-03-28 18:17:19.260 ERROR:	return code = 1

2011-03-28 18:17:19.260 05598 Wait(10)

2011-03-28 18:17:19.260 Requirement: ODSKC40

2011-03-28 18:17:29.260 05600 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:17:29.260 Requirement: ODSKC40

2011-03-28 18:17:29.260 05603 LoadConfig()
2011-03-28 18:17:29.261 Requirement: ODSKC40
2011-03-28 18:17:29.261 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:17:29.267 - runCommand: Process started, PID: 22807

2011-03-28 18:17:29.267 05606 LoadConfig()
2011-03-28 18:17:29.267 Requirement: ODSKC40
2011-03-28 18:17:29.267 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T500_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:17:29.273 - runCommand: Process started, PID: 22808

2011-03-28 18:17:29.273 05608 Comment: Update all the configs.

2011-03-28 18:17:29.273 Requirement: ODSKC40

2011-03-28 18:17:29.273 05610 UpdateAll()
2011-03-28 18:17:29.273 Requirement: ODSKC40
2011-03-28 18:17:29.273 RunCommand(ods-ksmutil update all)
2011-03-28 18:17:30.726 - runCommand: Process started, PID: 22809
2011-03-28 18:17:30.726 OUTPUT:	ERROR: In policy default, incompatible algorithm (12) used for KSK NSEC3 in /etc/opendnssec/kasp.xml - should be 6,7,8 or 10
2011-03-28 18:17:30.726 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:17:30.726 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:17:30.726 OUTPUT:	Repository SoftHSM found
2011-03-28 18:17:30.726 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:17:30.726 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:17:30.726 OUTPUT:	Policy default found
2011-03-28 18:17:30.726 OUTPUT:	Policy default2 found
2011-03-28 18:17:30.726 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:17:30.726 OUTPUT:	Zone ods found
2011-03-28 18:17:30.726 OUTPUT:	Policy set to default.
2011-03-28 18:17:30.726 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:17:30.726 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:17:30.726 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 18:17:30.726 05612 Wait(10)

2011-03-28 18:17:30.726 Requirement: ODSKC40

2011-03-28 18:17:40.727 05614 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:17:40.727 Requirement: ODSKC40

2011-03-28 18:17:40.727 05619 CheckLog()
2011-03-28 18:17:40.727 Requirement: ODSKC40
2011-03-28 18:17:40.999 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 18:17:40.999 05622 CheckLog()
2011-03-28 18:17:41.004 Requirement: ODSKC40
2011-03-28 18:17:41.268 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml fails to validate Found: 

2011-03-28 18:17:41.268 05625 CheckLog()
2011-03-28 18:17:41.268 Requirement: ODSKC40
2011-03-28 18:17:41.534 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml:123: element Lifetime: Relax-NG validity error : Type duration doesn't allow value '@' Found: 

2011-03-28 18:17:41.534 05627 Comment: Reset the config files to the original ones.

2011-03-28 18:17:41.534 Requirement: ODSKC40

2011-03-28 18:17:41.534 05629 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:17:41.534 Requirement: ODSKC40

2011-03-28 18:17:41.534 05631 Stop()
2011-03-28 18:17:41.534 Requirement: ODSKC40
2011-03-28 18:17:41.535 RunCommand(ods-control stop)
2011-03-28 18:17:41.539 - runCommand: Process started, PID: 22817
2011-03-28 18:17:41.539 OUTPUT:	Stopping enforcer...
2011-03-28 18:17:41.539 OUTPUT:	Cannot find PID file
2011-03-28 18:17:41.539 OUTPUT:	Stopping signer engine..
2011-03-28 18:17:41.539 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:17:41.540 ERROR:	return code = 1
2011-03-28 18:17:41.540 RunCommand(ps -e | grep enforcer)
2011-03-28 18:17:41.552 - runCommand: Process started, PID: 22820
2011-03-28 18:17:41.552 ERROR:	return code = 1
2011-03-28 18:17:41.552 RunCommand(ps -e | grep signer)
2011-03-28 18:17:41.564 - runCommand: Process started, PID: 22823
2011-03-28 18:17:41.564 ERROR:	return code = 1

2011-03-28 18:17:41.564 05633 Wait(10)

2011-03-28 18:17:41.564 Requirement: ODSKC40

2011-03-28 18:17:51.564 05636 LoadConfig()
2011-03-28 18:17:51.564 Requirement: ODSKC40
2011-03-28 18:17:51.564 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:17:51.571 - runCommand: Process started, PID: 22826

2011-03-28 18:17:51.571 05639 LoadConfig()
2011-03-28 18:17:51.571 Requirement: ODSKC40
2011-03-28 18:17:51.571 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:17:51.576 - runCommand: Process started, PID: 22827

2011-03-28 18:17:51.577 05641 Comment: Update all the configs.

2011-03-28 18:17:51.577 Requirement: ODSKC40

2011-03-28 18:17:51.577 05643 UpdateAll()
2011-03-28 18:17:51.577 Requirement: ODSKC40
2011-03-28 18:17:51.577 RunCommand(ods-ksmutil update all)
2011-03-28 18:17:53.399 - runCommand: Process started, PID: 22828
2011-03-28 18:17:53.400 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:17:53.400 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:17:53.400 OUTPUT:	Repository SoftHSM found
2011-03-28 18:17:53.401 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:17:53.401 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:17:53.401 OUTPUT:	Policy default found
2011-03-28 18:17:53.401 OUTPUT:	Policy default2 found
2011-03-28 18:17:53.401 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:17:53.401 OUTPUT:	Zone ods found
2011-03-28 18:17:53.401 OUTPUT:	Policy set to default.
2011-03-28 18:17:53.402 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:17:53.402 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:17:53.402 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T510: Use a very high value for KSK lifetime (P100Y) and confirm ods-kaspcheck runs successfully

2011-03-28 18:17:53.407 05648 Comment: KSK Lifetime value is very high (100 years: P100Y). Ods-kaspcheck should validate both kasp.xml as conf.xml.

2011-03-28 18:17:53.407 Requirement: ODSKC40

2011-03-28 18:17:53.409 05650 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:17:53.409 Requirement: ODSKC40

2011-03-28 18:17:53.411 05652 Stop()
2011-03-28 18:17:53.411 Requirement: ODSKC40
2011-03-28 18:17:53.411 RunCommand(ods-control stop)
2011-03-28 18:17:53.485 - runCommand: Process started, PID: 22836
2011-03-28 18:17:53.486 OUTPUT:	Stopping enforcer...
2011-03-28 18:17:53.486 OUTPUT:	Cannot find PID file
2011-03-28 18:17:53.486 OUTPUT:	Stopping signer engine..
2011-03-28 18:17:53.486 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:17:53.487 ERROR:	return code = 1
2011-03-28 18:17:53.487 RunCommand(ps -e | grep enforcer)
2011-03-28 18:17:53.661 - runCommand: Process started, PID: 22839
2011-03-28 18:17:53.662 ERROR:	return code = 1
2011-03-28 18:17:53.662 RunCommand(ps -e | grep signer)
2011-03-28 18:17:53.835 - runCommand: Process started, PID: 22842
2011-03-28 18:17:53.836 ERROR:	return code = 1

2011-03-28 18:17:53.837 05654 Wait(10)

2011-03-28 18:17:53.837 Requirement: ODSKC40

2011-03-28 18:18:03.840 05656 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:18:03.840 Requirement: ODSKC40

2011-03-28 18:18:03.842 05659 LoadConfig()
2011-03-28 18:18:03.842 Requirement: ODSKC40
2011-03-28 18:18:03.842 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:18:03.905 - runCommand: Process started, PID: 22845

2011-03-28 18:18:03.908 05662 LoadConfig()
2011-03-28 18:18:03.908 Requirement: ODSKC40
2011-03-28 18:18:03.909 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T510_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:18:03.964 - runCommand: Process started, PID: 22846

2011-03-28 18:18:03.967 05664 Comment: Update all the configs.

2011-03-28 18:18:03.967 Requirement: ODSKC40

2011-03-28 18:18:03.969 05666 UpdateAll()
2011-03-28 18:18:03.969 Requirement: ODSKC40
2011-03-28 18:18:03.969 RunCommand(ods-ksmutil update all)
2011-03-28 18:18:04.650 - runCommand: Process started, PID: 22847
2011-03-28 18:18:04.650 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:18:04.650 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:18:04.650 OUTPUT:	Repository SoftHSM found
2011-03-28 18:18:04.650 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:18:04.650 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:18:04.650 OUTPUT:	Policy default found
2011-03-28 18:18:04.650 OUTPUT:	Info: converting P100Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:18:04.650 OUTPUT:	Policy default2 found
2011-03-28 18:18:04.650 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:18:04.650 OUTPUT:	Zone ods found
2011-03-28 18:18:04.650 OUTPUT:	Policy set to default.
2011-03-28 18:18:04.650 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:18:04.651 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:18:04.651 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 18:18:04.651 05668 Wait(10)

2011-03-28 18:18:04.651 Requirement: ODSKC40

2011-03-28 18:18:14.651 05670 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:18:14.651 Requirement: ODSKC40

2011-03-28 18:18:14.651 05675 CheckLog()
2011-03-28 18:18:14.651 Requirement: ODSKC40
2011-03-28 18:18:14.923 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 18:18:14.924 05678 CheckLog()
2011-03-28 18:18:14.924 Requirement: ODSKC40
2011-03-28 18:18:15.191 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml validates Found: 

2011-03-28 18:18:15.191 05681 Comment: Reset the config files to the original ones.

2011-03-28 18:18:15.191 Requirement: ODSKC40

2011-03-28 18:18:15.191 05683 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:18:15.191 Requirement: ODSKC40

2011-03-28 18:18:15.192 05685 Stop()
2011-03-28 18:18:15.192 Requirement: ODSKC40
2011-03-28 18:18:15.192 RunCommand(ods-control stop)
2011-03-28 18:18:15.196 - runCommand: Process started, PID: 22855
2011-03-28 18:18:15.197 OUTPUT:	Stopping enforcer...
2011-03-28 18:18:15.197 OUTPUT:	Cannot find PID file
2011-03-28 18:18:15.197 OUTPUT:	Stopping signer engine..
2011-03-28 18:18:15.197 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:18:15.197 ERROR:	return code = 1
2011-03-28 18:18:15.197 RunCommand(ps -e | grep enforcer)
2011-03-28 18:18:15.208 - runCommand: Process started, PID: 22858
2011-03-28 18:18:15.208 ERROR:	return code = 1
2011-03-28 18:18:15.208 RunCommand(ps -e | grep signer)
2011-03-28 18:18:15.219 - runCommand: Process started, PID: 22861
2011-03-28 18:18:15.219 ERROR:	return code = 1

2011-03-28 18:18:15.220 05687 Wait(10)

2011-03-28 18:18:15.220 Requirement: ODSKC40

2011-03-28 18:18:25.220 05690 LoadConfig()
2011-03-28 18:18:25.220 Requirement: ODSKC40
2011-03-28 18:18:25.220 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:18:25.226 - runCommand: Process started, PID: 22864

2011-03-28 18:18:25.226 05693 LoadConfig()
2011-03-28 18:18:25.227 Requirement: ODSKC40
2011-03-28 18:18:25.227 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:18:25.232 - runCommand: Process started, PID: 22865

2011-03-28 18:18:25.233 05695 Comment: Update all the configs.

2011-03-28 18:18:25.233 Requirement: ODSKC40

2011-03-28 18:18:25.233 05697 UpdateAll()
2011-03-28 18:18:25.233 Requirement: ODSKC40
2011-03-28 18:18:25.233 RunCommand(ods-ksmutil update all)
2011-03-28 18:18:26.781 - runCommand: Process started, PID: 22866
2011-03-28 18:18:26.781 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:18:26.781 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:18:26.781 OUTPUT:	Repository SoftHSM found
2011-03-28 18:18:26.781 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:18:26.781 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:18:26.781 OUTPUT:	Policy default found
2011-03-28 18:18:26.781 OUTPUT:	Policy default2 found
2011-03-28 18:18:26.781 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:18:26.781 OUTPUT:	Zone ods found
2011-03-28 18:18:26.781 OUTPUT:	Policy set to default.
2011-03-28 18:18:26.781 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:18:26.781 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:18:26.781 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T520: Use a very low value for KSK lifetime (PT1S) and confirm ods-kaspcheck fails

2011-03-28 18:18:26.781 05702 Comment: Change the KSK Lifetime value for the keys to a very low value. Logically spoken: the Ods-kaspcheck should validate for conf.xml and not for kasp.xml. (note: this is not well documented). According to the developpers the kasp.xml should be validated correctly.

2011-03-28 18:18:26.781 Requirement: ODSKC40

2011-03-28 18:18:26.782 05704 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:18:26.782 Requirement: ODSKC40

2011-03-28 18:18:26.782 05706 Stop()
2011-03-28 18:18:26.782 Requirement: ODSKC40
2011-03-28 18:18:26.782 RunCommand(ods-control stop)
2011-03-28 18:18:26.789 - runCommand: Process started, PID: 22874
2011-03-28 18:18:26.789 OUTPUT:	Stopping enforcer...
2011-03-28 18:18:26.789 OUTPUT:	Cannot find PID file
2011-03-28 18:18:26.789 OUTPUT:	Stopping signer engine..
2011-03-28 18:18:26.789 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:18:26.789 ERROR:	return code = 1
2011-03-28 18:18:26.789 RunCommand(ps -e | grep enforcer)
2011-03-28 18:18:26.807 - runCommand: Process started, PID: 22877
2011-03-28 18:18:26.807 ERROR:	return code = 1
2011-03-28 18:18:26.807 RunCommand(ps -e | grep signer)
2011-03-28 18:18:26.826 - runCommand: Process started, PID: 22880
2011-03-28 18:18:26.826 ERROR:	return code = 1

2011-03-28 18:18:26.826 05708 Wait(10)

2011-03-28 18:18:26.826 Requirement: ODSKC40

2011-03-28 18:18:36.826 05710 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:18:36.826 Requirement: ODSKC40

2011-03-28 18:18:36.826 05713 LoadConfig()
2011-03-28 18:18:36.826 Requirement: ODSKC40
2011-03-28 18:18:36.826 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:18:36.833 - runCommand: Process started, PID: 22883

2011-03-28 18:18:36.833 05716 LoadConfig()
2011-03-28 18:18:36.833 Requirement: ODSKC40
2011-03-28 18:18:36.833 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T520_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:18:36.838 - runCommand: Process started, PID: 22884

2011-03-28 18:18:36.839 05718 Comment: Update all the configs.

2011-03-28 18:18:36.839 Requirement: ODSKC40

2011-03-28 18:18:36.839 05720 UpdateAll()
2011-03-28 18:18:36.839 Requirement: ODSKC40
2011-03-28 18:18:36.839 RunCommand(ods-ksmutil update all)
2011-03-28 18:18:38.416 - runCommand: Process started, PID: 22885
2011-03-28 18:18:38.416 OUTPUT:	WARNING: KSK minimum lifetime (1 seconds) is less than ZSK minimum lifetime (43200 seconds) for default Policy in /etc/opendnssec/kasp.xml
2011-03-28 18:18:38.416 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:18:38.416 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:18:38.416 OUTPUT:	Repository SoftHSM found
2011-03-28 18:18:38.416 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:18:38.416 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:18:38.416 OUTPUT:	Policy default found
2011-03-28 18:18:38.416 OUTPUT:	Policy default2 found
2011-03-28 18:18:38.417 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:18:38.417 OUTPUT:	Zone ods found
2011-03-28 18:18:38.417 OUTPUT:	Policy set to default.
2011-03-28 18:18:38.417 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:18:38.417 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:18:38.417 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 18:18:38.417 05722 Wait(10)

2011-03-28 18:18:38.417 Requirement: ODSKC40

2011-03-28 18:18:48.417 05724 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:18:48.417 Requirement: ODSKC40

2011-03-28 18:18:48.417 05729 CheckLog()
2011-03-28 18:18:48.417 Requirement: ODSKC40
2011-03-28 18:18:48.690 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 18:18:48.690 05732 CheckLog()
2011-03-28 18:18:48.690 Requirement: ODSKC40
2011-03-28 18:18:48.957 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml fails to validate Found: 

2011-03-28 18:18:48.957 05734 Comment: Reset the config files to the original ones.

2011-03-28 18:18:48.957 Requirement: ODSKC40

2011-03-28 18:18:48.957 05736 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:18:48.957 Requirement: ODSKC40

2011-03-28 18:18:48.957 05738 Stop()
2011-03-28 18:18:48.957 Requirement: ODSKC40
2011-03-28 18:18:48.957 RunCommand(ods-control stop)
2011-03-28 18:18:48.962 - runCommand: Process started, PID: 22894
2011-03-28 18:18:48.962 OUTPUT:	Stopping enforcer...
2011-03-28 18:18:48.962 OUTPUT:	Cannot find PID file
2011-03-28 18:18:48.962 OUTPUT:	Stopping signer engine..
2011-03-28 18:18:48.962 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:18:48.962 ERROR:	return code = 1
2011-03-28 18:18:48.962 RunCommand(ps -e | grep enforcer)
2011-03-28 18:18:48.973 - runCommand: Process started, PID: 22897
2011-03-28 18:18:48.973 ERROR:	return code = 1
2011-03-28 18:18:48.973 RunCommand(ps -e | grep signer)
2011-03-28 18:18:48.985 - runCommand: Process started, PID: 22900
2011-03-28 18:18:48.985 ERROR:	return code = 1

2011-03-28 18:18:48.985 05740 Wait(10)

2011-03-28 18:18:48.985 Requirement: ODSKC40

2011-03-28 18:18:58.985 05743 LoadConfig()
2011-03-28 18:18:58.985 Requirement: ODSKC40
2011-03-28 18:18:58.985 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:18:58.992 - runCommand: Process started, PID: 22903

2011-03-28 18:18:58.992 05746 LoadConfig()
2011-03-28 18:18:58.992 Requirement: ODSKC40
2011-03-28 18:18:58.992 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:18:58.998 - runCommand: Process started, PID: 22904

2011-03-28 18:18:58.998 05748 Comment: Update all the configs.

2011-03-28 18:18:58.998 Requirement: ODSKC40

2011-03-28 18:18:58.998 05750 UpdateAll()
2011-03-28 18:18:58.998 Requirement: ODSKC40
2011-03-28 18:18:58.998 RunCommand(ods-ksmutil update all)
2011-03-28 18:19:00.413 - runCommand: Process started, PID: 22905
2011-03-28 18:19:00.413 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:19:00.413 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:19:00.413 OUTPUT:	Repository SoftHSM found
2011-03-28 18:19:00.414 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:19:00.414 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:19:00.414 OUTPUT:	Policy default found
2011-03-28 18:19:00.414 OUTPUT:	Policy default2 found
2011-03-28 18:19:00.414 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:19:00.414 OUTPUT:	Zone ods found
2011-03-28 18:19:00.414 OUTPUT:	Policy set to default.
2011-03-28 18:19:00.414 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:19:00.414 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:19:00.414 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T530: Use a non-existing repository for KSK repository and confirm ods-kaspcheck fails

2011-03-28 18:19:00.414 05755 Comment: Change the reposiitory name for the KSK's to a non-existing one in the kasp.xml. The ods-kaspcheck should fail for the kasp.xml.

2011-03-28 18:19:00.414 Requirement: ODSKC40

2011-03-28 18:19:00.414 05757 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:19:00.414 Requirement: ODSKC40

2011-03-28 18:19:00.415 05759 Stop()
2011-03-28 18:19:00.415 Requirement: ODSKC40
2011-03-28 18:19:00.415 RunCommand(ods-control stop)
2011-03-28 18:19:00.422 - runCommand: Process started, PID: 22913
2011-03-28 18:19:00.422 OUTPUT:	Stopping enforcer...
2011-03-28 18:19:00.422 OUTPUT:	Cannot find PID file
2011-03-28 18:19:00.422 OUTPUT:	Stopping signer engine..
2011-03-28 18:19:00.422 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:19:00.422 ERROR:	return code = 1
2011-03-28 18:19:00.422 RunCommand(ps -e | grep enforcer)
2011-03-28 18:19:00.440 - runCommand: Process started, PID: 22916
2011-03-28 18:19:00.440 ERROR:	return code = 1
2011-03-28 18:19:00.440 RunCommand(ps -e | grep signer)
2011-03-28 18:19:00.457 - runCommand: Process started, PID: 22919
2011-03-28 18:19:00.457 ERROR:	return code = 1

2011-03-28 18:19:00.458 05761 Wait(10)

2011-03-28 18:19:00.458 Requirement: ODSKC40

2011-03-28 18:19:10.458 05763 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:19:10.458 Requirement: ODSKC40

2011-03-28 18:19:10.458 05766 LoadConfig()
2011-03-28 18:19:10.458 Requirement: ODSKC40
2011-03-28 18:19:10.458 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:19:10.464 - runCommand: Process started, PID: 22922

2011-03-28 18:19:10.465 05769 LoadConfig()
2011-03-28 18:19:10.465 Requirement: ODSKC40
2011-03-28 18:19:10.465 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T530_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:19:10.470 - runCommand: Process started, PID: 22923

2011-03-28 18:19:10.470 05771 Comment: Update all the configs.

2011-03-28 18:19:10.470 Requirement: ODSKC40

2011-03-28 18:19:10.470 05773 UpdateAll()
2011-03-28 18:19:10.470 Requirement: ODSKC40
2011-03-28 18:19:10.470 RunCommand(ods-ksmutil update all)
2011-03-28 18:19:10.983 - runCommand: Process started, PID: 22924
2011-03-28 18:19:10.983 OUTPUT:	ERROR: Unknown repository (WrongHSM) defined for KSK in default policy in /etc/opendnssec/kasp.xml
2011-03-28 18:19:10.983 OUTPUT:	WARNING: KSK minimum lifetime (1 seconds) is less than ZSK minimum lifetime (43200 seconds) for default Policy in /etc/opendnssec/kasp.xml
2011-03-28 18:19:10.983 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:19:10.983 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:19:10.983 OUTPUT:	Repository SoftHSM found
2011-03-28 18:19:10.983 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:19:10.983 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:19:10.983 OUTPUT:	Policy default found
2011-03-28 18:19:10.983 OUTPUT:	Error: unable to find repository WrongHSM
2011-03-28 18:19:10.983 OUTPUT:	Please either add the repository to conf.xml or remove the reference to it from kasp.xml
2011-03-28 18:19:10.983 OUTPUT:	Failed to update policies
2011-03-28 18:19:10.983 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:19:10.983 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:19:10.983 ERROR:	/etc/opendnssec/kasp.xml validates
2011-03-28 18:19:10.983 ERROR:	ERROR: no result obtained from query where one was expected
2011-03-28 18:19:10.983 ERROR:	ERROR: database operation failed - not an error
2011-03-28 18:19:10.983 ERROR:	return code = 1

2011-03-28 18:19:10.984 05775 Wait(10)

2011-03-28 18:19:10.984 Requirement: ODSKC40

2011-03-28 18:19:20.984 05777 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:19:20.984 Requirement: ODSKC40

2011-03-28 18:19:20.984 05782 CheckLog()
2011-03-28 18:19:20.984 Requirement: ODSKC40
2011-03-28 18:19:21.260 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 18:19:21.260 05785 CheckLog()
2011-03-28 18:19:21.260 Requirement: ODSKC40
2011-03-28 18:19:21.527 FAILED:	(Check for Like) - Expected: ERROR: Unknown repository (WrongHSM) defined for KSK in default policy in /etc/opendnssec/kasp.xml Found: 

2011-03-28 18:19:21.527 05788 CheckLog()
2011-03-28 18:19:21.527 Requirement: ODSKC40
2011-03-28 18:19:21.793 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml fails to validate Found: 

2011-03-28 18:19:21.793 05790 Comment: Reset the config files to the original ones.

2011-03-28 18:19:21.793 Requirement: ODSKC40

2011-03-28 18:19:21.793 05792 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:19:21.793 Requirement: ODSKC40

2011-03-28 18:19:21.794 05794 Stop()
2011-03-28 18:19:21.794 Requirement: ODSKC40
2011-03-28 18:19:21.794 RunCommand(ods-control stop)
2011-03-28 18:19:21.798 - runCommand: Process started, PID: 22932
2011-03-28 18:19:21.799 OUTPUT:	Stopping enforcer...
2011-03-28 18:19:21.799 OUTPUT:	Cannot find PID file
2011-03-28 18:19:21.799 OUTPUT:	Stopping signer engine..
2011-03-28 18:19:21.799 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:19:21.799 ERROR:	return code = 1
2011-03-28 18:19:21.799 RunCommand(ps -e | grep enforcer)
2011-03-28 18:19:21.811 - runCommand: Process started, PID: 22935
2011-03-28 18:19:21.811 ERROR:	return code = 1
2011-03-28 18:19:21.811 RunCommand(ps -e | grep signer)
2011-03-28 18:19:21.823 - runCommand: Process started, PID: 22938
2011-03-28 18:19:21.823 ERROR:	return code = 1

2011-03-28 18:19:21.823 05796 Wait(10)

2011-03-28 18:19:21.823 Requirement: ODSKC40

2011-03-28 18:19:31.823 05799 LoadConfig()
2011-03-28 18:19:31.823 Requirement: ODSKC40
2011-03-28 18:19:31.823 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:19:31.830 - runCommand: Process started, PID: 22941

2011-03-28 18:19:31.830 05802 LoadConfig()
2011-03-28 18:19:31.830 Requirement: ODSKC40
2011-03-28 18:19:31.830 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:19:31.835 - runCommand: Process started, PID: 22942

2011-03-28 18:19:31.836 05804 Comment: Update all the configs.

2011-03-28 18:19:31.836 Requirement: ODSKC40

2011-03-28 18:19:31.836 05806 UpdateAll()
2011-03-28 18:19:31.836 Requirement: ODSKC40
2011-03-28 18:19:31.836 RunCommand(ods-ksmutil update all)
2011-03-28 18:19:33.230 - runCommand: Process started, PID: 22943
2011-03-28 18:19:33.230 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:19:33.230 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:19:33.230 OUTPUT:	Repository SoftHSM found
2011-03-28 18:19:33.230 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:19:33.230 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:19:33.230 OUTPUT:	Policy default found
2011-03-28 18:19:33.230 OUTPUT:	Policy default2 found
2011-03-28 18:19:33.230 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:19:33.230 OUTPUT:	Zone ods found
2011-03-28 18:19:33.230 OUTPUT:	Policy set to default.
2011-03-28 18:19:33.230 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:19:33.230 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:19:33.230 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC40T540: Use a different repository for KSK then ZSK and confirm KSK is created in correct repository

2011-03-28 18:19:33.231 05812 Comment: The ZSK and KSK have both a different repository: ZSK = SoftHSM & KSK = SoftHSM2. Check whether the keys will be created in the correct repository.

2011-03-28 18:19:33.231 Requirement: ODSKC40

2011-03-28 18:19:33.231 05814 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:19:33.231 Requirement: ODSKC40

2011-03-28 18:19:33.231 05816 Stop()
2011-03-28 18:19:33.231 Requirement: ODSKC40
2011-03-28 18:19:33.231 RunCommand(ods-control stop)
2011-03-28 18:19:33.238 - runCommand: Process started, PID: 22951
2011-03-28 18:19:33.239 OUTPUT:	Stopping enforcer...
2011-03-28 18:19:33.239 OUTPUT:	Cannot find PID file
2011-03-28 18:19:33.239 OUTPUT:	Stopping signer engine..
2011-03-28 18:19:33.239 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:19:33.239 ERROR:	return code = 1
2011-03-28 18:19:33.239 RunCommand(ps -e | grep enforcer)
2011-03-28 18:19:33.258 - runCommand: Process started, PID: 22954
2011-03-28 18:19:33.258 ERROR:	return code = 1
2011-03-28 18:19:33.258 RunCommand(ps -e | grep signer)
2011-03-28 18:19:33.276 - runCommand: Process started, PID: 22957
2011-03-28 18:19:33.276 ERROR:	return code = 1

2011-03-28 18:19:33.276 05818 Wait(10)

2011-03-28 18:19:33.276 Requirement: ODSKC40

2011-03-28 18:19:43.276 05820 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:19:43.276 Requirement: ODSKC40

2011-03-28 18:19:43.277 05826 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 18:19:43.277 Requirement: ODSKC40

2011-03-28 18:19:43.277 05833 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:19:43.277 Requirement: ODSKC40

2011-03-28 18:19:43.277 05836 LoadConfig()
2011-03-28 18:19:43.277 Requirement: ODSKC40
2011-03-28 18:19:43.277 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/ODSKC40T540_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:19:43.283 - runCommand: Process started, PID: 22960

2011-03-28 18:19:43.284 05839 LoadConfig()
2011-03-28 18:19:43.284 Requirement: ODSKC40
2011-03-28 18:19:43.284 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T540_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:19:43.289 - runCommand: Process started, PID: 22961

2011-03-28 18:19:43.289 05841 Comment: New setup for the configs and key repository

2011-03-28 18:19:43.289 Requirement: ODSKC40

2011-03-28 18:19:43.290 05845 Wait(10)

2011-03-28 18:19:43.290 Requirement: ODSKC40

2011-03-28 18:19:53.290 05847 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:19:53.290 Requirement: ODSKC40

2011-03-28 18:19:53.290 05849 Start()
2011-03-28 18:19:53.290 Requirement: ODSKC40
2011-03-28 18:19:53.290 RunCommand(ods-control start)
2011-03-28 18:19:53.292 - runCommand: Background process started, PID: 22962
2011-03-28 18:19:54.310 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:19:54.332 - runCommand: Process started, PID: 22977
2011-03-28 18:19:54.332 OUTPUT:	ods-enforcerd
2011-03-28 18:19:54.332 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:19:54.348 - runCommand: Process started, PID: 22982
2011-03-28 18:19:54.348 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:19:54.348 05851 Comment: Check whether the new KSK key has been created in the SoftHSM2 repository and the KSK key(s) in the SoftHSM repository.

2011-03-28 18:19:54.348 Requirement: ODSKC40

2011-03-28 18:19:54.348 05856 CheckLog()
2011-03-28 18:19:54.348 Requirement: ODSKC40
2011-03-28 18:19:54.619 FAILED:	(Check for Like) - Expected: 1 key found Found: 

2011-03-28 18:19:54.620 05858 Wait(60)

2011-03-28 18:19:54.620 Requirement: ODSKC40

2011-03-28 18:20:54.620 05860 Comment: Check if only 1 ZSK has been created in the SoftHSM repository.

2011-03-28 18:20:54.620 Requirement: ODSKC40

2011-03-28 18:20:54.620 05865 CheckLog()
2011-03-28 18:20:54.620 Requirement: ODSKC40

2011-03-28 18:20:54.895 05867 Comment: Sign the ODS zone manually

2011-03-28 18:20:54.895 Requirement: ODSKC40

2011-03-28 18:20:54.895 05872 Wait(20)

2011-03-28 18:20:54.895 Requirement: ODSKC40

2011-03-28 18:21:14.896 05874 Comment: Check if the signing of the ods zone is succesfull.

2011-03-28 18:21:14.896 Requirement: ODSKC40

2011-03-28 18:21:14.896 05878 CheckFilePresent(ods)
2011-03-28 18:21:14.896 Requirement: ODSKC40
2011-03-28 18:21:14.896 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 18:21:14.896 05880 Comment: Signed zone file should be present

2011-03-28 18:21:14.896 Requirement: ODSKC40

2011-03-28 18:21:14.896 05882 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:21:14.896 Requirement: ODSKC40

2011-03-28 18:21:14.897 05888 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:21:14.897 Requirement: ODSKC40

2011-03-28 18:21:14.897 05895 LoadConfig()
2011-03-28 18:21:14.897 Requirement: ODSKC40
2011-03-28 18:21:14.897 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:21:14.903 - runCommand: Process started, PID: 22995

2011-03-28 18:21:14.903 05898 LoadConfig()
2011-03-28 18:21:14.903 Requirement: ODSKC40
2011-03-28 18:21:14.903 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:21:14.909 - runCommand: Process started, PID: 22996

2011-03-28 18:21:14.909 05900 Comment: New setup for the configs and key repository

2011-03-28 18:21:14.909 Requirement: ODSKC40

2011-03-28 18:21:14.910 05904 Wait(10)

2011-03-28 18:21:14.910 Requirement: ODSKC40

2011-03-28 18:21:24.910 05906 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 18:21:24.910 Requirement: ODSKC40

2011-03-28 18:21:24.910 05908 Start()
2011-03-28 18:21:24.910 Requirement: ODSKC40
2011-03-28 18:21:24.910 RunCommand(ods-control start)
2011-03-28 18:21:24.912 - runCommand: Background process started, PID: 22997
2011-03-28 18:21:24.920 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:21:24.939 - runCommand: Process started, PID: 23004
2011-03-28 18:21:24.939 OUTPUT:	ods-enforcerd
2011-03-28 18:21:24.939 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:21:24.955 - runCommand: Process started, PID: 23008
2011-03-28 18:21:24.955 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:21:24.955 05910 Wait(30)

2011-03-28 18:21:24.955 Requirement: ODSKC40

2011-03-28 18:21:54.956 05912 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:21:54.956 Requirement: ODSKC40

2011-03-28 18:21:54.956 05914 Stop()
2011-03-28 18:21:54.956 Requirement: ODSKC40
2011-03-28 18:21:54.956 RunCommand(ods-control stop)
2011-03-28 18:21:55.967 - runCommand: Process started, PID: 23013
2011-03-28 18:21:55.968 OUTPUT:	Stopping enforcer...
2011-03-28 18:21:55.968 OUTPUT:	Stopping signer engine..
2011-03-28 18:21:55.968 OUTPUT:	Engine shut down.
2011-03-28 18:21:55.968 RunCommand(ps -e | grep enforcer)
2011-03-28 18:21:55.986 - runCommand: Process started, PID: 23021
2011-03-28 18:21:55.986 ERROR:	return code = 1
2011-03-28 18:21:55.986 RunCommand(ps -e | grep signer)
2011-03-28 18:21:56.405 - runCommand: Process started, PID: 23024
2011-03-28 18:21:56.414 OUTPUT:	22973 ?        00:00:00 ods-signerd

-------------------------------------------------------------------------------
Testcase - ODSKC40T550: Set KSK Standby to 10 and confirm 11 KSK's in repository and 11 KSK in signed zone

2011-03-28 18:21:56.467 05919 Comment: The ZSK and KSK have both a different repository: KSK = SoftHSM2 & ZSK = SoftHSM. Check whether the keys will be created in the correct repository. Thereby for the KSK 10 standby keys should be created.

2011-03-28 18:21:56.469 Requirement: ODSKC40

2011-03-28 18:21:56.484 05921 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:21:56.486 Requirement: ODSKC40

2011-03-28 18:21:56.501 05923 Stop()
2011-03-28 18:21:56.503 Requirement: ODSKC40
2011-03-28 18:21:56.505 RunCommand(ods-control stop)
2011-03-28 18:21:56.969 - runCommand: Process started, PID: 23027
2011-03-28 18:21:56.969 OUTPUT:	Stopping enforcer...
2011-03-28 18:21:56.969 OUTPUT:	Cannot find PID file
2011-03-28 18:21:56.969 OUTPUT:	Stopping signer engine..
2011-03-28 18:21:56.969 ERROR:	error: Connection reset by peer
2011-03-28 18:21:56.969 ERROR:	return code = 1
2011-03-28 18:21:56.969 RunCommand(ps -e | grep enforcer)
2011-03-28 18:21:56.987 - runCommand: Process started, PID: 23030
2011-03-28 18:21:56.987 ERROR:	return code = 1
2011-03-28 18:21:56.987 RunCommand(ps -e | grep signer)
2011-03-28 18:21:56.999 - runCommand: Process started, PID: 23033
2011-03-28 18:21:56.999 ERROR:	return code = 1

2011-03-28 18:21:56.999 05925 Wait(10)

2011-03-28 18:21:56.999 Requirement: ODSKC40

2011-03-28 18:22:06.999 05927 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:22:06.999 Requirement: ODSKC40

2011-03-28 18:22:07.126 05933 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 18:22:07.147 Requirement: ODSKC40

2011-03-28 18:22:07.320 05940 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:22:07.341 Requirement: ODSKC40

2011-03-28 18:22:07.503 05943 LoadConfig()
2011-03-28 18:22:07.522 Requirement: ODSKC40
2011-03-28 18:22:07.546 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/ODSKC40T550_conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:22:07.723 - runCommand: Process started, PID: 23036

2011-03-28 18:22:07.751 05946 LoadConfig()
2011-03-28 18:22:07.754 Requirement: ODSKC40
2011-03-28 18:22:07.756 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T550_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:22:07.132 - runCommand: Process started, PID: 23037

2011-03-28 18:22:07.136 05948 Comment: New setup for the configs and key repository

2011-03-28 18:22:07.136 Requirement: ODSKC40

2011-03-28 18:22:07.138 05952 Wait(10)

2011-03-28 18:22:07.138 Requirement: ODSKC40

2011-03-28 18:22:17.141 05954 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:22:17.141 Requirement: ODSKC40

2011-03-28 18:22:17.142 05956 Start()
2011-03-28 18:22:17.143 Requirement: ODSKC40
2011-03-28 18:22:17.143 RunCommand(ods-control start)
2011-03-28 18:22:17.167 - runCommand: Background process started, PID: 23038
2011-03-28 18:22:18.349 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:22:18.544 - runCommand: Process started, PID: 23053
2011-03-28 18:22:18.544 OUTPUT:	ods-enforcerd
2011-03-28 18:22:18.545 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:22:18.709 - runCommand: Process started, PID: 23058
2011-03-28 18:22:18.710 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:22:18.711 05958 Comment: Check whether the 11 new keys for the KSK have been created in the SoftHSM2 repository.

2011-03-28 18:22:18.711 Requirement: ODSKC40

2011-03-28 18:22:18.713 05963 CheckLog()
2011-03-28 18:22:18.713 Requirement: ODSKC40
2011-03-28 18:22:18.346 FAILED:	(Check for Like) - Expected: 11 keys found Found: 

2011-03-28 18:22:18.346 05965 Wait(60)

2011-03-28 18:22:18.346 Requirement: ODSKC40

2011-03-28 18:23:18.347 05967 Comment: Check only 1 key is used for signing the zone ods.

2011-03-28 18:23:18.347 Requirement: ODSKC40

2011-03-28 18:23:18.347 05972 CheckLog()
2011-03-28 18:23:18.347 Requirement: ODSKC40

2011-03-28 18:23:18.624 05974 Comment: Sign the ODS zone manually

2011-03-28 18:23:18.624 Requirement: ODSKC40

2011-03-28 18:23:18.624 05979 Wait(20)

2011-03-28 18:23:18.624 Requirement: ODSKC40

2011-03-28 18:23:38.624 05981 Comment: Check if the signing of the ods zone is succesfull.

2011-03-28 18:23:38.625 Requirement: ODSKC40

2011-03-28 18:23:38.625 05985 CheckFilePresent(ods)
2011-03-28 18:23:38.625 Requirement: ODSKC40
2011-03-28 18:23:38.625 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 18:23:38.625 05987 Comment: Signed zone file should be present

2011-03-28 18:23:38.625 Requirement: ODSKC40

2011-03-28 18:23:38.625 05989 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:23:38.625 Requirement: ODSKC40

2011-03-28 18:23:38.625 05995 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:23:38.625 Requirement: ODSKC40

2011-03-28 18:23:38.625 06002 LoadConfig()
2011-03-28 18:23:38.625 Requirement: ODSKC40
2011-03-28 18:23:38.625 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:23:38.632 - runCommand: Process started, PID: 23071

2011-03-28 18:23:38.632 06005 LoadConfig()
2011-03-28 18:23:38.632 Requirement: ODSKC40
2011-03-28 18:23:38.632 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:23:38.638 - runCommand: Process started, PID: 23072

2011-03-28 18:23:38.638 06007 Comment: New setup for the configs and key repository

2011-03-28 18:23:38.638 Requirement: ODSKC40

2011-03-28 18:23:38.638 06011 Wait(10)

2011-03-28 18:23:38.638 Requirement: ODSKC40

2011-03-28 18:23:48.638 06013 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 18:23:48.638 Requirement: ODSKC40

2011-03-28 18:23:48.639 06015 Start()
2011-03-28 18:23:48.639 Requirement: ODSKC40
2011-03-28 18:23:48.639 RunCommand(ods-control start)
2011-03-28 18:23:48.641 - runCommand: Background process started, PID: 23073
2011-03-28 18:23:48.648 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:23:48.670 - runCommand: Process started, PID: 23080
2011-03-28 18:23:48.670 OUTPUT:	ods-enforcerd
2011-03-28 18:23:48.670 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:23:48.685 - runCommand: Process started, PID: 23084
2011-03-28 18:23:48.685 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:23:48.685 06017 Wait(30)

2011-03-28 18:23:48.685 Requirement: ODSKC40

2011-03-28 18:24:18.686 06019 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:24:18.686 Requirement: ODSKC40

2011-03-28 18:24:18.686 06021 Stop()
2011-03-28 18:24:18.686 Requirement: ODSKC40
2011-03-28 18:24:18.686 RunCommand(ods-control stop)
2011-03-28 18:24:19.697 - runCommand: Process started, PID: 23089
2011-03-28 18:24:19.697 OUTPUT:	Stopping enforcer...
2011-03-28 18:24:19.697 OUTPUT:	Stopping signer engine..
2011-03-28 18:24:19.697 OUTPUT:	Engine shut down.
2011-03-28 18:24:19.697 RunCommand(ps -e | grep enforcer)
2011-03-28 18:24:19.715 - runCommand: Process started, PID: 23097
2011-03-28 18:24:19.715 ERROR:	return code = 1
2011-03-28 18:24:19.715 RunCommand(ps -e | grep signer)
2011-03-28 18:24:19.727 - runCommand: Process started, PID: 23100
2011-03-28 18:24:19.727 OUTPUT:	23049 ?        00:00:00 ods-signerd

-------------------------------------------------------------------------------
Testcase - ODSKC40T560: Set KSK Standby to 0 and confirm 1 KSK in repository and 1 KSK in signed zone

2011-03-28 18:24:19.727 06026 Comment: Check whether the KSK key will be created in the correct repository. Thereby for the KSK 0 standby keys should be created.

2011-03-28 18:24:19.727 Requirement: ODSKC40

2011-03-28 18:24:19.727 06028 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:24:19.727 Requirement: ODSKC40

2011-03-28 18:24:19.727 06030 Stop()
2011-03-28 18:24:19.727 Requirement: ODSKC40
2011-03-28 18:24:19.727 RunCommand(ods-control stop)
2011-03-28 18:24:20.699 - runCommand: Process started, PID: 23103
2011-03-28 18:24:20.699 OUTPUT:	Stopping enforcer...
2011-03-28 18:24:20.699 OUTPUT:	Cannot find PID file
2011-03-28 18:24:20.699 OUTPUT:	Stopping signer engine..
2011-03-28 18:24:20.699 ERROR:	error: Connection reset by peer
2011-03-28 18:24:20.699 ERROR:	return code = 1
2011-03-28 18:24:20.699 RunCommand(ps -e | grep enforcer)
2011-03-28 18:24:20.717 - runCommand: Process started, PID: 23106
2011-03-28 18:24:20.717 ERROR:	return code = 1
2011-03-28 18:24:20.717 RunCommand(ps -e | grep signer)
2011-03-28 18:24:20.734 - runCommand: Process started, PID: 23109
2011-03-28 18:24:20.735 ERROR:	return code = 1

2011-03-28 18:24:20.735 06032 Wait(10)

2011-03-28 18:24:20.735 Requirement: ODSKC40

2011-03-28 18:24:30.735 06034 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:24:30.735 Requirement: ODSKC40

2011-03-28 18:24:30.735 06040 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 18:24:30.735 Requirement: ODSKC40

2011-03-28 18:24:30.735 06047 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:24:30.735 Requirement: ODSKC40

2011-03-28 18:24:30.736 06050 LoadConfig()
2011-03-28 18:24:30.736 Requirement: ODSKC40
2011-03-28 18:24:30.736 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:24:30.742 - runCommand: Process started, PID: 23112

2011-03-28 18:24:30.742 06053 LoadConfig()
2011-03-28 18:24:30.742 Requirement: ODSKC40
2011-03-28 18:24:30.742 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T560_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:24:30.748 - runCommand: Process started, PID: 23113

2011-03-28 18:24:30.748 06055 Comment: New setup for the configs and key repository

2011-03-28 18:24:30.748 Requirement: ODSKC40

2011-03-28 18:24:30.748 06059 Wait(10)

2011-03-28 18:24:30.748 Requirement: ODSKC40

2011-03-28 18:24:40.749 06061 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:24:40.749 Requirement: ODSKC40

2011-03-28 18:24:40.749 06063 Start()
2011-03-28 18:24:40.749 Requirement: ODSKC40
2011-03-28 18:24:40.749 RunCommand(ods-control start)
2011-03-28 18:24:40.751 - runCommand: Background process started, PID: 23114
2011-03-28 18:24:41.769 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:24:41.789 - runCommand: Process started, PID: 23129
2011-03-28 18:24:41.789 OUTPUT:	ods-enforcerd
2011-03-28 18:24:41.789 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:24:41.806 - runCommand: Process started, PID: 23134
2011-03-28 18:24:41.806 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:24:41.806 06065 Comment: Check whether the 1 new key for the KSK has been created in the SoftHSM repository. The other key is the ZSK key. In total 2 keys should be found.

2011-03-28 18:24:41.806 Requirement: ODSKC40

2011-03-28 18:24:41.806 06070 CheckLog()
2011-03-28 18:24:41.806 Requirement: ODSKC40
2011-03-28 18:24:42.847 FAILED:	(Check for Like) - Expected: 2 keys found Found: 

2011-03-28 18:24:42.849 06072 Wait(60)

2011-03-28 18:24:42.850 Requirement: ODSKC40

2011-03-28 18:25:42.852 06074 Comment: Check only 1 key is used for signing the zone ods.

2011-03-28 18:25:42.853 Requirement: ODSKC40

2011-03-28 18:25:42.854 06079 CheckLog()
2011-03-28 18:25:42.855 Requirement: ODSKC40

2011-03-28 18:25:42.365 06081 Comment: Sign the ODS zone manually

2011-03-28 18:25:42.365 Requirement: ODSKC40

2011-03-28 18:25:42.365 06086 Wait(20)

2011-03-28 18:25:42.365 Requirement: ODSKC40

2011-03-28 18:26:02.365 06088 Comment: Check if the signing of the ods zone is succesfull.

2011-03-28 18:26:02.365 Requirement: ODSKC40

2011-03-28 18:26:02.365 06092 CheckFilePresent(ods)
2011-03-28 18:26:02.365 Requirement: ODSKC40
2011-03-28 18:26:02.365 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 18:26:02.365 06094 Comment: Signed zone file should be present

2011-03-28 18:26:02.365 Requirement: ODSKC40

2011-03-28 18:26:02.366 06096 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:26:02.366 Requirement: ODSKC40

2011-03-28 18:26:02.366 06100 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:26:02.366 Requirement: ODSKC40

2011-03-28 18:26:02.366 06107 LoadConfig()
2011-03-28 18:26:02.366 Requirement: ODSKC40
2011-03-28 18:26:02.366 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:26:02.372 - runCommand: Process started, PID: 23147

2011-03-28 18:26:02.373 06110 LoadConfig()
2011-03-28 18:26:02.373 Requirement: ODSKC40
2011-03-28 18:26:02.373 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:26:02.378 - runCommand: Process started, PID: 23148

2011-03-28 18:26:02.379 06112 Comment: New setup for the configs and key repository

2011-03-28 18:26:02.379 Requirement: ODSKC40

2011-03-28 18:26:02.379 06116 Wait(10)

2011-03-28 18:26:02.379 Requirement: ODSKC40

2011-03-28 18:26:12.379 06118 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 18:26:12.379 Requirement: ODSKC40

2011-03-28 18:26:12.379 06120 Start()
2011-03-28 18:26:12.379 Requirement: ODSKC40
2011-03-28 18:26:12.379 RunCommand(ods-control start)
2011-03-28 18:26:12.382 - runCommand: Background process started, PID: 23149
2011-03-28 18:26:12.387 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:26:12.400 - runCommand: Process started, PID: 23156
2011-03-28 18:26:12.400 OUTPUT:	ods-enforcerd
2011-03-28 18:26:12.400 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:26:12.415 - runCommand: Process started, PID: 23160
2011-03-28 18:26:12.415 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:26:12.415 06122 Wait(30)

2011-03-28 18:26:12.415 Requirement: ODSKC40

2011-03-28 18:26:42.416 06124 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:26:42.416 Requirement: ODSKC40

2011-03-28 18:26:42.416 06126 Stop()
2011-03-28 18:26:42.416 Requirement: ODSKC40
2011-03-28 18:26:42.416 RunCommand(ods-control stop)
2011-03-28 18:26:43.426 - runCommand: Process started, PID: 23165
2011-03-28 18:26:43.426 OUTPUT:	Stopping enforcer...
2011-03-28 18:26:43.426 OUTPUT:	Stopping signer engine..
2011-03-28 18:26:43.426 OUTPUT:	Engine shut down.
2011-03-28 18:26:43.426 RunCommand(ps -e | grep enforcer)
2011-03-28 18:26:43.444 - runCommand: Process started, PID: 23172
2011-03-28 18:26:43.444 ERROR:	return code = 1
2011-03-28 18:26:43.444 RunCommand(ps -e | grep signer)
2011-03-28 18:26:43.466 - runCommand: Process started, PID: 23175
2011-03-28 18:26:43.466 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC40T570: Enable KSK Manualrollover and confirm KSK not rolling over until command is given

2011-03-28 18:26:43.466 06133 Comment: Enable KSK Manualrollover in kasp.xml and confirm that rollover only happens when manual command is given.
Note: This test seems to take a lot of time (minimum 1 hour: not yet fully automated yet).

2011-03-28 18:26:43.466 Requirement: ODSKC40

2011-03-28 18:26:43.467 06135 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:26:43.467 Requirement: ODSKC40

2011-03-28 18:26:43.467 06137 Stop()
2011-03-28 18:26:43.467 Requirement: ODSKC40
2011-03-28 18:26:43.467 RunCommand(ods-control stop)
2011-03-28 18:26:43.474 - runCommand: Process started, PID: 23178
2011-03-28 18:26:43.474 OUTPUT:	Stopping enforcer...
2011-03-28 18:26:43.474 OUTPUT:	Cannot find PID file
2011-03-28 18:26:43.474 OUTPUT:	Stopping signer engine..
2011-03-28 18:26:43.474 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:26:43.474 ERROR:	return code = 1
2011-03-28 18:26:43.474 RunCommand(ps -e | grep enforcer)
2011-03-28 18:26:43.491 - runCommand: Process started, PID: 23181
2011-03-28 18:26:43.492 ERROR:	return code = 1
2011-03-28 18:26:43.492 RunCommand(ps -e | grep signer)
2011-03-28 18:26:43.509 - runCommand: Process started, PID: 23184
2011-03-28 18:26:43.509 ERROR:	return code = 1

2011-03-28 18:26:43.509 06139 Wait(10)

2011-03-28 18:26:43.510 Requirement: ODSKC40

2011-03-28 18:26:53.510 06141 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:26:53.510 Requirement: ODSKC40

2011-03-28 18:26:53.510 06147 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:26:53.510 Requirement: ODSKC40

2011-03-28 18:26:53.510 06151 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:26:53.510 Requirement: ODSKC40

2011-03-28 18:26:53.510 06154 LoadConfig()
2011-03-28 18:26:53.510 Requirement: ODSKC40
2011-03-28 18:26:53.510 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:26:53.517 - runCommand: Process started, PID: 23187

2011-03-28 18:26:53.517 06157 LoadConfig()
2011-03-28 18:26:53.517 Requirement: ODSKC40
2011-03-28 18:26:53.517 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC40T570_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:26:53.522 - runCommand: Process started, PID: 23188

2011-03-28 18:26:53.523 06159 Comment: New setup for the configs and key repository

2011-03-28 18:26:53.523 Requirement: ODSKC40

2011-03-28 18:26:53.523 06163 Wait(10)

2011-03-28 18:26:53.523 Requirement: ODSKC40

2011-03-28 18:27:03.523 06165 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:27:03.523 Requirement: ODSKC40

2011-03-28 18:27:03.523 06167 Start()
2011-03-28 18:27:03.523 Requirement: ODSKC40
2011-03-28 18:27:03.523 RunCommand(ods-control start)
2011-03-28 18:27:03.526 - runCommand: Background process started, PID: 23189
2011-03-28 18:27:04.544 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:27:04.567 - runCommand: Process started, PID: 23204
2011-03-28 18:27:04.567 OUTPUT:	ods-enforcerd
2011-03-28 18:27:04.567 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:27:04.585 - runCommand: Process started, PID: 23209
2011-03-28 18:27:04.585 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:27:04.585 06169 Wait(30)

2011-03-28 18:27:04.585 Requirement: ODSKC40

2011-03-28 18:27:34.586 06171 Comment: Sign the ODS zone manually

2011-03-28 18:27:34.586 Requirement: ODSKC40

2011-03-28 18:27:34.586 06176 Wait(20)

2011-03-28 18:27:34.586 Requirement: ODSKC40

2011-03-28 18:27:54.586 06178 Comment: Check if the signing of the ods zone is succesfull. A signed "ods" zone should be available in folder: /var/opendnssec/signed/

2011-03-28 18:27:54.586 Requirement: ODSKC40

2011-03-28 18:27:54.586 06182 CheckFilePresent(ods)
2011-03-28 18:27:54.586 Requirement: ODSKC40
2011-03-28 18:27:54.586 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 18:27:54.586 06184 Comment: Signed zone file should be present.

2011-03-28 18:27:54.586 Requirement: ODSKC40

2011-03-28 18:27:54.587 06186 Comment: Check in the log if the KSK has not yet roll-overed. 
Note: improvements needed.

2011-03-28 18:27:54.587 Requirement: ODSKC40

2011-03-28 18:27:54.587 06189 CheckLog()
2011-03-28 18:27:54.587 Requirement: ODSKC40
2011-03-28 18:27:54.873 FAILED:	(Check for Like) - Expected: KSK in use too long - should be max  seconds but has been seconds Found: 

2011-03-28 18:27:54.873 06191 Comment: Purge the keys in the SoftHSM repository

2011-03-28 18:27:54.873 Requirement: ODSKC40

2011-03-28 18:27:54.873 06196 LoadConfig()
2011-03-28 18:27:54.873 Requirement: ODSKC40
2011-03-28 18:27:54.873 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:27:54.878 - runCommand: Process started, PID: 23222

2011-03-28 18:27:54.878 06199 LoadConfig()
2011-03-28 18:27:54.878 Requirement: ODSKC40
2011-03-28 18:27:54.878 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:27:54.881 - runCommand: Process started, PID: 23223

2011-03-28 18:27:54.881 06201 Comment: New setup for the configs and key repository

2011-03-28 18:27:54.881 Requirement: ODSKC40

2011-03-28 18:27:54.881 06205 Wait(10)

2011-03-28 18:27:54.881 Requirement: ODSKC40

2011-03-28 18:28:04.882 06207 Comment: Start the ODS-Enforcer and ODS-Signer; new keys will be created.

2011-03-28 18:28:04.882 Requirement: ODSKC40

2011-03-28 18:28:04.882 06209 Start()
2011-03-28 18:28:04.882 Requirement: ODSKC40
2011-03-28 18:28:04.882 RunCommand(ods-control start)
2011-03-28 18:28:04.884 - runCommand: Background process started, PID: 23224
2011-03-28 18:28:04.892 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:28:04.911 - runCommand: Process started, PID: 23231
2011-03-28 18:28:04.911 OUTPUT:	ods-enforcerd
2011-03-28 18:28:04.911 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:28:04.927 - runCommand: Process started, PID: 23235
2011-03-28 18:28:04.927 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:28:04.927 06211 Wait(30)

2011-03-28 18:28:04.927 Requirement: ODSKC40

2011-03-28 18:28:34.928 06213 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:28:34.928 Requirement: ODSKC40

2011-03-28 18:28:34.928 06215 Stop()
2011-03-28 18:28:34.928 Requirement: ODSKC40
2011-03-28 18:28:34.928 RunCommand(ods-control stop)
2011-03-28 18:28:35.937 - runCommand: Process started, PID: 23240
2011-03-28 18:28:35.937 OUTPUT:	Stopping enforcer...
2011-03-28 18:28:35.937 OUTPUT:	Stopping signer engine..
2011-03-28 18:28:35.937 OUTPUT:	Engine shut down.
2011-03-28 18:28:35.937 RunCommand(ps -e | grep enforcer)
2011-03-28 18:28:35.955 - runCommand: Process started, PID: 23247
2011-03-28 18:28:35.956 ERROR:	return code = 1
2011-03-28 18:28:35.956 RunCommand(ps -e | grep signer)
2011-03-28 18:28:35.975 - runCommand: Process started, PID: 23250
2011-03-28 18:28:35.975 ERROR:	return code = 1
Testcondition - ODSKC50: The Zone part located in kasp.xml should conform to several constraints and requirements

-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSKC50T10: Use a value with an incorrect format for PropagationDelay (0) and confirm ods-kaspcheck fails

2011-03-28 18:28:35.976 06222 Comment: PropogationDelay value in the zone part (general part) is incorrect: 0 instead of a valid value like PT12H. Ods-kaspcheck validation should fail for kasp.xml.

2011-03-28 18:28:35.976 Requirement: ODSKC50

2011-03-28 18:28:35.976 06224 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:28:35.976 Requirement: ODSKC50

2011-03-28 18:28:35.976 06226 Stop()
2011-03-28 18:28:35.976 Requirement: ODSKC50
2011-03-28 18:28:35.976 RunCommand(ods-control stop)
2011-03-28 18:28:35.983 - runCommand: Process started, PID: 23253
2011-03-28 18:28:35.983 OUTPUT:	Stopping enforcer...
2011-03-28 18:28:35.983 OUTPUT:	Cannot find PID file
2011-03-28 18:28:35.983 OUTPUT:	Stopping signer engine..
2011-03-28 18:28:35.983 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:28:35.983 ERROR:	return code = 1
2011-03-28 18:28:35.983 RunCommand(ps -e | grep enforcer)
2011-03-28 18:28:36.124 - runCommand: Process started, PID: 23256
2011-03-28 18:28:36.131 ERROR:	return code = 1
2011-03-28 18:28:36.133 RunCommand(ps -e | grep signer)
2011-03-28 18:28:36.123 - runCommand: Process started, PID: 23259
2011-03-28 18:28:36.124 ERROR:	return code = 1

2011-03-28 18:28:36.125 06228 Wait(10)

2011-03-28 18:28:36.125 Requirement: ODSKC50

2011-03-28 18:28:46.127 06230 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:28:46.128 Requirement: ODSKC50

2011-03-28 18:28:46.129 06233 LoadConfig()
2011-03-28 18:28:46.130 Requirement: ODSKC50
2011-03-28 18:28:46.130 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:28:46.192 - runCommand: Process started, PID: 23262

2011-03-28 18:28:46.195 06236 LoadConfig()
2011-03-28 18:28:46.195 Requirement: ODSKC50
2011-03-28 18:28:46.195 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC50T10_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:28:46.251 - runCommand: Process started, PID: 23263

2011-03-28 18:28:46.254 06238 Comment: Update all the configs.

2011-03-28 18:28:46.254 Requirement: ODSKC50

2011-03-28 18:28:46.256 06240 UpdateAll()
2011-03-28 18:28:46.256 Requirement: ODSKC50
2011-03-28 18:28:46.256 RunCommand(ods-ksmutil update all)
2011-03-28 18:28:46.389 - runCommand: Process started, PID: 23264
2011-03-28 18:28:46.390 OUTPUT:	ERROR: Unknown repository (SoftHSM2) defined for KSK in default policy in /etc/opendnssec/kasp.xml
2011-03-28 18:28:46.390 OUTPUT:	WARNING: KSK minimum lifetime (1 seconds) is less than ZSK minimum lifetime (43200 seconds) for default Policy in /etc/opendnssec/kasp.xml
2011-03-28 18:28:46.390 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:28:46.390 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:28:46.390 OUTPUT:	Repository SoftHSM found
2011-03-28 18:28:46.390 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:28:46.390 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:28:46.390 OUTPUT:	Error validating file "/etc/opendnssec/kasp.xml"
2011-03-28 18:28:46.390 OUTPUT:	Failed to update policies
2011-03-28 18:28:46.390 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:28:46.390 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:28:46.390 ERROR:	/etc/opendnssec/kasp.xml:64: element PropagationDelay: Relax-NG validity error : Type duration doesn't allow value '0'
2011-03-28 18:28:46.390 ERROR:	/etc/opendnssec/kasp.xml:64: element PropagationDelay: Relax-NG validity error : Error validating datatype duration
2011-03-28 18:28:46.390 ERROR:	/etc/opendnssec/kasp.xml:64: element PropagationDelay: Relax-NG validity error : Element PropagationDelay failed to validate content
2011-03-28 18:28:46.390 ERROR:	/etc/opendnssec/kasp.xml fails to validate
2011-03-28 18:28:46.390 ERROR:	/etc/opendnssec/kasp.xml:64: element PropagationDelay: Relax-NG validity error : Type duration doesn't allow value '0'
2011-03-28 18:28:46.390 ERROR:	/etc/opendnssec/kasp.xml:64: element PropagationDelay: Relax-NG validity error : Error validating datatype duration
2011-03-28 18:28:46.390 ERROR:	/etc/opendnssec/kasp.xml:64: element PropagationDelay: Relax-NG validity error : Element PropagationDelay failed to validate content
2011-03-28 18:28:46.390 ERROR:	return code = 1

2011-03-28 18:28:46.390 06242 Wait(10)

2011-03-28 18:28:46.390 Requirement: ODSKC50

2011-03-28 18:28:56.390 06244 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:28:56.390 Requirement: ODSKC50

2011-03-28 18:28:56.390 06249 CheckLog()
2011-03-28 18:28:56.390 Requirement: ODSKC50
2011-03-28 18:28:56.672 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 18:28:56.672 06252 CheckLog()
2011-03-28 18:28:56.672 Requirement: ODSKC50
2011-03-28 18:28:56.949 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml fails to validate Found: 

2011-03-28 18:28:56.949 06255 CheckLog()
2011-03-28 18:28:56.949 Requirement: ODSKC50
2011-03-28 18:28:57.228 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml:123: element PropogationDelay: Relax-NG validity error : Type duration doesn't allow value '0' Found: 

2011-03-28 18:28:57.228 06257 Comment: Reset the config files to the original ones.

2011-03-28 18:28:57.228 Requirement: ODSKC50

2011-03-28 18:28:57.228 06259 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:28:57.228 Requirement: ODSKC50

2011-03-28 18:28:57.228 06261 Stop()
2011-03-28 18:28:57.228 Requirement: ODSKC50
2011-03-28 18:28:57.228 RunCommand(ods-control stop)
2011-03-28 18:28:57.233 - runCommand: Process started, PID: 23272
2011-03-28 18:28:57.233 OUTPUT:	Stopping enforcer...
2011-03-28 18:28:57.233 OUTPUT:	Cannot find PID file
2011-03-28 18:28:57.233 OUTPUT:	Stopping signer engine..
2011-03-28 18:28:57.233 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:28:57.233 ERROR:	return code = 1
2011-03-28 18:28:57.233 RunCommand(ps -e | grep enforcer)
2011-03-28 18:28:57.244 - runCommand: Process started, PID: 23275
2011-03-28 18:28:57.244 ERROR:	return code = 1
2011-03-28 18:28:57.244 RunCommand(ps -e | grep signer)
2011-03-28 18:28:57.256 - runCommand: Process started, PID: 23278
2011-03-28 18:28:57.256 ERROR:	return code = 1

2011-03-28 18:28:57.256 06263 Wait(10)

2011-03-28 18:28:57.256 Requirement: ODSKC50

2011-03-28 18:29:07.257 06266 LoadConfig()
2011-03-28 18:29:07.257 Requirement: ODSKC50
2011-03-28 18:29:07.257 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:29:07.263 - runCommand: Process started, PID: 23281

2011-03-28 18:29:07.263 06269 LoadConfig()
2011-03-28 18:29:07.263 Requirement: ODSKC50
2011-03-28 18:29:07.263 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:29:07.269 - runCommand: Process started, PID: 23282

2011-03-28 18:29:07.269 06271 Comment: Update all the configs.

2011-03-28 18:29:07.269 Requirement: ODSKC50

2011-03-28 18:29:07.269 06273 UpdateAll()
2011-03-28 18:29:07.269 Requirement: ODSKC50
2011-03-28 18:29:07.269 RunCommand(ods-ksmutil update all)
2011-03-28 18:29:08.602 - runCommand: Process started, PID: 23283
2011-03-28 18:29:08.602 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:29:08.602 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:29:08.602 OUTPUT:	Repository SoftHSM found
2011-03-28 18:29:08.602 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:29:08.602 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:29:08.602 OUTPUT:	Policy default found
2011-03-28 18:29:08.602 OUTPUT:	Policy default2 found
2011-03-28 18:29:08.602 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:29:08.602 OUTPUT:	Zone ods found
2011-03-28 18:29:08.602 OUTPUT:	Policy set to default.
2011-03-28 18:29:08.602 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:29:08.602 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:29:08.602 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC50T20: Use a very high value for PropagationDelay (P1Y) and confirm ods-kaspcheck runs successfully

2011-03-28 18:29:08.603 06279 Comment: PropogationDelay value is very high (1 year: P1Y). Ods-kaspcheck should validate both kasp.xml as conf.xml.

2011-03-28 18:29:08.603 Requirement: ODSKC50

2011-03-28 18:29:08.603 06281 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:29:08.603 Requirement: ODSKC50

2011-03-28 18:29:08.603 06283 Stop()
2011-03-28 18:29:08.603 Requirement: ODSKC50
2011-03-28 18:29:08.603 RunCommand(ods-control stop)
2011-03-28 18:29:08.611 - runCommand: Process started, PID: 23291
2011-03-28 18:29:08.611 OUTPUT:	Stopping enforcer...
2011-03-28 18:29:08.611 OUTPUT:	Cannot find PID file
2011-03-28 18:29:08.611 OUTPUT:	Stopping signer engine..
2011-03-28 18:29:08.611 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:29:08.611 ERROR:	return code = 1
2011-03-28 18:29:08.611 RunCommand(ps -e | grep enforcer)
2011-03-28 18:29:08.630 - runCommand: Process started, PID: 23294
2011-03-28 18:29:08.630 ERROR:	return code = 1
2011-03-28 18:29:08.630 RunCommand(ps -e | grep signer)
2011-03-28 18:29:08.641 - runCommand: Process started, PID: 23297
2011-03-28 18:29:08.641 ERROR:	return code = 1

2011-03-28 18:29:08.641 06285 Wait(10)

2011-03-28 18:29:08.641 Requirement: ODSKC50

2011-03-28 18:29:18.641 06287 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:29:18.641 Requirement: ODSKC50

2011-03-28 18:29:18.642 06290 LoadConfig()
2011-03-28 18:29:18.642 Requirement: ODSKC50
2011-03-28 18:29:18.642 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:29:18.648 - runCommand: Process started, PID: 23300

2011-03-28 18:29:18.648 06293 LoadConfig()
2011-03-28 18:29:18.648 Requirement: ODSKC50
2011-03-28 18:29:18.648 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC50T20_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:29:18.654 - runCommand: Process started, PID: 23301

2011-03-28 18:29:18.654 06295 Comment: Update all the configs.

2011-03-28 18:29:18.654 Requirement: ODSKC50

2011-03-28 18:29:18.654 06297 UpdateAll()
2011-03-28 18:29:18.654 Requirement: ODSKC50
2011-03-28 18:29:18.654 RunCommand(ods-ksmutil update all)
2011-03-28 18:29:20.171 - runCommand: Process started, PID: 23302
2011-03-28 18:29:20.171 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:29:20.171 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:29:20.171 OUTPUT:	Repository SoftHSM found
2011-03-28 18:29:20.171 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:29:20.171 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:29:20.171 OUTPUT:	Policy default found
2011-03-28 18:29:20.171 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:29:20.171 OUTPUT:	Policy default2 found
2011-03-28 18:29:20.171 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:29:20.171 OUTPUT:	Zone ods found
2011-03-28 18:29:20.171 OUTPUT:	Policy set to default.
2011-03-28 18:29:20.171 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:29:20.171 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:29:20.171 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 18:29:20.172 06299 Wait(10)

2011-03-28 18:29:20.172 Requirement: ODSKC50

2011-03-28 18:29:30.172 06301 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:29:30.172 Requirement: ODSKC50

2011-03-28 18:29:30.172 06306 CheckLog()
2011-03-28 18:29:30.172 Requirement: ODSKC50
2011-03-28 18:29:30.453 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 18:29:30.453 06309 CheckLog()
2011-03-28 18:29:30.453 Requirement: ODSKC50
2011-03-28 18:29:30.730 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml validates Found: 

2011-03-28 18:29:30.730 06312 Comment: Reset the config files to the original ones.

2011-03-28 18:29:30.730 Requirement: ODSKC50

2011-03-28 18:29:30.731 06314 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:29:30.731 Requirement: ODSKC50

2011-03-28 18:29:30.731 06316 Stop()
2011-03-28 18:29:30.731 Requirement: ODSKC50
2011-03-28 18:29:30.731 RunCommand(ods-control stop)
2011-03-28 18:29:30.736 - runCommand: Process started, PID: 23310
2011-03-28 18:29:30.736 OUTPUT:	Stopping enforcer...
2011-03-28 18:29:30.736 OUTPUT:	Cannot find PID file
2011-03-28 18:29:30.736 OUTPUT:	Stopping signer engine..
2011-03-28 18:29:30.736 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:29:30.736 ERROR:	return code = 1
2011-03-28 18:29:30.736 RunCommand(ps -e | grep enforcer)
2011-03-28 18:29:30.747 - runCommand: Process started, PID: 23313
2011-03-28 18:29:30.747 ERROR:	return code = 1
2011-03-28 18:29:30.747 RunCommand(ps -e | grep signer)
2011-03-28 18:29:30.761 - runCommand: Process started, PID: 23316
2011-03-28 18:29:30.761 ERROR:	return code = 1

2011-03-28 18:29:30.761 06318 Wait(10)

2011-03-28 18:29:30.761 Requirement: ODSKC50

2011-03-28 18:29:40.761 06321 LoadConfig()
2011-03-28 18:29:40.761 Requirement: ODSKC50
2011-03-28 18:29:40.761 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:29:40.768 - runCommand: Process started, PID: 23319

2011-03-28 18:29:40.768 06324 LoadConfig()
2011-03-28 18:29:40.768 Requirement: ODSKC50
2011-03-28 18:29:40.768 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:29:40.773 - runCommand: Process started, PID: 23320

2011-03-28 18:29:40.774 06326 Comment: Update all the configs.

2011-03-28 18:29:40.774 Requirement: ODSKC50

2011-03-28 18:29:40.774 06328 UpdateAll()
2011-03-28 18:29:40.774 Requirement: ODSKC50
2011-03-28 18:29:40.774 RunCommand(ods-ksmutil update all)
2011-03-28 18:29:42.285 - runCommand: Process started, PID: 23321
2011-03-28 18:29:42.285 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:29:42.285 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:29:42.285 OUTPUT:	Repository SoftHSM found
2011-03-28 18:29:42.285 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:29:42.285 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:29:42.285 OUTPUT:	Policy default found
2011-03-28 18:29:42.285 OUTPUT:	Policy default2 found
2011-03-28 18:29:42.285 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:29:42.285 OUTPUT:	Zone ods found
2011-03-28 18:29:42.285 OUTPUT:	Policy set to default.
2011-03-28 18:29:42.285 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:29:42.285 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:29:42.285 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC50T30: Deactivate PropagationDelay (PT0S) and confirm ods-kaspcheck fails

2011-03-28 18:29:42.286 06333 Comment: Deactivate the PropagationDelay value for the zone by setting it to PT0S (0 seconds).  Logically spoken: the Ods-kaspcheck should validate for conf.xml and not for kasp.xml. (note: this is not well documented). According to the developpers the kasp.xml should be validated correctly.

2011-03-28 18:29:42.286 Requirement: ODSKC50

2011-03-28 18:29:42.286 06335 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:29:42.286 Requirement: ODSKC50

2011-03-28 18:29:42.286 06337 Stop()
2011-03-28 18:29:42.286 Requirement: ODSKC50
2011-03-28 18:29:42.286 RunCommand(ods-control stop)
2011-03-28 18:29:42.293 - runCommand: Process started, PID: 23329
2011-03-28 18:29:42.293 OUTPUT:	Stopping enforcer...
2011-03-28 18:29:42.293 OUTPUT:	Cannot find PID file
2011-03-28 18:29:42.293 OUTPUT:	Stopping signer engine..
2011-03-28 18:29:42.293 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:29:42.293 ERROR:	return code = 1
2011-03-28 18:29:42.293 RunCommand(ps -e | grep enforcer)
2011-03-28 18:29:42.311 - runCommand: Process started, PID: 23332
2011-03-28 18:29:42.311 ERROR:	return code = 1
2011-03-28 18:29:42.311 RunCommand(ps -e | grep signer)
2011-03-28 18:29:42.330 - runCommand: Process started, PID: 23335
2011-03-28 18:29:42.330 ERROR:	return code = 1

2011-03-28 18:29:42.330 06339 Wait(10)

2011-03-28 18:29:42.330 Requirement: ODSKC50

2011-03-28 18:29:52.330 06341 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:29:52.330 Requirement: ODSKC50

2011-03-28 18:29:52.330 06344 LoadConfig()
2011-03-28 18:29:52.330 Requirement: ODSKC50
2011-03-28 18:29:52.330 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:29:52.337 - runCommand: Process started, PID: 23338

2011-03-28 18:29:52.337 06347 LoadConfig()
2011-03-28 18:29:52.337 Requirement: ODSKC50
2011-03-28 18:29:52.337 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC50T30_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:29:52.342 - runCommand: Process started, PID: 23339

2011-03-28 18:29:52.343 06349 Comment: Update all the configs.

2011-03-28 18:29:52.343 Requirement: ODSKC50

2011-03-28 18:29:52.343 06351 UpdateAll()
2011-03-28 18:29:52.343 Requirement: ODSKC50
2011-03-28 18:29:52.343 RunCommand(ods-ksmutil update all)
2011-03-28 18:29:53.954 - runCommand: Process started, PID: 23340
2011-03-28 18:29:53.954 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:29:53.954 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:29:53.954 OUTPUT:	Repository SoftHSM found
2011-03-28 18:29:53.954 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:29:53.954 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:29:53.954 OUTPUT:	Policy default found
2011-03-28 18:29:53.954 OUTPUT:	Policy default2 found
2011-03-28 18:29:53.954 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:29:53.954 OUTPUT:	Zone ods found
2011-03-28 18:29:53.954 OUTPUT:	Policy set to default.
2011-03-28 18:29:53.954 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:29:53.954 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:29:53.954 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 18:29:53.954 06353 Wait(10)

2011-03-28 18:29:53.954 Requirement: ODSKC50

2011-03-28 18:30:03.955 06355 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:30:03.955 Requirement: ODSKC50

2011-03-28 18:30:03.955 06360 CheckLog()
2011-03-28 18:30:03.955 Requirement: ODSKC50

2011-03-28 18:30:04.234 06363 CheckLog()
2011-03-28 18:30:04.234 Requirement: ODSKC50

2011-03-28 18:30:04.511 06365 Comment: Reset the config files to the original ones.

2011-03-28 18:30:04.511 Requirement: ODSKC50

2011-03-28 18:30:04.511 06367 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:30:04.511 Requirement: ODSKC50

2011-03-28 18:30:04.511 06369 Stop()
2011-03-28 18:30:04.511 Requirement: ODSKC50
2011-03-28 18:30:04.511 RunCommand(ods-control stop)
2011-03-28 18:30:04.516 - runCommand: Process started, PID: 23348
2011-03-28 18:30:04.516 OUTPUT:	Stopping enforcer...
2011-03-28 18:30:04.516 OUTPUT:	Cannot find PID file
2011-03-28 18:30:04.516 OUTPUT:	Stopping signer engine..
2011-03-28 18:30:04.516 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:30:04.516 ERROR:	return code = 1
2011-03-28 18:30:04.516 RunCommand(ps -e | grep enforcer)
2011-03-28 18:30:04.527 - runCommand: Process started, PID: 23351
2011-03-28 18:30:04.527 ERROR:	return code = 1
2011-03-28 18:30:04.527 RunCommand(ps -e | grep signer)
2011-03-28 18:30:04.539 - runCommand: Process started, PID: 23354
2011-03-28 18:30:04.539 ERROR:	return code = 1

2011-03-28 18:30:04.539 06371 Wait(10)

2011-03-28 18:30:04.539 Requirement: ODSKC50

2011-03-28 18:30:14.539 06374 LoadConfig()
2011-03-28 18:30:14.539 Requirement: ODSKC50
2011-03-28 18:30:14.539 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:30:14.545 - runCommand: Process started, PID: 23357

2011-03-28 18:30:14.545 06377 LoadConfig()
2011-03-28 18:30:14.545 Requirement: ODSKC50
2011-03-28 18:30:14.545 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:30:14.549 - runCommand: Process started, PID: 23358

2011-03-28 18:30:14.549 06379 Comment: Update all the configs.

2011-03-28 18:30:14.549 Requirement: ODSKC50

2011-03-28 18:30:14.549 06381 UpdateAll()
2011-03-28 18:30:14.549 Requirement: ODSKC50
2011-03-28 18:30:14.549 RunCommand(ods-ksmutil update all)
2011-03-28 18:30:16.262 - runCommand: Process started, PID: 23359
2011-03-28 18:30:16.264 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:30:16.264 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:30:16.264 OUTPUT:	Repository SoftHSM found
2011-03-28 18:30:16.264 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:30:16.264 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:30:16.264 OUTPUT:	Policy default found
2011-03-28 18:30:16.265 OUTPUT:	Policy default2 found
2011-03-28 18:30:16.265 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:30:16.265 OUTPUT:	Zone ods found
2011-03-28 18:30:16.265 OUTPUT:	Policy set to default.
2011-03-28 18:30:16.265 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:30:16.265 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:30:16.266 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC50T40: Use a value with an incorrect format for SOA TTL (360) and confirm ods-kaspcheck fails

2011-03-28 18:30:16.271 06386 Comment: SOA TTL value in the zone part (general part) is incorrect: 360 instead of a valid value like PT12H. Ods-kaspcheck validation should fail for kasp.xml.

2011-03-28 18:30:16.271 Requirement: ODSKC50

2011-03-28 18:30:16.272 06388 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:30:16.273 Requirement: ODSKC50

2011-03-28 18:30:16.274 06390 Stop()
2011-03-28 18:30:16.274 Requirement: ODSKC50
2011-03-28 18:30:16.275 RunCommand(ods-control stop)
2011-03-28 18:30:16.343 - runCommand: Process started, PID: 23367
2011-03-28 18:30:16.343 OUTPUT:	Stopping enforcer...
2011-03-28 18:30:16.343 OUTPUT:	Cannot find PID file
2011-03-28 18:30:16.343 OUTPUT:	Stopping signer engine..
2011-03-28 18:30:16.343 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:30:16.344 ERROR:	return code = 1
2011-03-28 18:30:16.344 RunCommand(ps -e | grep enforcer)
2011-03-28 18:30:16.452 - runCommand: Process started, PID: 23370
2011-03-28 18:30:16.453 ERROR:	return code = 1
2011-03-28 18:30:16.453 RunCommand(ps -e | grep signer)
2011-03-28 18:30:16.568 - runCommand: Process started, PID: 23373
2011-03-28 18:30:16.568 ERROR:	return code = 1

2011-03-28 18:30:16.570 06392 Wait(10)

2011-03-28 18:30:16.570 Requirement: ODSKC50

2011-03-28 18:30:26.572 06394 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:30:26.572 Requirement: ODSKC50

2011-03-28 18:30:26.574 06397 LoadConfig()
2011-03-28 18:30:26.574 Requirement: ODSKC50
2011-03-28 18:30:26.575 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:30:26.637 - runCommand: Process started, PID: 23376

2011-03-28 18:30:26.640 06400 LoadConfig()
2011-03-28 18:30:26.640 Requirement: ODSKC50
2011-03-28 18:30:26.640 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC50T40_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:30:26.695 - runCommand: Process started, PID: 23377

2011-03-28 18:30:26.698 06402 Comment: Update all the configs.

2011-03-28 18:30:26.698 Requirement: ODSKC50

2011-03-28 18:30:26.700 06404 UpdateAll()
2011-03-28 18:30:26.700 Requirement: ODSKC50
2011-03-28 18:30:26.700 RunCommand(ods-ksmutil update all)
2011-03-28 18:30:26.405 - runCommand: Process started, PID: 23378
2011-03-28 18:30:26.405 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:30:26.405 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:30:26.405 OUTPUT:	Repository SoftHSM found
2011-03-28 18:30:26.405 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:30:26.405 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:30:26.405 OUTPUT:	Error validating file "/etc/opendnssec/kasp.xml"
2011-03-28 18:30:26.405 OUTPUT:	Failed to update policies
2011-03-28 18:30:26.405 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:30:26.405 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:30:26.405 ERROR:	/etc/opendnssec/kasp.xml:62: element TTL: Relax-NG validity error : Type duration doesn't allow value '360'
2011-03-28 18:30:26.405 ERROR:	/etc/opendnssec/kasp.xml:62: element TTL: Relax-NG validity error : Error validating datatype duration
2011-03-28 18:30:26.406 ERROR:	/etc/opendnssec/kasp.xml:62: element TTL: Relax-NG validity error : Element TTL failed to validate content
2011-03-28 18:30:26.406 ERROR:	/etc/opendnssec/kasp.xml fails to validate
2011-03-28 18:30:26.406 ERROR:	/etc/opendnssec/kasp.xml:62: element TTL: Relax-NG validity error : Type duration doesn't allow value '360'
2011-03-28 18:30:26.406 ERROR:	/etc/opendnssec/kasp.xml:62: element TTL: Relax-NG validity error : Error validating datatype duration
2011-03-28 18:30:26.406 ERROR:	/etc/opendnssec/kasp.xml:62: element TTL: Relax-NG validity error : Element TTL failed to validate content
2011-03-28 18:30:26.406 ERROR:	return code = 1

2011-03-28 18:30:26.406 06406 Wait(10)

2011-03-28 18:30:26.406 Requirement: ODSKC50

2011-03-28 18:30:36.406 06408 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:30:36.406 Requirement: ODSKC50

2011-03-28 18:30:36.406 06413 CheckLog()
2011-03-28 18:30:36.406 Requirement: ODSKC50

2011-03-28 18:30:36.690 06416 CheckLog()
2011-03-28 18:30:36.690 Requirement: ODSKC50

2011-03-28 18:30:36.967 06419 CheckLog()
2011-03-28 18:30:36.967 Requirement: ODSKC50

2011-03-28 18:30:37.246 06421 Comment: Reset the config files to the original ones.

2011-03-28 18:30:37.246 Requirement: ODSKC50

2011-03-28 18:30:37.246 06423 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:30:37.246 Requirement: ODSKC50

2011-03-28 18:30:37.246 06425 Stop()
2011-03-28 18:30:37.246 Requirement: ODSKC50
2011-03-28 18:30:37.246 RunCommand(ods-control stop)
2011-03-28 18:30:37.251 - runCommand: Process started, PID: 23386
2011-03-28 18:30:37.251 OUTPUT:	Stopping enforcer...
2011-03-28 18:30:37.251 OUTPUT:	Cannot find PID file
2011-03-28 18:30:37.251 OUTPUT:	Stopping signer engine..
2011-03-28 18:30:37.251 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:30:37.251 ERROR:	return code = 1
2011-03-28 18:30:37.251 RunCommand(ps -e | grep enforcer)
2011-03-28 18:30:37.262 - runCommand: Process started, PID: 23389
2011-03-28 18:30:37.262 ERROR:	return code = 1
2011-03-28 18:30:37.262 RunCommand(ps -e | grep signer)
2011-03-28 18:30:37.276 - runCommand: Process started, PID: 23392
2011-03-28 18:30:37.276 ERROR:	return code = 1

2011-03-28 18:30:37.276 06427 Wait(10)

2011-03-28 18:30:37.276 Requirement: ODSKC50

2011-03-28 18:30:47.277 06430 LoadConfig()
2011-03-28 18:30:47.277 Requirement: ODSKC50
2011-03-28 18:30:47.277 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:30:47.283 - runCommand: Process started, PID: 23395

2011-03-28 18:30:47.283 06433 LoadConfig()
2011-03-28 18:30:47.283 Requirement: ODSKC50
2011-03-28 18:30:47.283 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:30:47.289 - runCommand: Process started, PID: 23396

2011-03-28 18:30:47.289 06435 Comment: Update all the configs.

2011-03-28 18:30:47.289 Requirement: ODSKC50

2011-03-28 18:30:47.289 06437 UpdateAll()
2011-03-28 18:30:47.289 Requirement: ODSKC50
2011-03-28 18:30:47.289 RunCommand(ods-ksmutil update all)
2011-03-28 18:30:48.701 - runCommand: Process started, PID: 23397
2011-03-28 18:30:48.701 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:30:48.701 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:30:48.701 OUTPUT:	Repository SoftHSM found
2011-03-28 18:30:48.701 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:30:48.701 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:30:48.701 OUTPUT:	Policy default found
2011-03-28 18:30:48.701 OUTPUT:	Policy default2 found
2011-03-28 18:30:48.701 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:30:48.701 OUTPUT:	Zone ods found
2011-03-28 18:30:48.701 OUTPUT:	Policy set to default.
2011-03-28 18:30:48.701 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:30:48.701 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:30:48.701 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC50T50: Use a very high value for SOA TTL (P1M) and confirm ods-kaspcheck runs successfully and SOA of signed zone has configured TTL

2011-03-28 18:30:48.702 06442 Comment: SOA TTL value is very high (1 month: P1M). Ods-kaspcheck should validate both kasp.xml as conf.xml.

2011-03-28 18:30:48.702 Requirement: ODSKC50

2011-03-28 18:30:48.702 06444 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:30:48.702 Requirement: ODSKC50

2011-03-28 18:30:48.702 06446 Stop()
2011-03-28 18:30:48.702 Requirement: ODSKC50
2011-03-28 18:30:48.702 RunCommand(ods-control stop)
2011-03-28 18:30:48.709 - runCommand: Process started, PID: 23405
2011-03-28 18:30:48.709 OUTPUT:	Stopping enforcer...
2011-03-28 18:30:48.709 OUTPUT:	Cannot find PID file
2011-03-28 18:30:48.709 OUTPUT:	Stopping signer engine..
2011-03-28 18:30:48.709 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:30:48.710 ERROR:	return code = 1
2011-03-28 18:30:48.710 RunCommand(ps -e | grep enforcer)
2011-03-28 18:30:48.727 - runCommand: Process started, PID: 23408
2011-03-28 18:30:48.727 ERROR:	return code = 1
2011-03-28 18:30:48.727 RunCommand(ps -e | grep signer)
2011-03-28 18:30:48.745 - runCommand: Process started, PID: 23411
2011-03-28 18:30:48.745 ERROR:	return code = 1

2011-03-28 18:30:48.745 06448 Wait(10)

2011-03-28 18:30:48.745 Requirement: ODSKC50

2011-03-28 18:30:58.746 06450 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:30:58.746 Requirement: ODSKC50

2011-03-28 18:30:58.746 06453 LoadConfig()
2011-03-28 18:30:58.746 Requirement: ODSKC50
2011-03-28 18:30:58.746 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:30:58.752 - runCommand: Process started, PID: 23414

2011-03-28 18:30:58.752 06456 LoadConfig()
2011-03-28 18:30:58.752 Requirement: ODSKC50
2011-03-28 18:30:58.753 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC50T50_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:30:58.760 - runCommand: Process started, PID: 23415

2011-03-28 18:30:58.760 06458 Comment: Update all the configs.

2011-03-28 18:30:58.760 Requirement: ODSKC50

2011-03-28 18:30:58.760 06460 UpdateAll()
2011-03-28 18:30:58.760 Requirement: ODSKC50
2011-03-28 18:30:58.760 RunCommand(ods-ksmutil update all)
2011-03-28 18:31:00.178 - runCommand: Process started, PID: 23416
2011-03-28 18:31:00.178 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:31:00.178 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:31:00.178 OUTPUT:	Repository SoftHSM found
2011-03-28 18:31:00.178 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:31:00.178 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:31:00.178 OUTPUT:	Policy default found
2011-03-28 18:31:00.178 OUTPUT:	Info: converting P1M to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:31:00.178 OUTPUT:	Policy default2 found
2011-03-28 18:31:00.178 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:31:00.178 OUTPUT:	Zone ods found
2011-03-28 18:31:00.178 OUTPUT:	Policy set to default.
2011-03-28 18:31:00.179 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:31:00.179 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:31:00.179 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 18:31:00.179 06462 Wait(10)

2011-03-28 18:31:00.179 Requirement: ODSKC50

2011-03-28 18:31:10.179 06464 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:31:10.179 Requirement: ODSKC50

2011-03-28 18:31:10.179 06469 CheckLog()
2011-03-28 18:31:10.179 Requirement: ODSKC50

2011-03-28 18:31:10.463 06472 CheckLog()
2011-03-28 18:31:10.463 Requirement: ODSKC50

2011-03-28 18:31:10.741 06474 Comment: Check the TTL in the signed zone.

2011-03-28 18:31:10.741 Requirement: ODSKC50

2011-03-28 18:31:10.741 06479 CheckLog()
2011-03-28 18:31:10.741 Requirement: ODSKC50

2011-03-28 18:31:11.189 06481 Comment: Reset the config files to the original ones.

2011-03-28 18:31:11.189 Requirement: ODSKC50

2011-03-28 18:31:11.190 06483 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:31:11.190 Requirement: ODSKC50

2011-03-28 18:31:11.191 06485 Stop()
2011-03-28 18:31:11.191 Requirement: ODSKC50
2011-03-28 18:31:11.191 RunCommand(ods-control stop)
2011-03-28 18:31:11.242 - runCommand: Process started, PID: 23424
2011-03-28 18:31:11.242 OUTPUT:	Stopping enforcer...
2011-03-28 18:31:11.243 OUTPUT:	Cannot find PID file
2011-03-28 18:31:11.243 OUTPUT:	Stopping signer engine..
2011-03-28 18:31:11.243 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:31:11.243 ERROR:	return code = 1
2011-03-28 18:31:11.243 RunCommand(ps -e | grep enforcer)
2011-03-28 18:31:11.364 - runCommand: Process started, PID: 23427
2011-03-28 18:31:11.365 ERROR:	return code = 1
2011-03-28 18:31:11.365 RunCommand(ps -e | grep signer)
2011-03-28 18:31:11.476 - runCommand: Process started, PID: 23430
2011-03-28 18:31:11.477 ERROR:	return code = 1

2011-03-28 18:31:11.478 06487 Wait(10)

2011-03-28 18:31:11.478 Requirement: ODSKC50

2011-03-28 18:31:21.481 06490 LoadConfig()
2011-03-28 18:31:21.481 Requirement: ODSKC50
2011-03-28 18:31:21.481 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:31:21.543 - runCommand: Process started, PID: 23433

2011-03-28 18:31:21.546 06493 LoadConfig()
2011-03-28 18:31:21.546 Requirement: ODSKC50
2011-03-28 18:31:21.547 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:31:21.602 - runCommand: Process started, PID: 23434

2011-03-28 18:31:21.605 06495 Comment: Update all the configs.

2011-03-28 18:31:21.605 Requirement: ODSKC50

2011-03-28 18:31:21.606 06497 UpdateAll()
2011-03-28 18:31:21.607 Requirement: ODSKC50
2011-03-28 18:31:21.607 RunCommand(ods-ksmutil update all)
2011-03-28 18:31:22.458 - runCommand: Process started, PID: 23435
2011-03-28 18:31:22.459 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:31:22.459 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:31:22.459 OUTPUT:	Repository SoftHSM found
2011-03-28 18:31:22.459 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:31:22.459 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:31:22.459 OUTPUT:	Policy default found
2011-03-28 18:31:22.459 OUTPUT:	Policy default2 found
2011-03-28 18:31:22.459 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:31:22.459 OUTPUT:	Zone ods found
2011-03-28 18:31:22.459 OUTPUT:	Policy set to default.
2011-03-28 18:31:22.459 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:31:22.459 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:31:22.459 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC50T60: Deactivate SOA TTL (PT0S) and confirm ods-kaspcheck fails

2011-03-28 18:31:22.459 06503 Comment: Deactivate the SOA TTL value for the zone by setting it to PT0S (0 seconds). Logically spoken: the Ods-kaspcheck should validate for conf.xml and not for kasp.xml. (note: this is not well documented). According to the developpers the kasp.xml should be validated correctly.

2011-03-28 18:31:22.459 Requirement: ODSKC50

2011-03-28 18:31:22.459 06505 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:31:22.459 Requirement: ODSKC50

2011-03-28 18:31:22.460 06507 Stop()
2011-03-28 18:31:22.460 Requirement: ODSKC50
2011-03-28 18:31:22.460 RunCommand(ods-control stop)
2011-03-28 18:31:22.466 - runCommand: Process started, PID: 23443
2011-03-28 18:31:22.466 OUTPUT:	Stopping enforcer...
2011-03-28 18:31:22.466 OUTPUT:	Cannot find PID file
2011-03-28 18:31:22.466 OUTPUT:	Stopping signer engine..
2011-03-28 18:31:22.466 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:31:22.466 ERROR:	return code = 1
2011-03-28 18:31:22.466 RunCommand(ps -e | grep enforcer)
2011-03-28 18:31:22.477 - runCommand: Process started, PID: 23446
2011-03-28 18:31:22.477 ERROR:	return code = 1
2011-03-28 18:31:22.477 RunCommand(ps -e | grep signer)
2011-03-28 18:31:22.488 - runCommand: Process started, PID: 23449
2011-03-28 18:31:22.488 ERROR:	return code = 1

2011-03-28 18:31:22.489 06509 Wait(10)

2011-03-28 18:31:22.489 Requirement: ODSKC50

2011-03-28 18:31:32.489 06511 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:31:32.489 Requirement: ODSKC50

2011-03-28 18:31:32.489 06514 LoadConfig()
2011-03-28 18:31:32.489 Requirement: ODSKC50
2011-03-28 18:31:32.489 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:31:32.495 - runCommand: Process started, PID: 23452

2011-03-28 18:31:32.496 06517 LoadConfig()
2011-03-28 18:31:32.496 Requirement: ODSKC50
2011-03-28 18:31:32.496 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC50T60_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:31:32.501 - runCommand: Process started, PID: 23453

2011-03-28 18:31:32.501 06519 Comment: Update all the configs.

2011-03-28 18:31:32.502 Requirement: ODSKC50

2011-03-28 18:31:32.502 06521 UpdateAll()
2011-03-28 18:31:32.502 Requirement: ODSKC50
2011-03-28 18:31:32.502 RunCommand(ods-ksmutil update all)
2011-03-28 18:31:33.878 - runCommand: Process started, PID: 23454
2011-03-28 18:31:33.878 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:31:33.878 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:31:33.878 OUTPUT:	Repository SoftHSM found
2011-03-28 18:31:33.878 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:31:33.878 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:31:33.878 OUTPUT:	Policy default found
2011-03-28 18:31:33.878 OUTPUT:	Policy default2 found
2011-03-28 18:31:33.878 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:31:33.878 OUTPUT:	Zone ods found
2011-03-28 18:31:33.878 OUTPUT:	Policy set to default.
2011-03-28 18:31:33.878 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:31:33.878 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:31:33.878 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 18:31:33.878 06523 Wait(10)

2011-03-28 18:31:33.878 Requirement: ODSKC50

2011-03-28 18:31:43.878 06525 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:31:43.878 Requirement: ODSKC50

2011-03-28 18:31:43.879 06530 CheckLog()
2011-03-28 18:31:43.879 Requirement: ODSKC50

2011-03-28 18:31:44.162 06533 CheckLog()
2011-03-28 18:31:44.162 Requirement: ODSKC50

2011-03-28 18:31:44.439 06535 Comment: Reset the config files to the original ones.

2011-03-28 18:31:44.439 Requirement: ODSKC50

2011-03-28 18:31:44.439 06537 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:31:44.439 Requirement: ODSKC50

2011-03-28 18:31:44.439 06539 Stop()
2011-03-28 18:31:44.439 Requirement: ODSKC50
2011-03-28 18:31:44.439 RunCommand(ods-control stop)
2011-03-28 18:31:44.444 - runCommand: Process started, PID: 23462
2011-03-28 18:31:44.444 OUTPUT:	Stopping enforcer...
2011-03-28 18:31:44.444 OUTPUT:	Cannot find PID file
2011-03-28 18:31:44.444 OUTPUT:	Stopping signer engine..
2011-03-28 18:31:44.444 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:31:44.444 ERROR:	return code = 1
2011-03-28 18:31:44.444 RunCommand(ps -e | grep enforcer)
2011-03-28 18:31:44.456 - runCommand: Process started, PID: 23465
2011-03-28 18:31:44.456 ERROR:	return code = 1
2011-03-28 18:31:44.456 RunCommand(ps -e | grep signer)
2011-03-28 18:31:44.468 - runCommand: Process started, PID: 23468
2011-03-28 18:31:44.468 ERROR:	return code = 1

2011-03-28 18:31:44.468 06541 Wait(10)

2011-03-28 18:31:44.468 Requirement: ODSKC50

2011-03-28 18:31:54.469 06544 LoadConfig()
2011-03-28 18:31:54.469 Requirement: ODSKC50
2011-03-28 18:31:54.469 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:31:54.475 - runCommand: Process started, PID: 23471

2011-03-28 18:31:54.475 06547 LoadConfig()
2011-03-28 18:31:54.475 Requirement: ODSKC50
2011-03-28 18:31:54.475 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:31:54.481 - runCommand: Process started, PID: 23472

2011-03-28 18:31:54.481 06549 Comment: Update all the configs.

2011-03-28 18:31:54.481 Requirement: ODSKC50

2011-03-28 18:31:54.481 06551 UpdateAll()
2011-03-28 18:31:54.481 Requirement: ODSKC50
2011-03-28 18:31:54.481 RunCommand(ods-ksmutil update all)
2011-03-28 18:31:55.850 - runCommand: Process started, PID: 23473
2011-03-28 18:31:55.850 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:31:55.850 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:31:55.850 OUTPUT:	Repository SoftHSM found
2011-03-28 18:31:55.850 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:31:55.850 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:31:55.850 OUTPUT:	Policy default found
2011-03-28 18:31:55.850 OUTPUT:	Policy default2 found
2011-03-28 18:31:55.850 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:31:55.850 OUTPUT:	Zone ods found
2011-03-28 18:31:55.850 OUTPUT:	Policy set to default.
2011-03-28 18:31:55.850 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:31:55.850 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:31:55.850 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC50T70: Use a value with an incorrect format for SOA Minimum (10) and confirm ods-kaspcheck fails

2011-03-28 18:31:55.851 06556 Comment: SOA Minimum value in the zone part (general part) is incorrect: 10 instead of a valid value like PT12H. Ods-kaspcheck validation should fail for kasp.xml.

2011-03-28 18:31:55.851 Requirement: ODSKC50

2011-03-28 18:31:55.851 06558 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:31:55.851 Requirement: ODSKC50

2011-03-28 18:31:55.851 06560 Stop()
2011-03-28 18:31:55.851 Requirement: ODSKC50
2011-03-28 18:31:55.851 RunCommand(ods-control stop)
2011-03-28 18:31:55.858 - runCommand: Process started, PID: 23481
2011-03-28 18:31:55.858 OUTPUT:	Stopping enforcer...
2011-03-28 18:31:55.858 OUTPUT:	Cannot find PID file
2011-03-28 18:31:55.858 OUTPUT:	Stopping signer engine..
2011-03-28 18:31:55.858 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:31:55.858 ERROR:	return code = 1
2011-03-28 18:31:55.858 RunCommand(ps -e | grep enforcer)
2011-03-28 18:31:55.875 - runCommand: Process started, PID: 23484
2011-03-28 18:31:55.875 ERROR:	return code = 1
2011-03-28 18:31:55.875 RunCommand(ps -e | grep signer)
2011-03-28 18:31:55.886 - runCommand: Process started, PID: 23487
2011-03-28 18:31:55.886 ERROR:	return code = 1

2011-03-28 18:31:55.886 06562 Wait(10)

2011-03-28 18:31:55.886 Requirement: ODSKC50

2011-03-28 18:32:05.887 06564 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:32:05.887 Requirement: ODSKC50

2011-03-28 18:32:05.887 06567 LoadConfig()
2011-03-28 18:32:05.887 Requirement: ODSKC50
2011-03-28 18:32:05.887 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:32:05.893 - runCommand: Process started, PID: 23490

2011-03-28 18:32:05.893 06570 LoadConfig()
2011-03-28 18:32:05.893 Requirement: ODSKC50
2011-03-28 18:32:05.893 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC50T70_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:32:05.897 - runCommand: Process started, PID: 23491

2011-03-28 18:32:05.897 06572 Comment: Update all the configs.

2011-03-28 18:32:05.897 Requirement: ODSKC50

2011-03-28 18:32:05.897 06574 UpdateAll()
2011-03-28 18:32:05.897 Requirement: ODSKC50
2011-03-28 18:32:05.897 RunCommand(ods-ksmutil update all)
2011-03-28 18:32:07.360 - runCommand: Process started, PID: 23492
2011-03-28 18:32:07.361 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:32:07.361 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:32:07.361 OUTPUT:	Repository SoftHSM found
2011-03-28 18:32:07.361 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:32:07.361 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:32:07.361 OUTPUT:	Policy default found
2011-03-28 18:32:07.361 OUTPUT:	Policy default2 found
2011-03-28 18:32:07.361 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:32:07.361 OUTPUT:	Zone ods found
2011-03-28 18:32:07.361 OUTPUT:	Policy set to default.
2011-03-28 18:32:07.361 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:32:07.361 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:32:07.361 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 18:32:07.361 06576 Wait(10)

2011-03-28 18:32:07.361 Requirement: ODSKC50

2011-03-28 18:32:17.361 06578 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:32:17.361 Requirement: ODSKC50

2011-03-28 18:32:17.361 06583 CheckLog()
2011-03-28 18:32:17.362 Requirement: ODSKC50

2011-03-28 18:32:17.648 06586 CheckLog()
2011-03-28 18:32:17.649 Requirement: ODSKC50

2011-03-28 18:32:17.926 06589 CheckLog()
2011-03-28 18:32:17.926 Requirement: ODSKC50

2011-03-28 18:32:18.204 06591 Comment: Reset the config files to the original ones.

2011-03-28 18:32:18.204 Requirement: ODSKC50

2011-03-28 18:32:18.204 06593 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:32:18.204 Requirement: ODSKC50

2011-03-28 18:32:18.204 06595 Stop()
2011-03-28 18:32:18.204 Requirement: ODSKC50
2011-03-28 18:32:18.204 RunCommand(ods-control stop)
2011-03-28 18:32:18.209 - runCommand: Process started, PID: 23500
2011-03-28 18:32:18.209 OUTPUT:	Stopping enforcer...
2011-03-28 18:32:18.209 OUTPUT:	Cannot find PID file
2011-03-28 18:32:18.209 OUTPUT:	Stopping signer engine..
2011-03-28 18:32:18.209 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:32:18.209 ERROR:	return code = 1
2011-03-28 18:32:18.209 RunCommand(ps -e | grep enforcer)
2011-03-28 18:32:18.220 - runCommand: Process started, PID: 23503
2011-03-28 18:32:18.220 ERROR:	return code = 1
2011-03-28 18:32:18.220 RunCommand(ps -e | grep signer)
2011-03-28 18:32:18.232 - runCommand: Process started, PID: 23506
2011-03-28 18:32:18.232 ERROR:	return code = 1

2011-03-28 18:32:18.232 06597 Wait(10)

2011-03-28 18:32:18.232 Requirement: ODSKC50

2011-03-28 18:32:28.232 06600 LoadConfig()
2011-03-28 18:32:28.232 Requirement: ODSKC50
2011-03-28 18:32:28.232 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:32:28.238 - runCommand: Process started, PID: 23509

2011-03-28 18:32:28.239 06603 LoadConfig()
2011-03-28 18:32:28.239 Requirement: ODSKC50
2011-03-28 18:32:28.239 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:32:28.244 - runCommand: Process started, PID: 23510

2011-03-28 18:32:28.245 06605 Comment: Update all the configs.

2011-03-28 18:32:28.245 Requirement: ODSKC50

2011-03-28 18:32:28.245 06607 UpdateAll()
2011-03-28 18:32:28.245 Requirement: ODSKC50
2011-03-28 18:32:28.245 RunCommand(ods-ksmutil update all)
2011-03-28 18:32:29.799 - runCommand: Process started, PID: 23511
2011-03-28 18:32:29.799 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:32:29.799 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:32:29.799 OUTPUT:	Repository SoftHSM found
2011-03-28 18:32:29.799 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:32:29.799 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:32:29.799 OUTPUT:	Policy default found
2011-03-28 18:32:29.799 OUTPUT:	Policy default2 found
2011-03-28 18:32:29.799 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:32:29.799 OUTPUT:	Zone ods found
2011-03-28 18:32:29.799 OUTPUT:	Policy set to default.
2011-03-28 18:32:29.799 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:32:29.799 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:32:29.799 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC50T80: Use a very high value for SOA Minimum (P1M) and confirm ods-kaspcheck runs successfully and SOA of signed zone has configured TTL

2011-03-28 18:32:29.800 06612 Comment: SOA Minimum value is very high (1 month: P1M). Ods-kaspcheck should validate both kasp.xml as conf.xml.

2011-03-28 18:32:29.800 Requirement: ODSKC50

2011-03-28 18:32:29.800 06614 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:32:29.800 Requirement: ODSKC50

2011-03-28 18:32:29.800 06616 Stop()
2011-03-28 18:32:29.800 Requirement: ODSKC50
2011-03-28 18:32:29.800 RunCommand(ods-control stop)
2011-03-28 18:32:29.808 - runCommand: Process started, PID: 23519
2011-03-28 18:32:29.808 OUTPUT:	Stopping enforcer...
2011-03-28 18:32:29.808 OUTPUT:	Cannot find PID file
2011-03-28 18:32:29.808 OUTPUT:	Stopping signer engine..
2011-03-28 18:32:29.808 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:32:29.808 ERROR:	return code = 1
2011-03-28 18:32:29.808 RunCommand(ps -e | grep enforcer)
2011-03-28 18:32:29.824 - runCommand: Process started, PID: 23522
2011-03-28 18:32:29.824 ERROR:	return code = 1
2011-03-28 18:32:29.824 RunCommand(ps -e | grep signer)
2011-03-28 18:32:29.836 - runCommand: Process started, PID: 23525
2011-03-28 18:32:29.836 ERROR:	return code = 1

2011-03-28 18:32:29.836 06618 Wait(10)

2011-03-28 18:32:29.836 Requirement: ODSKC50

2011-03-28 18:32:39.837 06620 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:32:39.837 Requirement: ODSKC50

2011-03-28 18:32:39.837 06623 LoadConfig()
2011-03-28 18:32:39.837 Requirement: ODSKC50
2011-03-28 18:32:39.837 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:32:39.843 - runCommand: Process started, PID: 23528

2011-03-28 18:32:39.843 06626 LoadConfig()
2011-03-28 18:32:39.843 Requirement: ODSKC50
2011-03-28 18:32:39.843 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC50T80_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:32:39.849 - runCommand: Process started, PID: 23529

2011-03-28 18:32:39.849 06628 Comment: Update all the configs.

2011-03-28 18:32:39.849 Requirement: ODSKC50

2011-03-28 18:32:39.849 06630 UpdateAll()
2011-03-28 18:32:39.849 Requirement: ODSKC50
2011-03-28 18:32:39.849 RunCommand(ods-ksmutil update all)
2011-03-28 18:32:41.335 - runCommand: Process started, PID: 23530
2011-03-28 18:32:41.335 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:32:41.335 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:32:41.335 OUTPUT:	Repository SoftHSM found
2011-03-28 18:32:41.335 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:32:41.335 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:32:41.335 OUTPUT:	Policy default found
2011-03-28 18:32:41.335 OUTPUT:	Info: converting P1M to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:32:41.335 OUTPUT:	Policy default2 found
2011-03-28 18:32:41.335 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:32:41.335 OUTPUT:	Zone ods found
2011-03-28 18:32:41.335 OUTPUT:	Policy set to default.
2011-03-28 18:32:41.335 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:32:41.335 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:32:41.335 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 18:32:41.335 06632 Wait(10)

2011-03-28 18:32:41.335 Requirement: ODSKC50

2011-03-28 18:32:51.336 06634 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:32:51.336 Requirement: ODSKC50

2011-03-28 18:32:51.336 06639 CheckLog()
2011-03-28 18:32:51.336 Requirement: ODSKC50

2011-03-28 18:32:51.622 06642 CheckLog()
2011-03-28 18:32:51.622 Requirement: ODSKC50

2011-03-28 18:32:51.900 06644 Comment: Check the TTL in the signed zone.

2011-03-28 18:32:51.900 Requirement: ODSKC50

2011-03-28 18:32:51.900 06649 CheckLog()
2011-03-28 18:32:51.900 Requirement: ODSKC50

2011-03-28 18:32:52.179 06651 Comment: Reset the config files to the original ones.

2011-03-28 18:32:52.179 Requirement: ODSKC50

2011-03-28 18:32:52.179 06653 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:32:52.179 Requirement: ODSKC50

2011-03-28 18:32:52.179 06655 Stop()
2011-03-28 18:32:52.179 Requirement: ODSKC50
2011-03-28 18:32:52.179 RunCommand(ods-control stop)
2011-03-28 18:32:52.184 - runCommand: Process started, PID: 23538
2011-03-28 18:32:52.184 OUTPUT:	Stopping enforcer...
2011-03-28 18:32:52.184 OUTPUT:	Cannot find PID file
2011-03-28 18:32:52.184 OUTPUT:	Stopping signer engine..
2011-03-28 18:32:52.184 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:32:52.184 ERROR:	return code = 1
2011-03-28 18:32:52.184 RunCommand(ps -e | grep enforcer)
2011-03-28 18:32:52.196 - runCommand: Process started, PID: 23541
2011-03-28 18:32:52.196 ERROR:	return code = 1
2011-03-28 18:32:52.196 RunCommand(ps -e | grep signer)
2011-03-28 18:32:52.207 - runCommand: Process started, PID: 23544
2011-03-28 18:32:52.207 ERROR:	return code = 1

2011-03-28 18:32:52.207 06657 Wait(10)

2011-03-28 18:32:52.207 Requirement: ODSKC50

2011-03-28 18:33:02.208 06660 LoadConfig()
2011-03-28 18:33:02.208 Requirement: ODSKC50
2011-03-28 18:33:02.208 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:33:02.214 - runCommand: Process started, PID: 23547

2011-03-28 18:33:02.214 06663 LoadConfig()
2011-03-28 18:33:02.214 Requirement: ODSKC50
2011-03-28 18:33:02.214 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:33:02.220 - runCommand: Process started, PID: 23548

2011-03-28 18:33:02.220 06665 Comment: Update all the configs.

2011-03-28 18:33:02.220 Requirement: ODSKC50

2011-03-28 18:33:02.220 06667 UpdateAll()
2011-03-28 18:33:02.220 Requirement: ODSKC50
2011-03-28 18:33:02.220 RunCommand(ods-ksmutil update all)
2011-03-28 18:33:03.673 - runCommand: Process started, PID: 23549
2011-03-28 18:33:03.673 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:33:03.673 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:33:03.673 OUTPUT:	Repository SoftHSM found
2011-03-28 18:33:03.673 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:33:03.674 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:33:03.674 OUTPUT:	Policy default found
2011-03-28 18:33:03.674 OUTPUT:	Policy default2 found
2011-03-28 18:33:03.674 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:33:03.674 OUTPUT:	Zone ods found
2011-03-28 18:33:03.674 OUTPUT:	Policy set to default.
2011-03-28 18:33:03.674 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:33:03.674 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:33:03.674 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC50T90: Deactivate SOA Minimum (PT0S) and confirm ods-kaspcheck fails

2011-03-28 18:33:03.674 06672 Comment: Deactivate the SOA Minimum value for the zone by setting it to PT0S (0 seconds).  Logically spoken: the Ods-kaspcheck should validate for conf.xml and not for kasp.xml. (note: this is not well documented). According to the developpers the kasp.xml should be validated correctly.

2011-03-28 18:33:03.674 Requirement: ODSKC50

2011-03-28 18:33:03.674 06674 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:33:03.674 Requirement: ODSKC50

2011-03-28 18:33:03.675 06676 Stop()
2011-03-28 18:33:03.675 Requirement: ODSKC50
2011-03-28 18:33:03.675 RunCommand(ods-control stop)
2011-03-28 18:33:03.682 - runCommand: Process started, PID: 23557
2011-03-28 18:33:03.682 OUTPUT:	Stopping enforcer...
2011-03-28 18:33:03.682 OUTPUT:	Cannot find PID file
2011-03-28 18:33:03.682 OUTPUT:	Stopping signer engine..
2011-03-28 18:33:03.682 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:33:03.682 ERROR:	return code = 1
2011-03-28 18:33:03.682 RunCommand(ps -e | grep enforcer)
2011-03-28 18:33:03.700 - runCommand: Process started, PID: 23560
2011-03-28 18:33:03.700 ERROR:	return code = 1
2011-03-28 18:33:03.700 RunCommand(ps -e | grep signer)
2011-03-28 18:33:03.720 - runCommand: Process started, PID: 23563
2011-03-28 18:33:03.720 ERROR:	return code = 1

2011-03-28 18:33:03.720 06678 Wait(10)

2011-03-28 18:33:03.720 Requirement: ODSKC50

2011-03-28 18:33:13.720 06680 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:33:13.720 Requirement: ODSKC50

2011-03-28 18:33:13.720 06683 LoadConfig()
2011-03-28 18:33:13.720 Requirement: ODSKC50
2011-03-28 18:33:13.720 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:33:13.727 - runCommand: Process started, PID: 23566

2011-03-28 18:33:13.727 06686 LoadConfig()
2011-03-28 18:33:13.727 Requirement: ODSKC50
2011-03-28 18:33:13.727 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC50T90_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:33:13.733 - runCommand: Process started, PID: 23567

2011-03-28 18:33:13.733 06688 Comment: Update all the configs.

2011-03-28 18:33:13.733 Requirement: ODSKC50

2011-03-28 18:33:13.733 06690 UpdateAll()
2011-03-28 18:33:13.733 Requirement: ODSKC50
2011-03-28 18:33:13.733 RunCommand(ods-ksmutil update all)
2011-03-28 18:33:15.176 - runCommand: Process started, PID: 23568
2011-03-28 18:33:15.176 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:33:15.176 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:33:15.176 OUTPUT:	Repository SoftHSM found
2011-03-28 18:33:15.176 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:33:15.176 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:33:15.176 OUTPUT:	Policy default found
2011-03-28 18:33:15.176 OUTPUT:	Policy default2 found
2011-03-28 18:33:15.176 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:33:15.176 OUTPUT:	Zone ods found
2011-03-28 18:33:15.176 OUTPUT:	Policy set to default.
2011-03-28 18:33:15.176 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:33:15.176 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:33:15.176 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 18:33:15.176 06692 Wait(10)

2011-03-28 18:33:15.176 Requirement: ODSKC50

2011-03-28 18:33:25.177 06694 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:33:25.177 Requirement: ODSKC50

2011-03-28 18:33:25.177 06699 CheckLog()
2011-03-28 18:33:25.177 Requirement: ODSKC50

2011-03-28 18:33:25.463 06702 CheckLog()
2011-03-28 18:33:25.463 Requirement: ODSKC50

2011-03-28 18:33:25.740 06704 Comment: Reset the config files to the original ones.

2011-03-28 18:33:25.740 Requirement: ODSKC50

2011-03-28 18:33:25.740 06706 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:33:25.740 Requirement: ODSKC50

2011-03-28 18:33:25.740 06708 Stop()
2011-03-28 18:33:25.740 Requirement: ODSKC50
2011-03-28 18:33:25.740 RunCommand(ods-control stop)
2011-03-28 18:33:25.745 - runCommand: Process started, PID: 23576
2011-03-28 18:33:25.745 OUTPUT:	Stopping enforcer...
2011-03-28 18:33:25.745 OUTPUT:	Cannot find PID file
2011-03-28 18:33:25.745 OUTPUT:	Stopping signer engine..
2011-03-28 18:33:25.745 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:33:25.745 ERROR:	return code = 1
2011-03-28 18:33:25.745 RunCommand(ps -e | grep enforcer)
2011-03-28 18:33:25.756 - runCommand: Process started, PID: 23579
2011-03-28 18:33:25.757 ERROR:	return code = 1
2011-03-28 18:33:25.757 RunCommand(ps -e | grep signer)
2011-03-28 18:33:25.768 - runCommand: Process started, PID: 23582
2011-03-28 18:33:25.768 ERROR:	return code = 1

2011-03-28 18:33:25.768 06710 Wait(10)

2011-03-28 18:33:25.768 Requirement: ODSKC50

2011-03-28 18:33:35.768 06713 LoadConfig()
2011-03-28 18:33:35.768 Requirement: ODSKC50
2011-03-28 18:33:35.768 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:33:35.775 - runCommand: Process started, PID: 23585

2011-03-28 18:33:35.775 06716 LoadConfig()
2011-03-28 18:33:35.775 Requirement: ODSKC50
2011-03-28 18:33:35.775 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:33:35.781 - runCommand: Process started, PID: 23586

2011-03-28 18:33:35.781 06718 Comment: Update all the configs.

2011-03-28 18:33:35.781 Requirement: ODSKC50

2011-03-28 18:33:35.781 06720 UpdateAll()
2011-03-28 18:33:35.781 Requirement: ODSKC50
2011-03-28 18:33:35.781 RunCommand(ods-ksmutil update all)
2011-03-28 18:33:37.223 - runCommand: Process started, PID: 23587
2011-03-28 18:33:37.223 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:33:37.223 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:33:37.223 OUTPUT:	Repository SoftHSM found
2011-03-28 18:33:37.223 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:33:37.223 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:33:37.223 OUTPUT:	Policy default found
2011-03-28 18:33:37.223 OUTPUT:	Policy default2 found
2011-03-28 18:33:37.223 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:33:37.223 OUTPUT:	Zone ods found
2011-03-28 18:33:37.223 OUTPUT:	Policy set to default.
2011-03-28 18:33:37.223 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:33:37.223 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:33:37.223 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC50T100: Use a higher SOA Minimum (PT2M) then SOA TTL (PT60S) and confirm ods-kaspcheck fails

2011-03-28 18:33:37.224 06725 Comment: Use a higher SOA minimum than the SOA TTL. The ODS-Kaspcheck should fail for the kasp.xml and validate for the conf.xml.

2011-03-28 18:33:37.224 Requirement: ODSKC50

2011-03-28 18:33:37.224 06727 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:33:37.224 Requirement: ODSKC50

2011-03-28 18:33:37.224 06729 Stop()
2011-03-28 18:33:37.224 Requirement: ODSKC50
2011-03-28 18:33:37.224 RunCommand(ods-control stop)
2011-03-28 18:33:37.231 - runCommand: Process started, PID: 23595
2011-03-28 18:33:37.232 OUTPUT:	Stopping enforcer...
2011-03-28 18:33:37.232 OUTPUT:	Cannot find PID file
2011-03-28 18:33:37.232 OUTPUT:	Stopping signer engine..
2011-03-28 18:33:37.232 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:33:37.232 ERROR:	return code = 1
2011-03-28 18:33:37.232 RunCommand(ps -e | grep enforcer)
2011-03-28 18:33:37.249 - runCommand: Process started, PID: 23598
2011-03-28 18:33:37.249 ERROR:	return code = 1
2011-03-28 18:33:37.249 RunCommand(ps -e | grep signer)
2011-03-28 18:33:37.260 - runCommand: Process started, PID: 23601
2011-03-28 18:33:37.260 ERROR:	return code = 1

2011-03-28 18:33:37.260 06731 Wait(10)

2011-03-28 18:33:37.260 Requirement: ODSKC50

2011-03-28 18:33:47.261 06733 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:33:47.261 Requirement: ODSKC50

2011-03-28 18:33:47.261 06736 LoadConfig()
2011-03-28 18:33:47.261 Requirement: ODSKC50
2011-03-28 18:33:47.261 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:33:47.267 - runCommand: Process started, PID: 23604

2011-03-28 18:33:47.267 06739 LoadConfig()
2011-03-28 18:33:47.267 Requirement: ODSKC50
2011-03-28 18:33:47.267 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC50T100_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:33:47.273 - runCommand: Process started, PID: 23605

2011-03-28 18:33:47.273 06741 Comment: Update all the configs.

2011-03-28 18:33:47.273 Requirement: ODSKC50

2011-03-28 18:33:47.273 06743 UpdateAll()
2011-03-28 18:33:47.273 Requirement: ODSKC50
2011-03-28 18:33:47.273 RunCommand(ods-ksmutil update all)
2011-03-28 18:33:48.692 - runCommand: Process started, PID: 23606
2011-03-28 18:33:48.692 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:33:48.692 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:33:48.692 OUTPUT:	Repository SoftHSM found
2011-03-28 18:33:48.692 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:33:48.692 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:33:48.692 OUTPUT:	Policy default found
2011-03-28 18:33:48.692 OUTPUT:	Policy default2 found
2011-03-28 18:33:48.692 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:33:48.692 OUTPUT:	Zone ods found
2011-03-28 18:33:48.692 OUTPUT:	Policy set to default.
2011-03-28 18:33:48.692 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:33:48.692 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:33:48.692 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 18:33:48.692 06745 Wait(10)

2011-03-28 18:33:48.692 Requirement: ODSKC50

2011-03-28 18:33:58.693 06747 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:33:58.693 Requirement: ODSKC50

2011-03-28 18:33:58.693 06752 CheckLog()
2011-03-28 18:33:58.693 Requirement: ODSKC50

2011-03-28 18:33:58.978 06755 CheckLog()
2011-03-28 18:33:58.978 Requirement: ODSKC50

2011-03-28 18:33:59.256 06757 Comment: Reset the config files to the original ones.

2011-03-28 18:33:59.256 Requirement: ODSKC50

2011-03-28 18:33:59.256 06759 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:33:59.256 Requirement: ODSKC50

2011-03-28 18:33:59.256 06761 Stop()
2011-03-28 18:33:59.256 Requirement: ODSKC50
2011-03-28 18:33:59.256 RunCommand(ods-control stop)
2011-03-28 18:33:59.261 - runCommand: Process started, PID: 23614
2011-03-28 18:33:59.261 OUTPUT:	Stopping enforcer...
2011-03-28 18:33:59.261 OUTPUT:	Cannot find PID file
2011-03-28 18:33:59.261 OUTPUT:	Stopping signer engine..
2011-03-28 18:33:59.261 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:33:59.261 ERROR:	return code = 1
2011-03-28 18:33:59.261 RunCommand(ps -e | grep enforcer)
2011-03-28 18:33:59.273 - runCommand: Process started, PID: 23617
2011-03-28 18:33:59.273 ERROR:	return code = 1
2011-03-28 18:33:59.273 RunCommand(ps -e | grep signer)
2011-03-28 18:33:59.284 - runCommand: Process started, PID: 23620
2011-03-28 18:33:59.284 ERROR:	return code = 1

2011-03-28 18:33:59.284 06763 Wait(10)

2011-03-28 18:33:59.284 Requirement: ODSKC50

2011-03-28 18:34:09.284 06766 LoadConfig()
2011-03-28 18:34:09.284 Requirement: ODSKC50
2011-03-28 18:34:09.284 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:34:09.291 - runCommand: Process started, PID: 23626

2011-03-28 18:34:09.291 06769 LoadConfig()
2011-03-28 18:34:09.291 Requirement: ODSKC50
2011-03-28 18:34:09.291 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:34:09.297 - runCommand: Process started, PID: 23627

2011-03-28 18:34:09.297 06771 Comment: Update all the configs.

2011-03-28 18:34:09.297 Requirement: ODSKC50

2011-03-28 18:34:09.297 06773 UpdateAll()
2011-03-28 18:34:09.297 Requirement: ODSKC50
2011-03-28 18:34:09.297 RunCommand(ods-ksmutil update all)
2011-03-28 18:34:10.772 - runCommand: Process started, PID: 23628
2011-03-28 18:34:10.772 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:34:10.772 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:34:10.772 OUTPUT:	Repository SoftHSM found
2011-03-28 18:34:10.772 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:34:10.772 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:34:10.772 OUTPUT:	Policy default found
2011-03-28 18:34:10.773 OUTPUT:	Policy default2 found
2011-03-28 18:34:10.773 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:34:10.773 OUTPUT:	Zone ods found
2011-03-28 18:34:10.773 OUTPUT:	Policy set to default.
2011-03-28 18:34:10.773 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:34:10.773 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:34:10.773 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC50T110: Set SOA serial to Counter and confirm signed zone contains a serial one digit higher then serial of unsigned zone

2011-03-28 18:34:10.773 06778 Comment: Set SOA serial value to "counter", this will generate a serial value which is 1 number higer than the one in the unsigned zone. For example: Unsigned serial = 1000, the serial of the signed zone will become 1001.

2011-03-28 18:34:10.773 Requirement: ODSKC50

2011-03-28 18:34:10.773 06780 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:34:10.773 Requirement: ODSKC50

2011-03-28 18:34:10.773 06782 Stop()
2011-03-28 18:34:10.773 Requirement: ODSKC50
2011-03-28 18:34:10.774 RunCommand(ods-control stop)
2011-03-28 18:34:10.781 - runCommand: Process started, PID: 23636
2011-03-28 18:34:10.781 OUTPUT:	Stopping enforcer...
2011-03-28 18:34:10.781 OUTPUT:	Cannot find PID file
2011-03-28 18:34:10.781 OUTPUT:	Stopping signer engine..
2011-03-28 18:34:10.781 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:34:10.781 ERROR:	return code = 1
2011-03-28 18:34:10.781 RunCommand(ps -e | grep enforcer)
2011-03-28 18:34:10.800 - runCommand: Process started, PID: 23639
2011-03-28 18:34:10.800 ERROR:	return code = 1
2011-03-28 18:34:10.800 RunCommand(ps -e | grep signer)
2011-03-28 18:34:10.817 - runCommand: Process started, PID: 23642
2011-03-28 18:34:10.818 ERROR:	return code = 1

2011-03-28 18:34:10.818 06784 Wait(10)

2011-03-28 18:34:10.818 Requirement: ODSKC50

2011-03-28 18:34:20.818 06786 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:34:20.818 Requirement: ODSKC50

2011-03-28 18:34:20.818 06792 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 18:34:20.818 Requirement: ODSKC50

2011-03-28 18:34:20.818 06799 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:34:20.818 Requirement: ODSKC50

2011-03-28 18:34:20.819 06802 LoadConfig()
2011-03-28 18:34:20.819 Requirement: ODSKC50
2011-03-28 18:34:20.819 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:34:20.825 - runCommand: Process started, PID: 23645

2011-03-28 18:34:20.825 06805 LoadConfig()
2011-03-28 18:34:20.825 Requirement: ODSKC50
2011-03-28 18:34:20.825 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC50T110_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:34:20.831 - runCommand: Process started, PID: 23646

2011-03-28 18:34:20.831 06807 Comment: New setup for the configs and key repository

2011-03-28 18:34:20.831 Requirement: ODSKC50

2011-03-28 18:34:20.831 06811 Wait(10)

2011-03-28 18:34:20.831 Requirement: ODSKC50

2011-03-28 18:34:30.832 06813 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:34:30.832 Requirement: ODSKC50

2011-03-28 18:34:30.832 06815 Start()
2011-03-28 18:34:30.832 Requirement: ODSKC50
2011-03-28 18:34:30.832 RunCommand(ods-control start)
2011-03-28 18:34:30.834 - runCommand: Background process started, PID: 23647
2011-03-28 18:34:31.852 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:34:31.869 - runCommand: Process started, PID: 23662
2011-03-28 18:34:31.869 OUTPUT:	ods-enforcerd
2011-03-28 18:34:31.869 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:34:31.888 - runCommand: Process started, PID: 23667
2011-03-28 18:34:31.888 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:34:31.888 06817 Wait(20)

2011-03-28 18:34:31.888 Requirement: ODSKC50

2011-03-28 18:34:51.888 06819 Comment: Check if the signing of the ods zone is succesfull.

2011-03-28 18:34:51.888 Requirement: ODSKC50

2011-03-28 18:34:51.889 06823 CheckFilePresent(ods)
2011-03-28 18:34:51.889 Requirement: ODSKC50
2011-03-28 18:34:51.889 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 18:34:51.889 06825 Comment: Signed zone file should be present

2011-03-28 18:34:51.889 Requirement: ODSKC50

2011-03-28 18:34:51.889 06827 Comment: Check if the serial is one numerber higher than the serial in the unsigned ods zone. The serial should be 1001 in the signed ods zone.

2011-03-28 18:34:51.889 Requirement: ODSKC50

2011-03-28 18:34:51.889 06832 CheckLog()
2011-03-28 18:34:51.889 Requirement: ODSKC50
2011-03-28 18:34:52.176 FAILED:	(Check for Like) - Expected: 1001 Found: 

2011-03-28 18:34:52.177 06834 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:34:52.177 Requirement: ODSKC50

2011-03-28 18:34:52.177 06841 LoadConfig()
2011-03-28 18:34:52.177 Requirement: ODSKC50
2011-03-28 18:34:52.177 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:34:52.181 - runCommand: Process started, PID: 23680

2011-03-28 18:34:52.181 06844 LoadConfig()
2011-03-28 18:34:52.181 Requirement: ODSKC50
2011-03-28 18:34:52.181 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:34:52.185 - runCommand: Process started, PID: 23681

2011-03-28 18:34:52.185 06846 Comment: New setup for the configs and key repository

2011-03-28 18:34:52.185 Requirement: ODSKC50

2011-03-28 18:34:52.185 06850 Wait(10)

2011-03-28 18:34:52.185 Requirement: ODSKC50

2011-03-28 18:35:02.185 06852 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:35:02.185 Requirement: ODSKC50

2011-03-28 18:35:02.185 06854 Start()
2011-03-28 18:35:02.185 Requirement: ODSKC50
2011-03-28 18:35:02.185 RunCommand(ods-control start)
2011-03-28 18:35:02.188 - runCommand: Background process started, PID: 23682
2011-03-28 18:35:02.195 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:35:02.213 - runCommand: Process started, PID: 23689
2011-03-28 18:35:02.213 OUTPUT:	ods-enforcerd
2011-03-28 18:35:02.213 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:35:02.228 - runCommand: Process started, PID: 23693
2011-03-28 18:35:02.228 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:35:02.228 06856 Wait(30)

2011-03-28 18:35:02.228 Requirement: ODSKC50

2011-03-28 18:35:32.228 06858 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:35:32.228 Requirement: ODSKC50

2011-03-28 18:35:32.228 06860 Stop()
2011-03-28 18:35:32.228 Requirement: ODSKC50
2011-03-28 18:35:32.229 RunCommand(ods-control stop)
2011-03-28 18:35:33.240 - runCommand: Process started, PID: 23698
2011-03-28 18:35:33.240 OUTPUT:	Stopping enforcer...
2011-03-28 18:35:33.240 OUTPUT:	Stopping signer engine..
2011-03-28 18:35:33.240 OUTPUT:	Engine shut down.
2011-03-28 18:35:33.240 RunCommand(ps -e | grep enforcer)
2011-03-28 18:35:33.258 - runCommand: Process started, PID: 23705
2011-03-28 18:35:33.258 ERROR:	return code = 1
2011-03-28 18:35:33.258 RunCommand(ps -e | grep signer)
2011-03-28 18:35:33.272 - runCommand: Process started, PID: 23708
2011-03-28 18:35:33.272 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC50T120: Set SOA serial to Unixtime and confirm signed zone contains a serial equal to current unixtime

2011-03-28 18:35:33.272 06865 Comment: Set SOA serial value to "unixtime", this will generate a serial value which is equal to the current unixtime.

2011-03-28 18:35:33.272 Requirement: ODSKC50

2011-03-28 18:35:33.272 06867 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:35:33.272 Requirement: ODSKC50

2011-03-28 18:35:33.272 06869 Stop()
2011-03-28 18:35:33.272 Requirement: ODSKC50
2011-03-28 18:35:33.272 RunCommand(ods-control stop)
2011-03-28 18:35:33.277 - runCommand: Process started, PID: 23711
2011-03-28 18:35:33.277 OUTPUT:	Stopping enforcer...
2011-03-28 18:35:33.277 OUTPUT:	Cannot find PID file
2011-03-28 18:35:33.277 OUTPUT:	Stopping signer engine..
2011-03-28 18:35:33.277 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:35:33.277 ERROR:	return code = 1
2011-03-28 18:35:33.277 RunCommand(ps -e | grep enforcer)
2011-03-28 18:35:33.288 - runCommand: Process started, PID: 23714
2011-03-28 18:35:33.288 ERROR:	return code = 1
2011-03-28 18:35:33.288 RunCommand(ps -e | grep signer)
2011-03-28 18:35:33.301 - runCommand: Process started, PID: 23717
2011-03-28 18:35:33.301 ERROR:	return code = 1

2011-03-28 18:35:33.301 06871 Wait(10)

2011-03-28 18:35:33.301 Requirement: ODSKC50

2011-03-28 18:35:43.302 06873 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:35:43.302 Requirement: ODSKC50

2011-03-28 18:35:43.302 06879 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 18:35:43.302 Requirement: ODSKC50

2011-03-28 18:35:43.302 06886 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:35:43.302 Requirement: ODSKC50

2011-03-28 18:35:43.302 06889 LoadConfig()
2011-03-28 18:35:43.302 Requirement: ODSKC50
2011-03-28 18:35:43.302 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:35:43.309 - runCommand: Process started, PID: 23720

2011-03-28 18:35:43.309 06892 LoadConfig()
2011-03-28 18:35:43.309 Requirement: ODSKC50
2011-03-28 18:35:43.309 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC50T120_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:35:43.312 - runCommand: Process started, PID: 23721

2011-03-28 18:35:43.312 06894 Comment: New setup for the configs and key repository

2011-03-28 18:35:43.312 Requirement: ODSKC50

2011-03-28 18:35:43.313 06898 Wait(10)

2011-03-28 18:35:43.313 Requirement: ODSKC50

2011-03-28 18:35:53.313 06900 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:35:53.313 Requirement: ODSKC50

2011-03-28 18:35:53.313 06902 Start()
2011-03-28 18:35:53.313 Requirement: ODSKC50
2011-03-28 18:35:53.313 RunCommand(ods-control start)
2011-03-28 18:35:53.315 - runCommand: Background process started, PID: 23722
2011-03-28 18:35:54.333 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:35:54.353 - runCommand: Process started, PID: 23737
2011-03-28 18:35:54.353 OUTPUT:	ods-enforcerd
2011-03-28 18:35:54.354 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:35:54.371 - runCommand: Process started, PID: 23742
2011-03-28 18:35:54.371 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:35:54.371 06904 Wait(20)

2011-03-28 18:35:54.371 Requirement: ODSKC50

2011-03-28 18:36:14.371 06906 Comment: Check if the signing of the ods zone is succesfull.

2011-03-28 18:36:14.372 Requirement: ODSKC50

2011-03-28 18:36:14.372 06910 CheckFilePresent(ods)
2011-03-28 18:36:14.372 Requirement: ODSKC50
2011-03-28 18:36:14.372 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 18:36:14.372 06912 Comment: Signed zone file should be present

2011-03-28 18:36:14.372 Requirement: ODSKC50

2011-03-28 18:36:14.372 06914 Comment: Check if the serial is the current unix time

2011-03-28 18:36:14.372 Requirement: ODSKC50

2011-03-28 18:36:14.372 06919 CheckLog()
2011-03-28 18:36:14.372 Requirement: ODSKC50
2011-03-28 18:36:14.664 FAILED:	(Check for Like) - Expected: "still under investigation" Found: 

2011-03-28 18:36:14.665 06921 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:36:14.665 Requirement: ODSKC50

2011-03-28 18:36:14.665 06928 LoadConfig()
2011-03-28 18:36:14.665 Requirement: ODSKC50
2011-03-28 18:36:14.665 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:36:14.669 - runCommand: Process started, PID: 23755

2011-03-28 18:36:14.669 06931 LoadConfig()
2011-03-28 18:36:14.669 Requirement: ODSKC50
2011-03-28 18:36:14.669 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:36:14.672 - runCommand: Process started, PID: 23756

2011-03-28 18:36:14.673 06933 Comment: New setup for the configs and key repository

2011-03-28 18:36:14.673 Requirement: ODSKC50

2011-03-28 18:36:14.673 06937 Wait(10)

2011-03-28 18:36:14.673 Requirement: ODSKC50

2011-03-28 18:36:24.673 06939 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:36:24.673 Requirement: ODSKC50

2011-03-28 18:36:24.673 06941 Start()
2011-03-28 18:36:24.673 Requirement: ODSKC50
2011-03-28 18:36:24.673 RunCommand(ods-control start)
2011-03-28 18:36:24.676 - runCommand: Background process started, PID: 23757
2011-03-28 18:36:24.683 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:36:24.701 - runCommand: Process started, PID: 23764
2011-03-28 18:36:24.701 OUTPUT:	ods-enforcerd
2011-03-28 18:36:24.701 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:36:24.715 - runCommand: Process started, PID: 23768
2011-03-28 18:36:24.715 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:36:24.715 06943 Wait(30)

2011-03-28 18:36:24.715 Requirement: ODSKC50

2011-03-28 18:36:54.715 06945 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:36:54.715 Requirement: ODSKC50

2011-03-28 18:36:54.715 06947 Stop()
2011-03-28 18:36:54.715 Requirement: ODSKC50
2011-03-28 18:36:54.715 RunCommand(ods-control stop)
2011-03-28 18:36:55.727 - runCommand: Process started, PID: 23773
2011-03-28 18:36:55.727 OUTPUT:	Stopping enforcer...
2011-03-28 18:36:55.727 OUTPUT:	Stopping signer engine..
2011-03-28 18:36:55.727 OUTPUT:	Engine shut down.
2011-03-28 18:36:55.727 RunCommand(ps -e | grep enforcer)
2011-03-28 18:36:55.745 - runCommand: Process started, PID: 23780
2011-03-28 18:36:55.745 ERROR:	return code = 1
2011-03-28 18:36:55.745 RunCommand(ps -e | grep signer)
2011-03-28 18:36:55.760 - runCommand: Process started, PID: 23783
2011-03-28 18:36:55.760 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC50T130: Set SOA serial to Datecounter and confirm signed zone contains a serial corresponding to YYYYMMDDXX where XX is interval of that day

2011-03-28 18:36:55.760 06952 Comment: Set SOA serial value to "datecounter", this will generate a serial value in the format YYYYMMDDxx which is equal to thecurren date and time.

2011-03-28 18:36:55.760 Requirement: ODSKC50

2011-03-28 18:36:55.760 06954 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:36:55.760 Requirement: ODSKC50

2011-03-28 18:36:55.760 06956 Stop()
2011-03-28 18:36:55.760 Requirement: ODSKC50
2011-03-28 18:36:55.760 RunCommand(ods-control stop)
2011-03-28 18:36:55.765 - runCommand: Process started, PID: 23786
2011-03-28 18:36:55.765 OUTPUT:	Stopping enforcer...
2011-03-28 18:36:55.765 OUTPUT:	Cannot find PID file
2011-03-28 18:36:55.765 OUTPUT:	Stopping signer engine..
2011-03-28 18:36:55.765 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:36:55.765 ERROR:	return code = 1
2011-03-28 18:36:55.765 RunCommand(ps -e | grep enforcer)
2011-03-28 18:36:55.777 - runCommand: Process started, PID: 23789
2011-03-28 18:36:55.777 ERROR:	return code = 1
2011-03-28 18:36:55.777 RunCommand(ps -e | grep signer)
2011-03-28 18:36:55.791 - runCommand: Process started, PID: 23792
2011-03-28 18:36:55.791 ERROR:	return code = 1

2011-03-28 18:36:55.791 06958 Wait(10)

2011-03-28 18:36:55.791 Requirement: ODSKC50

2011-03-28 18:37:05.791 06960 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:37:05.791 Requirement: ODSKC50

2011-03-28 18:37:05.791 06966 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 18:37:05.791 Requirement: ODSKC50

2011-03-28 18:37:05.792 06973 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:37:05.792 Requirement: ODSKC50

2011-03-28 18:37:05.792 06976 LoadConfig()
2011-03-28 18:37:05.792 Requirement: ODSKC50
2011-03-28 18:37:05.792 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:37:05.798 - runCommand: Process started, PID: 23795

2011-03-28 18:37:05.798 06979 LoadConfig()
2011-03-28 18:37:05.798 Requirement: ODSKC50
2011-03-28 18:37:05.798 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC50T130_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:37:05.804 - runCommand: Process started, PID: 23796

2011-03-28 18:37:05.804 06981 Comment: New setup for the configs and key repository

2011-03-28 18:37:05.804 Requirement: ODSKC50

2011-03-28 18:37:05.805 06985 Wait(10)

2011-03-28 18:37:05.805 Requirement: ODSKC50

2011-03-28 18:37:15.805 06987 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:37:15.805 Requirement: ODSKC50

2011-03-28 18:37:15.805 06989 Start()
2011-03-28 18:37:15.805 Requirement: ODSKC50
2011-03-28 18:37:15.805 RunCommand(ods-control start)
2011-03-28 18:37:15.807 - runCommand: Background process started, PID: 23797
2011-03-28 18:37:16.825 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:37:16.838 - runCommand: Process started, PID: 23812
2011-03-28 18:37:16.838 OUTPUT:	ods-enforcerd
2011-03-28 18:37:16.838 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:37:16.855 - runCommand: Process started, PID: 23817
2011-03-28 18:37:16.855 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:37:16.855 06991 Wait(20)

2011-03-28 18:37:16.855 Requirement: ODSKC50

2011-03-28 18:37:36.856 06993 Comment: Check if the signing of the ods zone is succesfull.

2011-03-28 18:37:36.856 Requirement: ODSKC50

2011-03-28 18:37:36.856 06997 CheckFilePresent(ods)
2011-03-28 18:37:36.856 Requirement: ODSKC50
2011-03-28 18:37:36.856 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 18:37:36.856 06999 Comment: Signed zone file should be present

2011-03-28 18:37:36.856 Requirement: ODSKC50

2011-03-28 18:37:36.856 07001 Comment: Check if the serial is in the correct dateformat (YYYYMMDDxx format (xx is incremented within each day))

2011-03-28 18:37:36.856 Requirement: ODSKC50

2011-03-28 18:37:36.856 07006 CheckLog()
2011-03-28 18:37:36.856 Requirement: ODSKC50
2011-03-28 18:37:37.148 FAILED:	(Check for Like) - Expected: 2011032800 Found: 

2011-03-28 18:37:37.148 07008 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:37:37.148 Requirement: ODSKC50

2011-03-28 18:37:37.148 07015 LoadConfig()
2011-03-28 18:37:37.148 Requirement: ODSKC50
2011-03-28 18:37:37.148 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:37:37.152 - runCommand: Process started, PID: 23830

2011-03-28 18:37:37.152 07018 LoadConfig()
2011-03-28 18:37:37.152 Requirement: ODSKC50
2011-03-28 18:37:37.152 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:37:37.156 - runCommand: Process started, PID: 23831

2011-03-28 18:37:37.156 07020 Comment: New setup for the configs and key repository

2011-03-28 18:37:37.156 Requirement: ODSKC50

2011-03-28 18:37:37.156 07024 Wait(10)

2011-03-28 18:37:37.156 Requirement: ODSKC50

2011-03-28 18:37:47.156 07026 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:37:47.156 Requirement: ODSKC50

2011-03-28 18:37:47.157 07028 Start()
2011-03-28 18:37:47.157 Requirement: ODSKC50
2011-03-28 18:37:47.157 RunCommand(ods-control start)
2011-03-28 18:37:47.159 - runCommand: Background process started, PID: 23832
2011-03-28 18:37:47.164 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:37:47.176 - runCommand: Process started, PID: 23839
2011-03-28 18:37:47.176 OUTPUT:	ods-enforcerd
2011-03-28 18:37:47.176 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:37:47.192 - runCommand: Process started, PID: 23843
2011-03-28 18:37:47.192 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:37:47.192 07030 Wait(30)

2011-03-28 18:37:47.192 Requirement: ODSKC50

2011-03-28 18:38:17.192 07032 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:38:17.192 Requirement: ODSKC50

2011-03-28 18:38:17.192 07034 Stop()
2011-03-28 18:38:17.192 Requirement: ODSKC50
2011-03-28 18:38:17.192 RunCommand(ods-control stop)
2011-03-28 18:38:18.204 - runCommand: Process started, PID: 23848
2011-03-28 18:38:18.204 OUTPUT:	Stopping enforcer...
2011-03-28 18:38:18.204 OUTPUT:	Stopping signer engine..
2011-03-28 18:38:18.204 OUTPUT:	Engine shut down.
2011-03-28 18:38:18.204 RunCommand(ps -e | grep enforcer)
2011-03-28 18:38:18.222 - runCommand: Process started, PID: 23855
2011-03-28 18:38:18.222 ERROR:	return code = 1
2011-03-28 18:38:18.222 RunCommand(ps -e | grep signer)
2011-03-28 18:38:18.236 - runCommand: Process started, PID: 23858
2011-03-28 18:38:18.236 ERROR:	return code = 1

-------------------------------------------------------------------------------
Testcase - ODSKC50T140: Set SOA serial to Keep and confirm signed zone contains a serial corresponding to serial of unsigned zone

2011-03-28 18:38:18.236 07038 Comment: Set SOA serial value to "keep", this will generate a serial which is equal to the serial in the unsigned zonefile.

2011-03-28 18:38:18.236 Requirement: ODSKC50

2011-03-28 18:38:18.236 07040 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:38:18.236 Requirement: ODSKC50

2011-03-28 18:38:18.236 07042 Stop()
2011-03-28 18:38:18.236 Requirement: ODSKC50
2011-03-28 18:38:18.237 RunCommand(ods-control stop)
2011-03-28 18:38:18.241 - runCommand: Process started, PID: 23861
2011-03-28 18:38:18.241 OUTPUT:	Stopping enforcer...
2011-03-28 18:38:18.241 OUTPUT:	Cannot find PID file
2011-03-28 18:38:18.241 OUTPUT:	Stopping signer engine..
2011-03-28 18:38:18.241 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:38:18.241 ERROR:	return code = 1
2011-03-28 18:38:18.241 RunCommand(ps -e | grep enforcer)
2011-03-28 18:38:18.252 - runCommand: Process started, PID: 23864
2011-03-28 18:38:18.252 ERROR:	return code = 1
2011-03-28 18:38:18.252 RunCommand(ps -e | grep signer)
2011-03-28 18:38:18.265 - runCommand: Process started, PID: 23867
2011-03-28 18:38:18.265 ERROR:	return code = 1

2011-03-28 18:38:18.265 07044 Wait(10)

2011-03-28 18:38:18.265 Requirement: ODSKC50

2011-03-28 18:38:28.265 07046 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:38:28.265 Requirement: ODSKC50

2011-03-28 18:38:28.265 07052 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 18:38:28.266 Requirement: ODSKC50

2011-03-28 18:38:28.266 07059 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:38:28.266 Requirement: ODSKC50

2011-03-28 18:38:28.266 07062 LoadConfig()
2011-03-28 18:38:28.266 Requirement: ODSKC50
2011-03-28 18:38:28.266 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:38:28.272 - runCommand: Process started, PID: 23870

2011-03-28 18:38:28.272 07065 LoadConfig()
2011-03-28 18:38:28.272 Requirement: ODSKC50
2011-03-28 18:38:28.272 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC50T140_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:38:28.278 - runCommand: Process started, PID: 23871

2011-03-28 18:38:28.278 07067 Comment: New setup for the configs and key repository

2011-03-28 18:38:28.278 Requirement: ODSKC50

2011-03-28 18:38:28.278 07071 Wait(10)

2011-03-28 18:38:28.278 Requirement: ODSKC50

2011-03-28 18:38:38.279 07073 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:38:38.279 Requirement: ODSKC50

2011-03-28 18:38:38.279 07075 Start()
2011-03-28 18:38:38.279 Requirement: ODSKC50
2011-03-28 18:38:38.279 RunCommand(ods-control start)
2011-03-28 18:38:38.281 - runCommand: Background process started, PID: 23872
2011-03-28 18:38:39.299 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:38:39.322 - runCommand: Process started, PID: 23887
2011-03-28 18:38:39.322 OUTPUT:	ods-enforcerd
2011-03-28 18:38:39.322 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:38:39.338 - runCommand: Process started, PID: 23900
2011-03-28 18:38:39.338 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:38:39.338 07077 Wait(20)

2011-03-28 18:38:39.338 Requirement: ODSKC50

2011-03-28 18:38:59.339 07079 Comment: Check if the signing of the ods zone is succesfull.

2011-03-28 18:38:59.339 Requirement: ODSKC50

2011-03-28 18:38:59.339 07083 CheckFilePresent(ods)
2011-03-28 18:38:59.339 Requirement: ODSKC50
2011-03-28 18:38:59.339 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 18:38:59.339 07085 Comment: Signed zone file should be present

2011-03-28 18:38:59.339 Requirement: ODSKC50

2011-03-28 18:38:59.339 07087 Comment: Check if the serial is the same as the serial from the unsigned zonefile.

2011-03-28 18:38:59.339 Requirement: ODSKC50

2011-03-28 18:38:59.339 07092 CheckLog()
2011-03-28 18:38:59.339 Requirement: ODSKC50
2011-03-28 18:38:59.636 FAILED:	(Check for Like) - Expected: 1000 Found: 

2011-03-28 18:38:59.636 07094 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:38:59.636 Requirement: ODSKC50

2011-03-28 18:38:59.636 07101 LoadConfig()
2011-03-28 18:38:59.636 Requirement: ODSKC50
2011-03-28 18:38:59.636 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:38:59.640 - runCommand: Process started, PID: 23905

2011-03-28 18:38:59.641 07104 LoadConfig()
2011-03-28 18:38:59.641 Requirement: ODSKC50
2011-03-28 18:38:59.641 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:38:59.644 - runCommand: Process started, PID: 23906

2011-03-28 18:38:59.644 07106 Comment: New setup for the configs and key repository

2011-03-28 18:38:59.644 Requirement: ODSKC50

2011-03-28 18:38:59.644 07110 Wait(10)

2011-03-28 18:38:59.644 Requirement: ODSKC50

2011-03-28 18:39:09.644 07112 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:39:09.645 Requirement: ODSKC50

2011-03-28 18:39:09.645 07114 Start()
2011-03-28 18:39:09.645 Requirement: ODSKC50
2011-03-28 18:39:09.645 RunCommand(ods-control start)
2011-03-28 18:39:09.647 - runCommand: Background process started, PID: 23907
2011-03-28 18:39:09.653 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:39:09.665 - runCommand: Process started, PID: 23914
2011-03-28 18:39:09.665 OUTPUT:	ods-enforcerd
2011-03-28 18:39:09.665 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:39:09.680 - runCommand: Process started, PID: 23918
2011-03-28 18:39:09.680 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:39:09.680 07116 Wait(30)

2011-03-28 18:39:09.680 Requirement: ODSKC50

2011-03-28 18:39:39.681 07118 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:39:39.681 Requirement: ODSKC50

2011-03-28 18:39:39.681 07120 Stop()
2011-03-28 18:39:39.681 Requirement: ODSKC50
2011-03-28 18:39:39.681 RunCommand(ods-control stop)
2011-03-28 18:39:40.692 - runCommand: Process started, PID: 23923
2011-03-28 18:39:40.692 OUTPUT:	Stopping enforcer...
2011-03-28 18:39:40.692 OUTPUT:	Stopping signer engine..
2011-03-28 18:39:40.692 OUTPUT:	Engine shut down.
2011-03-28 18:39:40.692 RunCommand(ps -e | grep enforcer)
2011-03-28 18:39:40.710 - runCommand: Process started, PID: 23930
2011-03-28 18:39:40.710 ERROR:	return code = 1
2011-03-28 18:39:40.710 RunCommand(ps -e | grep signer)
2011-03-28 18:39:40.728 - runCommand: Process started, PID: 23933
2011-03-28 18:39:40.728 ERROR:	return code = 1
Testcondition - ODSKC60: The Parent part located in kasp.xml should conform to several constraints and requirements

-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSKC60T10: Use a value with an incorrect format for PropagationDelay (0) and confirm ods-kaspcheck fails

2011-03-28 18:39:40.728 07129 Comment: PropogationDelay value in the parent part (general part) is incorrect: 0 instead of a valid value like PT12H. Ods-kaspcheck validation should fail for kasp.xml.

2011-03-28 18:39:40.728 Requirement: ODSKC60

2011-03-28 18:39:40.729 07131 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:39:40.729 Requirement: ODSKC60

2011-03-28 18:39:40.729 07133 Stop()
2011-03-28 18:39:40.729 Requirement: ODSKC60
2011-03-28 18:39:40.729 RunCommand(ods-control stop)
2011-03-28 18:39:40.736 - runCommand: Process started, PID: 23936
2011-03-28 18:39:40.736 OUTPUT:	Stopping enforcer...
2011-03-28 18:39:40.736 OUTPUT:	Cannot find PID file
2011-03-28 18:39:40.736 OUTPUT:	Stopping signer engine..
2011-03-28 18:39:40.736 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:39:40.736 ERROR:	return code = 1
2011-03-28 18:39:40.736 RunCommand(ps -e | grep enforcer)
2011-03-28 18:39:40.753 - runCommand: Process started, PID: 23939
2011-03-28 18:39:40.753 ERROR:	return code = 1
2011-03-28 18:39:40.753 RunCommand(ps -e | grep signer)
2011-03-28 18:39:40.765 - runCommand: Process started, PID: 23942
2011-03-28 18:39:40.765 ERROR:	return code = 1

2011-03-28 18:39:40.765 07135 Wait(10)

2011-03-28 18:39:40.765 Requirement: ODSKC60

2011-03-28 18:39:50.765 07137 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:39:50.765 Requirement: ODSKC60

2011-03-28 18:39:50.765 07140 LoadConfig()
2011-03-28 18:39:50.765 Requirement: ODSKC60
2011-03-28 18:39:50.765 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:39:50.772 - runCommand: Process started, PID: 23945

2011-03-28 18:39:50.772 07143 LoadConfig()
2011-03-28 18:39:50.772 Requirement: ODSKC60
2011-03-28 18:39:50.772 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC60T10_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:39:50.777 - runCommand: Process started, PID: 23946

2011-03-28 18:39:50.778 07145 Comment: Update all the configs.

2011-03-28 18:39:50.778 Requirement: ODSKC60

2011-03-28 18:39:50.778 07147 UpdateAll()
2011-03-28 18:39:50.778 Requirement: ODSKC60
2011-03-28 18:39:50.778 RunCommand(ods-ksmutil update all)
2011-03-28 18:39:51.115 - runCommand: Process started, PID: 23947
2011-03-28 18:39:51.115 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:39:51.115 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:39:51.115 OUTPUT:	Repository SoftHSM found
2011-03-28 18:39:51.115 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:39:51.115 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:39:51.115 OUTPUT:	Error validating file "/etc/opendnssec/kasp.xml"
2011-03-28 18:39:51.115 OUTPUT:	Failed to update policies
2011-03-28 18:39:51.115 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:39:51.115 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:39:51.115 ERROR:	/etc/opendnssec/kasp.xml:69: element PropagationDelay: Relax-NG validity error : Type duration doesn't allow value '0'
2011-03-28 18:39:51.115 ERROR:	/etc/opendnssec/kasp.xml:69: element PropagationDelay: Relax-NG validity error : Error validating datatype duration
2011-03-28 18:39:51.115 ERROR:	/etc/opendnssec/kasp.xml:69: element PropagationDelay: Relax-NG validity error : Element PropagationDelay failed to validate content
2011-03-28 18:39:51.115 ERROR:	/etc/opendnssec/kasp.xml fails to validate
2011-03-28 18:39:51.115 ERROR:	/etc/opendnssec/kasp.xml:69: element PropagationDelay: Relax-NG validity error : Type duration doesn't allow value '0'
2011-03-28 18:39:51.115 ERROR:	/etc/opendnssec/kasp.xml:69: element PropagationDelay: Relax-NG validity error : Error validating datatype duration
2011-03-28 18:39:51.115 ERROR:	/etc/opendnssec/kasp.xml:69: element PropagationDelay: Relax-NG validity error : Element PropagationDelay failed to validate content
2011-03-28 18:39:51.115 ERROR:	return code = 1

2011-03-28 18:39:51.115 07149 Wait(10)

2011-03-28 18:39:51.115 Requirement: ODSKC60

2011-03-28 18:40:01.115 07151 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:40:01.115 Requirement: ODSKC60

2011-03-28 18:40:01.115 07156 CheckLog()
2011-03-28 18:40:01.115 Requirement: ODSKC60
2011-03-28 18:40:01.412 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 18:40:01.413 07159 CheckLog()
2011-03-28 18:40:01.413 Requirement: ODSKC60
2011-03-28 18:40:01.701 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml fails to validate Found: 

2011-03-28 18:40:01.701 07162 CheckLog()
2011-03-28 18:40:01.701 Requirement: ODSKC60
2011-03-28 18:40:01.989 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml:123: element PropogationDelay: Relax-NG validity error : Type duration doesn't allow value '0' Found: 

2011-03-28 18:40:01.990 07164 Comment: Reset the config files to the original ones.

2011-03-28 18:40:01.990 Requirement: ODSKC60

2011-03-28 18:40:01.990 07166 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:40:01.990 Requirement: ODSKC60

2011-03-28 18:40:01.990 07168 Stop()
2011-03-28 18:40:01.990 Requirement: ODSKC60
2011-03-28 18:40:01.990 RunCommand(ods-control stop)
2011-03-28 18:40:01.995 - runCommand: Process started, PID: 23955
2011-03-28 18:40:01.995 OUTPUT:	Stopping enforcer...
2011-03-28 18:40:01.995 OUTPUT:	Cannot find PID file
2011-03-28 18:40:01.995 OUTPUT:	Stopping signer engine..
2011-03-28 18:40:01.995 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:40:01.995 ERROR:	return code = 1
2011-03-28 18:40:01.995 RunCommand(ps -e | grep enforcer)
2011-03-28 18:40:02.640 - runCommand: Process started, PID: 23958
2011-03-28 18:40:02.649 ERROR:	return code = 1
2011-03-28 18:40:02.651 RunCommand(ps -e | grep signer)
2011-03-28 18:40:02.180 - runCommand: Process started, PID: 23961
2011-03-28 18:40:02.180 ERROR:	return code = 1

2011-03-28 18:40:02.182 07170 Wait(10)

2011-03-28 18:40:02.182 Requirement: ODSKC60

2011-03-28 18:40:12.184 07173 LoadConfig()
2011-03-28 18:40:12.185 Requirement: ODSKC60
2011-03-28 18:40:12.185 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:40:12.247 - runCommand: Process started, PID: 23964

2011-03-28 18:40:12.250 07176 LoadConfig()
2011-03-28 18:40:12.250 Requirement: ODSKC60
2011-03-28 18:40:12.251 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:40:12.306 - runCommand: Process started, PID: 23965

2011-03-28 18:40:12.309 07178 Comment: Update all the configs.

2011-03-28 18:40:12.310 Requirement: ODSKC60

2011-03-28 18:40:12.311 07180 UpdateAll()
2011-03-28 18:40:12.311 Requirement: ODSKC60
2011-03-28 18:40:12.312 RunCommand(ods-ksmutil update all)
2011-03-28 18:40:13.445 - runCommand: Process started, PID: 23966
2011-03-28 18:40:13.445 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:40:13.445 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:40:13.445 OUTPUT:	Repository SoftHSM found
2011-03-28 18:40:13.445 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:40:13.445 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:40:13.445 OUTPUT:	Policy default found
2011-03-28 18:40:13.445 OUTPUT:	Policy default2 found
2011-03-28 18:40:13.445 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:40:13.445 OUTPUT:	Zone ods found
2011-03-28 18:40:13.445 OUTPUT:	Policy set to default.
2011-03-28 18:40:13.445 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:40:13.445 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:40:13.445 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC60T20: Use a very high value for PropagationDelay (P1Y) and confirm ods-kaspcheck runs successfully

2011-03-28 18:40:13.446 07185 Comment: PropagationDelay value is very high (1 year: P1Y). Ods-kaspcheck should validate both kasp.xml as conf.xml.

2011-03-28 18:40:13.446 Requirement: ODSKC60

2011-03-28 18:40:13.446 07187 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:40:13.446 Requirement: ODSKC60

2011-03-28 18:40:13.446 07189 Stop()
2011-03-28 18:40:13.446 Requirement: ODSKC60
2011-03-28 18:40:13.446 RunCommand(ods-control stop)
2011-03-28 18:40:13.454 - runCommand: Process started, PID: 23974
2011-03-28 18:40:13.454 OUTPUT:	Stopping enforcer...
2011-03-28 18:40:13.454 OUTPUT:	Cannot find PID file
2011-03-28 18:40:13.454 OUTPUT:	Stopping signer engine..
2011-03-28 18:40:13.454 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:40:13.454 ERROR:	return code = 1
2011-03-28 18:40:13.454 RunCommand(ps -e | grep enforcer)
2011-03-28 18:40:13.471 - runCommand: Process started, PID: 23977
2011-03-28 18:40:13.471 ERROR:	return code = 1
2011-03-28 18:40:13.471 RunCommand(ps -e | grep signer)
2011-03-28 18:40:13.489 - runCommand: Process started, PID: 23980
2011-03-28 18:40:13.489 ERROR:	return code = 1

2011-03-28 18:40:13.489 07191 Wait(10)

2011-03-28 18:40:13.489 Requirement: ODSKC60

2011-03-28 18:40:23.489 07193 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:40:23.490 Requirement: ODSKC60

2011-03-28 18:40:23.490 07196 LoadConfig()
2011-03-28 18:40:23.490 Requirement: ODSKC60
2011-03-28 18:40:23.490 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:40:23.496 - runCommand: Process started, PID: 23983

2011-03-28 18:40:23.496 07199 LoadConfig()
2011-03-28 18:40:23.496 Requirement: ODSKC60
2011-03-28 18:40:23.496 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC60T20_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:40:23.502 - runCommand: Process started, PID: 23984

2011-03-28 18:40:23.502 07201 Comment: Update all the configs.

2011-03-28 18:40:23.502 Requirement: ODSKC60

2011-03-28 18:40:23.502 07203 UpdateAll()
2011-03-28 18:40:23.502 Requirement: ODSKC60
2011-03-28 18:40:23.502 RunCommand(ods-ksmutil update all)
2011-03-28 18:40:24.989 - runCommand: Process started, PID: 23985
2011-03-28 18:40:24.989 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:40:24.989 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:40:24.989 OUTPUT:	Repository SoftHSM found
2011-03-28 18:40:24.989 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:40:24.989 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:40:24.989 OUTPUT:	Policy default found
2011-03-28 18:40:24.989 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:40:24.989 OUTPUT:	Policy default2 found
2011-03-28 18:40:24.989 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:40:24.989 OUTPUT:	Zone ods found
2011-03-28 18:40:24.989 OUTPUT:	Policy set to default.
2011-03-28 18:40:24.989 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:40:24.989 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:40:24.989 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 18:40:24.990 07205 Wait(10)

2011-03-28 18:40:24.990 Requirement: ODSKC60

2011-03-28 18:40:34.990 07207 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:40:34.990 Requirement: ODSKC60

2011-03-28 18:40:34.990 07212 CheckLog()
2011-03-28 18:40:34.990 Requirement: ODSKC60
2011-03-28 18:40:35.286 FAILED:	(Check for Like) - Expected: /etc/opendnssec/conf.xml validates Found: 

2011-03-28 18:40:35.287 07215 CheckLog()
2011-03-28 18:40:35.287 Requirement: ODSKC60
2011-03-28 18:40:35.575 FAILED:	(Check for Like) - Expected: /etc/opendnssec/kasp.xml validates Found: 

2011-03-28 18:40:35.575 07218 Comment: Reset the config files to the original ones.

2011-03-28 18:40:35.575 Requirement: ODSKC60

2011-03-28 18:40:35.575 07220 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:40:35.575 Requirement: ODSKC60

2011-03-28 18:40:35.575 07222 Stop()
2011-03-28 18:40:35.575 Requirement: ODSKC60
2011-03-28 18:40:35.575 RunCommand(ods-control stop)
2011-03-28 18:40:35.580 - runCommand: Process started, PID: 23993
2011-03-28 18:40:35.580 OUTPUT:	Stopping enforcer...
2011-03-28 18:40:35.580 OUTPUT:	Cannot find PID file
2011-03-28 18:40:35.580 OUTPUT:	Stopping signer engine..
2011-03-28 18:40:35.580 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:40:35.580 ERROR:	return code = 1
2011-03-28 18:40:35.580 RunCommand(ps -e | grep enforcer)
2011-03-28 18:40:35.591 - runCommand: Process started, PID: 23996
2011-03-28 18:40:35.591 ERROR:	return code = 1
2011-03-28 18:40:35.591 RunCommand(ps -e | grep signer)
2011-03-28 18:40:35.602 - runCommand: Process started, PID: 23999
2011-03-28 18:40:35.603 ERROR:	return code = 1

2011-03-28 18:40:35.603 07224 Wait(10)

2011-03-28 18:40:35.603 Requirement: ODSKC60

2011-03-28 18:40:45.603 07227 LoadConfig()
2011-03-28 18:40:45.603 Requirement: ODSKC60
2011-03-28 18:40:45.603 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:40:45.609 - runCommand: Process started, PID: 24002

2011-03-28 18:40:45.609 07230 LoadConfig()
2011-03-28 18:40:45.609 Requirement: ODSKC60
2011-03-28 18:40:45.610 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:40:45.615 - runCommand: Process started, PID: 24003

2011-03-28 18:40:45.617 07232 Comment: Update all the configs.

2011-03-28 18:40:45.617 Requirement: ODSKC60

2011-03-28 18:40:45.617 07234 UpdateAll()
2011-03-28 18:40:45.617 Requirement: ODSKC60
2011-03-28 18:40:45.617 RunCommand(ods-ksmutil update all)
2011-03-28 18:40:47.449 - runCommand: Process started, PID: 24004
2011-03-28 18:40:47.450 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:40:47.450 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:40:47.450 OUTPUT:	Repository SoftHSM found
2011-03-28 18:40:47.450 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:40:47.451 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:40:47.451 OUTPUT:	Policy default found
2011-03-28 18:40:47.451 OUTPUT:	Policy default2 found
2011-03-28 18:40:47.451 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:40:47.451 OUTPUT:	Zone ods found
2011-03-28 18:40:47.451 OUTPUT:	Policy set to default.
2011-03-28 18:40:47.452 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:40:47.452 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:40:47.452 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC60T30: Deactivate PropagationDelay (PT0S) and confirm ods-kaspcheck fails

2011-03-28 18:40:47.457 07240 Comment: Deactivate the PropagationDelay value for the zone by setting it to PT0S (0 seconds).  Logically spoken: the Ods-kaspcheck should validate for conf.xml and not for kasp.xml. (note: this is not well documented). According to the developpers the kasp.xml should be validated correctly.

2011-03-28 18:40:47.458 Requirement: ODSKC60

2011-03-28 18:40:47.459 07242 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:40:47.459 Requirement: ODSKC60

2011-03-28 18:40:47.461 07244 Stop()
2011-03-28 18:40:47.461 Requirement: ODSKC60
2011-03-28 18:40:47.461 RunCommand(ods-control stop)
2011-03-28 18:40:47.535 - runCommand: Process started, PID: 24012
2011-03-28 18:40:47.535 OUTPUT:	Stopping enforcer...
2011-03-28 18:40:47.536 OUTPUT:	Cannot find PID file
2011-03-28 18:40:47.536 OUTPUT:	Stopping signer engine..
2011-03-28 18:40:47.536 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:40:47.536 ERROR:	return code = 1
2011-03-28 18:40:47.536 RunCommand(ps -e | grep enforcer)
2011-03-28 18:40:47.697 - runCommand: Process started, PID: 24015
2011-03-28 18:40:47.698 ERROR:	return code = 1
2011-03-28 18:40:47.698 RunCommand(ps -e | grep signer)
2011-03-28 18:40:47.809 - runCommand: Process started, PID: 24018
2011-03-28 18:40:47.810 ERROR:	return code = 1

2011-03-28 18:40:47.811 07246 Wait(10)

2011-03-28 18:40:47.811 Requirement: ODSKC60

2011-03-28 18:40:57.813 07248 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:40:57.814 Requirement: ODSKC60

2011-03-28 18:40:57.815 07251 LoadConfig()
2011-03-28 18:40:57.816 Requirement: ODSKC60
2011-03-28 18:40:57.816 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:40:57.878 - runCommand: Process started, PID: 24021

2011-03-28 18:40:57.881 07254 LoadConfig()
2011-03-28 18:40:57.881 Requirement: ODSKC60
2011-03-28 18:40:57.881 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC60T30_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:40:57.937 - runCommand: Process started, PID: 24022

2011-03-28 18:40:57.940 07256 Comment: Update all the configs.

2011-03-28 18:40:57.940 Requirement: ODSKC60

2011-03-28 18:40:57.941 07258 UpdateAll()
2011-03-28 18:40:57.942 Requirement: ODSKC60
2011-03-28 18:40:57.942 RunCommand(ods-ksmutil update all)
2011-03-28 18:40:58.480 - runCommand: Process started, PID: 24023
2011-03-28 18:40:58.480 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:40:58.480 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:40:58.480 OUTPUT:	Repository SoftHSM found
2011-03-28 18:40:58.480 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:40:58.480 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:40:58.480 OUTPUT:	Policy default found
2011-03-28 18:40:58.480 OUTPUT:	Policy default2 found
2011-03-28 18:40:58.480 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:40:58.480 OUTPUT:	Zone ods found
2011-03-28 18:40:58.481 OUTPUT:	Policy set to default.
2011-03-28 18:40:58.481 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:40:58.481 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:40:58.481 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 18:40:58.481 07260 Wait(10)

2011-03-28 18:40:58.481 Requirement: ODSKC60

2011-03-28 18:41:08.481 07262 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:41:08.481 Requirement: ODSKC60

2011-03-28 18:41:08.481 07267 CheckLog()
2011-03-28 18:41:08.481 Requirement: ODSKC60

2011-03-28 18:41:08.776 07270 CheckLog()
2011-03-28 18:41:08.776 Requirement: ODSKC60

2011-03-28 18:41:09.663 07272 Comment: Reset the config files to the original ones.

2011-03-28 18:41:09.663 Requirement: ODSKC60

2011-03-28 18:41:09.664 07274 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:41:09.664 Requirement: ODSKC60

2011-03-28 18:41:09.665 07276 Stop()
2011-03-28 18:41:09.665 Requirement: ODSKC60
2011-03-28 18:41:09.665 RunCommand(ods-control stop)
2011-03-28 18:41:09.715 - runCommand: Process started, PID: 24031
2011-03-28 18:41:09.715 OUTPUT:	Stopping enforcer...
2011-03-28 18:41:09.715 OUTPUT:	Cannot find PID file
2011-03-28 18:41:09.716 OUTPUT:	Stopping signer engine..
2011-03-28 18:41:09.716 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:41:09.716 ERROR:	return code = 1
2011-03-28 18:41:09.716 RunCommand(ps -e | grep enforcer)
2011-03-28 18:41:09.824 - runCommand: Process started, PID: 24034
2011-03-28 18:41:09.825 ERROR:	return code = 1
2011-03-28 18:41:09.825 RunCommand(ps -e | grep signer)
2011-03-28 18:41:09.936 - runCommand: Process started, PID: 24037
2011-03-28 18:41:09.936 ERROR:	return code = 1

2011-03-28 18:41:09.938 07278 Wait(10)

2011-03-28 18:41:09.938 Requirement: ODSKC60

2011-03-28 18:41:19.940 07281 LoadConfig()
2011-03-28 18:41:19.941 Requirement: ODSKC60
2011-03-28 18:41:19.941 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:41:19.100 - runCommand: Process started, PID: 24040

2011-03-28 18:41:19.100 07284 LoadConfig()
2011-03-28 18:41:19.100 Requirement: ODSKC60
2011-03-28 18:41:19.100 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:41:19.106 - runCommand: Process started, PID: 24041

2011-03-28 18:41:19.106 07286 Comment: Update all the configs.

2011-03-28 18:41:19.106 Requirement: ODSKC60

2011-03-28 18:41:19.106 07288 UpdateAll()
2011-03-28 18:41:19.106 Requirement: ODSKC60
2011-03-28 18:41:19.106 RunCommand(ods-ksmutil update all)
2011-03-28 18:41:20.452 - runCommand: Process started, PID: 24042
2011-03-28 18:41:20.452 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:41:20.452 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:41:20.452 OUTPUT:	Repository SoftHSM found
2011-03-28 18:41:20.452 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:41:20.453 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:41:20.453 OUTPUT:	Policy default found
2011-03-28 18:41:20.453 OUTPUT:	Policy default2 found
2011-03-28 18:41:20.453 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:41:20.453 OUTPUT:	Zone ods found
2011-03-28 18:41:20.453 OUTPUT:	Policy set to default.
2011-03-28 18:41:20.453 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:41:20.453 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:41:20.453 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC60T40: Use a value with an incorrect format for DS TTL (360) and confirm ods-kaspcheck fails

2011-03-28 18:41:20.453 07293 Comment: DS TTL value in the zone part (general part) is incorrect: 360 instead of a valid value like PT12H. Ods-kaspcheck validation should fail for kasp.xml.

2011-03-28 18:41:20.453 Requirement: ODSKC60

2011-03-28 18:41:20.453 07295 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:41:20.453 Requirement: ODSKC60

2011-03-28 18:41:20.454 07297 Stop()
2011-03-28 18:41:20.454 Requirement: ODSKC60
2011-03-28 18:41:20.454 RunCommand(ods-control stop)
2011-03-28 18:41:20.461 - runCommand: Process started, PID: 24050
2011-03-28 18:41:20.461 OUTPUT:	Stopping enforcer...
2011-03-28 18:41:20.461 OUTPUT:	Cannot find PID file
2011-03-28 18:41:20.461 OUTPUT:	Stopping signer engine..
2011-03-28 18:41:20.461 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:41:20.461 ERROR:	return code = 1
2011-03-28 18:41:20.461 RunCommand(ps -e | grep enforcer)
2011-03-28 18:41:20.477 - runCommand: Process started, PID: 24053
2011-03-28 18:41:20.477 ERROR:	return code = 1
2011-03-28 18:41:20.477 RunCommand(ps -e | grep signer)
2011-03-28 18:41:20.488 - runCommand: Process started, PID: 24056
2011-03-28 18:41:20.488 ERROR:	return code = 1

2011-03-28 18:41:20.489 07299 Wait(10)

2011-03-28 18:41:20.489 Requirement: ODSKC60

2011-03-28 18:41:30.489 07301 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:41:30.489 Requirement: ODSKC60

2011-03-28 18:41:30.489 07304 LoadConfig()
2011-03-28 18:41:30.489 Requirement: ODSKC60
2011-03-28 18:41:30.489 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:41:30.495 - runCommand: Process started, PID: 24059

2011-03-28 18:41:30.496 07307 LoadConfig()
2011-03-28 18:41:30.496 Requirement: ODSKC60
2011-03-28 18:41:30.496 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC60T40_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:41:30.501 - runCommand: Process started, PID: 24060

2011-03-28 18:41:30.501 07309 Comment: Update all the configs.

2011-03-28 18:41:30.501 Requirement: ODSKC60

2011-03-28 18:41:30.502 07311 UpdateAll()
2011-03-28 18:41:30.502 Requirement: ODSKC60
2011-03-28 18:41:30.502 RunCommand(ods-ksmutil update all)
2011-03-28 18:41:30.859 - runCommand: Process started, PID: 24061
2011-03-28 18:41:30.860 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:41:30.860 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:41:30.860 OUTPUT:	Repository SoftHSM found
2011-03-28 18:41:30.860 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:41:30.860 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:41:30.860 OUTPUT:	Error validating file "/etc/opendnssec/kasp.xml"
2011-03-28 18:41:30.860 OUTPUT:	Failed to update policies
2011-03-28 18:41:30.860 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:41:30.860 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:41:30.860 ERROR:	/etc/opendnssec/kasp.xml:71: element TTL: Relax-NG validity error : Type duration doesn't allow value '360'
2011-03-28 18:41:30.860 ERROR:	/etc/opendnssec/kasp.xml:71: element TTL: Relax-NG validity error : Error validating datatype duration
2011-03-28 18:41:30.860 ERROR:	/etc/opendnssec/kasp.xml:71: element TTL: Relax-NG validity error : Element TTL failed to validate content
2011-03-28 18:41:30.860 ERROR:	/etc/opendnssec/kasp.xml fails to validate
2011-03-28 18:41:30.860 ERROR:	/etc/opendnssec/kasp.xml:71: element TTL: Relax-NG validity error : Type duration doesn't allow value '360'
2011-03-28 18:41:30.860 ERROR:	/etc/opendnssec/kasp.xml:71: element TTL: Relax-NG validity error : Error validating datatype duration
2011-03-28 18:41:30.860 ERROR:	/etc/opendnssec/kasp.xml:71: element TTL: Relax-NG validity error : Element TTL failed to validate content
2011-03-28 18:41:30.860 ERROR:	return code = 1

2011-03-28 18:41:30.860 07313 Wait(10)

2011-03-28 18:41:30.860 Requirement: ODSKC60

2011-03-28 18:41:40.860 07315 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:41:40.860 Requirement: ODSKC60

2011-03-28 18:41:40.860 07320 CheckLog()
2011-03-28 18:41:40.860 Requirement: ODSKC60

2011-03-28 18:41:41.155 07323 CheckLog()
2011-03-28 18:41:41.155 Requirement: ODSKC60

2011-03-28 18:41:41.443 07326 CheckLog()
2011-03-28 18:41:41.443 Requirement: ODSKC60

2011-03-28 18:41:41.731 07328 Comment: Reset the config files to the original ones.

2011-03-28 18:41:41.731 Requirement: ODSKC60

2011-03-28 18:41:41.731 07330 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:41:41.731 Requirement: ODSKC60

2011-03-28 18:41:41.731 07332 Stop()
2011-03-28 18:41:41.731 Requirement: ODSKC60
2011-03-28 18:41:41.731 RunCommand(ods-control stop)
2011-03-28 18:41:41.736 - runCommand: Process started, PID: 24070
2011-03-28 18:41:41.736 OUTPUT:	Stopping enforcer...
2011-03-28 18:41:41.736 OUTPUT:	Cannot find PID file
2011-03-28 18:41:41.736 OUTPUT:	Stopping signer engine..
2011-03-28 18:41:41.736 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:41:41.736 ERROR:	return code = 1
2011-03-28 18:41:41.736 RunCommand(ps -e | grep enforcer)
2011-03-28 18:41:41.747 - runCommand: Process started, PID: 24073
2011-03-28 18:41:41.747 ERROR:	return code = 1
2011-03-28 18:41:41.747 RunCommand(ps -e | grep signer)
2011-03-28 18:41:41.758 - runCommand: Process started, PID: 24076
2011-03-28 18:41:41.758 ERROR:	return code = 1

2011-03-28 18:41:41.758 07334 Wait(10)

2011-03-28 18:41:41.758 Requirement: ODSKC60

2011-03-28 18:41:51.758 07337 LoadConfig()
2011-03-28 18:41:51.758 Requirement: ODSKC60
2011-03-28 18:41:51.758 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:41:51.765 - runCommand: Process started, PID: 24079

2011-03-28 18:41:51.765 07340 LoadConfig()
2011-03-28 18:41:51.765 Requirement: ODSKC60
2011-03-28 18:41:51.765 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:41:51.770 - runCommand: Process started, PID: 24080

2011-03-28 18:41:51.771 07342 Comment: Update all the configs.

2011-03-28 18:41:51.771 Requirement: ODSKC60

2011-03-28 18:41:51.771 07344 UpdateAll()
2011-03-28 18:41:51.771 Requirement: ODSKC60
2011-03-28 18:41:51.771 RunCommand(ods-ksmutil update all)
2011-03-28 18:41:53.111 - runCommand: Process started, PID: 24081
2011-03-28 18:41:53.111 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:41:53.111 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:41:53.111 OUTPUT:	Repository SoftHSM found
2011-03-28 18:41:53.111 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:41:53.111 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:41:53.111 OUTPUT:	Policy default found
2011-03-28 18:41:53.111 OUTPUT:	Policy default2 found
2011-03-28 18:41:53.111 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:41:53.111 OUTPUT:	Zone ods found
2011-03-28 18:41:53.111 OUTPUT:	Policy set to default.
2011-03-28 18:41:53.111 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:41:53.111 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:41:53.111 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC60T50: Use a very high value for DS TTL (P1M) and confirm ods-kaspcheck runs successfully and SOA of signed zone has configured TTL

2011-03-28 18:41:53.111 07350 Comment: DS TTL value is very high (1 month: P1M). Ods-kaspcheck should validate both kasp.xml as conf.xml.

2011-03-28 18:41:53.111 Requirement: ODSKC60

2011-03-28 18:41:53.112 07352 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:41:53.112 Requirement: ODSKC60

2011-03-28 18:41:53.112 07354 Stop()
2011-03-28 18:41:53.112 Requirement: ODSKC60
2011-03-28 18:41:53.112 RunCommand(ods-control stop)
2011-03-28 18:41:53.119 - runCommand: Process started, PID: 24089
2011-03-28 18:41:53.119 OUTPUT:	Stopping enforcer...
2011-03-28 18:41:53.119 OUTPUT:	Cannot find PID file
2011-03-28 18:41:53.119 OUTPUT:	Stopping signer engine..
2011-03-28 18:41:53.119 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:41:53.119 ERROR:	return code = 1
2011-03-28 18:41:53.119 RunCommand(ps -e | grep enforcer)
2011-03-28 18:41:53.138 - runCommand: Process started, PID: 24092
2011-03-28 18:41:53.138 ERROR:	return code = 1
2011-03-28 18:41:53.138 RunCommand(ps -e | grep signer)
2011-03-28 18:41:53.150 - runCommand: Process started, PID: 24095
2011-03-28 18:41:53.150 ERROR:	return code = 1

2011-03-28 18:41:53.150 07356 Wait(10)

2011-03-28 18:41:53.150 Requirement: ODSKC60

2011-03-28 18:42:03.150 07358 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:42:03.150 Requirement: ODSKC60

2011-03-28 18:42:03.150 07361 LoadConfig()
2011-03-28 18:42:03.150 Requirement: ODSKC60
2011-03-28 18:42:03.150 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:42:03.157 - runCommand: Process started, PID: 24098

2011-03-28 18:42:03.157 07364 LoadConfig()
2011-03-28 18:42:03.157 Requirement: ODSKC60
2011-03-28 18:42:03.157 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC60T50_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:42:03.160 - runCommand: Process started, PID: 24099

2011-03-28 18:42:03.160 07366 Comment: Update all the configs.

2011-03-28 18:42:03.160 Requirement: ODSKC60

2011-03-28 18:42:03.161 07368 UpdateAll()
2011-03-28 18:42:03.161 Requirement: ODSKC60
2011-03-28 18:42:03.161 RunCommand(ods-ksmutil update all)
2011-03-28 18:42:04.546 - runCommand: Process started, PID: 24100
2011-03-28 18:42:04.547 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:42:04.547 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:42:04.547 OUTPUT:	Repository SoftHSM found
2011-03-28 18:42:04.547 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:42:04.547 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:42:04.547 OUTPUT:	Policy default found
2011-03-28 18:42:04.547 OUTPUT:	Info: converting P1M to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:42:04.547 OUTPUT:	Policy default2 found
2011-03-28 18:42:04.547 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:42:04.547 OUTPUT:	Zone ods found
2011-03-28 18:42:04.547 OUTPUT:	Policy set to default.
2011-03-28 18:42:04.547 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:42:04.547 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:42:04.547 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 18:42:04.547 07370 Wait(10)

2011-03-28 18:42:04.547 Requirement: ODSKC60

2011-03-28 18:42:14.547 07372 Comment: Check if the conf and kasp.xml files validate. The conf.xml should validate.

2011-03-28 18:42:14.547 Requirement: ODSKC60

2011-03-28 18:42:14.547 07377 CheckLog()
2011-03-28 18:42:14.547 Requirement: ODSKC60

2011-03-28 18:42:14.839 07380 CheckLog()
2011-03-28 18:42:14.839 Requirement: ODSKC60

2011-03-28 18:42:15.129 07382 Comment: Check if the DS TTL is correct. Should be 1 month in seconds.

2011-03-28 18:42:15.129 Requirement: ODSKC60

2011-03-28 18:42:15.129 07387 CheckLog()
2011-03-28 18:42:15.129 Requirement: ODSKC60

2011-03-28 18:42:15.417 07390 CheckLog()
2011-03-28 18:42:15.417 Requirement: ODSKC60

2011-03-28 18:42:15.705 07392 Comment: Reset the config files to the original ones.

2011-03-28 18:42:15.705 Requirement: ODSKC60

2011-03-28 18:42:15.705 07394 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:42:15.705 Requirement: ODSKC60

2011-03-28 18:42:15.705 07396 Stop()
2011-03-28 18:42:15.705 Requirement: ODSKC60
2011-03-28 18:42:15.705 RunCommand(ods-control stop)
2011-03-28 18:42:15.710 - runCommand: Process started, PID: 24108
2011-03-28 18:42:15.710 OUTPUT:	Stopping enforcer...
2011-03-28 18:42:15.710 OUTPUT:	Cannot find PID file
2011-03-28 18:42:15.710 OUTPUT:	Stopping signer engine..
2011-03-28 18:42:15.710 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:42:15.710 ERROR:	return code = 1
2011-03-28 18:42:15.710 RunCommand(ps -e | grep enforcer)
2011-03-28 18:42:15.721 - runCommand: Process started, PID: 24111
2011-03-28 18:42:15.721 ERROR:	return code = 1
2011-03-28 18:42:15.721 RunCommand(ps -e | grep signer)
2011-03-28 18:42:15.733 - runCommand: Process started, PID: 24114
2011-03-28 18:42:15.733 ERROR:	return code = 1

2011-03-28 18:42:15.733 07398 Wait(10)

2011-03-28 18:42:15.733 Requirement: ODSKC60

2011-03-28 18:42:25.733 07401 LoadConfig()
2011-03-28 18:42:25.733 Requirement: ODSKC60
2011-03-28 18:42:25.733 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:42:25.740 - runCommand: Process started, PID: 24117

2011-03-28 18:42:25.740 07404 LoadConfig()
2011-03-28 18:42:25.740 Requirement: ODSKC60
2011-03-28 18:42:25.740 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:42:25.745 - runCommand: Process started, PID: 24118

2011-03-28 18:42:25.746 07406 Comment: Update all the configs.

2011-03-28 18:42:25.746 Requirement: ODSKC60

2011-03-28 18:42:25.746 07408 UpdateAll()
2011-03-28 18:42:25.746 Requirement: ODSKC60
2011-03-28 18:42:25.746 RunCommand(ods-ksmutil update all)
2011-03-28 18:42:27.118 - runCommand: Process started, PID: 24119
2011-03-28 18:42:27.118 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:42:27.118 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:42:27.118 OUTPUT:	Repository SoftHSM found
2011-03-28 18:42:27.118 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:42:27.118 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:42:27.118 OUTPUT:	Policy default found
2011-03-28 18:42:27.118 OUTPUT:	Policy default2 found
2011-03-28 18:42:27.118 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:42:27.118 OUTPUT:	Zone ods found
2011-03-28 18:42:27.118 OUTPUT:	Policy set to default.
2011-03-28 18:42:27.118 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:42:27.118 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:42:27.119 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC60T60: Deactivate DS TTL (PT0S) and confirm ods-kaspcheck fails

2011-03-28 18:42:27.119 07413 Comment: Deactivate the DS TTL value for the zone by setting it to PT0S (0 seconds). Logically spoken: the Ods-kaspcheck should validate for conf.xml and not for kasp.xml. (note: this is not well documented). According to the developpers the kasp.xml should be validated correctly.

2011-03-28 18:42:27.119 Requirement: ODSKC60

2011-03-28 18:42:27.119 07415 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:42:27.119 Requirement: ODSKC60

2011-03-28 18:42:27.119 07417 Stop()
2011-03-28 18:42:27.119 Requirement: ODSKC60
2011-03-28 18:42:27.119 RunCommand(ods-control stop)
2011-03-28 18:42:27.127 - runCommand: Process started, PID: 24127
2011-03-28 18:42:27.127 OUTPUT:	Stopping enforcer...
2011-03-28 18:42:27.127 OUTPUT:	Cannot find PID file
2011-03-28 18:42:27.127 OUTPUT:	Stopping signer engine..
2011-03-28 18:42:27.127 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:42:27.127 ERROR:	return code = 1
2011-03-28 18:42:27.127 RunCommand(ps -e | grep enforcer)
2011-03-28 18:42:27.144 - runCommand: Process started, PID: 24130
2011-03-28 18:42:27.145 ERROR:	return code = 1
2011-03-28 18:42:27.145 RunCommand(ps -e | grep signer)
2011-03-28 18:42:27.157 - runCommand: Process started, PID: 24133
2011-03-28 18:42:27.157 ERROR:	return code = 1

2011-03-28 18:42:27.157 07419 Wait(10)

2011-03-28 18:42:27.157 Requirement: ODSKC60

2011-03-28 18:42:37.157 07421 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:42:37.157 Requirement: ODSKC60

2011-03-28 18:42:37.157 07424 LoadConfig()
2011-03-28 18:42:37.157 Requirement: ODSKC60
2011-03-28 18:42:37.157 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:42:37.163 - runCommand: Process started, PID: 24136

2011-03-28 18:42:37.164 07427 LoadConfig()
2011-03-28 18:42:37.164 Requirement: ODSKC60
2011-03-28 18:42:37.164 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC60T60_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:42:37.169 - runCommand: Process started, PID: 24137

2011-03-28 18:42:37.170 07429 Comment: Update all the configs.

2011-03-28 18:42:37.170 Requirement: ODSKC60

2011-03-28 18:42:37.170 07431 UpdateAll()
2011-03-28 18:42:37.170 Requirement: ODSKC60
2011-03-28 18:42:37.170 RunCommand(ods-ksmutil update all)
2011-03-28 18:42:38.746 - runCommand: Process started, PID: 24138
2011-03-28 18:42:38.746 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:42:38.746 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:42:38.746 OUTPUT:	Repository SoftHSM found
2011-03-28 18:42:38.746 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:42:38.746 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:42:38.746 OUTPUT:	Policy default found
2011-03-28 18:42:38.746 OUTPUT:	Policy default2 found
2011-03-28 18:42:38.746 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:42:38.746 OUTPUT:	Zone ods found
2011-03-28 18:42:38.746 OUTPUT:	Policy set to default.
2011-03-28 18:42:38.746 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:42:38.746 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:42:38.746 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 18:42:38.746 07433 Wait(10)

2011-03-28 18:42:38.746 Requirement: ODSKC60

2011-03-28 18:42:48.746 07435 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:42:48.746 Requirement: ODSKC60

2011-03-28 18:42:48.747 07440 CheckLog()
2011-03-28 18:42:48.747 Requirement: ODSKC60

2011-03-28 18:42:49.411 07443 CheckLog()
2011-03-28 18:42:49.411 Requirement: ODSKC60

2011-03-28 18:42:49.328 07445 Comment: Reset the config files to the original ones.

2011-03-28 18:42:49.328 Requirement: ODSKC60

2011-03-28 18:42:49.328 07447 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:42:49.328 Requirement: ODSKC60

2011-03-28 18:42:49.328 07449 Stop()
2011-03-28 18:42:49.328 Requirement: ODSKC60
2011-03-28 18:42:49.328 RunCommand(ods-control stop)
2011-03-28 18:42:49.333 - runCommand: Process started, PID: 24146
2011-03-28 18:42:49.333 OUTPUT:	Stopping enforcer...
2011-03-28 18:42:49.333 OUTPUT:	Cannot find PID file
2011-03-28 18:42:49.333 OUTPUT:	Stopping signer engine..
2011-03-28 18:42:49.333 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:42:49.333 ERROR:	return code = 1
2011-03-28 18:42:49.333 RunCommand(ps -e | grep enforcer)
2011-03-28 18:42:49.344 - runCommand: Process started, PID: 24149
2011-03-28 18:42:49.344 ERROR:	return code = 1
2011-03-28 18:42:49.344 RunCommand(ps -e | grep signer)
2011-03-28 18:42:49.356 - runCommand: Process started, PID: 24152
2011-03-28 18:42:49.356 ERROR:	return code = 1

2011-03-28 18:42:49.356 07451 Wait(10)

2011-03-28 18:42:49.356 Requirement: ODSKC60

2011-03-28 18:42:59.356 07454 LoadConfig()
2011-03-28 18:42:59.356 Requirement: ODSKC60
2011-03-28 18:42:59.356 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:42:59.362 - runCommand: Process started, PID: 24155

2011-03-28 18:42:59.363 07457 LoadConfig()
2011-03-28 18:42:59.363 Requirement: ODSKC60
2011-03-28 18:42:59.363 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:42:59.369 - runCommand: Process started, PID: 24156

2011-03-28 18:42:59.369 07459 Comment: Update all the configs.

2011-03-28 18:42:59.369 Requirement: ODSKC60

2011-03-28 18:42:59.369 07461 UpdateAll()
2011-03-28 18:42:59.369 Requirement: ODSKC60
2011-03-28 18:42:59.369 RunCommand(ods-ksmutil update all)
2011-03-28 18:43:00.901 - runCommand: Process started, PID: 24157
2011-03-28 18:43:00.901 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:43:00.901 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:43:00.901 OUTPUT:	Repository SoftHSM found
2011-03-28 18:43:00.901 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:43:00.901 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:43:00.901 OUTPUT:	Policy default found
2011-03-28 18:43:00.901 OUTPUT:	Policy default2 found
2011-03-28 18:43:00.901 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:43:00.901 OUTPUT:	Zone ods found
2011-03-28 18:43:00.901 OUTPUT:	Policy set to default.
2011-03-28 18:43:00.901 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:43:00.901 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:43:00.901 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC60T70: Use a value with an incorrect format for SOA TTL (360) and confirm ods-kaspcheck fails

2011-03-28 18:43:00.902 07466 Comment: SOA TTL value in the zone part (general part) is incorrect: 360 instead of a valid value like PT12H. Ods-kaspcheck validation should fail for kasp.xml.

2011-03-28 18:43:00.902 Requirement: ODSKC60

2011-03-28 18:43:00.902 07468 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:43:00.902 Requirement: ODSKC60

2011-03-28 18:43:00.902 07470 Stop()
2011-03-28 18:43:00.902 Requirement: ODSKC60
2011-03-28 18:43:00.902 RunCommand(ods-control stop)
2011-03-28 18:43:00.909 - runCommand: Process started, PID: 24165
2011-03-28 18:43:00.910 OUTPUT:	Stopping enforcer...
2011-03-28 18:43:00.910 OUTPUT:	Cannot find PID file
2011-03-28 18:43:00.910 OUTPUT:	Stopping signer engine..
2011-03-28 18:43:00.910 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:43:00.910 ERROR:	return code = 1
2011-03-28 18:43:00.910 RunCommand(ps -e | grep enforcer)
2011-03-28 18:43:00.927 - runCommand: Process started, PID: 24168
2011-03-28 18:43:00.927 ERROR:	return code = 1
2011-03-28 18:43:00.927 RunCommand(ps -e | grep signer)
2011-03-28 18:43:00.945 - runCommand: Process started, PID: 24171
2011-03-28 18:43:00.945 ERROR:	return code = 1

2011-03-28 18:43:00.945 07472 Wait(10)

2011-03-28 18:43:00.945 Requirement: ODSKC60

2011-03-28 18:43:10.946 07474 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:43:10.946 Requirement: ODSKC60

2011-03-28 18:43:10.946 07477 LoadConfig()
2011-03-28 18:43:10.946 Requirement: ODSKC60
2011-03-28 18:43:10.946 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:43:10.952 - runCommand: Process started, PID: 24174

2011-03-28 18:43:10.952 07480 LoadConfig()
2011-03-28 18:43:10.952 Requirement: ODSKC60
2011-03-28 18:43:10.952 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC60T70_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:43:10.958 - runCommand: Process started, PID: 24175

2011-03-28 18:43:10.958 07482 Comment: Update all the configs.

2011-03-28 18:43:10.958 Requirement: ODSKC60

2011-03-28 18:43:10.958 07484 UpdateAll()
2011-03-28 18:43:10.958 Requirement: ODSKC60
2011-03-28 18:43:10.958 RunCommand(ods-ksmutil update all)
2011-03-28 18:43:11.296 - runCommand: Process started, PID: 24176
2011-03-28 18:43:11.296 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:43:11.296 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:43:11.296 OUTPUT:	Repository SoftHSM found
2011-03-28 18:43:11.296 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:43:11.296 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:43:11.296 OUTPUT:	Error validating file "/etc/opendnssec/kasp.xml"
2011-03-28 18:43:11.296 OUTPUT:	Failed to update policies
2011-03-28 18:43:11.296 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:43:11.296 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:43:11.296 ERROR:	/etc/opendnssec/kasp.xml:74: element TTL: Relax-NG validity error : Type duration doesn't allow value '360'
2011-03-28 18:43:11.296 ERROR:	/etc/opendnssec/kasp.xml:74: element TTL: Relax-NG validity error : Error validating datatype duration
2011-03-28 18:43:11.296 ERROR:	/etc/opendnssec/kasp.xml:74: element TTL: Relax-NG validity error : Element TTL failed to validate content
2011-03-28 18:43:11.296 ERROR:	/etc/opendnssec/kasp.xml fails to validate
2011-03-28 18:43:11.296 ERROR:	/etc/opendnssec/kasp.xml:74: element TTL: Relax-NG validity error : Type duration doesn't allow value '360'
2011-03-28 18:43:11.296 ERROR:	/etc/opendnssec/kasp.xml:74: element TTL: Relax-NG validity error : Error validating datatype duration
2011-03-28 18:43:11.296 ERROR:	/etc/opendnssec/kasp.xml:74: element TTL: Relax-NG validity error : Element TTL failed to validate content
2011-03-28 18:43:11.296 ERROR:	return code = 1

2011-03-28 18:43:11.297 07486 Wait(10)

2011-03-28 18:43:11.297 Requirement: ODSKC60

2011-03-28 18:43:21.297 07488 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:43:21.297 Requirement: ODSKC60

2011-03-28 18:43:21.297 07493 CheckLog()
2011-03-28 18:43:21.297 Requirement: ODSKC60

2011-03-28 18:43:21.593 07496 CheckLog()
2011-03-28 18:43:21.593 Requirement: ODSKC60

2011-03-28 18:43:21.882 07499 CheckLog()
2011-03-28 18:43:21.882 Requirement: ODSKC60

2011-03-28 18:43:22.170 07501 Comment: Reset the config files to the original ones.

2011-03-28 18:43:22.170 Requirement: ODSKC60

2011-03-28 18:43:22.170 07503 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:43:22.170 Requirement: ODSKC60

2011-03-28 18:43:22.170 07505 Stop()
2011-03-28 18:43:22.170 Requirement: ODSKC60
2011-03-28 18:43:22.170 RunCommand(ods-control stop)
2011-03-28 18:43:22.175 - runCommand: Process started, PID: 24184
2011-03-28 18:43:22.175 OUTPUT:	Stopping enforcer...
2011-03-28 18:43:22.175 OUTPUT:	Cannot find PID file
2011-03-28 18:43:22.175 OUTPUT:	Stopping signer engine..
2011-03-28 18:43:22.175 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:43:22.175 ERROR:	return code = 1
2011-03-28 18:43:22.175 RunCommand(ps -e | grep enforcer)
2011-03-28 18:43:22.186 - runCommand: Process started, PID: 24187
2011-03-28 18:43:22.186 ERROR:	return code = 1
2011-03-28 18:43:22.186 RunCommand(ps -e | grep signer)
2011-03-28 18:43:22.197 - runCommand: Process started, PID: 24190
2011-03-28 18:43:22.197 ERROR:	return code = 1

2011-03-28 18:43:22.197 07507 Wait(10)

2011-03-28 18:43:22.197 Requirement: ODSKC60

2011-03-28 18:43:32.198 07510 LoadConfig()
2011-03-28 18:43:32.198 Requirement: ODSKC60
2011-03-28 18:43:32.198 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:43:32.204 - runCommand: Process started, PID: 24193

2011-03-28 18:43:32.204 07513 LoadConfig()
2011-03-28 18:43:32.204 Requirement: ODSKC60
2011-03-28 18:43:32.204 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:43:32.210 - runCommand: Process started, PID: 24194

2011-03-28 18:43:32.210 07515 Comment: Update all the configs.

2011-03-28 18:43:32.210 Requirement: ODSKC60

2011-03-28 18:43:32.210 07517 UpdateAll()
2011-03-28 18:43:32.210 Requirement: ODSKC60
2011-03-28 18:43:32.210 RunCommand(ods-ksmutil update all)
2011-03-28 18:43:33.534 - runCommand: Process started, PID: 24195
2011-03-28 18:43:33.534 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:43:33.534 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:43:33.534 OUTPUT:	Repository SoftHSM found
2011-03-28 18:43:33.534 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:43:33.534 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:43:33.534 OUTPUT:	Policy default found
2011-03-28 18:43:33.534 OUTPUT:	Policy default2 found
2011-03-28 18:43:33.534 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:43:33.534 OUTPUT:	Zone ods found
2011-03-28 18:43:33.534 OUTPUT:	Policy set to default.
2011-03-28 18:43:33.534 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:43:33.534 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:43:33.534 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC60T80: Use a very high value for SOA TTL (P1M) and confirm ods-kaspcheck runs successfully and SOA of signed zone has configured TTL

2011-03-28 18:43:33.535 07522 Comment: SOA TTL value is very high (1 month: P1M). Ods-kaspcheck should validate both kasp.xml as conf.xml.

2011-03-28 18:43:33.535 Requirement: ODSKC60

2011-03-28 18:43:33.535 07524 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:43:33.535 Requirement: ODSKC60

2011-03-28 18:43:33.535 07526 Stop()
2011-03-28 18:43:33.535 Requirement: ODSKC60
2011-03-28 18:43:33.535 RunCommand(ods-control stop)
2011-03-28 18:43:33.542 - runCommand: Process started, PID: 24203
2011-03-28 18:43:33.542 OUTPUT:	Stopping enforcer...
2011-03-28 18:43:33.542 OUTPUT:	Cannot find PID file
2011-03-28 18:43:33.542 OUTPUT:	Stopping signer engine..
2011-03-28 18:43:33.542 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:43:33.542 ERROR:	return code = 1
2011-03-28 18:43:33.542 RunCommand(ps -e | grep enforcer)
2011-03-28 18:43:33.555 - runCommand: Process started, PID: 24206
2011-03-28 18:43:33.555 ERROR:	return code = 1
2011-03-28 18:43:33.555 RunCommand(ps -e | grep signer)
2011-03-28 18:43:33.566 - runCommand: Process started, PID: 24209
2011-03-28 18:43:33.566 ERROR:	return code = 1

2011-03-28 18:43:33.566 07528 Wait(10)

2011-03-28 18:43:33.566 Requirement: ODSKC60

2011-03-28 18:43:43.566 07530 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:43:43.566 Requirement: ODSKC60

2011-03-28 18:43:43.566 07533 LoadConfig()
2011-03-28 18:43:43.566 Requirement: ODSKC60
2011-03-28 18:43:43.566 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:43:43.573 - runCommand: Process started, PID: 24212

2011-03-28 18:43:43.573 07536 LoadConfig()
2011-03-28 18:43:43.573 Requirement: ODSKC60
2011-03-28 18:43:43.573 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC60T80_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:43:43.576 - runCommand: Process started, PID: 24213

2011-03-28 18:43:43.576 07538 Comment: Update all the configs.

2011-03-28 18:43:43.576 Requirement: ODSKC60

2011-03-28 18:43:43.577 07540 UpdateAll()
2011-03-28 18:43:43.577 Requirement: ODSKC60
2011-03-28 18:43:43.577 RunCommand(ods-ksmutil update all)
2011-03-28 18:43:44.945 - runCommand: Process started, PID: 24214
2011-03-28 18:43:44.945 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:43:44.945 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:43:44.945 OUTPUT:	Repository SoftHSM found
2011-03-28 18:43:44.945 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:43:44.945 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:43:44.945 OUTPUT:	Policy default found
2011-03-28 18:43:44.945 OUTPUT:	Info: converting P1M to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:43:44.945 OUTPUT:	Policy default2 found
2011-03-28 18:43:44.945 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:43:44.945 OUTPUT:	Zone ods found
2011-03-28 18:43:44.945 OUTPUT:	Policy set to default.
2011-03-28 18:43:44.945 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:43:44.945 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:43:44.945 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 18:43:44.946 07542 Wait(10)

2011-03-28 18:43:44.946 Requirement: ODSKC60

2011-03-28 18:43:54.946 07544 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:43:54.946 Requirement: ODSKC60

2011-03-28 18:43:54.946 07549 CheckLog()
2011-03-28 18:43:54.946 Requirement: ODSKC60

2011-03-28 18:43:55.242 07552 CheckLog()
2011-03-28 18:43:55.242 Requirement: ODSKC60

2011-03-28 18:43:55.530 07555 Comment: Reset the config files to the original ones.

2011-03-28 18:43:55.530 Requirement: ODSKC60

2011-03-28 18:43:55.530 07557 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:43:55.530 Requirement: ODSKC60

2011-03-28 18:43:55.530 07559 Stop()
2011-03-28 18:43:55.530 Requirement: ODSKC60
2011-03-28 18:43:55.530 RunCommand(ods-control stop)
2011-03-28 18:43:55.535 - runCommand: Process started, PID: 24222
2011-03-28 18:43:55.535 OUTPUT:	Stopping enforcer...
2011-03-28 18:43:55.535 OUTPUT:	Cannot find PID file
2011-03-28 18:43:55.535 OUTPUT:	Stopping signer engine..
2011-03-28 18:43:55.535 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:43:55.535 ERROR:	return code = 1
2011-03-28 18:43:55.535 RunCommand(ps -e | grep enforcer)
2011-03-28 18:43:55.546 - runCommand: Process started, PID: 24225
2011-03-28 18:43:55.546 ERROR:	return code = 1
2011-03-28 18:43:55.546 RunCommand(ps -e | grep signer)
2011-03-28 18:43:55.557 - runCommand: Process started, PID: 24228
2011-03-28 18:43:55.557 ERROR:	return code = 1

2011-03-28 18:43:55.557 07561 Wait(10)

2011-03-28 18:43:55.557 Requirement: ODSKC60

2011-03-28 18:44:05.558 07564 LoadConfig()
2011-03-28 18:44:05.558 Requirement: ODSKC60
2011-03-28 18:44:05.558 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:44:05.564 - runCommand: Process started, PID: 24231

2011-03-28 18:44:05.564 07567 LoadConfig()
2011-03-28 18:44:05.564 Requirement: ODSKC60
2011-03-28 18:44:05.564 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:44:05.570 - runCommand: Process started, PID: 24232

2011-03-28 18:44:05.570 07569 Comment: Update all the configs.

2011-03-28 18:44:05.570 Requirement: ODSKC60

2011-03-28 18:44:05.570 07571 UpdateAll()
2011-03-28 18:44:05.570 Requirement: ODSKC60
2011-03-28 18:44:05.570 RunCommand(ods-ksmutil update all)
2011-03-28 18:44:06.925 - runCommand: Process started, PID: 24233
2011-03-28 18:44:06.926 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:44:06.926 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:44:06.926 OUTPUT:	Repository SoftHSM found
2011-03-28 18:44:06.926 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:44:06.926 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:44:06.926 OUTPUT:	Policy default found
2011-03-28 18:44:06.926 OUTPUT:	Policy default2 found
2011-03-28 18:44:06.926 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:44:06.926 OUTPUT:	Zone ods found
2011-03-28 18:44:06.926 OUTPUT:	Policy set to default.
2011-03-28 18:44:06.926 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:44:06.926 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:44:06.926 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC60T90: Deactivate SOA TTL (PT0S) and confirm ods-kaspcheck fails

2011-03-28 18:44:06.926 07576 Comment: Deactivate the SOA TTL value for the zone by setting it to PT0S (0 seconds). Logically spoken: the Ods-kaspcheck should validate for conf.xml and not for kasp.xml. (note: this is not well documented). According to the developpers the kasp.xml should be validated correctly.

2011-03-28 18:44:06.926 Requirement: ODSKC60

2011-03-28 18:44:06.926 07578 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:44:06.926 Requirement: ODSKC60

2011-03-28 18:44:06.927 07580 Stop()
2011-03-28 18:44:06.927 Requirement: ODSKC60
2011-03-28 18:44:06.927 RunCommand(ods-control stop)
2011-03-28 18:44:06.934 - runCommand: Process started, PID: 24241
2011-03-28 18:44:06.934 OUTPUT:	Stopping enforcer...
2011-03-28 18:44:06.934 OUTPUT:	Cannot find PID file
2011-03-28 18:44:06.934 OUTPUT:	Stopping signer engine..
2011-03-28 18:44:06.934 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:44:06.934 ERROR:	return code = 1
2011-03-28 18:44:06.934 RunCommand(ps -e | grep enforcer)
2011-03-28 18:44:06.951 - runCommand: Process started, PID: 24244
2011-03-28 18:44:06.952 ERROR:	return code = 1
2011-03-28 18:44:06.952 RunCommand(ps -e | grep signer)
2011-03-28 18:44:06.967 - runCommand: Process started, PID: 24247
2011-03-28 18:44:06.968 ERROR:	return code = 1

2011-03-28 18:44:06.968 07582 Wait(10)

2011-03-28 18:44:06.968 Requirement: ODSKC60

2011-03-28 18:44:16.968 07584 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:44:16.968 Requirement: ODSKC60

2011-03-28 18:44:16.968 07587 LoadConfig()
2011-03-28 18:44:16.968 Requirement: ODSKC60
2011-03-28 18:44:16.968 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:44:16.974 - runCommand: Process started, PID: 24250

2011-03-28 18:44:16.975 07590 LoadConfig()
2011-03-28 18:44:16.975 Requirement: ODSKC60
2011-03-28 18:44:16.975 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC60T90_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:44:16.980 - runCommand: Process started, PID: 24251

2011-03-28 18:44:16.981 07592 Comment: Update all the configs.

2011-03-28 18:44:16.981 Requirement: ODSKC60

2011-03-28 18:44:16.981 07594 UpdateAll()
2011-03-28 18:44:16.981 Requirement: ODSKC60
2011-03-28 18:44:16.981 RunCommand(ods-ksmutil update all)
2011-03-28 18:44:18.395 - runCommand: Process started, PID: 24252
2011-03-28 18:44:18.395 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:44:18.395 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:44:18.395 OUTPUT:	Repository SoftHSM found
2011-03-28 18:44:18.395 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:44:18.395 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:44:18.395 OUTPUT:	Policy default found
2011-03-28 18:44:18.395 OUTPUT:	Policy default2 found
2011-03-28 18:44:18.395 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:44:18.395 OUTPUT:	Zone ods found
2011-03-28 18:44:18.395 OUTPUT:	Policy set to default.
2011-03-28 18:44:18.395 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:44:18.395 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:44:18.395 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 18:44:18.395 07596 Wait(10)

2011-03-28 18:44:18.395 Requirement: ODSKC60

2011-03-28 18:44:28.395 07598 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:44:28.395 Requirement: ODSKC60

2011-03-28 18:44:28.396 07603 CheckLog()
2011-03-28 18:44:28.396 Requirement: ODSKC60

2011-03-28 18:44:28.687 07606 CheckLog()
2011-03-28 18:44:28.687 Requirement: ODSKC60

2011-03-28 18:44:28.975 07608 Comment: Reset the config files to the original ones.

2011-03-28 18:44:28.975 Requirement: ODSKC60

2011-03-28 18:44:28.975 07610 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:44:28.975 Requirement: ODSKC60

2011-03-28 18:44:28.975 07612 Stop()
2011-03-28 18:44:28.975 Requirement: ODSKC60
2011-03-28 18:44:28.975 RunCommand(ods-control stop)
2011-03-28 18:44:28.980 - runCommand: Process started, PID: 24260
2011-03-28 18:44:28.980 OUTPUT:	Stopping enforcer...
2011-03-28 18:44:28.980 OUTPUT:	Cannot find PID file
2011-03-28 18:44:28.980 OUTPUT:	Stopping signer engine..
2011-03-28 18:44:28.980 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:44:28.980 ERROR:	return code = 1
2011-03-28 18:44:28.980 RunCommand(ps -e | grep enforcer)
2011-03-28 18:44:28.991 - runCommand: Process started, PID: 24263
2011-03-28 18:44:28.991 ERROR:	return code = 1
2011-03-28 18:44:28.991 RunCommand(ps -e | grep signer)
2011-03-28 18:44:29.302 - runCommand: Process started, PID: 24266
2011-03-28 18:44:29.309 ERROR:	return code = 1

2011-03-28 18:44:29.321 07614 Wait(10)

2011-03-28 18:44:29.323 Requirement: ODSKC60

2011-03-28 18:44:39.347 07617 LoadConfig()
2011-03-28 18:44:39.352 Requirement: ODSKC60
2011-03-28 18:44:39.354 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:44:39.100 - runCommand: Process started, PID: 24269

2011-03-28 18:44:39.104 07620 LoadConfig()
2011-03-28 18:44:39.104 Requirement: ODSKC60
2011-03-28 18:44:39.104 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:44:39.163 - runCommand: Process started, PID: 24270

2011-03-28 18:44:39.167 07622 Comment: Update all the configs.

2011-03-28 18:44:39.167 Requirement: ODSKC60

2011-03-28 18:44:39.168 07624 UpdateAll()
2011-03-28 18:44:39.169 Requirement: ODSKC60
2011-03-28 18:44:39.169 RunCommand(ods-ksmutil update all)
2011-03-28 18:44:40.450 - runCommand: Process started, PID: 24271
2011-03-28 18:44:40.450 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:44:40.450 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:44:40.450 OUTPUT:	Repository SoftHSM found
2011-03-28 18:44:40.450 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:44:40.450 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:44:40.450 OUTPUT:	Policy default found
2011-03-28 18:44:40.450 OUTPUT:	Policy default2 found
2011-03-28 18:44:40.450 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:44:40.450 OUTPUT:	Zone ods found
2011-03-28 18:44:40.450 OUTPUT:	Policy set to default.
2011-03-28 18:44:40.450 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:44:40.450 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:44:40.450 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC60T100: Use a value with an incorrect format for SOA Minimum (10) and confirm ods-kaspcheck fails

2011-03-28 18:44:40.451 07629 Comment: SOA Minimum value in the zone part (general part) is incorrect: 10, instead of a valid value like PT12H. Ods-kaspcheck validation should fail for kasp.xml.

2011-03-28 18:44:40.451 Requirement: ODSKC60

2011-03-28 18:44:40.451 07631 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:44:40.451 Requirement: ODSKC60

2011-03-28 18:44:40.451 07633 Stop()
2011-03-28 18:44:40.451 Requirement: ODSKC60
2011-03-28 18:44:40.451 RunCommand(ods-control stop)
2011-03-28 18:44:40.459 - runCommand: Process started, PID: 24279
2011-03-28 18:44:40.459 OUTPUT:	Stopping enforcer...
2011-03-28 18:44:40.459 OUTPUT:	Cannot find PID file
2011-03-28 18:44:40.459 OUTPUT:	Stopping signer engine..
2011-03-28 18:44:40.459 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:44:40.459 ERROR:	return code = 1
2011-03-28 18:44:40.459 RunCommand(ps -e | grep enforcer)
2011-03-28 18:44:40.478 - runCommand: Process started, PID: 24282
2011-03-28 18:44:40.478 ERROR:	return code = 1
2011-03-28 18:44:40.478 RunCommand(ps -e | grep signer)
2011-03-28 18:44:40.489 - runCommand: Process started, PID: 24285
2011-03-28 18:44:40.489 ERROR:	return code = 1

2011-03-28 18:44:40.489 07635 Wait(10)

2011-03-28 18:44:40.489 Requirement: ODSKC60

2011-03-28 18:44:50.489 07637 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:44:50.489 Requirement: ODSKC60

2011-03-28 18:44:50.490 07640 LoadConfig()
2011-03-28 18:44:50.490 Requirement: ODSKC60
2011-03-28 18:44:50.490 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:44:50.496 - runCommand: Process started, PID: 24288

2011-03-28 18:44:50.496 07643 LoadConfig()
2011-03-28 18:44:50.496 Requirement: ODSKC60
2011-03-28 18:44:50.496 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC60T100_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:44:50.502 - runCommand: Process started, PID: 24289

2011-03-28 18:44:50.502 07645 Comment: Update all the configs.

2011-03-28 18:44:50.502 Requirement: ODSKC60

2011-03-28 18:44:50.502 07647 UpdateAll()
2011-03-28 18:44:50.502 Requirement: ODSKC60
2011-03-28 18:44:50.502 RunCommand(ods-ksmutil update all)
2011-03-28 18:44:50.852 - runCommand: Process started, PID: 24290
2011-03-28 18:44:50.852 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:44:50.852 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:44:50.852 OUTPUT:	Repository SoftHSM found
2011-03-28 18:44:50.852 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:44:50.852 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:44:50.853 OUTPUT:	Error validating file "/etc/opendnssec/kasp.xml"
2011-03-28 18:44:50.853 OUTPUT:	Failed to update policies
2011-03-28 18:44:50.853 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:44:50.853 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:44:50.853 ERROR:	/etc/opendnssec/kasp.xml:75: element Minimum: Relax-NG validity error : Type duration doesn't allow value '10'
2011-03-28 18:44:50.853 ERROR:	/etc/opendnssec/kasp.xml:75: element Minimum: Relax-NG validity error : Error validating datatype duration
2011-03-28 18:44:50.853 ERROR:	/etc/opendnssec/kasp.xml:75: element Minimum: Relax-NG validity error : Element Minimum failed to validate content
2011-03-28 18:44:50.853 ERROR:	/etc/opendnssec/kasp.xml fails to validate
2011-03-28 18:44:50.853 ERROR:	/etc/opendnssec/kasp.xml:75: element Minimum: Relax-NG validity error : Type duration doesn't allow value '10'
2011-03-28 18:44:50.853 ERROR:	/etc/opendnssec/kasp.xml:75: element Minimum: Relax-NG validity error : Error validating datatype duration
2011-03-28 18:44:50.853 ERROR:	/etc/opendnssec/kasp.xml:75: element Minimum: Relax-NG validity error : Element Minimum failed to validate content
2011-03-28 18:44:50.853 ERROR:	return code = 1

2011-03-28 18:44:50.853 07649 Wait(10)

2011-03-28 18:44:50.853 Requirement: ODSKC60

2011-03-28 18:45:00.853 07651 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:45:00.853 Requirement: ODSKC60

2011-03-28 18:45:00.853 07656 CheckLog()
2011-03-28 18:45:00.853 Requirement: ODSKC60

2011-03-28 18:45:01.147 07659 CheckLog()
2011-03-28 18:45:01.147 Requirement: ODSKC60

2011-03-28 18:45:01.434 07662 CheckLog()
2011-03-28 18:45:01.434 Requirement: ODSKC60

2011-03-28 18:45:01.721 07664 Comment: Reset the config files to the original ones.

2011-03-28 18:45:01.721 Requirement: ODSKC60

2011-03-28 18:45:01.721 07666 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:45:01.721 Requirement: ODSKC60

2011-03-28 18:45:01.721 07668 Stop()
2011-03-28 18:45:01.721 Requirement: ODSKC60
2011-03-28 18:45:01.721 RunCommand(ods-control stop)
2011-03-28 18:45:01.726 - runCommand: Process started, PID: 24298
2011-03-28 18:45:01.726 OUTPUT:	Stopping enforcer...
2011-03-28 18:45:01.726 OUTPUT:	Cannot find PID file
2011-03-28 18:45:01.726 OUTPUT:	Stopping signer engine..
2011-03-28 18:45:01.726 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:45:01.726 ERROR:	return code = 1
2011-03-28 18:45:01.726 RunCommand(ps -e | grep enforcer)
2011-03-28 18:45:01.739 - runCommand: Process started, PID: 24301
2011-03-28 18:45:01.739 ERROR:	return code = 1
2011-03-28 18:45:01.739 RunCommand(ps -e | grep signer)
2011-03-28 18:45:01.753 - runCommand: Process started, PID: 24304
2011-03-28 18:45:01.753 ERROR:	return code = 1

2011-03-28 18:45:01.753 07670 Wait(10)

2011-03-28 18:45:01.753 Requirement: ODSKC60

2011-03-28 18:45:11.754 07673 LoadConfig()
2011-03-28 18:45:11.754 Requirement: ODSKC60
2011-03-28 18:45:11.754 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:45:11.760 - runCommand: Process started, PID: 24307

2011-03-28 18:45:11.760 07676 LoadConfig()
2011-03-28 18:45:11.760 Requirement: ODSKC60
2011-03-28 18:45:11.760 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:45:11.766 - runCommand: Process started, PID: 24308

2011-03-28 18:45:11.766 07678 Comment: Update all the configs.

2011-03-28 18:45:11.766 Requirement: ODSKC60

2011-03-28 18:45:11.766 07680 UpdateAll()
2011-03-28 18:45:11.766 Requirement: ODSKC60
2011-03-28 18:45:11.766 RunCommand(ods-ksmutil update all)
2011-03-28 18:45:13.208 - runCommand: Process started, PID: 24309
2011-03-28 18:45:13.208 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:45:13.208 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:45:13.208 OUTPUT:	Repository SoftHSM found
2011-03-28 18:45:13.208 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:45:13.208 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:45:13.208 OUTPUT:	Policy default found
2011-03-28 18:45:13.208 OUTPUT:	Policy default2 found
2011-03-28 18:45:13.208 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:45:13.208 OUTPUT:	Zone ods found
2011-03-28 18:45:13.208 OUTPUT:	Policy set to default.
2011-03-28 18:45:13.208 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:45:13.208 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:45:13.208 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC60T110: Use a very high value for SOA Minimum (P1M) and confirm ods-kaspcheck runs successfully and SOA of signed zone has configured TTL

2011-03-28 18:45:13.209 07685 Comment: SOA Minimum value is very high (1 month: P1M). Ods-kaspcheck should validate both kasp.xml as conf.xml.

2011-03-28 18:45:13.209 Requirement: ODSKC60

2011-03-28 18:45:13.209 07687 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:45:13.209 Requirement: ODSKC60

2011-03-28 18:45:13.209 07689 Stop()
2011-03-28 18:45:13.209 Requirement: ODSKC60
2011-03-28 18:45:13.209 RunCommand(ods-control stop)
2011-03-28 18:45:13.217 - runCommand: Process started, PID: 24317
2011-03-28 18:45:13.217 OUTPUT:	Stopping enforcer...
2011-03-28 18:45:13.217 OUTPUT:	Cannot find PID file
2011-03-28 18:45:13.217 OUTPUT:	Stopping signer engine..
2011-03-28 18:45:13.217 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:45:13.217 ERROR:	return code = 1
2011-03-28 18:45:13.217 RunCommand(ps -e | grep enforcer)
2011-03-28 18:45:13.235 - runCommand: Process started, PID: 24320
2011-03-28 18:45:13.235 ERROR:	return code = 1
2011-03-28 18:45:13.235 RunCommand(ps -e | grep signer)
2011-03-28 18:45:13.253 - runCommand: Process started, PID: 24323
2011-03-28 18:45:13.253 ERROR:	return code = 1

2011-03-28 18:45:13.253 07691 Wait(10)

2011-03-28 18:45:13.253 Requirement: ODSKC60

2011-03-28 18:45:23.253 07693 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:45:23.254 Requirement: ODSKC60

2011-03-28 18:45:23.254 07696 LoadConfig()
2011-03-28 18:45:23.254 Requirement: ODSKC60
2011-03-28 18:45:23.254 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:45:23.260 - runCommand: Process started, PID: 24326

2011-03-28 18:45:23.260 07699 LoadConfig()
2011-03-28 18:45:23.260 Requirement: ODSKC60
2011-03-28 18:45:23.260 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC60T110_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:45:23.266 - runCommand: Process started, PID: 24327

2011-03-28 18:45:23.266 07701 Comment: Update all the configs.

2011-03-28 18:45:23.266 Requirement: ODSKC60

2011-03-28 18:45:23.266 07703 UpdateAll()
2011-03-28 18:45:23.266 Requirement: ODSKC60
2011-03-28 18:45:23.266 RunCommand(ods-ksmutil update all)
2011-03-28 18:45:24.727 - runCommand: Process started, PID: 24328
2011-03-28 18:45:24.727 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:45:24.727 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:45:24.727 OUTPUT:	Repository SoftHSM found
2011-03-28 18:45:24.727 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:45:24.727 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:45:24.727 OUTPUT:	Policy default found
2011-03-28 18:45:24.727 OUTPUT:	Info: converting P1M to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:45:24.727 OUTPUT:	Policy default2 found
2011-03-28 18:45:24.728 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:45:24.728 OUTPUT:	Zone ods found
2011-03-28 18:45:24.728 OUTPUT:	Policy set to default.
2011-03-28 18:45:24.728 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:45:24.728 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:45:24.728 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 18:45:24.728 07705 Wait(10)

2011-03-28 18:45:24.728 Requirement: ODSKC60

2011-03-28 18:45:34.728 07707 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:45:34.728 Requirement: ODSKC60

2011-03-28 18:45:34.728 07712 CheckLog()
2011-03-28 18:45:34.728 Requirement: ODSKC60

2011-03-28 18:45:35.232 07715 CheckLog()
2011-03-28 18:45:35.232 Requirement: ODSKC60

2011-03-28 18:45:35.311 07718 Comment: Reset the config files to the original ones.

2011-03-28 18:45:35.311 Requirement: ODSKC60

2011-03-28 18:45:35.311 07720 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:45:35.311 Requirement: ODSKC60

2011-03-28 18:45:35.311 07722 Stop()
2011-03-28 18:45:35.311 Requirement: ODSKC60
2011-03-28 18:45:35.311 RunCommand(ods-control stop)
2011-03-28 18:45:35.316 - runCommand: Process started, PID: 24336
2011-03-28 18:45:35.316 OUTPUT:	Stopping enforcer...
2011-03-28 18:45:35.316 OUTPUT:	Cannot find PID file
2011-03-28 18:45:35.316 OUTPUT:	Stopping signer engine..
2011-03-28 18:45:35.316 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:45:35.316 ERROR:	return code = 1
2011-03-28 18:45:35.316 RunCommand(ps -e | grep enforcer)
2011-03-28 18:45:35.327 - runCommand: Process started, PID: 24339
2011-03-28 18:45:35.327 ERROR:	return code = 1
2011-03-28 18:45:35.327 RunCommand(ps -e | grep signer)
2011-03-28 18:45:35.338 - runCommand: Process started, PID: 24342
2011-03-28 18:45:35.338 ERROR:	return code = 1

2011-03-28 18:45:35.339 07724 Wait(10)

2011-03-28 18:45:35.339 Requirement: ODSKC60

2011-03-28 18:45:45.339 07727 LoadConfig()
2011-03-28 18:45:45.339 Requirement: ODSKC60
2011-03-28 18:45:45.339 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:45:45.345 - runCommand: Process started, PID: 24345

2011-03-28 18:45:45.346 07730 LoadConfig()
2011-03-28 18:45:45.346 Requirement: ODSKC60
2011-03-28 18:45:45.346 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:45:45.351 - runCommand: Process started, PID: 24346

2011-03-28 18:45:45.351 07732 Comment: Update all the configs.

2011-03-28 18:45:45.351 Requirement: ODSKC60

2011-03-28 18:45:45.352 07734 UpdateAll()
2011-03-28 18:45:45.352 Requirement: ODSKC60
2011-03-28 18:45:45.352 RunCommand(ods-ksmutil update all)
2011-03-28 18:45:46.774 - runCommand: Process started, PID: 24347
2011-03-28 18:45:46.774 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:45:46.774 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:45:46.774 OUTPUT:	Repository SoftHSM found
2011-03-28 18:45:46.774 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:45:46.774 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:45:46.775 OUTPUT:	Policy default found
2011-03-28 18:45:46.775 OUTPUT:	Policy default2 found
2011-03-28 18:45:46.775 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:45:46.775 OUTPUT:	Zone ods found
2011-03-28 18:45:46.775 OUTPUT:	Policy set to default.
2011-03-28 18:45:46.775 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:45:46.775 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:45:46.775 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC60T120: Deactivate SOA Minimum (PT0S) and confirm ods-kaspcheck fails

2011-03-28 18:45:46.775 07742 Comment: Deactivate the SOA Minimum value for the zone by setting it to PT0S (0 seconds).  Logically spoken: the Ods-kaspcheck should validate for conf.xml and not for kasp.xml. (note: this is not well documented). 

2011-03-28 18:45:46.775 Requirement: ODSKC60

2011-03-28 18:45:46.775 07744 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:45:46.775 Requirement: ODSKC60

2011-03-28 18:45:46.775 07746 Stop()
2011-03-28 18:45:46.776 Requirement: ODSKC60
2011-03-28 18:45:46.776 RunCommand(ods-control stop)
2011-03-28 18:45:46.783 - runCommand: Process started, PID: 24355
2011-03-28 18:45:46.783 OUTPUT:	Stopping enforcer...
2011-03-28 18:45:46.783 OUTPUT:	Cannot find PID file
2011-03-28 18:45:46.783 OUTPUT:	Stopping signer engine..
2011-03-28 18:45:46.783 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:45:46.783 ERROR:	return code = 1
2011-03-28 18:45:46.783 RunCommand(ps -e | grep enforcer)
2011-03-28 18:45:46.802 - runCommand: Process started, PID: 24358
2011-03-28 18:45:46.802 ERROR:	return code = 1
2011-03-28 18:45:46.802 RunCommand(ps -e | grep signer)
2011-03-28 18:45:46.813 - runCommand: Process started, PID: 24361
2011-03-28 18:45:46.813 ERROR:	return code = 1

2011-03-28 18:45:46.813 07748 Wait(10)

2011-03-28 18:45:46.813 Requirement: ODSKC60

2011-03-28 18:45:56.813 07750 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:45:56.813 Requirement: ODSKC60

2011-03-28 18:45:56.814 07753 LoadConfig()
2011-03-28 18:45:56.814 Requirement: ODSKC60
2011-03-28 18:45:56.814 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:45:56.820 - runCommand: Process started, PID: 24364

2011-03-28 18:45:56.820 07756 LoadConfig()
2011-03-28 18:45:56.820 Requirement: ODSKC60
2011-03-28 18:45:56.820 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC60T120_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:45:56.826 - runCommand: Process started, PID: 24365

2011-03-28 18:45:56.826 07758 Comment: Update all the configs.

2011-03-28 18:45:56.826 Requirement: ODSKC60

2011-03-28 18:45:56.826 07760 UpdateAll()
2011-03-28 18:45:56.826 Requirement: ODSKC60
2011-03-28 18:45:56.826 RunCommand(ods-ksmutil update all)
2011-03-28 18:45:58.260 - runCommand: Process started, PID: 24366
2011-03-28 18:45:58.260 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:45:58.260 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:45:58.260 OUTPUT:	Repository SoftHSM found
2011-03-28 18:45:58.260 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:45:58.260 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:45:58.260 OUTPUT:	Policy default found
2011-03-28 18:45:58.260 OUTPUT:	Policy default2 found
2011-03-28 18:45:58.260 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:45:58.260 OUTPUT:	Zone ods found
2011-03-28 18:45:58.260 OUTPUT:	Policy set to default.
2011-03-28 18:45:58.260 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:45:58.260 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:45:58.260 ERROR:	/etc/opendnssec/kasp.xml validates

2011-03-28 18:45:58.261 07762 Wait(10)

2011-03-28 18:45:58.261 Requirement: ODSKC60

2011-03-28 18:46:08.261 07764 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:46:08.261 Requirement: ODSKC60

2011-03-28 18:46:08.261 07769 CheckLog()
2011-03-28 18:46:08.261 Requirement: ODSKC60

2011-03-28 18:46:08.553 07772 CheckLog()
2011-03-28 18:46:08.553 Requirement: ODSKC60

2011-03-28 18:46:08.841 07774 Comment: Reset the config files to the original ones.

2011-03-28 18:46:08.841 Requirement: ODSKC60

2011-03-28 18:46:08.841 07776 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:46:08.841 Requirement: ODSKC60

2011-03-28 18:46:08.841 07778 Stop()
2011-03-28 18:46:08.841 Requirement: ODSKC60
2011-03-28 18:46:08.841 RunCommand(ods-control stop)
2011-03-28 18:46:08.846 - runCommand: Process started, PID: 24374
2011-03-28 18:46:08.846 OUTPUT:	Stopping enforcer...
2011-03-28 18:46:08.846 OUTPUT:	Cannot find PID file
2011-03-28 18:46:08.846 OUTPUT:	Stopping signer engine..
2011-03-28 18:46:08.846 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:46:08.847 ERROR:	return code = 1
2011-03-28 18:46:08.847 RunCommand(ps -e | grep enforcer)
2011-03-28 18:46:08.858 - runCommand: Process started, PID: 24377
2011-03-28 18:46:08.858 ERROR:	return code = 1
2011-03-28 18:46:08.858 RunCommand(ps -e | grep signer)
2011-03-28 18:46:08.869 - runCommand: Process started, PID: 24380
2011-03-28 18:46:08.869 ERROR:	return code = 1

2011-03-28 18:46:08.869 07780 Wait(10)

2011-03-28 18:46:08.869 Requirement: ODSKC60

2011-03-28 18:46:18.869 07783 LoadConfig()
2011-03-28 18:46:18.869 Requirement: ODSKC60
2011-03-28 18:46:18.870 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:46:18.876 - runCommand: Process started, PID: 24383

2011-03-28 18:46:18.876 07786 LoadConfig()
2011-03-28 18:46:18.876 Requirement: ODSKC60
2011-03-28 18:46:18.876 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:46:18.882 - runCommand: Process started, PID: 24384

2011-03-28 18:46:18.882 07788 Comment: Update all the configs.

2011-03-28 18:46:18.882 Requirement: ODSKC60

2011-03-28 18:46:18.882 07790 UpdateAll()
2011-03-28 18:46:18.882 Requirement: ODSKC60
2011-03-28 18:46:18.882 RunCommand(ods-ksmutil update all)
2011-03-28 18:46:20.274 - runCommand: Process started, PID: 24385
2011-03-28 18:46:20.274 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:46:20.274 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:46:20.274 OUTPUT:	Repository SoftHSM found
2011-03-28 18:46:20.274 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:46:20.274 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:46:20.274 OUTPUT:	Policy default found
2011-03-28 18:46:20.274 OUTPUT:	Policy default2 found
2011-03-28 18:46:20.274 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:46:20.274 OUTPUT:	Zone ods found
2011-03-28 18:46:20.274 OUTPUT:	Policy set to default.
2011-03-28 18:46:20.274 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:46:20.274 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:46:20.274 ERROR:	/etc/opendnssec/kasp.xml validates

-------------------------------------------------------------------------------
Testcase - ODSKC60T130: Use a higher SOA Minimum (PT2M) then SOA TTL (PT60S) and confirm ods-kaspcheck fails

2011-03-28 18:46:20.275 07795 Comment: Use a higher SOA minimum than the SOA TTL. The ODS-Kaspcheck should fail for the kasp.xml and validate for the conf.xml.

2011-03-28 18:46:20.275 Requirement: ODSKC60

2011-03-28 18:46:20.275 07797 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:46:20.275 Requirement: ODSKC60

2011-03-28 18:46:20.275 07799 Stop()
2011-03-28 18:46:20.275 Requirement: ODSKC60
2011-03-28 18:46:20.275 RunCommand(ods-control stop)
2011-03-28 18:46:20.282 - runCommand: Process started, PID: 24393
2011-03-28 18:46:20.282 OUTPUT:	Stopping enforcer...
2011-03-28 18:46:20.282 OUTPUT:	Cannot find PID file
2011-03-28 18:46:20.283 OUTPUT:	Stopping signer engine..
2011-03-28 18:46:20.283 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:46:20.283 ERROR:	return code = 1
2011-03-28 18:46:20.283 RunCommand(ps -e | grep enforcer)
2011-03-28 18:46:20.299 - runCommand: Process started, PID: 24396
2011-03-28 18:46:20.299 ERROR:	return code = 1
2011-03-28 18:46:20.299 RunCommand(ps -e | grep signer)
2011-03-28 18:46:20.310 - runCommand: Process started, PID: 24399
2011-03-28 18:46:20.310 ERROR:	return code = 1

2011-03-28 18:46:20.310 07801 Wait(10)

2011-03-28 18:46:20.310 Requirement: ODSKC60

2011-03-28 18:46:30.310 07803 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:46:30.310 Requirement: ODSKC60

2011-03-28 18:46:30.311 07806 LoadConfig()
2011-03-28 18:46:30.311 Requirement: ODSKC60
2011-03-28 18:46:30.311 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:46:30.317 - runCommand: Process started, PID: 24402

2011-03-28 18:46:30.317 07809 LoadConfig()
2011-03-28 18:46:30.317 Requirement: ODSKC60
2011-03-28 18:46:30.317 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC60T130_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:46:30.323 - runCommand: Process started, PID: 24403

2011-03-28 18:46:30.323 07811 Comment: Update all the configs.

2011-03-28 18:46:30.323 Requirement: ODSKC60

2011-03-28 18:46:30.323 07813 UpdateAll()
2011-03-28 18:46:30.323 Requirement: ODSKC60
2011-03-28 18:46:30.323 RunCommand(ods-ksmutil update all)
2011-03-28 18:46:30.678 - runCommand: Process started, PID: 24404
2011-03-28 18:46:30.678 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:46:30.678 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:46:30.678 OUTPUT:	Repository SoftHSM found
2011-03-28 18:46:30.678 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:46:30.678 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:46:30.678 OUTPUT:	Error validating file "/etc/opendnssec/kasp.xml"
2011-03-28 18:46:30.678 OUTPUT:	Failed to update policies
2011-03-28 18:46:30.678 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:46:30.678 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:46:30.678 ERROR:	/etc/opendnssec/kasp.xml:75: element Minimum: Relax-NG validity error : Type duration doesn't allow value ''
2011-03-28 18:46:30.678 ERROR:	/etc/opendnssec/kasp.xml:75: element Minimum: Relax-NG validity error : Error validating datatype duration
2011-03-28 18:46:30.678 ERROR:	/etc/opendnssec/kasp.xml:75: element Minimum: Relax-NG validity error : Element Minimum failed to validate content
2011-03-28 18:46:30.678 ERROR:	/etc/opendnssec/kasp.xml fails to validate
2011-03-28 18:46:30.678 ERROR:	/etc/opendnssec/kasp.xml:75: element Minimum: Relax-NG validity error : Type duration doesn't allow value ''
2011-03-28 18:46:30.678 ERROR:	/etc/opendnssec/kasp.xml:75: element Minimum: Relax-NG validity error : Error validating datatype duration
2011-03-28 18:46:30.678 ERROR:	/etc/opendnssec/kasp.xml:75: element Minimum: Relax-NG validity error : Element Minimum failed to validate content
2011-03-28 18:46:30.678 ERROR:	return code = 1

2011-03-28 18:46:30.679 07815 Wait(10)

2011-03-28 18:46:30.679 Requirement: ODSKC60

2011-03-28 18:46:40.679 07817 Comment: Check if the conf and kasp.xml files validate. For this testcase the ods-kaspcheck should fail for the kasp.xml. The conf.xml should validate.

2011-03-28 18:46:40.679 Requirement: ODSKC60

2011-03-28 18:46:40.679 07822 CheckLog()
2011-03-28 18:46:40.679 Requirement: ODSKC60

2011-03-28 18:46:40.973 07825 CheckLog()
2011-03-28 18:46:40.973 Requirement: ODSKC60

2011-03-28 18:46:41.263 07827 Comment: Reset the config files to the original ones.

2011-03-28 18:46:41.263 Requirement: ODSKC60

2011-03-28 18:46:41.263 07829 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:46:41.263 Requirement: ODSKC60

2011-03-28 18:46:41.263 07831 Stop()
2011-03-28 18:46:41.263 Requirement: ODSKC60
2011-03-28 18:46:41.263 RunCommand(ods-control stop)
2011-03-28 18:46:41.268 - runCommand: Process started, PID: 24412
2011-03-28 18:46:41.268 OUTPUT:	Stopping enforcer...
2011-03-28 18:46:41.268 OUTPUT:	Cannot find PID file
2011-03-28 18:46:41.268 OUTPUT:	Stopping signer engine..
2011-03-28 18:46:41.268 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:46:41.268 ERROR:	return code = 1
2011-03-28 18:46:41.268 RunCommand(ps -e | grep enforcer)
2011-03-28 18:46:41.279 - runCommand: Process started, PID: 24415
2011-03-28 18:46:41.279 ERROR:	return code = 1
2011-03-28 18:46:41.279 RunCommand(ps -e | grep signer)
2011-03-28 18:46:41.290 - runCommand: Process started, PID: 24418
2011-03-28 18:46:41.290 ERROR:	return code = 1

2011-03-28 18:46:41.290 07833 Wait(10)

2011-03-28 18:46:41.290 Requirement: ODSKC60

2011-03-28 18:46:51.290 07836 LoadConfig()
2011-03-28 18:46:51.290 Requirement: ODSKC60
2011-03-28 18:46:51.290 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:46:51.297 - runCommand: Process started, PID: 24421

2011-03-28 18:46:51.297 07839 LoadConfig()
2011-03-28 18:46:51.297 Requirement: ODSKC60
2011-03-28 18:46:51.297 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:46:51.302 - runCommand: Process started, PID: 24422

2011-03-28 18:46:51.303 07841 Comment: Update all the configs.

2011-03-28 18:46:51.303 Requirement: ODSKC60

2011-03-28 18:46:51.303 07843 UpdateAll()
2011-03-28 18:46:51.303 Requirement: ODSKC60
2011-03-28 18:46:51.303 RunCommand(ods-ksmutil update all)
2011-03-28 18:46:52.782 - runCommand: Process started, PID: 24423
2011-03-28 18:46:52.782 OUTPUT:	zonelist filename set to /etc/opendnssec/zonelist.xml.
2011-03-28 18:46:52.782 OUTPUT:	kasp filename set to /etc/opendnssec/kasp.xml.
2011-03-28 18:46:52.782 OUTPUT:	Repository SoftHSM found
2011-03-28 18:46:52.782 OUTPUT:	No Maximum Capacity set.
2011-03-28 18:46:52.782 OUTPUT:	RequireBackup NOT set; please make sure that you know the potential problems of using keys which are not recoverable
2011-03-28 18:46:52.782 OUTPUT:	Policy default found
2011-03-28 18:46:52.782 OUTPUT:	Policy default2 found
2011-03-28 18:46:52.782 OUTPUT:	Info: converting P1Y to seconds; M interpreted as 31 days, Y interpreted as 365 days
2011-03-28 18:46:52.782 OUTPUT:	Zone ods found
2011-03-28 18:46:52.782 OUTPUT:	Policy set to default.
2011-03-28 18:46:52.782 ERROR:	SQLite database set to: /var/opendnssec/kasp.db
2011-03-28 18:46:52.782 ERROR:	/etc/opendnssec/conf.xml validates
2011-03-28 18:46:52.782 ERROR:	/etc/opendnssec/kasp.xml validates
Testcondition - ODSKC70: The Auditor part located in kasp.xml should conform to several constraints and requirements

-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
Testcase - ODSKC70T10: Sign with Auditor deactivated and confirm no audit is performed after signing

2011-03-28 18:46:52.783 07850 Comment: Sign the ods zone with the auditor deactivated in the kasp.xml

2011-03-28 18:46:52.783 Requirement: ODSKC70

2011-03-28 18:46:52.783 07852 Comment: Stop the ODS-Enforcer and ODS-Signer

2011-03-28 18:46:52.783 Requirement: ODSKC70

2011-03-28 18:46:52.784 07854 Stop()
2011-03-28 18:46:52.784 Requirement: ODSKC70
2011-03-28 18:46:52.784 RunCommand(ods-control stop)
2011-03-28 18:46:52.790 - runCommand: Process started, PID: 24431
2011-03-28 18:46:52.790 OUTPUT:	Stopping enforcer...
2011-03-28 18:46:52.790 OUTPUT:	Cannot find PID file
2011-03-28 18:46:52.790 OUTPUT:	Stopping signer engine..
2011-03-28 18:46:52.790 ERROR:	Unable to connect to engine: connect() failed: Connection refused
2011-03-28 18:46:52.790 ERROR:	return code = 1
2011-03-28 18:46:52.790 RunCommand(ps -e | grep enforcer)
2011-03-28 18:46:52.801 - runCommand: Process started, PID: 24434
2011-03-28 18:46:52.801 ERROR:	return code = 1
2011-03-28 18:46:52.801 RunCommand(ps -e | grep signer)
2011-03-28 18:46:52.812 - runCommand: Process started, PID: 24437
2011-03-28 18:46:52.812 ERROR:	return code = 1

2011-03-28 18:46:52.813 07856 Wait(10)

2011-03-28 18:46:52.813 Requirement: ODSKC70

2011-03-28 18:47:02.813 07858 Comment: Clear the tmp and signed folder with the next 2 commands.

2011-03-28 18:47:02.813 Requirement: ODSKC70

2011-03-28 18:47:02.813 07864 Comment: Purge the keys in the SoftHSM repositories.

2011-03-28 18:47:02.813 Requirement: ODSKC70

2011-03-28 18:47:02.813 07871 Comment: Change the configuration with predefined xml config files.

2011-03-28 18:47:02.813 Requirement: ODSKC70

2011-03-28 18:47:02.813 07874 LoadConfig()
2011-03-28 18:47:02.813 Requirement: ODSKC70
2011-03-28 18:47:02.813 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/conf/conf.xml /etc/opendnssec/conf.xml)
2011-03-28 18:47:02.820 - runCommand: Process started, PID: 24440

2011-03-28 18:47:02.820 07877 LoadConfig()
2011-03-28 18:47:02.820 Requirement: ODSKC70
2011-03-28 18:47:02.820 RunCommand(cp /home/ods/ods_testautomation/ods_sit_kasp/kasp/ODSKC70T10_kasp.xml /etc/opendnssec/kasp.xml)
2011-03-28 18:47:02.826 - runCommand: Process started, PID: 24441

2011-03-28 18:47:02.826 07879 Comment: New setup for the configs and key repository

2011-03-28 18:47:02.826 Requirement: ODSKC70

2011-03-28 18:47:02.826 07883 Wait(10)

2011-03-28 18:47:02.826 Requirement: ODSKC70

2011-03-28 18:47:12.826 07885 Comment: Start the ODS-Enforcer and ODS-Signer

2011-03-28 18:47:12.826 Requirement: ODSKC70

2011-03-28 18:47:12.827 07887 Start()
2011-03-28 18:47:12.827 Requirement: ODSKC70
2011-03-28 18:47:12.827 RunCommand(ods-control start)
2011-03-28 18:47:12.829 - runCommand: Background process started, PID: 24442
2011-03-28 18:47:13.847 RunCommand(ps -e | awk '{print $4}' | grep -x ods-enforcerd)
2011-03-28 18:47:13.869 - runCommand: Process started, PID: 24458
2011-03-28 18:47:13.869 OUTPUT:	ods-enforcerd
2011-03-28 18:47:13.869 RunCommand(ps -ef | grep signer | grep -v grep | awk '{print $8 " " $9}')
2011-03-28 18:47:13.889 - runCommand: Process started, PID: 24471
2011-03-28 18:47:13.889 OUTPUT:	/usr/local/sbin/ods-signerd -vvv

2011-03-28 18:47:13.890 07889 Wait(20)

2011-03-28 18:47:13.890 Requirement: ODSKC70

2011-03-28 18:47:33.890 07891 Comment: Check if the signing of the ods zone is succesfull.

2011-03-28 18:47:33.890 Requirement: ODSKC70

2011-03-28 18:47:33.890 07895 CheckFilePresent(ods)
2011-03-28 18:47:33.890 Requirement: ODSKC70
2011-03-28 18:47:33.890 PASSED:	(Check for Equal) - Expected: ods Found: ods

2011-03-28 18:47:33.890 07897 Comment: Signed zone file should be present

2011-03-28 18:47:33.890 Requirement: ODSKC70

2011-03-28 18:47:33.890 07899 Comment: Check if the auditor has not started and no audit has been performed. The 1th string should not be in the logging, the next should be found in the logging.

2011-03-28 18:47:33.890 Requirement: ODSKC70

2011-03-28 18:47:33.891 07902 CheckLog()
2011-03-28 18:47:33.891 Requirement: ODSKC70
2011-03-28 18:47:34.188 PASSED:	(Check for Like) - Expected: Auditor started Found: Mar 28 18:47:14 DEVELOPER15 ods-auditor[24477]: Auditor started

2011-03-28 18:47:34.189 07905 CheckLog()
2011-03-28 18:47:34.189 Requirement: ODSKC70
Unmatched [ in regex; marked by <-- HERE in m/AUDIT[ <-- HERE time=0(sec)/ at ActionWords.pm line 716, <FH> line 5737.
root@DEVELOPER15:/home/elmo/opendnssec_test_engine# 

